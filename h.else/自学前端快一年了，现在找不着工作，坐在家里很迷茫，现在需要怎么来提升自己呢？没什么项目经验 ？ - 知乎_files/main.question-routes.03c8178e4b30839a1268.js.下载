(window.webpackJsonp=window.webpackJsonp||[]).push([[119,20],{1002:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(37),a=n(15),i=n(16),o=n(18),c=n(19),s=n(9),l=n(1),u=n(0),d=n(3),b=n.n(d),h=n(961),f=n(439),p=["containerClassName","selector"];function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(e){Object(o.a)(n,e);var t=m(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,a=Object(r.default)(e,p);return Object(l.b)(f.b,{className:t,selector:n,children:Object(l.b)(h.b,Object.assign({},a))})}}]),n}(u.Component);v.propTypes={containerClassName:b.a.string,selector:b.a.string},v.defaultProps={selector:".List-item"};var O=v},1010:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(15),a=n(16),i=n(18),o=n(19),c=n(9),s=n(1),l=n(0),u=n(3),d=n.n(u),b=n(95),h=n(33),f=n(432),p=n(1111),m=n(1102);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var O=function(e){Object(i.a)(n,e);var t=v(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.memberHashId,n=e.isModalShow,r=e.handleCloseModal;return Object(s.b)(b.b,{className:"ChatBoxModal",spread:!0,onClose:r,contentClassName:"ChatBoxModal-content",closeButton:Object(s.b)(h.c,{preset:"plain",className:"ChatBoxModal-closeButton",onClick:r,"aria-label":"关闭",children:Object(s.b)(f.a,{className:"ChatBoxModal-closeIcon"})}),children:n&&Object(s.b)(p.a,{senderId:t,entryName:"ChatBoxModal",children:Object(s.b)(m.a,{type:"default",senderId:t,className:"Chat-ChatBox"},t)})})}}]),n}(l.Component);O.propTypes={memberHashId:d.a.string,handleCloseModal:d.a.func,isModalShow:d.a.bool}},1076:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},1109:function(e,t,n){"use strict";var r=n(15),a=n(16),i=n(18),o=n(19),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),b=n(21),h=n(20),f=n(13),p=n.n(f),m=n(1474),v=n(33),O=n(215),j=n(924),g=n(292),y=n(86),w=n(908),C=n(25),k=n(31),A=n(1010),x=n(32);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var N=function(e){Object(i.a)(n,e);var t=R(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={modalShown:!1},e.handleSendMessage=function(){var t=e.props,n=t.onModalOpen,r=t.user.allowMessage,a=t.dispatch,i=t.doNotCheckAllowMessageSetting;r||void 0===r&&i?(e.setState({modalShown:!0}),n&&n()):a(Object(k.h)(x.Y.blocked,"red")),C.a.trackEvent(Object(y.a)(e),{action:"Message",element:"Button",is_intent:!0})},e.handleCloseModal=function(){var t=e.props.onModalClose;e.setState({modalShown:!1}),t&&t()},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.preset,r=e.color,a=e.icon,i=e.label,o=e.className,c=e.tooltip,l=e.tooltipPreset,u=e.authRequired,d=this.state.modalShown,b="3d198a56310c02c4a83efb9f4a4c027e"===t.id;return Object(s.c)(s.a,{children:[Object(s.b)(v.c,{preset:n,color:r,className:o,icon:a,label:i,onClick:u(this.handleSendMessage,b?x.ab.serviceAccountMessage:x.ab.message),"data-tooltip":c,"aria-label":c,"data-tooltip-preset":l}),Object(s.b)(A.a,{memberHashId:t.id,handleCloseModal:this.handleCloseModal,isModalShow:d})]})}}]),n}(d.Component);N.propTypes={onModalOpen:u.a.func,onModalClose:u.a.func},N.defaultProps={preset:"outline",color:"grey",icon:w.a,label:"发私信",doNotCheckAllowMessageSetting:!1};var S=Object(h.compose)(O.a,Object(b.connect)())(N),T=n(155);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var E=function(e){Object(i.a)(n,e);var t=B(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={reportModalShown:!1},e.handleShieldUser=function(){var t=e.props,n=t.user.urlToken,r=t.updateUserBlocking,a=t.showNotification;r(n,!1).then((function(){return a("屏蔽已取消")}))},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.user,a=r.urlToken,i=r.isBlocking,o=r.isOrg,c=t.canShowMutualFollowStatus,l=t.className,u=t.buttonClassName,d=t.onModalOpen,b=t.onModalClose,h=t.authRequired,f=this.state.reportModalShown,O=p()("MemberButtonGroup",l);return i?Object(s.c)("div",{className:O,children:[Object(s.c)(v.c,{className:u,preset:"primary",color:"red",onClick:this.handleShieldUser,children:[Object(s.b)(m.a,{center:!0,text:!0})," 已屏蔽"]}),!o&&Object(s.c)(v.c,{className:u,onClick:h((function(){e.setState({reportModalShown:!0}),d&&d()}),x.ab.report),children:["举报用户",Object(s.b)(g.a,{shown:f,onClose:function(){e.setState({reportModalShown:!1}),b&&b()},type:"member",urlToken:a,zaEnabled:!0})]})]}):Object(s.c)("div",{className:O,children:[Object(s.b)(j.a,{id:a,type:n.type,gender:n.gender,isFollowing:n.isFollowing,isFollowed:n.isFollowed,canShowMutualFollowStatus:c,className:u,preset:j.a.PRESETS.primary}),Object(s.b)(S,{user:n,className:u,onModalOpen:d,onModalClose:b})]})}}]),n}(d.Component);E.propTypes={user:u.a.object.isRequired,buttonClassName:u.a.string,onModalOpen:u.a.func,onModalClose:u.a.func};t.a=Object(h.compose)(O.a,Object(b.connect)(null,{updateUserBlocking:T.p,showNotification:k.h}))(E)},1112:function(e,t,n){"use strict";var r=n(0),a=n(49),i=Object(r.createContext)({}),o=n(111);t.a=Object(a.withRouter)((function(e){var t=e.to,n=e.router,a=Object(r.useContext)(i);return a.url||(a.url=t),Object(r.useEffect)((function(){Object(o.isAbsoluteUrl)(t)?window.location.replace(t):n.replace(t)}),[n,t]),null}))},1127:function(e,t,n){e.exports=n.p+"assets/sidebar-download-qrcode.7caef4dd.png"},1128:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(47),a=n.n(r),i=n(383),o=n.n(i),c=n(0),s=n.n(c),l=n(13),u=n.n(l),d=n(1129),b=n(1130),h={close:n(1131).a,triangle:d.a,add:b.a};function f(e){var t=e.className,n=e.name,r=o()(e,["className","name"]),i=h[n];return i?s.a.createElement(i,a()({className:u()("Icon Icon--".concat(n),t)},r)):null}},1129:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(47),a=n.n(r),i=n(0),o=n.n(i);function c(e){return o.a.createElement("svg",a()({},e,{viewBox:"0 0 24 24"}),o.a.createElement("path",{d:"M9.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L10.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L13 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))}},1130:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(47),a=n.n(r),i=n(0),o=n.n(i);function c(e){return o.a.createElement("svg",a()({viewBox:"0 0 24 24"},e),o.a.createElement("path",{d:"M13.491 10.488s-.012-5.387 0-5.998c-.037-1.987-3.035-1.987-2.997 0-.038 1.912 0 5.998 0 5.998H4.499c-1.999.01-1.999 3.009 0 3.009s5.995-.01 5.995-.01v5.999c0 2.019 3.006 2.019 2.997 0-.01-2.019 0-5.998 0-5.998s3.996.009 6.004.009c2.008 0 2.008-3-.01-3.009h-5.994z",fillRule:"evenodd"}))}},1131:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(47),a=n.n(r),i=n(0),o=n.n(i);function c(e){return o.a.createElement("svg",a()({viewBox:"0 0 12 12"},e),o.a.createElement("path",{fillRule:"evenodd",d:"M3 2L2 3l3 3-3 3 1 1 3-3 3 3 1-1-3-3 3-3-1-1-3 3"}))}},1150:function(e,t,n){"use strict";n.d(t,"a",(function(){return zt}));var r=n(37),a=n(1),i=n(374),o=n(0),c=n.n(o),s=n(21),l=n(49),u=n(20),d=n(38),b=n(24),h=n.n(b),f=n(975),p=n(478),m=n(44),v=n(1203),O=n(455),j=n(992);function g(e){var t=Object(o.useMemo)((function(){return Object(p.a)(e)}),[e]),n=t.creative,r=void 0===n?{asset:{}}:n,a=t.ad,i=Object(o.useRef)(null),s=r.asset,l=s.imgs,u=void 0===l?[]:l,d=s.landingUrl,b=void 0===d?"":d;Object(o.useEffect)((function(){var e={impressionTracks:a.impressionTracks,viewTracks:a.viewTracks};Object(O.f)(i.current,e)}),[a]);var h=Object(o.useCallback)((function(){var e=a.clickTracks;Object(O.a)(e)}),[a]);return c.a.createElement("a",{className:"Business-Card-PcRightBanner-link",href:b,target:"_blank",ref:i,onClick:h,rel:"noopener noreferrer"},c.a.createElement(j.a,{src:u[0],className:"Business-Card-PcRightBanner-img"}))}function y(){var e=Object(o.useState)(null),t=h()(e,2),n=t[0],r=t[1];Object(o.useEffect)((function(){Object(m.m)({query:{},url:"https://www.zhihu.com/commercial_api/banners_v3/pc_right_banner"}).then((function(e){e&&r(e)}))}),[]);var a=Object(o.useMemo)((function(){return Object(v.a)({adjson:n})}),[n]);return n&&"{}"!=JSON.stringify(n)&&a&&a.adjson?c.a.createElement(f.a,null,c.a.createElement(g,a)):null}var w=n(433),C=n(158),k=n(35),A=n(382),x=n.n(A),R=n(51),N=n(222),S=n(41),T=n(65),B=n(124),E=n(920),I=n(59),z=n(667),q=n(12),Q=Object.assign;function M(e){return c.a.createElement(q.a,Q(Q({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowLeft24","data-old-api":"ArrowLeft24"},e),{className:"ZDI ZDI--ArrowLeft24"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M15.53 4.53a.75.75 0 00-1.06-1.06l-8 8a.75.75 0 000 1.06l8 8a.75.75 0 101.06-1.06L8.06 12l7.47-7.47z",fillRule:"evenodd",clipRule:"evenodd"}))}var P=Object.assign;function L(e){return c.a.createElement(q.a,P(P({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowRight24","data-old-api":"ArrowRight24"},e),{className:"ZDI ZDI--ArrowRight24"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M9.53 3.47a.75.75 0 00-1.06 1.06L15.94 12l-7.47 7.47a.75.75 0 101.06 1.06l8-8a.75.75 0 000-1.06l-8-8z",fillRule:"evenodd",clipRule:"evenodd"}))}var _=n(1688),D=n(875),F=n(29),H=n.n(F),U=n(30),V=n.n(U),W=n(886),G=n(1321),K=["current","gap","children","onScroll","onScrollEnd","onSnapChange","onScrollProgress"];function Z(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var J="@supports (-webkit-scroll-snap-coordinate: 0 0)",Y=Object(o.forwardRef)((function(e,t){var n=e.current,r=e.gap,i=void 0===r?0:r,s=e.children,l=e.onScroll,u=e.onScrollEnd,d=e.onSnapChange,b=e.onScrollProgress,f=V()(e,K),p=Object(o.useRef)(null),m=function(e){var t=Object(o.useRef)(null);return t.current||(t.current=e()),t.current}((function(){return{getElement:function(){return p.current},getChildren:function(){var e;return null===(e=p.current)||void 0===e?void 0:e.children},getScrollPercent:function(){var e=m.getElement();return e.scrollLeft/(e.scrollWidth-e.clientWidth)},getCurrentSnap:function(){var e=m.getElement(),t=!1;return[Array.from(m.getChildren()).findIndex((function(n){var r=e.scrollLeft-n.offsetLeft+(parseFloat(getComputedStyle(n).scrollMarginLeft)||0);if(r<n.offsetWidth/2){var a=m.getScrollPercent();return t=0===a||1===a||0===r,!0}return!1})),t]},getCurrent:function(){return m.getCurrentSnap()[0]},slideTo:function(e){var t,n=m.getChildren()[e];null===(t=n.parentElement)||void 0===t||t.scrollTo({left:n.offsetLeft,behavior:"smooth"})},scrollTo:function(e){var t=m.getElement(),n=m.getChildren()[e];n&&(t.scrollLeft=n.offsetLeft)}}}));Object(o.useImperativeHandle)(t,(function(){return m}));var v=Object(o.useRef)(!0);Object(o.useEffect)((function(){"number"==typeof n&&(v.current?(v.current=!1,m.scrollTo(n)):m.slideTo(n))}),[m,n]);var O=[H()({flexShrink:0,boxSizing:"border-box",scrollSnapAlign:"start"},J,{WebkitScrollSnapCoordinate:"0 0"}),i>0&&{paddingLeft:i,"&:last-child":{paddingRight:i}}],j=Object(W.a)((function(){var e=m.getCurrentSnap(),t=Z(h.a,e,2),n=t[0],r=t[1];u&&u(n),d&&r&&d(n)}),50),g=Object(G.a)((function(){null==b||b(m.getScrollPercent())}),50,{leading:!1});return Object(a.b)("div",Object.assign(Object.assign({css:H()({position:"relative",display:"flex",flexWrap:"nowrap",overflowX:"auto",overflowY:"hidden",scrollSnapType:"x mandatory","&::-webkit-scrollbar":{display:"none"},WebkitOverflowScrolling:"touch"},J,{WebkitScrollSnapType:"mandatory"})},f),{},{ref:p,onScroll:function(e){l&&l(e),b&&g(),(u||d)&&j()},children:"function"==typeof s?s(O):c.a.Children.map(s,(function(e){return Object(a.b)("div",{css:O,children:e},void 0)}))}),void 0)})),$=n(105),X=n(1011),ee=n(916),te=n(924),ne=n(937),re=function(e){return Object(s.useSelector)((function(t){return t.entities.users[e]}))},ae=function(e){var t=e.urlToken,n=re(t);return Object(a.b)(R.b,{moduleId:"follow_button",children:Object(a.c)(te.a,{css:{"&.FollowButton":{minWidth:58},minWidth:58,padding:0,marginLeft:"auto",fontSize:12},getButtonPresetAndColor:function(e){return e.isFollowing?{preset:"plain",color:"grey"}:{preset:"plain",color:"blue"}},id:t,type:n.type,isFollowing:n.isFollowing,isFollowed:n.isFollowed,children:[Object(a.b)(ee.c,{text:!0,center:!0})," 关注"]})})},ie=function(e){var t=e.urlToken,n=e.index,r=e.customDescription,i=re(t),o=Object(z.a)().colors;return i?Object(a.b)(R.b,{content:{type:"User",token:i.urlToken,id:i.urlToken},moduleIndex:n,moduleId:"user_card",children:Object(a.c)(R.f,{zaType:"Card",as:I.Flex,mb:12,zaShowOptions:{threshold:.9},children:[Object(a.b)(ne.a,{author:i,preset:"default",userLinkV2:!0,noHoverCard:!0,noVipBadge:!0,showVipIcon:!1,relatedTo:null,css:{".AuthorInfo-name":{fontSize:13,fontWeight:"normal"},".AuthorInfo-content":{marginLeft:8}},children:Object(a.b)(I.Text,{css:[{fontSize:12,color:o.GBK06A},Object.assign({},Object(X.a)(1))],children:r})}),Object(a.b)(ae,{urlToken:t})]})}):null},oe=function(e){return e.urlTokens.map((function(e){var t=e.urlToken,n=e.index,r=e.reason;return Object(a.b)(ie,{urlToken:t,index:n,customDescription:r},t)}))};function ce(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var se={borderRadius:"99em",width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",padding:0},le=function(e){var t=e.current,n=e.total,r=e.onSelect,i=Object(z.a)().colors;return Object(a.c)(I.Flex,{fontSize:10,pt:"2px",color:"GBL05A",margin:"0 auto",alignItems:"center",justifyContent:"center",css:{userSelect:"none"},children:[Object(a.b)(D.a,{preset:"secondary",color:"grey",css:se,onClick:function(){return r("left")},disabled:1===t,children:Object(a.b)(M,{size:7,css:{fill:i.GBL05A}})}),Object(a.b)(I.Flex,{width:30,alignItems:"center",justifyContent:"center",margin:"0 8px",children:"".concat(t,"/").concat(n)}),Object(a.b)(D.a,{preset:"secondary",color:"grey",css:se,onClick:function(){return r("right")},disabled:t===n,children:Object(a.b)(L,{size:7,css:{fill:i.GBL05A}})})]})},ue=function(e){var t=e.list,n=Object(o.useState)(0),r=ce(k.a,n,2),i=r[0],c=r[1],s=t.length,l=Object($.a)((function(e){c("left"===e?i-1:i+1)})),u=Object(R.k)({elementLocation:{type:"Block",moduleId:"recommend_follow_block"}});return Object(a.c)(E.d,{css:{padding:"16px 15px 10px 15px",width:296},onRef:u,children:[Object(a.c)(I.Flex,{alignItems:"center",color:"GBK03A",fontWeight:"500",fontSize:"14px",mb:"23px",children:[Object(a.b)(_.b,{text:!0,css:{marginRight:7}}),"推荐关注"]}),Object(a.b)(Y,{css:{width:"100%"},current:i,onSnapChange:c,children:function(e){return t.map((function(t,n){return Object(a.b)(I.Box,{css:[e,{width:"100%"}],children:Object(a.b)(oe,{urlTokens:t})},n)}))}}),1===s?null:Object(a.b)(le,{current:i+1,total:s,onSelect:l})]})};function de(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var be=function(){var e=Object(s.useDispatch)(),t=Object(o.useState)([]),n=de(k.a,t,2),r=n[0],c=n[1],l=Object(N.b)(S.b),u=Object(s.useSelector)(T.g),d=Object(o.useMemo)((function(){return Boolean(u&&l&&r.length>0)}),[l,u,r.length]);return Object(i.a)((function(){e(Object(B.a)()).then((function(e){var t=e.result;c(x()(t.map((function(e,t){return{urlToken:e.actor,index:t,reason:e.reason}})),4))}))})),d?Object(a.b)(C.a,{replacement:null,target:"GlobalSidebarRecmdFollow",children:Object(a.b)(R.b,{block:"推荐关注",children:Object(a.b)(ue,{list:r})})}):null},he=Object(o.memo)(be),fe=n(990),pe=n(1579),me=n(221),ve=n(1095),Oe=n(171),je=n(469),ge=n(1290),ye=n(1062),we=n(189),Ce=n(15),ke=n(16),Ae=n(18),xe=n(19),Re=n(9),Ne=n(176);function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(Re.a)(e);if(t){var a=Object(Re.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(xe.a)(this,n)}}var Te=function(){return n.e(95).then(n.bind(null,3009))},Be=function(e){Object(Ae.a)(n,e);var t=Se(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(ke.a)(n,[{key:"render",value:function(){return Object(a.b)(Ne.a,Object.assign({getComponent:Te},this.props))}}]),n}(o.Component),Ee=n(891),Ie=Object.assign;var ze=Object.assign;var qe=Object.assign;var Qe=Object.assign;var Me=n(894),Pe=Object.assign;var Le=n(2160),_e=n(1689),De=n(1212),Fe=n(892),He=Object.assign;var Ue=Object.assign;var Ve=[{key:"star",number:void 0,label:"我的收藏",url:"/collections/mine",icon:Ee.a,visible:!0},{key:"questionList",number:void 0,label:"我关注的问题",icon:function(e){return c.a.createElement(q.a,Ie(Ie({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"QuestionBubbleFill24","data-old-api":"HelpBubble"},e),{className:"Zi Zi--HelpBubble"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M5.088 1.968c.323-.044.72-.044 1.153-.044h11.518c.433 0 .83 0 1.152.044.356.047.732.16 1.04.469.31.309.422.685.47 1.04.043.323.043.72.043 1.153v13.232c0 .433 0 .83-.043 1.152-.048.356-.16.732-.47 1.04-.308.31-.684.422-1.04.47-.322.043-.72.043-1.152.043h-3.796l-3.932 2.857c-.115.084-.26.19-.397.26a.995.995 0 01-.827.071c-.359-.135-.509-.432-.573-.6a3.363 3.363 0 01-.125-.458l-.477-2.13H6.24c-.433 0-.83 0-1.153-.043-.355-.048-.73-.16-1.04-.47-.309-.308-.421-.684-.47-1.04-.042-.322-.042-.72-.042-1.152V4.63c0-.433 0-.83.043-1.153.048-.355.16-.731.47-1.04.308-.31.684-.422 1.04-.47zm5.827 8.93c0-.095 0-.142.029-.171.03-.03.076-.03.17-.03h1.01a1.63 1.63 0 001.5-1.629 1.63 1.63 0 00-1.626-1.634c-.832 0-1.531.655-1.616 1.469-.011.102-.016.153-.045.178-.028.026-.075.026-.168.026H8.947c-.095 0-.142 0-.172-.031s-.027-.077-.022-.168C8.847 7.201 10.27 5.8 11.998 5.8a3.26 3.26 0 013.25 3.268 3.264 3.264 0 01-2.7 3.222c-.041.007-.062.01-.074.024-.012.014-.012.035-.012.076v.797c0 .094 0 .141-.029.17-.03.03-.076.03-.17.03h-1.148c-.095 0-.142 0-.171-.03-.03-.029-.03-.076-.03-.17v-2.29zm-.31 4.05c0-.094 0-.141.03-.17.029-.03.076-.03.17-.03h1.922c.094 0 .141 0 .17.03.03.029.03.076.03.17v1.402c0 .094 0 .141-.03.17-.029.03-.076.03-.17.03h-1.922c-.094 0-.141 0-.17-.03-.03-.029-.03-.076-.03-.17v-1.402z",fillRule:"evenodd",clipRule:"evenodd"}))},visible:!0},{key:"invite",number:void 0,label:"我的邀请",url:"/question/invited",icon:_.a,visible:!0},{key:"balance",number:void 0,label:"我的余额",url:"/balance",icon:function(e){return c.a.createElement(q.a,ze(ze({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"CardholderFill24","data-old-api":"Balance"},e),{className:"Zi Zi--Balance"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M21.75 6v12.248c0 1.106-.788 2.002-1.76 2.002H4.01c-.972 0-1.76-.896-1.76-2.002V5.752c0-1.106.788-2.002 1.76-2.002h15.982c.971.001 1.758 1.145 1.758 2.25zM6 8.75a.75.75 0 000 1.5h2.483c1.353 2.991 5.681 2.991 7.034 0H18a.75.75 0 000-1.5h-2.887c-.39 0-.737.25-.86.62-.722 2.165-3.784 2.165-4.506 0a.906.906 0 00-.86-.62H6z",fillRule:"evenodd",clipRule:"evenodd"}))},visible:!1},{key:"coupon",number:void 0,label:"我的礼券",url:"/coupon",icon:function(e){return c.a.createElement(q.a,qe(qe({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"TicketFill24","data-old-api":"Coupon"},e),{className:"Zi Zi--Coupon"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M2 6.13c0-1.038.808-1.88 1.805-1.88h16.39c.997 0 1.805.842 1.805 1.88v2.588a.45.45 0 01-.34.42c-.877.248-2.16 1.049-2.16 2.862 0 1.813 1.283 2.614 2.16 2.862a.45.45 0 01.34.42v2.587c0 1.039-.808 1.881-1.805 1.881H3.803C2.807 19.749 2 18.907 2 17.87v-2.535c0-.221.18-.399.397-.439.875-.163 2.103-.88 2.103-2.896 0-2.015-1.228-2.733-2.103-2.896C2.18 9.064 2 8.886 2 8.665V6.131zm7 5.12a.75.75 0 000 1.5h6a.75.75 0 000-1.5H9z",fillRule:"evenodd",clipRule:"evenodd"}))},visible:!1},{key:"service",number:void 0,label:"站务中心",url:"/community",icon:function(e){return c.a.createElement(q.a,Qe(Qe({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"TextBubbleFill24","data-old-api":"Community"},e),{className:"Zi Zi--Community"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M4.4 3A2.4 2.4 0 002 5.4v10.5a2.4 2.4 0 002.4 2.4h8.292l3.073 3.353a.8.8 0 001.387-.475l.24-2.878H19.6a2.4 2.4 0 002.4-2.4V5.4A2.4 2.4 0 0019.6 3H4.4zm2.1 4.75a.75.75 0 000 1.5h9a.75.75 0 000-1.5h-9zm-.75 4.75a.75.75 0 01.75-.75h4.495a.75.75 0 010 1.5H6.5a.75.75 0 01-.75-.75z",fillRule:"evenodd",clipRule:"evenodd"}))},visible:!0},{key:"help-center",number:void 0,label:"帮助与客服",url:"/help-center",icon:function(e){return c.a.createElement(q.a,Ue(Ue({width:"16",height:"16",viewBox:"0 0 16 16","data-new-api":"HeadMicrophoneFill16","data-old-api":"HeadMicrophoneFill16"},e),{className:"ZDI ZDI--HeadMicrophoneFill16"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M8 2.763a4.376 4.376 0 00-4.33 3.744h.065c.861 0 1.559.697 1.559 1.558v2.595c0 .861-.698 1.559-1.559 1.559A2.485 2.485 0 011.25 9.733v-.741c0-.867.444-1.63 1.117-2.075a5.638 5.638 0 0111.266 0 2.483 2.483 0 011.117 2.075v.741c0 1.19-.836 2.184-1.952 2.428a5.077 5.077 0 01-4.242 2.283H8a.631.631 0 010-1.263h.556c1.116 0 2.12-.478 2.818-1.241a1.557 1.557 0 01-.668-1.28V8.065a1.558 1.558 0 011.624-1.558A4.376 4.376 0 008 2.763z",fillRule:"evenodd",clipRule:"evenodd"}))},visible:!0},{key:"copyright",number:void 0,label:"版权服务中心",url:"/copyright",icon:Me.a,visible:!0}],We=[{key:"live",number:void 0,label:"Live",url:"/lives",icon:function(e){return c.a.createElement(q.a,Pe(Pe({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Live24","data-old-api":"Live"},e),{className:"Zi Zi--Live"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M13.693 10.354l1.634-7.542c.195-.901-.16-1.083-.798-.39l-9.18 9.97c-.638.693-.377 1.254.582 1.254h5.376l-1.634 7.542c-.195.901.16 1.083.798.39l9.18-9.97c.638-.693.377-1.254-.582-1.254h-5.376z"}))},color:"#ffcf00",visible:!0},{key:"pub",number:void 0,label:"书店",url:"/pub/",icon:Le.a,color:"#43d480",visible:!0},{key:"org",number:void 0,label:"圆桌",url:"/roundtable",icon:_e.a,color:"#0066FF",visible:!0},{key:"edit",number:void 0,label:"专栏",url:"//zhuanlan.zhihu.com",icon:De.a,color:"#0f88eb",visible:!0},{key:"infinity",number:void 0,label:"付费咨询",url:"/consult",icon:Fe.a,color:"#5478f0",visible:!0},{key:"wiki",number:void 0,label:"百科",url:"/wiki",icon:function(e){return c.a.createElement(q.a,He(He({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"KnowledgeBase24","data-old-api":"KnowledgeBase"},e),{className:"Zi Zi--KnowledgeBase"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M21 9.749v9.91c0 .74-.604 1.341-1.35 1.341H4.35C3.604 21 3 20.4 3 19.659V9.319c0-.503.283-.963.733-1.193l4.892-2.5V3.341c0-.74.604-1.341 1.35-1.341.267 0 .527.078.749.225l9.675 6.408c.375.249.601.668.601 1.116zM8.297 8.307L5.372 9.802A.223.223 0 005.25 10v8.54c0 .124.1.224.225.224h8.586a.223.223 0 00.124-.41l-4.959-3.259a1.339 1.339 0 01-.601-1.116V8.506a.224.224 0 00-.328-.199z"}))},color:"#5868D1",visible:!0}],Ge=n(1281);var Ke=function(e){var t=e.position,n=e.delay,r=e.onLoadBanner,i=e.onHideImage,o=e.onHeightChange;return Object(a.b)(Ge.a,{location:t,delay:n,onLoadBanner:r,onHideImage:i,onHeightChange:o,isMobile:!1})};var Ze=function(e){var t=e.items.filter((function(e){return e.visible}));return t.length?Object(a.b)("div",{className:"GlobalBalance",role:"complementary","aria-label":"余额礼券状态",children:t.map((function(e){return Object(a.b)("a",{className:"GlobalBalance-item",href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.label},e.key)}))}):null},Je=n(25),Ye=n(473),$e={url:"https://www.zhihu.com/knowledge-plan/education?utm_source=global_event_banner",imageUrl:"https://pic4.zhimg.com/80/v2-f37157090d166b6f23fa4e401e76c553_r.png",startTime:1584892800,endTime:1585151999,officePreview:!1,zaCardShowId:8227,zaClickId:8228};var Xe=function(){var e=Object(o.useRef)(),t=function(){var e=$e,t=e.startTime,n=e.endTime,r=e.officePreview,a=Object(Ye.a)()&&r||Date.now()>=1e3*t&&Date.now()<=1e3*n;return Object.assign(Object.assign({},e),{},{enable:a})}(),n=t.url,r=t.imageUrl,i=t.zaCardShowId,c=t.zaClickId,s=t.enable;return Object(o.useEffect)((function(){i&&s&&Je.a.trackCardShow(null,{id:i})}),[i,s]),s?Object(a.b)(E.d,{css:{display:"flex",flexDirection:"column"},children:Object(a.b)("a",{href:n,target:"_blank",rel:"noopener noreferrer",ref:e,"data-za-detail-view-id":c,css:{fontSize:0},children:Object(a.b)("img",{src:r,width:"100%",alt:""})})}):null},et=n(997);function tt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var nt=function(e){var t=e.defaultItems,n=e.onHeightChange,r=Object(o.useState)(t.map((function(e){return Object.assign(Object.assign({},e),{},{status:"loading"})}))),i=tt(k.a,r,2),c=i[0],s=i[1],l=Object(o.useCallback)((function(e,t){s(c.map((function(n){return e(n)?t(n):n})))}),[c]);return Object(a.b)(et.a,{className:"GlobalSideBar-carouselAD",items:c.filter((function(e){return"hidden"!==e.status})),loopStyle:"startover",resetOffsetWhenItemsLengthChange:!0,renderItem:function(e){var t=e.position,r=e.delay;return Object(a.b)(Ke,{position:t,delay:r,onLoadBanner:function(e){l((function(e){return e.position===t}),(function(t){return Object.assign(Object.assign({},t),{},{status:e?"loaded":"hidden"})}))},onHideImage:function(){l((function(e){return e.position===t}),(function(e){return Object.assign(Object.assign({},e),{},{status:"hidden"})}))},onHeightChange:n},t)},interval:5e3,css:{".Carousel-bullets":{bottom:17}},onBulletClick:function(e,t){Je.a.trackEvent(null,{id:9512,name:String(t+1)})}})},rt=n(154);function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(Re.a)(e);if(t){var a=Object(Re.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(xe.a)(this,n)}}var it=function(e){Object(Ae.a)(n,e);var t=at(n);function n(){var e;Object(Ce.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleLog=function(e,t,n){var r=We.find((function(e){return e.url===n})).label;Je.a.trackEvent(e.target,{action:"OpenUrl",element:"Link",name:t,id:2745},{button:{text:r},link:{url:n}})},e}return Object(ke.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.categoryData,r=t.children,i=n.filter((function(e){return e.visible})).map((function(t){var n=t.key,r=t.label,i=t.url,o=t.color,c=t.icon;return Object(a.b)("li",{className:"GlobalSideBar-categoryItem",children:Object(a.c)(rt.a,{preset:"plain",href:i,target:"_blank",title:r,onClick:function(t){return e.handleLog(t,n,i)},style:{color:o},"data-za-not-track-link":!0,children:[Object(a.b)("span",{className:"GlobalSideBar-categoryIcon",children:Object(a.b)(c,{})}),Object(a.b)("span",{className:"GlobalSideBar-categoryLabel",children:r})]})},n)}));return Object(a.c)(E.d,{className:"GlobalSideBar-category",role:"complementary","aria-label":"分类入口",children:[r,Object(a.b)("ul",{className:"GlobalSideBar-categoryList",children:i})]})}}]),n}(o.Component),ot=n(13),ct=n.n(ot),st=n(153);function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(Re.a)(e);if(t){var a=Object(Re.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(xe.a)(this,n)}}var ut=function(e){Object(Ae.a)(n,e);var t=lt(n);function n(){var e;Object(Ce.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).createClickButtonHandler=function(e){return function(t){Je.a.trackEvent(t.target,{action:"OpenUrl",id:2746},{button:{text:e}})}},e}return Object(ke.a)(n,[{key:"componentDidUpdate",value:function(e){var t=function(e){return e.navData.filter((function(e){return e.visible})).length};this.props.onHeightChange&&t(e)!==t(this.props)&&this.props.onHeightChange()}},{key:"render",value:function(){var e=this,t=this.props.navData.filter((function(e){return e.visible})).map((function(t){var n=t.key,r=t.label,i=t.icon,o=t.url,c=t.number;return Object(a.b)("li",{className:ct()("GlobalSideBar-navItem","GlobalSideBar-".concat(n,"Item")),children:Object(a.c)(rt.a,{preset:"plain",to:o,target:"_blank",className:"GlobalSideBar-navLink",activeClassName:"GlobalSideBar-navLink--active",onClick:e.createClickButtonHandler(r),"data-za-not-track-link":!0,children:[Object(a.b)(i,{className:"GlobalSideBar-navIcon",size:18}),Object(a.b)("span",{className:"GlobalSideBar-navText",children:r}),"number"==typeof c&&Object(a.b)("span",{className:"GlobalSideBar-navNumber",children:Object(st.formatNumber)(c)})]})},n)}));return Object(a.b)(E.d,{role:"complementary","aria-label":"更多分类入口",children:Object(a.b)("ul",{className:"GlobalSideBar-navList",children:t})})}}]),n}(o.Component),dt=n(86),bt=n(159),ht=n.n(bt),ft=n(3),pt=n.n(ft),mt=n(215),vt=n(1224),Ot=n(132),jt=n(1489),gt=n(1490),yt=n(1491),wt=n(1492),Ct=["type"];function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(Re.a)(e);if(t){var a=Object(Re.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(xe.a)(this,n)}}var At={answer:jt.a,article:gt.a,pin:yt.a,video:wt.a};function xt(e){var t=e.type,n=Object(r.default)(e,Ct),i=At[t];return i?Object(a.b)(i,Object.assign({},n)):null}var Rt={answer:{id:2744,action:"OpenUrl",elementName:"Answer"},article:{id:2752,action:"OpenUrl",elementName:"Post"},pin:{id:2753,action:"Click",elementName:"Pin"},draft:{id:2750,action:"OpenUrl"}},Nt=function(e){Object(Ae.a)(n,e);var t=kt(n);function n(){var e;Object(Ce.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={loadWritePin:!1,showWritePin:!1},e.openWritePin=e.props.authRequired((function(){return e.context.realNameRequired((function(){e.createClickButtonHandler("pin")(),e.setState({loadWritePin:!0,showWritePin:!0})}))()})),e.closeWritePin=function(){e.setState({showWritePin:!1})},e.openUploadVideo=e.props.authRequired((function(){return e.context.realNameRequired((function(){window.open("/zvideo/upload-video")}))()})),e.createClickButtonHandler=function(t){return e.context.realNameRequired((function(){var n=Rt[t],r=n.action,a=n.elementName,i=n.id;Je.a.trackEvent(Object(dt.a)(e),ht()({id:i,action:r,element_name:a},Boolean),"draft"===t?{link:{url:"https://www.zhihu.com".concat(e.props.creatorQuestionRightPass?"/creator/manage/creation/draft":"/draft")}}:null),"answer"===t?window.open(e.props.currentUser.isOrg?"/organization/question/recommend#recommend":e.props.creatorQuestionRightPass?"/creator/featured-question/invited":"/question/waiting"):"article"===t&&(window.open("//zhuanlan.zhihu.com/write"),Je.a.trackEvent(Object(dt.a)(e),{id:8038,action:"OpenUrl"},{link:{url:"https://zhuanlan.zhihu.com/write"}}))}))},e}return Object(ke.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentUser,n=e.fillCurrentUserIfNeeded,r=e.laterQuestionsCount,a=e.getLaterQuestionsCount,i=e.imperativeRef,o=e.withComponent,c=e.location.query;n([o&&"draftCount","organization"===t.userType&&"isOrgCreatepinWhiteUser"].filter(Boolean)),o&&null===r&&a(),i&&(i.current={createClickHandler:this.createClickButtonHandler,openUploadVideo:this.openUploadVideo,openWritePin:this.openWritePin}),Object.prototype.hasOwnProperty.call(c,"writepin")&&this.openWritePin()}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.laterQuestionsCount,i=t.withComponent,o=this.state,c=o.loadWritePin,s=o.showWritePin,l=(n||{}).draftCount,u=n&&(!n.isOrg||n.isOrg&&n.isOrgCreatepinWhiteUser);return i?Object(a.c)(E.d,{role:"complementary","aria-label":"创作中心卡片",className:"GlobalWrite",children:[Object(a.c)("div",{className:"GlobalWrite-navTop",children:[Object(a.c)("a",{className:"GlobalWrite-topItem",target:"_blank",rel:"noopener noreferrer",title:"回答",role:"button",tabIndex:0,onClick:this.createClickButtonHandler("answer"),children:[Object(a.b)(xt,{type:"answer",className:"GlobalWrite-navIcon"}),Object(a.b)("div",{className:"GlobalWrite-topTitle",children:"回答问题"}),n.isOrg&&Object(a.b)("div",{className:"GlobalWrite-exposeMore",children:"曝光更多"})]}),Object(a.c)("div",{className:"GlobalWrite-topItem",role:"button",tabIndex:0,onClick:function(t){Je.a.trackEvent(t.target,{id:8619,action:"Add"}),e.openUploadVideo()},children:[Object(a.b)(xt,{type:"video",className:"GlobalWrite-navIcon"}),Object(a.b)("div",{className:"GlobalWrite-topTitle",children:"发视频"})]}),Object(a.c)("a",{className:"GlobalWrite-topItem",target:"_blank",rel:"noopener noreferrer",title:"写文章",role:"button",tabIndex:0,onClick:this.createClickButtonHandler("article"),children:[Object(a.b)(xt,{type:"article",className:"GlobalWrite-navIcon"}),Object(a.b)("div",{className:"GlobalWrite-topTitle",children:"写文章"})]}),u&&Object(a.c)("div",{className:"GlobalWrite-topItem",role:"button",tabIndex:0,onClick:this.openWritePin,children:[Object(a.b)(xt,{type:"pin",className:"GlobalWrite-navIcon"}),Object(a.b)("div",{className:"GlobalWrite-topTitle",children:"写想法"})]})]}),Object(a.c)("div",{className:"GlobalWrite-navBottom",children:[Object(a.b)("a",{className:"GlobalWrite-answerLater",href:"/question/later",target:"_blank",title:"稍后答","data-za-detail-view-id":5370,children:Object(a.c)("div",{className:"GlobalWrite-navWrapper",children:[Object(a.b)("div",{className:"GlobalWrite-navTitle",children:"稍后答"}),Boolean(r)&&Object(a.b)("div",{className:"GlobalWrite-navNumber",children:Object(st.formatNumber)(r)})]})}),Object(a.b)("a",{className:"GlobalWrite-navDraft",href:this.props.creatorQuestionRightPass?"/creator/manage/creation/draft":"/draft",target:"_blank",rel:"noopener noreferrer",title:"草稿",onClick:this.createClickButtonHandler("draft"),"data-za-not-track-link":!0,children:Object(a.c)("div",{className:"GlobalWrite-navWrapper",children:[Object(a.b)("div",{className:"GlobalWrite-navTitle",children:"草稿箱"}),Boolean(l)&&Object(a.b)("div",{className:"GlobalWrite-navNumber",children:Object(st.formatNumber)(l)})]})})]}),c&&s&&Object(a.b)(vt.a,{show:s,onClose:this.closeWritePin})]}):Object(a.b)(a.a,{children:c&&Object(a.b)(vt.a,{show:s,onClose:this.closeWritePin})})}}]),n}(o.Component);Nt.defaultProps={withComponent:!0},Nt.contextTypes={realNameRequired:pt.a.func};var St=Object(u.compose)(mt.a,l.withRouter,Object(s.connect)((function(e){var t;return{currentUser:Object(S.b)(e),laterQuestionsCount:null===(t=e.question)||void 0===t?void 0:t.laterQuestions.count}}),{fillCurrentUserIfNeeded:S.f,getLaterQuestionsCount:Ot.u}))(Nt),Tt=["omit"],Bt=function(e,t){return e.map((function(e){var n=t.find((function(t){return t.key===e.key}));return n?Object.assign(Object.assign({},e),n):e}))},Et=function(e){return e.topstory&&e.topstory.sidebar},It=Object(d.createSelector)(Et,S.i,(function(e,t){return Bt(We,[e&&{key:"pub",number:e.latestAddedBookCount},e&&{key:"org",number:e.latestRoundtableCount},{key:"infinity",visible:!t}].filter(Boolean))})),zt=Object(l.withRouter)(Object(u.compose)(Object(me.a)(null),Object(w.b)({module:"RightSideBar"}))(Object(o.memo)(qt)));function qt(e){var t=e.omit,n=(t=void 0===t?{}:t).noNav,o=t.noWrite,c=t.noCreator,l=t.noBanner,u=t.noCategory,d=t.noAd,b=t.noCarouselAd,h=void 0===b||b,f=t.noBalance,p=void 0===f||f,m=t.noFooter,v=t.noAppBanner,O=Object(r.default)(e,Tt),j=Object(s.useDispatch)(),g=Object(s.useSelector)(Et),w=Object(s.useSelector)(S.b),k=Object(s.useSelector)(It),A=Object(ve.b)(ve.a.Question),x=function(e,t,n){return Bt(Ve,[e&&{key:"star",number:e.unreadItemCountOfFollowedFavlist},t&&{key:"questionList",url:"/people/".concat(t.urlToken||t.id,"/following/questions"),number:t.followingQuestionCount},{key:"invite",url:n?"/creator/featured-question/invited":"/question/waiting?type=invite"},e&&{key:"balance",visible:!0},e&&{key:"coupon",visible:e.needShowGiftCertificate}].filter(Boolean))}(g,w,A),R=Object(s.useSelector)(S.i),N=!R&&!n;Object(i.a)((function(){!g&&w&&(j(Object(je.d)()),R||j(Object(Oe.uc)())),N&&j(Object(S.f)(["followingQuestionCount"]))}));var T=((null==O?void 0:O.location)||"").pathname,B=(void 0===T?"":T).startsWith("/question/waiting")?"QuestionWaiting":"GlobalHomePage";return Object(a.b)(fe.a,{children:Object(a.c)(a.a,{children:[!o&&R&&Object(a.b)(St,{creatorQuestionRightPass:A}),!c&&Object(a.b)(C.a,{replacement:null,children:Object(a.b)(pe.a,{className:"GlobalSideBar-creator",iconStyle:"small",showWallEProtectLink:!0,currentUser:w,curBlock:B})}),Object(a.b)(he,{}),R&&Object(a.b)(Be,{}),!l&&Object(a.b)(Xe,{}),!u&&Object(a.b)(it,{categoryData:k,children:!R&&Object(a.b)(y,{})}),!p&&Object(a.b)(Ze,{items:x.filter((function(e){return["balance","coupon"].includes(e.key)}))}),!h&&Object(a.b)(nt,{defaultItems:[{position:"new_home_up",key:"new_home_up",delay:0},{position:"new_home_bottom",key:"new_home_bottom",delay:1e3}]}),!d&&Object(a.b)(Ke,{position:"new_home_up"}),N&&Object(a.b)(ut,{navData:x}),!R&&!d&&Object(a.b)(Ke,{position:"new_home_bottom",delay:1e3}),!v&&Object(a.b)(ge.a,{type:"home"}),!m&&Object(a.b)(we.a,{children:Object(a.b)(ye.a,{showHelpCenter:!N})})]})})}},1157:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))};function a(e){var t=[];return e.reduce((function(e,n){return e.then((function(){return n().then((function(e){t.push(e)}))}))}),Promise.resolve()).then((function(){return t}))}},1169:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r);function i(e){return a.a.createElement("svg",{width:"12",height:"10",viewBox:"0 0 12 10",style:e.style},a.a.createElement("mask",{id:"ViewIcon","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"12",height:"10"},a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4.8C12 2.56 8.72727 0 6 0C3.27273 0 0 2.56 0 4.8C0 7.04 3.27273 9.6 6 9.6C8.72727 9.6 12 7.04 12 4.8ZM3.79994 4.8C3.79994 3.58497 4.78491 2.6 5.99994 2.6C7.21496 2.6 8.19994 3.58497 8.19994 4.8C8.19994 6.01502 7.21496 7 5.99994 7C4.78491 7 3.79994 6.01502 3.79994 4.8Z",fill:"black"})),a.a.createElement("g",{mask:"url(#ViewIcon)"},a.a.createElement("rect",{x:"-2",y:"-2.8",width:"16",height:"16",fill:"#8590A6"})))}},1170:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r);function i(e){return a.a.createElement("svg",{width:"9",height:"11",viewBox:"0 0 9 11",style:e.style},a.a.createElement("path",{d:"M0 1C0 0.447715 0.447715 0 1 0H8C8.55228 0 9 0.447715 9 1V9.13148C9 9.93018 8.10985 10.4066 7.4453 9.96353L5.0547 8.3698C4.7188 8.14587 4.2812 8.14587 3.9453 8.3698L1.5547 9.96353C0.890146 10.4066 0 9.93018 0 9.13148V1Z",fill:"#8590A6"}))}},1171:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r);function i(e){return a.a.createElement("svg",{width:"10",height:"12",viewBox:"0 0 10 12",style:e.style},a.a.createElement("mask",{id:"UpdateTimeIcon","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"10",height:"12"},a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.0456 3.17377C9.79834 2.8189 10.1837 1.94914 9.91402 1.14002C9.62296 0.266822 8.67913 -0.205091 7.80593 0.0859764L4.50803 1.18527C4.40079 1.21835 4.29816 1.26195 4.20137 1.31488C3.97216 1.43959 3.78091 1.6137 3.63673 1.81892C3.50452 2.00645 3.41003 2.22248 3.3643 2.45598C3.32608 2.64908 3.32175 2.85082 3.35567 3.0525C3.38728 3.24338 3.45134 3.42332 3.54198 3.58645C3.6623 3.80402 3.82732 3.98694 4.02117 4.1273C4.21884 4.27093 4.44931 4.37218 4.69922 4.4177C4.80621 4.43741 4.91575 4.44673 5.02636 4.44494C5.3467 4.45005 5.65899 4.5474 5.9257 4.7256C6.19977 4.90873 6.41338 5.16901 6.53952 5.47354L8.07925 4.83577L6.53952 5.47355C6.66566 5.77808 6.69866 6.11317 6.63436 6.43646L8.26893 6.7616L6.63436 6.43646C6.57005 6.75975 6.41132 7.05671 6.17825 7.28978C5.94517 7.52286 5.64821 7.68159 5.32492 7.7459L5.65006 9.38047L5.32492 7.7459C5.00164 7.8102 4.66654 7.7772 4.36201 7.65106L3.72423 9.19079L4.36201 7.65106C4.05748 7.52492 3.79719 7.3113 3.61406 7.03723C3.43093 6.76316 3.33319 6.44094 3.33319 6.11132C3.33319 5.19089 2.58703 4.44473 1.66659 4.44473C0.74616 4.44473 0 5.19089 0 6.11132C0 7.10019 0.293232 8.06684 0.842616 8.88906C1.392 9.71127 2.17286 10.3521 3.08645 10.7305C4.00004 11.1089 5.00533 11.208 5.97519 11.015C6.94506 10.8221 7.83593 10.3459 8.53517 9.64671C9.2344 8.94747 9.71058 8.0566 9.9035 7.08673C10.0964 6.11687 9.99741 5.11158 9.61899 4.19799C9.46794 3.83334 9.2751 3.48985 9.0456 3.17377Z",fill:"black"})),a.a.createElement("g",{mask:"url(#UpdateTimeIcon)"},a.a.createElement("rect",{x:"-3.88873",y:"-2.77719",width:"17.777",height:"17.777",fill:"#8590A6"})))}},1203:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(80),a=n.n(r),i=n(383),o=n.n(i),c=n(5),s=n(44),l=n(510);function u(e){var t=e.id,n=e.adZoneId,r=e.template,a=void 0===r?"":r,i=e.style,o=void 0===i?"":i,c=e.impressionTracks,s=e.viewTracks,l=e.clickTracks,u=e.closeTracks,d=e.effectTracks,b=void 0===d?[]:d,h=e.debugTracks,f=void 0===h?[]:h,p=e.conversionTracks,m=e.videoTracks,v=void 0===m?[]:m,O=e.extraConversionTracks,j=void 0===O?[]:O,g=e.conversionTrackJs,y=void 0===g?[]:g,w=e.zaAdInfo,C=e.zaAdInfoJson,k=void 0===C?"":C,A=e.creatives,x=e.prefetch,R=void 0===x?{}:x,N=e.expand,S=void 0===N?{}:N,T=e.canvas,B=void 0===T?{}:T,E=e.experimentInfo,I=void 0===E?"":E;return{id:t,adZoneId:n,template:a,style:o,impressionTracks:c,viewTracks:s,clickTracks:l,closeTracks:u,effectTracks:b,debugTracks:f,conversionTracks:p,videoTracks:v,extraConversionTracks:j,conversionTrackJs:y,zaAdInfo:w,zaAdInfoJson:k,creatives:function(e){return e.map((function(e){return function(e){var t=e.id,n=void 0===t?"":t,r=e.asset,a=e.videoInfo,i=void 0===a?{playlis:{hd:{},ld:{},sd:{}}}:a,o=e.protoInfo,c=void 0===o?{}:o,s=e.thirdSdkInfo,l=void 0===s?"":s,u=e.videoWatchNum,d=void 0===u?"":u;return{id:n,asset:function(e){var t=e.brandName,n=e.brandLogo,r=e.title,a=e.desc,i=void 0===a?"":a,o=e.imgs,c=void 0===o?[]:o,s=e.gif,l=void 0===s?"":s,u=e.landingUrl,d=e.nativeUrl,b=void 0===d?"":d,h=e.appPromotionUrl,f=void 0===h?"":h,p=e.deepUrl,m=void 0===p?"":p,v=e.imgSize,O=e.recommends,j=void 0===O?[{}]:O,g=e.footer,y=e.cta,w=e.resource,C=void 0===w?{}:w,k=e.activity,A=void 0===k?{}:k,x=e.sponsor,R=void 0===x?{}:x,N=e.window,S=void 0===N?{}:N,T=e.appInfo,B=void 0===T?{}:T,E=e.recommend,I=void 0===E?{}:E,z=e.videoSpec,q=void 0===z?{}:z,Q=e.imageRatioExtra,M=void 0===Q?{}:Q,P=e.packageName,L=e.icon,_=e.galleries;return{brandName:t,brandLogo:n,title:r,desc:i,imgs:c,gif:l,landingUrl:u,nativeUrl:b,appPromotionUrl:f,deepUrl:m,imgSize:v,recommends:j,footer:g,cta:y,resource:C,activity:A,sponsor:R,window:S,appInfo:B,recommend:I,videoSpec:q,imageRatioExtra:M,packageName:P,icon:L,galleries:void 0===_?[{}]:_}}(r),videoInfo:i,protoInfo:c,thirdSdkInfo:l,videoWatchNum:d}}(e)}))}(A),prefetch:R,expand:S,canvas:B,experimentInfo:I}}var d={PROMOTE_ARTICLE:"发表了一篇文章",PROMOTE_QUESTION:"提了一个问题"};function b(e){var t=e.ad,n=(t.partyId,t.creatives),r=t.downloadSilent,i=void 0!==r&&r,c=t.isNewWebview,l=void 0!==c&&c,u=t.isSpeeding,b=t.cdnMap,h=t.displayAdvertisingTag,f=t.adVerb,p=t.loadTracks,m=t.closeTrack,v=o()(t,["partyId","creatives","downloadSilent","isNewWebview","isSpeeding","cdnMap","displayAdvertisingTag","adVerb","loadTracks","closeTrack"]),O=Object(s.f)(t,"creatives[0].impressionTracks",[]),j=Object(s.f)(t,"creatives[0].clickTracks",[]),g={displayAdvertisingTag:h,downloadSilent:i,isNewWebview:l,isCdnSpeeding:u,cdnMap:b},y=d[f],w=n.map((function(e){return function(e,t){var n=Object(s.f)(e,"target",{}),r=n.voteupCount,i=n.commentCount,c=n.followerCount,l=n.answerCount,u=o()(n,["voteupCount","commentCount","followerCount","answerCount"]),d=e.landingUrl,b=e.appPromotionUrl,h=e.deepUrl,f=e.packageName,p=e.title,m=e.nativeUrl,v=void 0===m?"":m,O=e.window,j=e.imageRatioExtra,g=e.brand,y=void 0===g?{}:g,w=e.thumbnailExtraInfo,C=e.cta,k=(C=void 0===C?{}:C).value,A=void 0===k?"":k,x=e.button,R=e.description,N=(e.protoInfo,e.image),S=e.gallery,T=void 0===S?[]:S,B=e.thirdSdkInfo,E=(e.showNum,e.recommend),I=e.contentType,z=o()(e,["landingUrl","appPromotionUrl","deepUrl","packageName","title","nativeUrl","window","imageRatioExtra","brand","thumbnailExtraInfo","cta","button","description","protoInfo","image","gallery","thirdSdkInfo","showNum","recommend","contentType"]),q=y.name,Q=y.logo,M=Object(s.f)(T,"length")>=2?T.map((function(e){return e.url})):[N],P=T&&T.map((function(e){return{image:e.url,desc:e.description}}));return{asset:a()({landingUrl:d,appPromotionUrl:b,deepUrl:h,packageName:f,title:p,nativeUrl:v,window:O,imageRatioExtra:j,desc:R,cta:x||A,imgs:M,brandName:q,brandLogo:Q,recommend:E,gallery:T,galleries:P,icon:t},z),protoInfo:a()({voteupNum:r,commentNum:i,contentType:I,answerNum:l,followNum:c,target:JSON.stringify(n)},u),videoInfo:w,thirdSdkInfo:B}}(e,y)}));return a()({viewTracks:O,impressionTracks:p,closeTracks:[m],clickTracks:j,creatives:w,expand:g},v)}function h(e){if(!e||!e.ad&&!e.adjson)return null;var t=Object(c.camelizeKeys)(e),n=Object(s.f)(e,"adjson"),r=Object(c.camelizeKeys)(Object(s.A)(n)),i=Object(l.a)({oldData:t,adjson:r});return{data:t,adjson:n?function(e,t){if(!e.ads)return null;var n=e.ads;return{ads:(void 0===n?[]:n).map((function(e){return a()({adjsonStr:t},u(e))}))}}(r,n):function(e,t){return{ads:[{ad:e.ad}].map((function(e){var n=e.ad;return a()({adjsonStr:t},b({ad:n}))}))}}(t,n),experimentInfo:i}}},1206:function(e,t,n){"use strict";var r=n(37),a=n(15),i=n(16),o=n(18),c=n(19),s=n(9),l=n(1),u=n(0),d=n(13),b=n.n(d),h=n(49),f=n(33),p=n(51),m=n(435),v=["to","className","children"];function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var j=function(e){Object(o.a)(n,e);var t=O(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.className,a=e.children,i=Object(r.default)(e,v),o=b()("QuestionMainAction",n);return t?Object(l.b)(m.a,{zaBlock:"QuestionMainAction",zaText:!0,zaType:"Text",children:Object(l.b)(h.Link,Object.assign(Object.assign({to:t,href:t,className:o},i),{},{children:a}))}):Object(l.b)(p.a,{zaBlock:"QuestionMainAction",zaText:!0,zaType:"Button",children:Object(l.b)(f.c,Object.assign(Object.assign({className:o},i),{},{children:a}))})}}]),n}(u.Component);t.a=j},1237:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(35),a=n(1),i=n(0),o=n(72),c=n.n(o);function s(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var l=Object(i.createContext)([!0,c.a,c.a]);l.displayName="DisplayPriorityContext";var u=function(){return Object(i.useContext)(l)},d=function(e){var t=e.children,n=e.readyStatus,r=e.shownStatus,o=e.index,c=e.setReadyStatusList,s=Object(i.useRef)(n);Object(i.useEffect)((function(){s.current=n}),[n]);var u=Object(i.useCallback)((function(){"pending"===s.current&&c((function(e){return e.map((function(e,t){return t===o?"resolved":e}))}))}),[c,o]),d=Object(i.useCallback)((function(){"pending"===s.current&&c((function(e){return e.map((function(e,t){return t===o?"rejected":e}))}))}),[c,o]),b=Object(i.useMemo)((function(){return[r,u,d]}),[r,u,d]);return Object(a.b)(l.Provider,{value:b,children:t})};t.a=function(e){var t=e.children,n=Object(i.useState)((function(){return i.Children.map(t,(function(){return"pending"}))})),o=s(r.a,n,2),c=o[0],l=o[1],u=Object(i.useMemo)((function(){var e=!1;return c.map((function(t){return!e&&("rejected"!==t&&(e=!0,"pending"!==t))}))}),[c]);return Object(a.b)(a.a,{children:i.Children.map(t,(function(e,t){return Object(a.b)(d,{readyStatus:c[t],shownStatus:u[t],index:t,setReadyStatusList:l,children:e},t)}))})}},1243:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return j}));var r=n(37),a=n(1),i=n(59),o=n(51),c=n(1726),s=n(1212),l=n(153),u=n(1814),d=n(1011),b=n(154),h=n(922),f=["item","className","renderTimeTopic"],p=["item"],m={"火爆":"GRD01A","飙升":"GRD03A","热议":"GRD10A","上升":"GYL01A","新题":"GBL08A"},v=function(e){var t=e.item,n=e.className,o=e.renderTimeTopic,c=void 0!==o&&o,s=Object(r.default)(e,f),b=t.question,p=b.url,v=b.title,O=b.topics,j=b.label,g=b.created,y=b.highlightTitle,w=t.reaction;return Object(a.c)(i.Box,Object.assign(Object.assign({flexBasis:"353px",className:n,pr:"43px"},s),{},{children:[Object(a.b)(h.a,{href:p,zaType:"Card",target:"_blank",children:Object(a.c)(i.Box,{css:function(e){return Object.assign(Object.assign({},Object(d.a)(2)),{},{fontSize:"15px",color:e.colors.GBK03A,fontWeight:500,lineHeight:"21px"})},children:[Boolean(j)&&Object(a.b)(i.Box,{p:"2px 4px",css:function(e){return{background:e.colorMod(e.colors[m[j]]).alpha(.14),border:"1px solid ".concat(e.colorMod(e.colors[m[j]]).alpha(.1)),borderRadius:"2px",fontSize:"12px",color:e.colors[m[j]],display:"inline-block",lineHeight:"12px",marginRight:"2px",fontWeight:"500",position:"relative",top:"-2px"}},children:j}),c?Object(a.b)("span",{css:function(e){return{"& em":{color:e.colors.GRD03A,fontStyle:"normal"}}},dangerouslySetInnerHTML:{__html:y}}):v]})}),Object(a.c)(i.Box,{mt:"10px",css:{height:null!=O&&O.length||c?"23px":"0px",overflow:"hidden"},children:[null==O?void 0:O.map((function(e){var t=e.name,n=e.urlToken;return Object(a.c)(h.a,{href:"https://www.zhihu.com/topic/".concat(n),zaType:"Tag",target:"_blank",css:function(e){return{display:"inline-block",padding:"3px 6px",background:e.colors.GBK10A,fontSize:"12px",lineHeight:"17px",fontWeight:"400",color:e.colors.GBK04A,whiteSpace:"nowrap","&:nth-of-type(n + 2)":{marginLeft:8}}},children:["#",t]},n)})),c&&Object(a.b)(i.Text,{color:"GBK06A",fontSize:"13px",mt:O?"10px":"0px",children:O?"提问时间：".concat(u.a(1e3*g,"yyyy-MM-dd")):"".concat(Object(l.cnNiceNumber)((null==w?void 0:w.answerNum)||0)," 回答 · ").concat(Object(l.cnNiceNumber)((null==w?void 0:w.followNum)||0)," 关注")})]})]}))},O=function(e){var t=e.item,n=Object(r.default)(e,p),l=t.question,u=l.token,d=l.haveAnswer,h=l.questionAnswerUrl,f="https://www.zhihu.com/question/".concat(u,"?write");return Object(a.b)(i.Flex,Object.assign(Object.assign({justifyContent:"center",flexBasis:"131px"},n),{},{children:Object(a.b)(o.a,{zaType:"Button",zaText:!0,zaAction:"OpenUrl",extra:{link:{get url(){return d?h:f}}},children:d?Object(a.b)(b.a,{icon:c.a,label:"查看回答",href:h,target:"_blank",css:{padding:"0 9px"}}):Object(a.b)(b.a,{className:"QuestionItem-footer--writeAnswerButton",label:"写回答",icon:s.a,href:f,target:"_blank"})})}))},j=function(e){var t=e.score,n=e.level,r=e.Icon,o=e.color;return Object(a.c)(i.Box,{children:[Object(a.c)(i.Text,{color:"GBK03A",fontSize:"14px",lineHeight:"18px",fontWeight:"400",children:[t.toFixed(1)," 分"]}),Object(a.b)(i.Flex,{mt:"8px",alignItems:"center",children:new Array(5).fill().map((function(e,t){return Object(a.c)(i.Box,{css:{position:"relative"},children:[Object(a.b)(r,{size:12,css:function(e){return Object.assign({color:e.colors[o]},t+1>n&&{opacity:"0.2"})}}),t+1===Math.ceil(n)&&Object(a.b)(r,{size:12,css:function(e){return{color:e.colors[o],position:"absolute",left:"0",top:"3px",clip:"rect(0, ".concat(n%1*12,"px, 12px, 0px)")}}})]},t)}))})]})}},1245:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=s(n(1528)),i=s(n(0)),o=s(n(3)),c=(s(n(1529)),n(1530));function s(e){return e&&e.__esModule?e:{default:e}}o.default.any,o.default.func,o.default.node;var l=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,a));return i.performAppear=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e,t)):i._handleDoneAppearing(e,t)},i._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performEnter=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e,t)):i._handleDoneEntering(e,t)},i._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performLeave=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e,t)):i._handleDoneLeaving(e,t)},i._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)?i.keysToEnter.push(e):i.setState((function(t){var n=r({},t.children);return delete n[e],{children:n}}))},i.childRefs=Object.create(null),i.state={children:(0,c.getChildMapping)(n.children)},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,c.getChildMapping)(e.children),n=this.state.children;for(var r in this.setState({children:(0,c.mergeChildMappings)(n,t)}),t){var a=n&&n.hasOwnProperty(r);!t[r]||a||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var i in n){var o=t&&t.hasOwnProperty(i);!n[i]||o||this.currentlyTransitioningKeys[i]||this.keysToLeave.push(i)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var o="string"!=typeof r.ref,c=e.props.childFactory(r),s=function(t){e.childRefs[n]=t};c===r&&o&&(s=(0,a.default)(r.ref,s)),t.push(i.default.cloneElement(c,{key:n,ref:s}))}};for(var o in this.state.children)n(o);var c=r({},this.props);return delete c.transitionLeave,delete c.transitionName,delete c.transitionAppear,delete c.transitionEnter,delete c.childFactory,delete c.transitionLeaveTimeout,delete c.transitionEnterTimeout,delete c.transitionAppearTimeout,delete c.component,i.default.createElement(this.props.component,c,t)},t}(i.default.Component);l.displayName="TransitionGroup",l.propTypes={},l.defaultProps={component:"span",childFactory:function(e){return e}},t.default=l,e.exports=t.default},1246:function(e,t,n){"use strict";var r=n(1076);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,a.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var a=r(n(1247));e.exports=t.default},1247:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},1248:function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},1249:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=r,e.exports=t.default},1250:function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};a(n(0));var r=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string})])},1271:function(e,t,n){"use strict";var r=n(15),a=n(16),i=n(18),o=n(19),c=n(9),s=n(1),l=n(0),u=n(21),d=n(35),b=n(86),h=n(3),f=n.n(h),p=n(13),m=n.n(p),v=n(118),O=n.n(v),j=n(25),g=n(172),y=n(33),w=n(144),C=n(901),k=n(920),A=n(961),x=n(219),R=n(442),N=n(433),S=n(935),T=n(1206),B=n(49),E=n(51),I=n(153),z=n(438),q=n(1037),Q=n(1028);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var P=function(e,t){return e&&e.replace(new RegExp(null==t?void 0:t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),(function(e){return"<em>".concat(e,"</em>")}))},L=function(e){Object(i.a)(n,e);var t=M(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={mounted:!1},e.handleInvite=function(){var t=e.props,n=t.user.urlToken,r=t.onInvite;j.a.trackEvent(Object(b.a)(e),{id:3314}),r(n)},e.getContainer=function(){return document.querySelector(".Modal-content .QuestionInvitation-content")},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contributionsCount,r=e.topic,a=e.isInvited,i=e.keyword,o=e.reason,c=t.name,l=Object.assign(Object.assign({},t),{},{name:Object(s.b)(z.a,{inline:!0,html:P(c,i)})}),u=Object(s.b)(Q.a,{user:l,status:o||(n?Object(s.c)("div",{children:["在话题 ",Object(s.b)(q.a,{topic:r})," 下有 ",Object(s.c)(B.Link,{to:"/people/".concat(t.urlToken,"/answers/topic/").concat(r.id),children:[Object(I.formatNumber)(n)," 个回答"]})]}):Object(s.b)(z.a,{html:t.headline})),action:Object(s.b)(E.a,{as:y.c,zaText:!0,zaType:"Button",zaAction:"Invite",color:a?void 0:"blue",disabled:a,onClick:this.handleInvite,children:a?"已邀请":"邀请回答"}),meta:null}),d={module:"UserItem",index:this.props.index,content:{member_hash_id:t.id},view:{id:i?4436:4437},extra:{search:{raw_query:i||""}},trackCardShow:!0};return this.state.mounted?Object(s.b)(N.a,Object.assign(Object.assign({getContainer:this.getContainer},d),{},{children:u})):u}}]),n}(l.Component),_=n(929),D=n(42);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var H=function(e){Object(i.a)(n,e);var t=F(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleClick=function(){var t=e.props,n=t.questionId,r=t.closeAutoInvite,a=t.openAutoInvite;return"close"===t.item.status?(j.a.trackEvent(null,{id:3313}),a(n)):r(n)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.item,t=void 0===e?{}:e,n=t.avatar,r=t.description,a=t.status,i=t.title,o="close"===a;return Object(s.b)(_.e,{data:t,image:Object(s.b)(g.a,{size:38,url:n}),title:i,meta:Object(s.b)(_.d,{children:r}),className:"AutoInviteItem-wrapper--desktop",extra:Object(s.b)(y.c,{preset:"link",className:o?"AutoInviteItem-button--closed":"AutoInviteItem-button--open",onClick:this.handleClick,children:o?"开启邀请":"已开启"})})}}]),n}(l.Component);H.propTypes={questionId:f.a.number.isRequired,item:f.a.object};var U=Object(u.connect)(null,{openAutoInvite:D.T,closeAutoInvite:D.d})(H),V=n(1154);function W(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var K=function(e){var t=e.user;return Object(s.b)("div",{className:"InviteeItem",children:Object(s.c)("div",{className:"InviteeItem-content",children:[Object(s.b)(g.a,{url:t.avatarUrl,size:32,className:"InviteeItem-image"}),Object(s.b)("h4",{className:"InviteeItem-title",children:t.name})]})})},Z=function(e){Object(i.a)(n,e);var t=G(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={expanded:!1,keyword:null},e.onChange=O()((function(t){e.props.onChange(t)}),300),e.handleChange=function(t){var n=t.target.value;e.setState({keyword:n}),n&&e.onChange(n)},e.handleExpand=function(){j.a.trackEvent(Object(b.a)(e),{action:"LoadMore",element:"Button"}),e.setState({expanded:!0})},e.handleInvite=function(t){var n=e.state.keyword;return(0,e.props.onInvite)(t,n)},e}return Object(a.a)(n,[{key:"renderHeader",value:function(){var e=this.props,t=e.invitees,n=(e.expandCount,Object(s.b)(w.a,{className:"QuestionInvitation-input",placeholder:"搜索你想邀请的人",onChange:this.handleChange,after:Object(s.b)(C.a,{size:18,fill:"grey"}),"data-tooltip":"也可以搜索职业、公司等资料","aria-label":"也可以搜索职业、公司等资料","data-tooltip-position":"bottom"})),r=[t.length?Object(s.c)("span",{children:["你已邀请 ",Object(s.b)(x.a,{toggler:Object(s.c)(y.c,{className:"Invitees-toggler",preset:"plain",children:[Object(s.b)("span",{className:"Invitees-togglerUsers",children:t.slice(0,2).map((function(e,t){return Object(s.c)("span",{children:[0===t?"":"、",Object(s.b)("span",{children:e.name})]},t)}))}),t.length>2&&" 等 ".concat(t.length," 人")]}),toggleEvent:"hover",targetClassName:"Invitees-popover",arrowed:!0,children:Object(s.b)("div",{className:"Invitees",children:t.map((function(e){return Object(s.b)(K,{user:e},e.urlToken)}))})})]}):Object(s.b)("h2",{className:"QuestionInvitation-title",children:"你可以邀请下面用户，快速获得回答"}),n],a=W(d.a,r,2),i=a[0],o=a[1];return Object(s.b)(V.a,{header:i,options:o})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,r=t.isDrained,a=t.items,i=t.searchItems,o=t.expandCount,c=t.autoInvitationItem,l=t.question,u=(l=void 0===l?{}:l).id,d=this.state,b=d.expanded,h=d.keyword,f=h?i:a,p=Boolean((void 0===o||o>0)&&!h&&f.length&&c&&c.status),v=p?o-1:o,O=!v||b,j=o?k.d:"div";return Object(s.c)(j,{className:"QuestionInvitation",children:[this.renderHeader(),n?Object(s.b)("div",{className:m()("QuestionInvitation-content","QuestionInvitation-content--centered"),children:Object(s.b)(R.a,{})}):Object(s.c)("div",{className:m()("QuestionInvitation-content",{"QuestionInvitation-content--centered":!f.length}),children:[f.length?Object(s.b)(N.a,{module:"UserList",children:Object(s.c)(A.b,{children:[p&&Object(s.b)(U,{questionId:u,item:c}),(O?f:f.slice(0,v)).map((function(t){return Object(s.b)(A.a,{className:m()({"List-item--mobile":!1}),children:Object(s.b)(L,Object.assign(Object.assign({},t),{},{keyword:h,onInvite:e.handleInvite}))},t.user.urlToken)}))]})}):Object(s.c)(S.k,{children:[Object(s.b)(S.f,{}),Object(s.b)("div",{children:r?"没有可以邀请的人":"没有找到你想邀请的人"})]}),f.length>v&&!O&&Object(s.b)(T.a,{onClick:this.handleExpand,children:"更多推荐结果"})]})]})}}]),n}(l.Component);Z.propTypes={expandCount:f.a.number,items:f.a.array,searchItems:f.a.array,onInvite:f.a.func.isRequired};var J=Object(N.b)({module:"InvitationFrame"})(Z),Y=n(132);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var X=function(e){Object(i.a)(n,e);var t=$(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleChange=function(t){var n=e.props,r=n.question.id;(0,n.loadItems)(r,"invitationCandidates",{keyword:t})},e.handleInvite=function(t,n){e.props.updateInvitation(e.props.question.id,t,n?"search":"normal")},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.status,a=(r=void 0===r?{}:r).isLocked,i=r.isClose,o=r.isEvaluate,c=r.isSuggest,s=e.loadItems,l=e.loadAutoInvitation;e.isDrained||a||i||o||c||(s(n,"invitationCandidates"),s(n,"invitees"),l(n))}},{key:"render",value:function(){var e=this.props.question.status,t=e.isLocked,n=e.isClose,r=e.isEvaluate,a=e.isSuggest;return t||n||r||a?null:Object(s.b)(J,Object.assign({onChange:this.handleChange,onInvite:this.handleInvite},this.props))}}]),n}(l.Component);t.a=Object(u.connect)((function(e,t){var n=t.question.id,r=e.entities,a=r.users,i=r.topics,o=e.question,c=o.invitationCandidates,s=o.invitees,l=o.autoInvitation,u=function(e){var t=e.member,n=e.isInvited,r=e.topicContributions,o=e.reason,c=r&&r.sort((function(e,t){return t.contributionsCount-e.contributionsCount}))[0]||{},s=c.topic,l=c.contributionsCount;return{user:a[t],topic:i[s],isInvited:n,contributionsCount:l,reason:o}},d=c[n]||{isFetching:!1,isDrained:!1,items:[],searchItems:[]},b=d.isFetching,h=d.isDrained,f=d.items,p=d.searchItems,m=(s[n]||{items:[]}).items;return{isFetching:b,isDrained:h,items:f.map(u),searchItems:p.map(u),invitees:m.map((function(e){return a[e]})),autoInvitationItem:l[n]}}),{loadItems:Y.Q,updateInvitation:Y.mb,loadAutoInvitation:Y.F})(X)},1281:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var r=n(47),a=n.n(r),i=n(23),o=n.n(i),c=n(27),s=n.n(c),l=n(28),u=n.n(l),d=n(17),b=n.n(d),h=n(103),f=n.n(h),p=n(26),m=n.n(p),v=n(0),O=n.n(v),j=n(3),g=n.n(j),y=n(5),w=n(478),C=n(510),k=n(1323),A=n(44),x=n(25),R=n(56),N=n.n(R),S=n(975),T=n(1414),B=n(992),E="https://www.zhihu.com",I={qihoo_pc_js:"".concat(E,"/inner_bottom_360.html"),baidu_pc_js:"u6559262",default:"".concat(E,"/inner_bottom.html")},z={qihoo_pc_js:"".concat(E,"/inner_top_360.html"),baidu_pc_js:"u6559261",default:"".concat(E,"/inner_top.html")},q={qihoo_pc_js:"".concat(E,"/inner_top_360.html"),baidu_pc_js:"u6559261",default:"".concat(E,"/inner_top.html")},Q={qihoo_pc_js:"".concat(E,"/inner_bottom_360.html"),baidu_pc_js:"u6559262",default:"".concat(E,"/inner_bottom.html")},M={qihoo_pc_js:"".concat(E,"/home_top_360.html"),baidu_pc_js:"u6559258",default:"".concat(E,"/home_top.html")},P={qihoo_pc_js:"".concat(E,"/home_bottom_360.html"),baidu_pc_js:"u6559260",default:"".concat(E,"/home_bottom.html")},L="".concat(E,"/home_bottom.html"),_={new_answer_down_sticky:I,new_answer_up:z,new_question_up:q,new_question_down_sticky:Q,new_home_up:M,new_home_bottom:P},D="https://www.zhihu.com/commercial_api/banners_v3/",F={new_home_up:"home_up",new_home_bottom:"home_bottom",new_answer_up:"answer_up",new_answer_down_sticky:"answer_down_sticky",new_question_up:"question_up",new_question_down_sticky:"question_down_sticky"},H=n(455),U=n(1065),V=function(e){function t(){var e,n;o()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=u()(this,(e=b()(t)).call.apply(e,[this].concat(a)))).state={item:null},n.getAdsenseSource=function(e){var t=n.props.location,r=n.state.item.template,a=_[t];return a[r||e]||a.default||L},n.trackImpression=function(){var e=n.state.item;if(e){var t=Object(w.a)(e).ad,r=t.impressionTracks,a=t.debugTracks,i={impressionTracks:r,viewTracks:t.viewTracks,debugTracks:a};Object(H.f)(n.card,i)}},n.loadBannerRequest=function(e){var t=e.id,r=e.location,a=e.query,i=e.onLoadBanner;Object(A.m)({id:t,location:r,query:a,url:"".concat(D).concat(F[r])}).then((function(e){i(e),e&&n.setState({item:Object(C.b)({adjson:e},"pccard")})}))},n.load=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,t=e.delay;clearTimeout(n.loadTimeout),t>0?n.loadTimeout=setTimeout((function(){n.loadBannerRequest(e)}),t):n.loadBannerRequest(e)},n.handleIframeLoad=function(){setTimeout(n.props.onHeightChange,300)},n.handleImageLoad=function(){var e=n.state.item;if(e){n.debugTracks("image_onload"),n.trackImpression();var t=Object(w.a)(e).creative,r=Object(A.f)(t,"asset.landingUrl","");x.a.trackEvent(f()(n),{action:"Load"},{link:{url:r}}),setTimeout(n.props.onHeightChange,300)}},n.debugTracks=function(e){var t=n.state.item;if(t){var r=Object(w.a)(t).ad.debugTracks,a=void 0===r?[]:r,i={et:e},o=N.a.stringify(i);a.map((function(e){return e?Object(A.x)(o?"".concat(e).concat(e.includes("?")?"&":"?").concat(o):e):null}))}},n.handleClose=function(){var e=n.state.item;if(e){var t=Object(w.a)(e).ad.closeTracks,r=void 0===t?[]:t;Object(H.b)(r),n.hideImage()}},n.handleLog=function(e){var t=n.state.item,r=Object(w.a)(t),a=r.ad,i=r.creative,o=a.clickTracks,c=void 0===o?[]:o,s=Object(A.f)(i,"asset.landingUrl","");x.a.trackEvent(e.target,{action:"OpenUrl",url:window.location.href},{link:{url:s}}),Object(H.a)(c)},n.hideImage=function(){var e=n.card.offsetHeight;n.card.style.height="".concat(e,"px"),n.timeout=setTimeout((function(){n.card.classList.add("Pc-card--hidden"),n.card.style.height=0,n.timeout=setTimeout((function(){n.props.onHideImage(),n.props.onHeightChange()}),300)}),17)},n}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.id,r=t.location,a=e.id,i=e.location;n===a&&r===i||(clearTimeout(this.timeout),this.setState({item:null}),this.load(e))}},{key:"render",value:function(){var e=this,t=this.state.item;if(!t)return null;var n=Object(w.a)(t),r=n.ad,a=void 0===r?{displayAdvertisingTag:"",template:""}:r,i=n.creative,o=void 0===i?{asset:{},protoInfo:{}}:i,c=a.expand.displayAdvertisingTag,s=a.template,l=o.asset,u=l.imgs,d=void 0===u?[]:u,b=l.landingUrl,h=void 0===b?"":b,f={title:"third_ad",className:"Banner-adsense",src:this.getAdsenseSource(s),adId:this.getAdsenseSource(s),scrolling:"no",frameBorder:"0",onLoad:this.handleIframeLoad},p="out_link"===Object(A.f)(o,"protoInfo.contentType","");return O.a.createElement("div",{className:"Pc-card Card",ref:function(t){e.card=t}},O.a.createElement("a",{className:"Banner-link",href:h,target:"_blank",onClick:this.handleLog},Object(A.l)(s)?O.a.createElement(k.a,{value:f,template:s}):O.a.createElement(O.a.Fragment,null,c&&O.a.createElement("div",{className:"Banner-adTag"},"广告"),O.a.createElement(B.a,{className:"Banner-image",src:d[0],ad:a,alt:"广告",onLoad:this.handleImageLoad,onError:function(){return e.debugTracks("image_onerror")},onLoadOnceTrack:this.onLoadOnceTrack}))),this.props.isMobile||O.a.createElement("div",{className:"Pc-card-button-close ",onClick:this.handleClose,"data-tooltip":"不再显示","data-tooltip-position":"bottom"},O.a.createElement(T.c,{name:"close",className:"Pc-card-button-close-svg "})),O.a.createElement(U.a,{url:Object(A.l)(s)||p?"":h}))}}]),t}(v.Component);function W(e){return O.a.createElement(S.a,null,O.a.createElement(V,a()({},e,{data:Object(y.camelizeKeys)(e.data)})))}V.propTypes={id:g.a.string,location:g.a.string.isRequired,onLoadBanner:g.a.func,onHideImage:g.a.func,onHeightChange:g.a.func,isMobile:g.a.bool},V.defaultProps={isMobile:!1,onLoadBanner:function(){},onHideImage:function(){},onHeightChange:function(){}}},1290:function(e,t,n){"use strict";var r=n(15),a=n(16),i=n(18),o=n(19),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),b=n(920),h=n(173);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var p={unregistered:{url:"http://zhi.hu/BDXoI",qrcode:n(1127)},home:{url:"http://zhi.hu/BDXoI",qrcode:n(1127)},question:{url:"http://zhi.hu/BDXoI",qrcode:n(1127)}},m=function(e){Object(i.a)(n,e);var t=f(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"renderContent",value:function(){var e=this.props.type;return Object(s.b)(b.d,{className:"AppBanner",children:Object(s.b)("a",{className:"AppBanner-link",href:p[e].url,children:Object(s.c)("div",{className:"AppBanner-layout",children:[Object(s.b)("img",{className:"AppBanner-qrcode",src:p[e].qrcode,alt:"QR Code of Downloading Zhihu App"}),Object(s.c)("div",{className:"AppBanner-content",children:[Object(s.b)("div",{className:"AppBanner-title",children:"下载知乎客户端"}),Object(s.b)("div",{className:"AppBanner-description",children:"与世界分享知识、经验和见解"})]})]})})})}},{key:"render",value:function(){return this.props.currentUser?null:this.renderContent()}}]),n}(d.Component);m.propTypes={type:u.a.oneOf(Object.keys(p))},m.defaultProps={type:"unregistered"};t.a=Object(h.a)(m)},1305:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=n(12),o=Object.assign;function c(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"UsersFill24","data-old-api":"Users"},e),{className:"Zi Zi--Users"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M4.5 8A5.5 5.5 0 0110 2.5 5.5 5.5 0 0115.5 8a5.5 5.5 0 01-5.5 5.5A5.5 5.5 0 014.5 8zm-.602 7.738c.965-1.075 2.418-1.574 4.19-1.325 1.263.178 2.56.178 3.825 0 1.77-.249 3.224.25 4.189 1.325.628.7 1.212 1.69 1.657 2.656.442.961.78 1.973.868 2.733.07.6-.424 1.023-.927 1.023H2.3c-.503 0-.997-.423-.927-1.023.088-.76.426-1.772.868-2.733.444-.967 1.029-1.956 1.657-2.656zm12.312-2.046a.743.743 0 01-.309-.24.747.747 0 01.081-.995c.338-.335.655-.827.92-1.37.441-.906.652-1.98.59-3.065-.036-.607-.135-1.289-.302-1.782a.75.75 0 011.42-.48c.228.672.34 1.503.379 2.176.076 1.327-.178 2.658-.739 3.809a7.991 7.991 0 01-.594 1.028c.89.564 1.632 1.316 2.22 2.083.768 1.002 1.308 2.075 1.585 2.907a.75.75 0 11-1.423.474c-.223-.668-.682-1.595-1.352-2.468-.667-.87-1.507-1.643-2.476-2.077z",fillRule:"evenodd",clipRule:"evenodd"}))}},1320:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(0),a=n.n(r),i=n(12),o=Object.assign;function c(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"InfoCircleFill24","data-old-api":"InfoCircleFill24"},e),{className:"ZDI ZDI--InfoCircleFill24"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-13.68a1.11 1.11 0 100-2.22 1.11 1.11 0 000 2.22zm-.2 3.098a.07.07 0 01.02-.006h.007c.006.002.016.005.026.013.01.009.015.018.017.023l.002.008c0 .003 0 .009-.003.019l-1.152 4.507c-.312 1.224.941 2.264 2.132 1.77 0 0 1.09-.557 1.461-.848.371-.291.46-.478.334-.765-.168-.388-.542-.513-.928-.352l-1.457.604a.067.067 0 01-.018.006.03.03 0 01-.009 0 .058.058 0 01-.025-.014.057.057 0 01-.018-.022v-.004l-.001-.004.002-.019 1.152-4.507c.313-1.224-.849-2.388-2.131-1.77l-1.457.605c-.387.16-.594.534-.405.97.18.415.598.31 1.081.187l.077-.019 1.294-.382z",fillRule:"evenodd",clipRule:"evenodd"}))}function s(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"InfoCircleFill24","data-old-api":"Info"},e),{className:"Zi Zi--Info"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-13.68a1.11 1.11 0 100-2.22 1.11 1.11 0 000 2.22zm-.2 3.098a.07.07 0 01.02-.006h.007c.006.002.016.005.026.013.01.009.015.018.017.023l.002.008c0 .003 0 .009-.003.019l-1.152 4.507c-.312 1.224.941 2.264 2.132 1.77 0 0 1.09-.557 1.461-.848.371-.291.46-.478.334-.765-.168-.388-.542-.513-.928-.352l-1.457.604a.067.067 0 01-.018.006.03.03 0 01-.009 0 .058.058 0 01-.025-.014.057.057 0 01-.018-.022v-.004l-.001-.004.002-.019 1.152-4.507c.313-1.224-.849-2.388-2.131-1.77l-1.457.605c-.387.16-.594.534-.405.97.18.415.598.31 1.081.187l.077-.019 1.294-.382z",fillRule:"evenodd",clipRule:"evenodd"}))}},1323:function(e,t,n){"use strict";var r=n(47),a=n.n(r),i=n(24),o=n.n(i),c=n(0),s=n.n(c);var l={baidu_pc_js:function(e){var t=e.value,n=void 0===t?{}:t,r=n.className,a=n.adId,i=n.onLoad,l=Object(c.useState)("_".concat(Math.random().toString(36).slice(2))),u=o()(l,1)[0];function d(){var e;(e=document.getElementById("baidu-ad-js"))||((e=document.createElement("script")).setAttribute("src","//cpro.baidustatic.com/cpro/ui/cm.js"),e.setAttribute("defer","defer"),e.setAttribute("id","baidu-ad-js"),document.body.appendChild(e)),window.slotbydup=window.slotbydup||[],window.slotbydup.push({id:a,container:u,async:!0}),i&&i()}return Object(c.useEffect)((function(){d()}),[d]),s.a.createElement("div",{id:u,className:"".concat(u," ").concat(r)})},goole_pc_js:function(e){var t=e.value;return s.a.createElement("iframe",a()({},t,{title:"google广告"}))},maozhua_pc_js:function(e){var t=e.value,n=void 0===t?{}:t;return s.a.createElement("iframe",a()({},n,{title:"猫爪广告"}))},ruoying_pc_js:function(e){var t=e.value,n=void 0===t?{}:t;return s.a.createElement("iframe",a()({},n,{title:"若影广告"}))}};t.a=function(e){var t=e.template,n=l[t];return s.a.createElement(n,e)}},1338:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(4),a=n(999),i=n(153);function o(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var c=function(e){return{name:"description",property:"og:description",content:e}},s=function(e,t){var n=[];if(e&&e.content){var r=Object(a.c)(e.content,100);r&&n.push(c(r))}if(t){var i=t.map((function(e){return e.name})).join(",");i&&n.push({name:"keywords",content:i})}return n},l=function(e,t){var n=[];if(e&&e.detail){var i=Object(a.c)(e.detail,100);i&&n.push(c(i))}else t&&t.content&&n.push.apply(n,o(r.a,s(t)));if(e.topics){var l=e.topics.map((function(e){return e.name})).join(",");if(l){var u={name:"keywords",content:l};n.push(u)}}return n},u=function(e){if(e){var t=e.headline,n=void 0===t?"":t,r=e.answerCount,a=void 0===r?0:r,o=e.voteupCount,s=void 0===o?0:o,l="".concat(n," 回答数 ").concat(Object(i.formatNumber)(a),"，获得 ").concat(Object(i.formatNumber)(s)," 次赞同");return[c(l)]}return[]}},1414:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n(1128),a=(n(995),n(47)),i=n.n(a),o=n(0),c=n.n(o);n(1129),n(1131);n(1130);n(1054),n(1055),n(1056),n(1053);function s(e){return c.a.createElement("svg",i()({xmlns:"http://www.w3.org/2000/svg"},e,{viewBox:"0 0 12 10"}),c.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(-2 -3)"},c.a.createElement("rect",{width:"16",height:"16"}),c.a.createElement("rect",{width:"12",height:"2",x:"2",y:"3",fill:"#9FADC7",fillRule:"nonzero",rx:"1"}),c.a.createElement("rect",{width:"12",height:"2",x:"2",y:"7",fill:"#9FADC7",fillRule:"nonzero",rx:"1"}),c.a.createElement("rect",{width:"7",height:"2",x:"2",y:"11",fill:"#9FADC7",fillRule:"nonzero",rx:"1"})))}function l(e){return c.a.createElement("svg",i()({xmlns:"http://www.w3.org/2000/svg"},e,{viewBox:"0 0 12 12"}),c.a.createElement("path",{fill:"#9FADC7",d:"M3,2.66666667 L13,2.66666667 C13.5522847,2.66666667 14,3.11438192 14,3.66666667 L14,12.6600825 C14,13.2123673 13.5522847,13.6600825 13,13.6600825 C12.7827311,13.6600825 12.5713728,13.5893212 12.3979007,13.4585037 L8.60209931,10.596043 C8.24569125,10.3272712 7.75430875,10.3272712 7.39790069,10.596043 L3.60209931,13.4585037 C3.16114346,13.791034 2.53410906,13.7031377 2.2015788,13.2621819 C2.07076131,13.0887097 2,12.8773515 2,12.6600825 L2,3.66666667 C2,3.11438192 2.44771525,2.66666667 3,2.66666667 Z",transform:"translate(-2 -2)"}))}n(1169),n(1170),n(1171),t.c=r.a},1526:function(e,t,n){"use strict";var r=i(n(1527)),a=i(n(1245));function i(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:a.default,CSSTransitionGroup:r.default}},1527:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),i=l(n(3)),o=l(n(1245)),c=l(n(1531)),s=n(1250);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}s.nameShape.isRequired,i.default.bool,i.default.bool,i.default.bool,(0,s.transitionTimeout)("Appear"),(0,s.transitionTimeout)("Enter"),(0,s.transitionTimeout)("Leave");var b=function(e){function t(){var n,r;u(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=d(this,e.call.apply(e,[this].concat(o))),r._wrapChild=function(e){return a.default.createElement(c.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return a.default.createElement(o.default,r({},this.props,{childFactory:this._wrapChild}))},t}(a.default.Component);b.displayName="CSSTransitionGroup",b.propTypes={},b.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=b,e.exports=t.default},1528:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},1529:function(e,t,n){"use strict";e.exports=function(){}},1530:function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return r.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},a=[];for(var i in e)t.hasOwnProperty(i)?a.length&&(r[i]=a,a=[]):a.push(i);var o=void 0,c={};for(var s in t){if(r.hasOwnProperty(s))for(o=0;o<r[s].length;o++){var l=r[s][o];c[r[s][o]]=n(l)}c[s]=n(s)}for(o=0;o<a.length;o++)c[a[o]]=n(a[o]);return c};var r=n(0)},1531:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=b(n(1246)),i=b(n(1248)),o=b(n(1532)),c=n(1533),s=b(n(0)),l=b(n(3)),u=n(50),d=n(1250);function b(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=[];c.transitionEnd&&p.push(c.transitionEnd),c.animationEnd&&p.push(c.animationEnd);l.default.node,d.nameShape.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.number,l.default.number;var m=function(e){function t(){var n,r;h(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=f(this,e.call.apply(e,[this].concat(i))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,u.findDOMNode)(this);if(r){var o=this.props.name[e]||this.props.name+"-"+e,s=this.props.name[e+"Active"]||o+"-active",l=null,d=void 0;(0,a.default)(r,o),this.queueClassAndNode(s,r);var b=function(e){e&&e.target!==r||(clearTimeout(l),d&&d(),(0,i.default)(r,o),(0,i.default)(r,s),d&&d(),t&&t())};n?(l=setTimeout(b,n),this.transitionTimeouts.push(l)):c.transitionEnd&&(d=function(e,t){return p.length?p.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){p.length&&p.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}(r,b))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,o.default)((function(){return n.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,a.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=r({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,s.default.cloneElement(s.default.Children.only(this.props.children),e)},t}(s.default.Component);m.displayName="CSSTransitionGroupChild",m.propTypes={},t.default=m,e.exports=t.default},1532:function(e,t,n){"use strict";var r=n(1076);t.__esModule=!0,t.default=void 0;var a,i=r(n(1249)),o="clearTimeout",c=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),r=setTimeout(e,n);return l=t,r},s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some((function(e){var t=s(e,"request");if(t in window)return o=s(e,"cancel"),c=function(e){return window[t](e)}}));var l=(new Date).getTime();(a=function(e){return c(e)}).cancel=function(e){window[o]&&"function"==typeof window[o]&&window[o](e)};var u=a;t.default=u,e.exports=t.default},1533:function(e,t,n){"use strict";var r=n(1076);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var a,i,o,c,s,l,u,d,b,h,f,p=r(n(1249)),m="transform";if(t.transform=m,t.animationEnd=o,t.transitionEnd=i,t.transitionDelay=u,t.transitionTiming=l,t.transitionDuration=s,t.transitionProperty=c,t.animationDelay=f,t.animationTiming=h,t.animationDuration=b,t.animationName=d,p.default){var v=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},a=Object.keys(r),i="",o=0;o<a.length;o++){var c=a[o];if(c+"TransitionProperty"in n){i="-"+c.toLowerCase(),e=r[c]("TransitionEnd"),t=r[c]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:i}}();a=v.prefix,t.transitionEnd=i=v.transitionEnd,t.animationEnd=o=v.animationEnd,t.transform=m=a+"-"+m,t.transitionProperty=c=a+"-transition-property",t.transitionDuration=s=a+"-transition-duration",t.transitionDelay=u=a+"-transition-delay",t.transitionTiming=l=a+"-transition-timing-function",t.animationName=d=a+"-animation-name",t.animationDuration=b=a+"-animation-duration",t.animationTiming=h=a+"-animation-delay",t.animationDelay=f=a+"-animation-timing-function"}var O={transform:m,end:i,property:c,timing:l,delay:u,duration:s};t.default=O},1578:function(e,t,n){"use strict";n.d(t,"a",(function(){return Qe}));var r=n(1),a=n(189),i=n(471),o=n(2),c=n(35),s=n(886),l=n(3),u=n.n(l),d=n(0),b=n(21),h=n(263),f=n.n(h),p=n(51),m=n(33),v=n(95),O=n(456),j=n(502),g=n(41),y=n(31),w=n(132),C=[{value:"标点或格式错误",text:"标点或格式错误"},{value:"不构成提问",text:"不构成提问"},{value:"包含主观判断",text:"包含主观判断"},{value:"缺乏可信来源",text:"缺乏可信来源"},{value:"other",text:"其他"}],k=[{title:"为什么修改问题？",subtitle:"请选择修改理由"},{title:"修改问题",subtitle:"描述精确的问题更易得到解答"},{title:"其他",subtitle:"请对你的举报补充说明"}],A=u.a.shape({level:u.a.oneOf(["error","warning"]),text:u.a.string}),x=n(468);function R(e){if(!e)return"提交修改时发生未知错误";if("string"==typeof e)return e;var t=e.status,n=e.message,r=e.name;return n?Object(x.c)(n)?"提交修改时发生网络请求错误":n.startsWith("request http")?"提交修改时发生错误".concat(t?"："+t:""):"提交修改时发生错误：".concat(n):"提交修改时发生错误：".concat(r||"Unknown")}function N(e){var t=e.onSuccess,n=e.onFailure,r=Object(b.useSelector)((function(e){var t=e.notification;return t[y.c]||t.updateQuestion}));return Object(d.useEffect)((function(){if(r){var e=r.id,a=r.code,i=r.text;e?t(e):n(function(e,t){switch(e){case 103003:return["title",{level:"error",text:"已经存在的问题"}];case 103001:return["detail",{level:"error",text:"过长的补充说明"}];default:return["overall",{text:R(t)}]}}(a,i))}}),[r]),null}N.propTypes={onSuccess:u.a.func.isRequired,onFailure:u.a.func.isRequired};var S=n(912),T=n(913),B=n(914),E=n(297),I=n(481),z=n(37),q=n(59),Q=["children","css"],M=["children","css"],P=["children","css"],L=["before","after","headerLabel","headerRight","children"],_=function(e){var t=e.children,n=e.css,a=Object(z.default)(e,Q);return Object(r.b)(q.Flex,Object.assign(Object.assign({alignItems:"center",mb:"8px",color:"GBL05A",css:n},a),{},{children:t}))},D=function(e){var t=e.children,n=e.css,a=Object(z.default)(e,M);return Object(r.b)(q.Box,Object.assign(Object.assign({ml:"auto",css:n},a),{},{children:t}))},F=function(e){var t=e.children,n=e.css,a=Object(z.default)(e,P);return Object(r.b)(q.Text,Object.assign(Object.assign({as:"span",color:"GBK03A",css:n},a),{},{children:t}))},H=function(e){var t=e.before,n=e.after,a=e.headerLabel,i=e.headerRight,o=e.children,c=Object(z.default)(e,L),s=a||i;return Object(r.c)(q.Box,Object.assign(Object.assign({mb:"12px",css:{"& .Popover":{display:"block"},"& .TagInput":{lineHeight:0}}},c),{},{children:[t,s&&Object(r.c)(_,{children:[a&&Object(r.b)(F,{children:a}),i&&Object(r.b)(D,{children:i})]}),o,n]}))};H.Header=_,H.HeaderLabel=F,H.HeaderRight=D;var U=H,V=["children","level"],W={warning:"GYL01A",error:"GRD03A"},G=function(e){var t=e.children,n=e.level,a=Object(z.default)(e,V);return Object(r.b)(q.Text,Object.assign(Object.assign({as:"span",color:W[n]},a),{},{children:t}))},K=function(e){return Object(r.b)(i.a,{message:"一个未知的错误信息 ".concat(typeof e.children),children:Object(r.b)(G,Object.assign({},e))})},Z=G;function J(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Y=function(e){var t=e.onEditableRef,n=e.defaultValue,a=e.onChange,i=e.detailError,o=e.isAnonymous,s=Object(b.useDispatch)(),l=Object(d.useCallback)((function(){return s(y.h.apply(void 0,arguments))}),[s]),u=Object(d.useRef)(),h=Object(d.useState)(!1),f=J(c.a,h,2),p=f[0],m=f[1],v=Object(d.useCallback)((function(){u.current&&u.current.handleKeyCommand("insert-image")}),[]),O=Object(d.useCallback)((function(){u.current&&u.current.handleKeyCommand("insert-video")}),[]),j=Object(d.useCallback)((function(e,t){Object(x.b)(e,t,l,y.c)}),[l]),g=Object(d.useCallback)((function(e,t){switch(t){case"video":j("video-upload-error");break;case"image":j("image-upload-error",e)}}),[j]);return Object(r.c)(r.a,{children:[Object(r.b)(U,{mb:"16px",headerLabel:"问题描述（可选）：",headerRight:Object(r.c)(r.a,{children:[Object(r.b)(E.a,{label:"".concat(p?"收起":"展开","工具栏"),isActive:p,icon:S.a,onClick:function(){return m(!p)}}),Object(r.b)(E.a,{label:"插入图片",icon:T.a,onClick:v}),Object(r.b)(E.a,{label:"上传视频",icon:B.a,onClick:O})]}),marginTop:"24px",children:Object(r.b)(I.a,{ref:function(e){u.current=e,t&&t(e)},allowDragAndDrop:!0,allowLinkCard:!0,minRows:2,allowToolbar:p,allowVideoTitleChange:!0,allowHeaderThree:!1,placeholder:"问题背景、条件等详细信息",defaultValue:n,onError:j,onUploadError:g,onChange:a,onBeforeVideoUpload:function(){return!o},editingContentType:"question"})}),i&&Object(r.b)(U,{headerRight:Object(r.b)(Z,{level:i.level,children:i.text})})]})};Y.propTypes={onEditableRef:u.a.func,defaultValue:u.a.string,detailError:A,onChange:u.a.func.isRequired,isAnonymous:u.a.bool};var $=Y,X=n(917),ee=n(667),te=function(e){var t=e.onSelect,n=Object(ee.a)();return Object(r.b)("div",{children:C.map((function(e){return Object(r.c)("div",{css:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",lineHeight:"48px",boxShadow:"inset 0 -1px 0 0 ".concat(n.colors.GBK10A),"&:last-child":{marginBottom:"16px"}},role:"button",tabIndex:0,onClick:function(){return t(e.value)},children:[e.text,Object(r.b)(X.a,{css:{fill:n.colors.GBL05A}})]},e.value)}))})};te.propTypes={onSelect:u.a.func.isRequired};var ne=te,re=n(49),ae=n(144),ie=n(157),oe=function(e){var t=e.onInputRef,n=e.questionType,a=e.reason,i=e.otherReason,o=e.onReasonChange,c=e.onInputChange,s=e.reasonError,l=Object(ee.a)(),u=Boolean(!a&&s),d=Boolean("other"===a&&!i&&s);return Object(r.b)("div",{className:"EditQuestionReasonInput",children:Object(r.b)(U,{mb:"0",before:Object(r.c)(U.Header,{mb:"0",children:[Object(r.b)(ie.b,{css:{marginRight:"8px"},needsReposition:!0,plain:!0,text:a?null:"请选择一个修改理由",value:a,onChange:o,children:C.map((function(e){return Object(r.b)(ie.a,{value:e.value,text:e.text},e.value)}))}),u&&Object(r.b)(Z,{level:s.level,children:s.text}),!["org","commercial"].includes(n)&&Object(r.b)(U.HeaderRight,{children:Object(r.b)(re.Link,{className:"EditQuestion-whyEdit",target:"blank",to:"/question/19550238/answer/95068125",children:"为什么问题可以被公共编辑？"})})]}),children:"other"===a&&Object(r.b)(q.Box,{css:d&&{"& input::placeholder":{color:l.colors.GRD03A}},children:Object(r.b)(ae.a,{onRef:t,spread:!0,large:!0,value:i,placeholder:"请输入修改理由（必填）",onChange:c})})})})};oe.propTypes={onInputRef:u.a.func,questionType:u.a.string.isRequired,reason:u.a.string,otherReason:u.a.string,reasonError:A,onReasonChange:u.a.func,onInputChange:u.a.func};var ce=oe;function se(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var le=function(e){var t=e.onInputRef,n=e.title,a=e.onChange,i=e.onBlur,o=e.titleError,s=e.before,l=e.after,u=Object(d.useState)(!1),b=se(c.a,u,2),h=b[0],f=b[1],p=null;if(h){var m=51-n.length;m>=0?m<10&&(p="还可以输入 ".concat(m," 个字")):p=Object(r.c)(Z,{level:"error",children:["问题标题超出 ",-m," 个字"]})}else o&&(p=Object(r.b)(Z,{level:o.level,children:o.text}));var v=Object(d.useCallback)((function(e){f(!0),a&&a(e)}),[a]),O=Object(d.useCallback)((function(e){f(!1),i&&i(e)}),[i]),j=Object(d.useRef)();return Object(d.useEffect)((function(){setTimeout((function(){var e;return null===(e=j.current)||void 0===e?void 0:e.focus()}),60)}),[]),Object(r.c)(r.a,{children:[Object(r.b)(U,{children:Object(r.c)(q.Flex,{children:[s,Object(r.b)(ae.a,{css:{border:"0 none",fontSize:"15px"},onRef:function(e){j.current=e,t(e)},required:!0,multiline:!0,spread:!0,large:!0,rows:2,placeholder:"问题标题",value:n,onChange:v,onBlur:O}),l]})}),p&&Object(r.b)(U,{headerRight:p})]})};le.propTypes={onInputRef:u.a.func,title:u.a.string,titleError:A,onChange:u.a.func,onBlur:u.a.func};var ue=le,de=n(915),be=n(490),he=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.errors;if(!t||"title"===t){var a=e.title,i=null;0!==a.length||n?a.length>51?i={level:"error",text:"问题标题超出 ".concat(a.length-51," 个字")}:a.length>0&&a.length<3?i={level:"error",text:"问题字数太少了吧"}:a.length>0&&-1===a.indexOf("?")&&-1===a.indexOf("？")?i={level:"error",text:"你还没有给问题添加问号"}:(a.match(/(\?|？)/g)||[]).length>1&&(i={level:"warning",text:"多个问题建议拆分"}):i={level:"error",text:"问题标题不能为空"},r=Object.assign(Object.assign({},r),{},{title:i})}if(!t||"reason"===t){var o=e.reason,c=e.otherReason,s=null;o&&("other"!==o||c)||(s={level:"error",text:o?"必填":"必选"}),r=Object.assign(Object.assign({},r),{},{reason:s})}if((!t||"topics"===t)&&e.topics){var l=e.topics,u=null;0!==l.length||n||(u={level:"error",text:"至少添加一个话题"}),r=Object.assign(Object.assign({},r),{},{topics:u})}return r};function fe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var pe=function(e){var t=e.topic;return Object(r.b)(de.a,{css:{marginRight:"8px"},children:Object(r.b)("a",{target:"_blank",rel:"noopener noreferrer",href:"//www.zhihu.com/topic/".concat(t.id||t.urlToken),children:t.name})})};function me(e){var t=e.topics,n=void 0===t?[]:t,a=e.onChange,i=e.permitEditTopics,o=Object(d.useState)(null),s=fe(c.a,o,2),l=s[0],u=s[1],b=Object(d.useState)(n),h=fe(c.a,b,2),f=h[0],p=h[1],m=Object(d.useState)(!1),v=fe(c.a,m,2),O=v[0],j=v[1],g=Object(d.useCallback)((function(e){var t;p(e);var n=null===(t=he({topics:e},"topics"))||void 0===t?void 0:t.topics;u(n),a&&a(e,n)}),[a]);return Object(r.c)(U,{mb:"24px",children:[l&&Object(r.b)(Z,{as:"div",level:l.level,children:l.text}),i?Object(r.b)(be.a,{actived:O,value:f,onChange:g,onToggleActived:function(){return j(!O)}}):f.map((function(e){return Object(r.b)(pe,{topic:e},e.name)}))]})}me.propTypes={topics:u.a.arrayOf(u.a.object),onChange:u.a.func,permitEditTopics:u.a.bool};var ve=me,Oe=n(294),je=n.n(Oe);function ge(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ye="form.setInput",we="form.setState",Ce="form.setErrors",ke="ui.setState",Ae="reset",xe={step:0,title:"",detail:{toHTML:function(){return""}},topics:[],reason:C[0].value,otherReason:"",onceChanged:!1,videoQuestionConfirmShown:!1,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"",videoQuestionConfirmText:"",uploadModalShown:!1,errors:{title:null,detail:null,reason:null,topics:null}};function Re(e,t){var n=t.type,r=t.payload;switch(n){case ye:var a,i=ge(c.a,r,2),s=i[0],l=i[1];return Object.assign(Object.assign({},e),{},(a={},Object(o.a)(a,s,l),Object(o.a)(a,"onceChanged",function(e,t){var n=ge(c.a,t,2),r=n[0],a=n[1];if(e.onceChanged)return!0;var i=e[r];return"reason"===r?1===e.step&&e.reason===a:"topics"===r?!je()(a,i):i!==a}(e,r)),a));case we:return Object.assign(Object.assign({},e),r);case Ce:return Object.assign(Object.assign({},e),{},{errors:Object.assign(Object.assign({},e.errors),r)});case ke:var u=ge(c.a,r,2),d=u[0],b=u[1];return Object.assign(Object.assign({},e),{},Object(o.a)({},d,b));case Ae:return Object.assign({},xe);default:return e}}function Ne(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Se=function(e,t){var n=Object(d.useRef)();Object(d.useEffect)((function(){n.current=t}));var r=Object(d.useState)(e),a=Ne(c.a,r,2),i=a[0],o=a[1];return Object(d.useEffect)((function(){e!==i&&(n.current([e,i]),o(e))}),[e,i]),null},Te=function(e){var t=e.title,n=e.text,a=e.shown,i=e.allowConfirm,o=void 0===i||i,c=e.onSubmit,s=e.onClose,l=e.buttonText,u=void 0===l?{}:l;return Object(r.b)(v.b,{title:t,onClose:s,children:a&&Object(r.c)("div",{color:"GBK03A",css:{margin:"50px 16px 0",fontSize:"20px",textAlign:"center"},children:[n,Object(r.c)(v.a,{children:[o&&Object(r.b)(m.c,{preset:"primary",color:"blue",onClick:c,children:u.ok||"确认"}),Object(r.b)(m.c,{onClick:s,children:u.cancel||"取消"})]})]})})};Te.propTypes={title:u.a.string,text:u.a.string,shown:u.a.bool,allowConfirm:u.a.bool,onSubmit:u.a.func.isRequired,onClose:u.a.func.isRequired,buttonText:u.a.shape({ok:u.a.string,cancel:u.a.string})};var Be=Te;function Ee(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ie=function(e){return["title","reason","topics"].find((function(t){var n;return"error"===(null===(n=e[t])||void 0===n?void 0:n.level)}))};function ze(e){var t=e.onClose,n=e.show,a=e.id,i=e.title,l=e.detail,u=e.topics,h=e.questionType,C=e.isAnonymous,A=e.brand,x=e.permitEditTopics,R=Object(b.useSelector)(g.b),S=Object(b.useDispatch)(),T=Object(d.useCallback)((function(){return S(y.h.apply(void 0,arguments))}),[S]),B=Object(d.useState)((function(){return f()()})),E=Ee(c.a,B,1)[0],I=Object(p.l)().trackEvent,z=Object(d.useRef)({titleInput:null,editable:null,reasonInput:null}),q=function(e){var t;if("title"===e)null===(t=z.current.titleInput)||void 0===t||t.focus();else if("reason"===e){var n;null===(n=z.current.reasonInput)||void 0===n||n.focus()}},Q=Object(d.useReducer)(Re,Object.assign(Object.assign({},xe),{},{title:i,detail:l,topics:u})),M=Ee(c.a,Q,2),P=M[0],L=M[1],_=P.step,D=P.title,F=P.reason,H=P.otherReason,U=P.onceChanged,V=P.uploadModalShown,W=P.videoQuestionConfirmShown,G=P.videoQuestionConfirmAllowContinue,Z=P.videoQuestionConfirmTitle,J=P.videoQuestionConfirmText,Y=P.errors,X=Y.title,ee=Y.detail,te=Y.reason,re=Y.overall;Se(n,(function(e){Ee(c.a,e,1)[0]&&L({type:we,payload:{title:i,detail:{toHTML:function(){return l}},topics:u,onceChanged:!1}})}));var ae=Object(d.useCallback)((function(){L({type:Ae}),T("问题修改成功！"),t()}),[T,t]),ie=Object(d.useCallback)((function(e){var t=Ee(c.a,e,2),n=t[0],r=t[1];L({type:Ce,payload:Object(o.a)({},n,r)}),q(n)}),[]),oe=Object(d.useMemo)((function(){return Ie(Y)}),[Y]),se=Object(d.useCallback)((function(e){var t=e.target.value;L({type:ye,payload:["title",t]})}),[]),le=Object(d.useCallback)((function(){L({type:Ce,payload:he({title:D},"title")})}),[D]),de=Object(d.useCallback)((function(e){L({type:ye,payload:["detail",e]})}),[]),be=Object(d.useCallback)((function(e,t){L({type:ye,payload:["topics",e]}),L({type:Ce,payload:{topics:t}})}),[]),fe=Object(d.useCallback)((function(e){L({type:we,payload:{reason:e,step:1}}),"other"===e&&setTimeout((function(){return q("reason")}))}),[]),pe=Object(d.useCallback)((function(e){var t=e.target.value;L({type:ye,payload:["otherReason",t]}),"reason"===oe&&t&&L({type:Ce,payload:{reason:null}})}),[oe]),me=Object(d.useCallback)((function(){var e;null!==(e=z.current.editable)&&void 0!==e&&e.hasVideo("upload")?L({type:ke,payload:["uploadModalShown",!0]}):t()}),[t]),Oe=Object(s.a)((function(){var e=P.title,t=P.detail,n=P.topics,r=P.reason,i=P.otherReason,o={question:{title:e},meta:{reason:"other"===r?i:r}},c=t.toHTML();c!==l&&(o.question.detail=c),n!==u&&(o.question.topicUrlTokens=n.map((function(e){return e.urlToken||e.id}))),Object.keys(o.question).length>0&&S(Object(w.pb)(a,o)).then((function(){I({action:"Question",eventType:"Click",elementLocation:{type:"Button",moduleId:"published_successful",content:{type:"Question",token:String(a)}}},{configMap:{traceId:E}})}))}),1500,{leading:!0,trailing:!1}),je=function(){L({type:ke,payload:["videoQuestionConfirmShown",!1]})},ge=function(){L({type:ke,payload:["uploadModalShown",!1]})},Ne=Object(d.useCallback)((function(){ge(),t()}),[t]),Te=Boolean(!U||oe),ze=0===_,qe=ze?k[0]:{css:{width:"595px","& .Modal-content":{paddingBottom:re?0:"32px"}}};return Object(r.c)(r.a,{children:[Object(r.b)(N,{onSuccess:ae,onFailure:ie}),Object(r.b)(v.b,Object.assign(Object.assign({footer:re&&Object(r.b)(K,{level:"error",children:re.text}),onClose:me,hotKeyClosable:!1,maskClosable:!1},qe),{},{children:n&&(ze?Object(r.b)(ne,{onSelect:fe}):Object(r.c)("div",{className:"QuestionAsk",children:[Object(r.b)(j.a,{onClose:t,writeScene:{type:"question"}}),Object(r.b)(Be,{title:Z,text:J,shown:W,allowConfirm:G,onSubmit:function(){je(),Oe()},onClose:je,buttonText:{ok:"发布",cancel:"继续编辑"}}),Object(r.b)(Be,{text:"关闭弹窗将丢失上传中的视频内容",shown:V,onSubmit:Ne,onClose:ge}),Object(r.c)("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0,children:[Object(r.b)(ue,{onInputRef:function(e){return z.current.titleInput=e},title:D,onChange:se,onBlur:le,titleError:X,before:Object(r.b)(O.a,{isAnonymous:C,questionType:h,brand:A,css:{flexShrink:0,marginTop:"3px",marginRight:"16px"}})}),Object(r.b)($,{onEditableRef:function(e){return z.current.editable=e},defaultValue:l,onChange:de,detailError:ee,isAnonymous:C}),Object(r.b)(ve,{topics:u,onChange:be,permitEditTopics:x}),Object(r.b)(ce,{onInputRef:function(e){return z.current.reasonInput=e},questionType:h,reason:F,otherReason:H,reasonError:te,onReasonChange:fe,onInputChange:pe}),Object(r.b)(v.a,{css:{marginTop:re?"16px":"25px"},children:Object(r.b)(p.a,{as:m.c,zaType:"Button",zaText:!0,zaAction:"Question",zaModuleId:"published_button",extra:{configMap:{traceId:E,type:"Question",publish_type:"oldEdit"}},preset:"primary",color:"blue",disabled:Te,onClick:function(){var e=he(P);L({type:Ce,payload:e});var t=Ie(e);if(t)q(t);else{var n=z.current.editable;if(!function(e,t){return e.hasVideo("upload")?(t("请等待视频上传完成后发布","red",y.c),!0):!!e.hasImage("upload")&&(t("请等待图片上传完成后发布","red",y.c),!0)}(n,T)){var r=function(e,t){return e.hasVideo()&&!t.isOrg?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!0,videoQuestionConfirmText:"包含视频的编辑将在审核完成后生效，是否继续？"}:e.hasImage("error")||e.hasVideo("error")&&!e.hasVideo("error-review")?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"上传失败",videoQuestionConfirmText:"草稿中含有上传失败的内容，请更改后重新提交"}:e.hasVideo("error-review")||e.hasVideo("censor")?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"视频未通过审核",videoQuestionConfirmText:"视频中包含未通过审核的信息，请更改后重新提交"}:null}(n,R);r?L({type:we,payload:r}):Oe()}}},children:"提交修改"})})]})]}))}))]})}ze.propTypes={id:u.a.number,title:u.a.string,detail:u.a.string,topics:u.a.arrayOf(u.a.object),show:u.a.bool,onClose:u.a.func,isAnonymous:u.a.bool,brand:u.a.object,permitEditTopics:u.a.bool},ze.defaultProps={onClose:function(){}};var qe=ze;function Qe(e){return Object(r.b)(a.a,{children:Object(r.b)(i.a,{children:Object(r.b)(qe,Object.assign({},e))})})}},1588:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(1),a=n(51),i=n(0),o=n.n(i),c=n(52),s=Object.assign;var l=function(e){return o.a.createElement(c.a,s({width:"52",height:"60",fill:"none",viewBox:"0 0 52 60"},e),o.a.createElement("path",{fill:"#121212",d:"M28.052 54.284c-1.881 0-3.76.015-5.638 0a2.041 2.041 0 00-1.36.464 607.935 607.935 0 01-5.391 4.22 4.752 4.752 0 01-.834.539 1.566 1.566 0 01-2.15-1.844c.287-.885.573-1.764.893-2.631.19-.504.184-.716-.46-.816-2.357-.361-4.407-1.312-5.856-3.307a9.136 9.136 0 01-1.526-3.58c-.117-.572-.286-.546-.781-.38-.75.255-.94.681-.722 1.391.05.187.07.38.057.573a1.186 1.186 0 01-.967 1.237 1.146 1.146 0 01-1.395-.707c-.137-.31-.226-.501-.632-.49a1.21 1.21 0 01-1.203-.842c-.226-.555.017-.993.404-1.334.286-.263.286-.427.08-.75a1.229 1.229 0 01.286-1.718 1.175 1.175 0 011.652.243c.352.419.65.413 1.16.272 1.577-.438 2.368-1.305 2.388-3.04.017-1.486.415-2.96.592-4.447.19-1.577-.12-3.132-.309-4.687-.246-2.004-.572-4.008-.89-5.99-.163-1.067.527-1.755 1.589-1.574 1.343.223 1.325.22 1.506-1.146.269-2.027.54-4.051.859-6.07a1.323 1.323 0 00-.627-1.491c-2.374-1.638-3.568-4.052-4.06-6.835-.556-3.083.779-5.463 3.035-7.41C10.008.188 12.73-.199 15.592.082c1.612.138 3.19.556 4.66 1.234a6.373 6.373 0 012.577 2.072c.364.525.773.65 1.366.648 5.234-.02 10.465 0 15.696 0 2.13 0 4.097.495 5.775 1.875 2.448 2.004 3.341 4.644 3.07 7.73a2.295 2.295 0 01-.05.287c-.211 1.145-.252 1.987.86 2.975a5.4 5.4 0 01.463 7.381 16.1 16.1 0 01-2.64 2.694 1.59 1.59 0 00-.658 1.114c-.724 5.225-1.52 10.44-2.176 15.673-.647 5.191-4.089 9.18-9.08 10.307a13.87 13.87 0 01-3.192.238h-4.208l-.003-.026z"}),o.a.createElement("path",{fill:"#FEFEFE",d:"M14.872 57.128c.53-1.552.971-2.9 1.452-4.232.163-.453 0-.53-.4-.533-.86 0-1.719-.023-2.578-.083-1.614-.114-2.949-.839-4.094-1.95a1.63 1.63 0 01-.51-1.325c.055-1.117.075-2.236.075-3.353a.736.736 0 01.59-.83c.615-.178 1.216-.407 1.82-.622.53-.186.77-.572.61-1.114-.171-.572-.644-.638-1.145-.492-.386.109-.767.252-1.145.372-.484.155-.722 0-.71-.535.023-1.068 0-2.139.029-3.21.06-3.533-.396-7.02-.931-10.502-.023-.14-.052-.286-.066-.42-.054-.642.103-.791.727-.636 1.315.32 2.64.604 3.934.999 2.005.613 3.995.438 5.97-.12 2.365-.67 4.558-1.767 6.769-2.812a1.245 1.245 0 00.724-1.145c.086-1.257.192-2.514.286-3.768.058-.733.22-.86.897-.573 1.95.753 3.902 1.5 5.838 2.29.838.349 1.774.38 2.634.09 2.075-.67 4.017-1.695 6.02-2.537.894-.367.923-.367 1.29.55.638 1.586 1.245 3.183 1.923 4.755.23.533.095.833-.317 1.145a45.216 45.216 0 01-5.492 3.57c-1 .556-1.06.682-.859 1.822 1.005 5.483 1.46 11.026 1.867 16.575a1.45 1.45 0 01-.527 1.302c-1.958 1.793-4.263 2.577-6.903 2.577-3.722-.034-7.421 0-11.132 0a1.72 1.72 0 00-1.2.45c-1.723 1.414-3.516 2.78-5.446 4.295z"}),o.a.createElement("path",{fill:"#06F",d:"M38.851 18.987a3.811 3.811 0 00-.048-.438c-.34-1.406.043-2.505 1.23-3.401.702-.53.734-1.111.353-1.684-.38-.573-.936-.687-1.74-.286-.287.146-.359.086-.427-.19a1.897 1.897 0 00-.255-.572 1.123 1.123 0 00-1.369-.49 1.194 1.194 0 00-.83 1.275c.028.253.073.505.135.753-.439-.06-.828-.287-1.26-.104a1.189 1.189 0 00-.81.911 1.042 1.042 0 00.498 1.168c.47.286.962.513 1.457.745a.658.658 0 01.472.624c.03.784.092 1.569.16 2.348a.552.552 0 01-.392.65 3.398 3.398 0 01-2.811.06c-2.274-.96-4.581-1.821-6.892-2.712-1.165-.452-1.844-.034-1.955 1.206-.138 1.514-.287 3.029-.375 4.55a.97.97 0 01-.613.936c-2.156.996-4.312 2.004-6.671 2.436a7.73 7.73 0 01-3.25-.071c-.902-.212-1.792-.479-2.697-.668-.432-.088-.527-.286-.47-.681.338-2.306.664-4.612.977-6.918.051-.386.22-.5.572-.403a2.817 2.817 0 001.55-.029c.59-.157.981.055 1.394.438a9.752 9.752 0 003.85 2.22c.994.285 1.492-.133 1.298-1.146-.172-.885-.315-1.778-.533-2.654a1.199 1.199 0 01.4-1.312 21.19 21.19 0 003.31-4.008c.986-1.526 1.518-3.17 1.146-5.005-.1-.5.074-.607.541-.607 5.016.014 10.036 0 15.052.014 2.05 0 3.89.573 5.322 2.14 1.55 1.703 1.781 3.721 1.604 5.926-.115 1.412-.627 2.15-2.079 2.577-1.786.521-3.453 1.451-5.17 2.204a1.43 1.43 0 01-.674.198z"}),o.a.createElement("path",{fill:"#FEFEFE",d:"M17.928 18.369c-1.045-.361-1.773-1.045-2.506-1.718-.38-.35-.821-.573-1.354-.47-2.256.484-3.862-.704-5.28-2.167-1.775-1.835-2.64-4.112-2.27-6.646.395-2.7 3.238-5.193 5.987-5.471 2.206-.249 4.44.04 6.51.842 3.396 1.328 4.53 4.612 2.65 7.73a18.546 18.546 0 01-3.723 4.387 1.19 1.19 0 00-.441 1.371c.183.673.278 1.377.427 2.142z"}),o.a.createElement("path",{fill:"#06F",d:"M42.013 45.892a154.544 154.544 0 00-.917-9.388 72.47 72.47 0 00-.632-4.157.701.701 0 01.389-.86c1.01-.623 2.004-1.273 3.012-1.906.175-.109.355-.355.555-.238.2.118.106.433.078.653a1194.67 1194.67 0 01-.825 5.927c-.435 3.008-.877 6.017-1.326 9.027a1.65 1.65 0 01-.334.942z"}),o.a.createElement("path",{fill:"#B7B7B6",d:"M45.351 20.628c-.286-.287-.424-.47-.364-.719 0-.037.155-.089.166-.074.159.232.229.513.198.793z"}),o.a.createElement("path",{fill:"#121212",d:"M25.105 32.77c.029 1.146-.587 1.776-1.718 1.801-1.13.026-1.958-.738-1.966-1.872-.01-1.134.835-1.835 2.164-1.855 1.08-.015 1.477.503 1.52 1.926z"}),o.a.createElement("path",{fill:"#444",d:"M14.326 6.69c.206-.165.42-.318.644-.458a.965.965 0 011.414.352c.454.783.784 1.63.98 2.514.12.455-.212.518-.516.59-.303.071-.627.134-.722-.318-.111-.533-.206-1.074-.369-1.595-.094-.306-.157-.787-.676-.621-.475.149-.572.498-.372.962.22.527.375 1.076.59 1.603.26.641-.24.747-.621.873s-.9.407-1.117-.286a39.818 39.818 0 01-1.076-4.28c-.118-.573.312-.665.701-.782.39-.117.69-.054.807.418.086.346.09.719.333 1.028zm-3.207 4.217l1.145-.426c.23-.08.427-.058.53.197a.384.384 0 01-.057.452.385.385 0 01-.132.092c-.83.41-1.704.722-2.606.93-.535.113-.81-.285-.63-.858.264-.836.573-1.655.88-2.508-.398-.092-.74.114-1.094.2-.223.054-.43.089-.544-.172a.425.425 0 01.215-.601 5.775 5.775 0 012.56-.504c.497.023.66.407.506.885-.235.71-.478 1.426-.773 2.313zm7.753-1.852c-.346.051-.55-.115-.658-.467-.18-.573-.287-1.145-.427-1.718-.183-.716.25-.887.75-1.034.553-.163.684.255.822.645.137.39.303.859.452 1.271.301.845-.003 1.277-.939 1.303z"}),o.a.createElement("path",{fill:"#4A4B4A",d:"M18.045 3.666a.925.925 0 01.899.925.873.873 0 01-.934.893.86.86 0 01-.89-.901c.034-.582.39-.848.925-.917z"}))},u=function(e){var t=e.title,n=void 0===t?"快速登录，查看完整内容":t,i=e.zaBlock,o=void 0===i?"LoginPopupWithHeader":i;return Object(r.b)(a.f,{zaType:"Popup",zaText:n,zaBlock:o,children:Object(r.b)("div",{css:{background:"#EDF4FF",height:"50px"},children:Object(r.c)("div",{css:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:"50%",transform:"translateX(-50%)",height:"50px"},children:[Object(r.b)(l,{css:{marginRight:"16px",width:"51px",position:"relative",top:"-11px"}}),Object(r.b)("div",{css:{fontSize:"16px",fontWeight:"bold",textAlign:"center"},children:n})]})})})}},1593:function(e,t,n){"use strict";var r=n(15),a=n(16),i=n(18),o=n(19),c=n(9),s=n(1),l=n(0),u=n(21),d=n(901),b=n(228),h=n(307),f=n(132);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var m=function(e){Object(i.a)(n,e);var t=p(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={value:"",items:[]},e.handleChange=function(t){var n=e.props.dispatch;e.setState({value:t});var r=t.match(/^https:\/\/www.zhihu.com\/question\/(\d+)/);r?n(Object(f.X)(r[1])).then((function(t){var n=t.payload;e.setState({items:[{name:n.title,urlToken:n.id}]})})):Object(h.b)(t).then((function(t){e.setState({items:t})}))},e.handleSelect=function(t,n){var r=e.props,a=r.dispatch,i=r.question.id,o=r.onSubmitted,c=n.urlToken,s=a(Object(f.g)(i,c));o&&o({id:c},s)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.items;return Object(s.b)("div",{className:"QuestionRedirectionCreator",children:Object(s.b)("div",{className:"QuestionRedirectionCreator-content",children:Object(s.b)(b.b,{value:t,items:n,inputProps:{spread:!0,large:!0,after:Object(s.b)(d.a,{fill:"grey",size:20})},menuProps:{targetClassName:"QuestionRedirectionCreator-menu"},onChange:this.handleChange,onSelect:this.handleSelect})})})}}]),n}(l.Component);t.a=Object(u.connect)()(m)},1688:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(0),a=n.n(r),i=n(12),o=Object.assign;function c(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"UserPlusFill24","data-old-api":"UserPlusFill24"},e),{className:"ZDI ZDI--UserPlusFill24"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M5.5 7.5A5.5 5.5 0 0111 2a5.5 5.5 0 015.5 5.5A5.5 5.5 0 0111 13a5.5 5.5 0 01-5.5-5.5zm8.11 9.498c.404-.408.91-1 1.17-1.51.067-.133.13-.284.165-.442.034-.15.058-.373-.033-.602a.872.872 0 00-.545-.509 1.37 1.37 0 00-.604-.043c-.657.082-1.518.184-2.373.24-.867.055-1.68.058-2.254-.041-1.189-.204-2.045-.19-2.781.087-.722.272-1.25.773-1.804 1.302-1.533 1.462-2.434 3.311-2.65 4.831-.11.78.535 1.339 1.199 1.339h8.1a.96.96 0 00.955-.929c.06-1.767.7-2.96 1.456-3.723zm5.596-2.292a.706.706 0 00-1.412 0v2.588h-2.588a.706.706 0 000 1.412h2.588v2.588a.706.706 0 101.412 0v-2.588h2.588a.706.706 0 000-1.412h-2.588v-2.588z",fillRule:"evenodd",clipRule:"evenodd"}))}function s(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"UserPlusFill24","data-old-api":"Invite"},e),{className:"Zi Zi--Invite"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M5.5 7.5A5.5 5.5 0 0111 2a5.5 5.5 0 015.5 5.5A5.5 5.5 0 0111 13a5.5 5.5 0 01-5.5-5.5zm8.11 9.498c.404-.408.91-1 1.17-1.51.067-.133.13-.284.165-.442.034-.15.058-.373-.033-.602a.872.872 0 00-.545-.509 1.37 1.37 0 00-.604-.043c-.657.082-1.518.184-2.373.24-.867.055-1.68.058-2.254-.041-1.189-.204-2.045-.19-2.781.087-.722.272-1.25.773-1.804 1.302-1.533 1.462-2.434 3.311-2.65 4.831-.11.78.535 1.339 1.199 1.339h8.1a.96.96 0 00.955-.929c.06-1.767.7-2.96 1.456-3.723zm5.596-2.292a.706.706 0 00-1.412 0v2.588h-2.588a.706.706 0 000 1.412h2.588v2.588a.706.706 0 101.412 0v-2.588h2.588a.706.706 0 000-1.412h-2.588v-2.588z",fillRule:"evenodd",clipRule:"evenodd"}))}},1696:function(e,t,n){"use strict";var r=n(24),a=n.n(r),i=n(0),o=n(876);function c(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var s=function(e,t){var n=(e-t)/1e3;return{done:n<=0,days:Math.floor(n/86400),hours:Math.floor(n/3600%24),minutes:Math.floor(n/60%60),seconds:Math.floor(n%60),get now(){return new Date(t)}}};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.start,r=t.interval,l=void 0===r?1e3:r,u=t.onTick,d=Object(i.useRef)(n||Date.now()),b=Object(i.useRef)(e),h=Object(i.useState)((function(){return s(b.current,d.current)})),f=c(a.a,h,2),p=f[0],m=f[1],v=Object(i.useRef)();return Object(i.useEffect)((function(){v.current=Date.now(),d.current=n||Date.now(),b.current=e,m(s(b.current,d.current))}),[Number(e),Number(n)]),Object(o.a)((function(){var e=Date.now()-v.current,t=s(b.current,+d.current+e);m(t),u&&u(t)}),p.done?null:l),p}},1726:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(0),a=n.n(r),i=n(12),o=Object.assign;function c(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"TextPencil24","data-old-api":"TextPencil24"},e),{className:"ZDI ZDI--TextPencil24"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M4 12.25a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zm0-7.5A.75.75 0 014.75 4h14.5a.75.75 0 010 1.5H4.75A.75.75 0 014 4.75zm0 14.5a.75.75 0 01.75-.75h5.5a.75.75 0 010 1.5h-5.5a.75.75 0 01-.75-.75zm15.808-9.941a.751.751 0 01.412.978l-2.63 6.394a.749.749 0 01-.98.404.751.751 0 01-.41-.979l2.629-6.393a.749.749 0 01.98-.404zm-3.822 9.394a.751.751 0 01.426.973l-.236.6a.749.749 0 01-.974.42.751.751 0 01-.426-.973l.237-.6a.749.749 0 01.973-.42z",fillRule:"evenodd",clipRule:"evenodd"}))}function s(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"TextPencil24","data-old-api":"Preview"},e),{className:"Zi Zi--Preview"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M4 12.25a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zm0-7.5A.75.75 0 014.75 4h14.5a.75.75 0 010 1.5H4.75A.75.75 0 014 4.75zm0 14.5a.75.75 0 01.75-.75h5.5a.75.75 0 010 1.5h-5.5a.75.75 0 01-.75-.75zm15.808-9.941a.751.751 0 01.412.978l-2.63 6.394a.749.749 0 01-.98.404.751.751 0 01-.41-.979l2.629-6.393a.749.749 0 01.98-.404zm-3.822 9.394a.751.751 0 01.426.973l-.236.6a.749.749 0 01-.974.42.751.751 0 01-.426-.973l.237-.6a.749.749 0 01.973-.42z",fillRule:"evenodd",clipRule:"evenodd"}))}},1761:function(e,t,n){"use strict";(function(e){var r=n(15),a=n(16),i=n(18),o=n(19),c=n(9),s=n(1),l=n(0),u=n(21),d=n(2836),b=n(132),h=n(198);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var p=function(t){Object(i.a)(o,t);var n=f(o);function o(){var t;Object(r.a)(this,o);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(t=n.call.apply(n,[this].concat(i))).getTrackUrls=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.props,i=a.pageType,o=a.advancedStyle,c=o.viewTracks,s=o.clickTracks,l="view"===n?c:s,u=Object.assign({},{eru:encodeURIComponent(e.location.href),ct:1,pt:"question"===i?1:2,rt:1},r),d=Object.keys(u).map((function(e){return"&".concat(e,"=").concat(u[e])})).join("");return l.map((function(e){return"".concat(e).concat(d)}))},t.handleViewTrack=function(e){t.getTrackUrls("view",e).forEach(h.c)},t.handleClickTrack=function(e){t.getTrackUrls("click",e).forEach(h.c)},t}return Object(a.a)(o,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.questionId;(0,e.loadBrandQuestionAdvancedStyle)(t)}},{key:"componentDidUpdate",value:function(e){var t=e.advancedStyle,n=(t=void 0===t?{}:t).cardType,r=this.props,a=r.advancedStyle,i=(a=void 0===a?{}:a).cardType,o=r.onLoad;!n&&i&&"function"==typeof o&&o()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.advancedStyle;return n&&n.id?Object(s.b)(d.a,{brand:t,advancedStyle:n,handleViewTrack:this.handleViewTrack,handleClickTrack:this.handleClickTrack,isMobileView:!1}):null}}]),o}(l.Component);t.a=Object(u.connect)((function(e){var t=e.question;return{brand:t.brand,advancedStyle:t.advancedStyle}}),{loadBrandQuestionAdvancedStyle:b.I})(p)}).call(this,n(133))},2160:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=n(12),o=Object.assign;function c(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Ebook24","data-old-api":"Ebook"},e),{className:"Zi Zi--Ebook"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M16 17.649V2.931a.92.92 0 00-.044-.283.943.943 0 00-1.183-.604L4.655 5.235A.932.932 0 004 6.122v14.947c0 .514.421.931.941.931H19.06c.52 0 .941-.417.941-.93V7.292a.936.936 0 00-.941-.931h-.773v12.834a.935.935 0 01-.83.924L6.464 21.416c-.02.002 2.94-.958 8.883-2.881a.932.932 0 00.653-.886z",fillRule:"evenodd",clipRule:"evenodd"}))}},2293:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1228),a=n(60);function i(e){return Object(a.a)(1,arguments),Object(r.a)(e,Date.now())}},2294:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1228),a=n(528),i=n(60);function o(e){return Object(i.a)(1,arguments),Object(r.a)(e,Object(a.a)(Date.now(),1))}},2311:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(0),a=n.n(r),i=n(12),o=Object.assign;function c(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"TimeArrow24","data-old-api":"TimeArrow24"},e),{className:"ZDI ZDI--TimeArrow24"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M19.537 9.269C18.414 6.34 15.532 4.25 12.146 4.25 7.773 4.25 4.25 7.732 4.25 12s3.523 7.75 7.896 7.75c3.663 0 6.734-2.446 7.63-5.75a.75.75 0 011.448.393c-1.073 3.956-4.736 6.857-9.078 6.857-5.177 0-9.396-4.13-9.396-9.25s4.219-9.25 9.396-9.25a9.433 9.433 0 017.394 3.543V5.5a.75.75 0 011.5 0V9a.75.75 0 01-.773.75.75.75 0 01-.73-.481z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{d:"M14.437 14.622a.75.75 0 10.86-1.229L12.75 11.61V8.5a.75.75 0 00-1.5 0V12c0 .26.119.48.32.614l2.867 2.008z"}))}function s(e){return a.a.createElement(i.a,o(o({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"TimeArrow24","data-old-api":"Later"},e),{className:"Zi Zi--Later"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M19.537 9.269C18.414 6.34 15.532 4.25 12.146 4.25 7.773 4.25 4.25 7.732 4.25 12s3.523 7.75 7.896 7.75c3.663 0 6.734-2.446 7.63-5.75a.75.75 0 011.448.393c-1.073 3.956-4.736 6.857-9.078 6.857-5.177 0-9.396-4.13-9.396-9.25s4.219-9.25 9.396-9.25a9.433 9.433 0 017.394 3.543V5.5a.75.75 0 011.5 0V9a.75.75 0 01-.773.75.75.75 0 01-.73-.481z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{d:"M14.437 14.622a.75.75 0 10.86-1.229L12.75 11.61V8.5a.75.75 0 00-1.5 0V12c0 .26.119.48.32.614l2.867 2.008z"}))}},2417:function(e,t,n){e.exports=n.p+"assets/placeholder.765f50e5.svg"},2418:function(e,t,n){e.exports=n.p+"assets/empty.2df52de0.png"},2836:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(1),a=n(13),i=n.n(a),o=n(461),c=n(920),s=n(154),l=n(997),u=n(32),d={question:"提问",answer:"回答",post:"文章",live:"Live",ebook:"电子书"},b=function(e){var t=e.src,n=e.style;return Object(r.b)("div",{className:"AdvancedViewer-imgField",style:Object.assign(Object.assign({},n),t?{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"center"}:{})})};function h(e){var t=e.isMobileView,n=e.advancedStyle,a=(n=void 0===n?{}:n).cardType,i=n.url,c=n.material,s=e.handleViewTrack,h=e.handleClickTrack;if(null==c||!c.length)return null;var f=function(e){return"function"==typeof h?{onClick:function(){h(e)}}:{}},p=function(e,t){return Object(r.c)("a",Object.assign(Object.assign({className:"AdvancedViewer-commodityItem",target:"_blank",rel:"noopener noreferrer",href:i},f({etu:i,pi:t+1})),{},{children:[Object(r.b)("img",{src:e.image,alt:""}),e.mainTitle&&Object(r.c)("div",{className:"AdvancedViewer-commodityIntro",children:[Object(r.b)("span",{className:"AdvancedViewer-mainTitle",children:e.mainTitle}),Object(r.b)("span",{className:"AdvancedViewer-subTitle",children:e.subTitle})]})]}),"AdvancedViewer-commodity-".concat(t))};if("image"===a)return Object(r.b)("a",Object.assign(Object.assign({className:"AdvancedViewer-material AdvancedViewer-image",target:"_blank",rel:"noopener noreferrer",href:i},f({etu:i})),{},{children:Object(r.b)(b,{src:c[0].image,style:t?{width:375,height:156.25}:{}})}));if("image_text"===a)return Object(r.c)("a",Object.assign(Object.assign({className:"AdvancedViewer-material AdvancedViewer-imageText",target:"_blank",rel:"noopener noreferrer",href:i},f({etu:i})),{},{children:[t&&Object(r.b)("div",{className:"AdvancedViewer-intro",children:c[0].intro}),Object(r.b)(b,{src:c[0].image}),!t&&Object(r.b)("div",{className:"AdvancedViewer-intro",children:c[0].intro})]}));if("commodity"===a)return c.length&&Object(r.b)("div",{className:"AdvancedViewer-material AdvancedViewer-commodity",children:t?c.map(p):Object(r.b)(l.a,{items:c,renderItem:p})});if("recommended"===a){var m=function(e,t){return Object(r.c)("a",Object.assign(Object.assign({className:"AdvancedViewer-recommendedItem",href:e.url,target:"_blank",rel:"noopener noreferrer"},f({etu:e.url,pi:t+1})),{},{children:[Object(r.c)("div",{className:"AdvancedViewer-summary",children:[Object(r.c)("div",{className:"AdvancedViewer-wrap",children:[Object(r.b)("div",{className:"AdvancedViewer-title",children:e.title}),e.intro&&Object(r.b)("div",{className:"AdvancedViewer-desc",children:e.intro.replace(/<[\s\S]*?>/g,"")})]}),Object(r.c)("span",{className:"AdvancedViewer-data",children:[d[e.type]," · ",e.statisticText]})]}),Object(r.b)(b,{src:e.image||u.o})]}))};return Object(r.b)("div",{className:"AdvancedViewer-material AdvancedViewer-recommended",children:c.map((function(e,t){return s?Object(r.b)(o.a,Object.assign(Object.assign({},(n={pi:t+1},"function"==typeof s?{onChange:function(e,t){e.isIntersecting&&(t.disconnect(),s(n))}}:{})),{},{children:m(e,t)}),t):m(e,t);var n}))})}return null}function f(e){var t,n=e.isMobileView,a=e.brand,l=a.name,u=a.logo,d=e.advancedStyle,b=(d=void 0===d?{}:d).brandRecommendText,f=d.buttonText,p=d.url,m=d.cardType,v=e.handleViewTrack,O=e.handleClickTrack,j=function(e){return"function"==typeof O?{onClick:function(){O(e)}}:{}},g=l&&l.charCodeAt(l.length-1),y=g>=0&&g<=128?"".concat(l," "):l,w=n&&"recommended"!==m,C=b||"".concat(y,"的品牌推荐"),k=Object(r.c)(c.d,{className:i()("AdvancedViewer",{"is-mobile":n}),children:[!w&&Object(r.b)(c.b,{className:"AdvancedViewer-header",children:Object(r.b)("span",{className:"AdvancedViewer-headerText",children:C})}),Object(r.b)("div",{className:"AdvancedViewer-content",children:Object(r.b)(h,Object.assign({},e))}),!n&&m&&"recommended"!==m&&Object(r.b)("div",{className:"AdvancedViewer-footer",children:Object(r.b)(s.a,Object.assign(Object.assign({className:"AdvancedViewer-button",target:"_blank",to:p},j({etu:p})),{},{children:f||"了解更多"}))}),w&&Object(r.c)("div",{className:"AdvancedViewer-footer",children:[Object(r.c)("div",{className:"AdvancedViewer-brand",children:[Object(r.b)("img",{className:"AdvancedViewer-logo",src:u,alt:""}),Object(r.b)("span",{className:"AdvancedViewer-brandName",children:C})]}),Object(r.b)(s.a,Object.assign(Object.assign({className:"AdvancedViewer-button",target:"_blank",to:p},j({etu:p})),{},{children:f||"查看详情"}))]})]});return v?Object(r.b)(o.a,Object.assign(Object.assign({},"function"==typeof v?{onViewed:function(){v(t)}}:{}),{},{children:k})):k}},2982:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(49),i=n(35),o=n(40),c=n.n(o),s=n(68),l=n(15),u=n(16),d=n(18),b=n(19),h=n(9),f=n(190),p=n.n(f),m=n(3),v=n.n(m),O=n(0),j=n.n(O),g=n(122),y=n(21),w=n(59),C=n(20),k=n(51),A=n(433),x=n(156),R=n(1366),N=n(97),S=n(2417),T=n.n(S);var B=function(){return Object(r.b)(N.a,{title:"该内容仅作者可见",subtitle:"",errorImage:T.a})},E=n(132),I=n(221),z=Object(r.b)(g.a,{meta:[{name:"robots",content:"noindex"}]}),q=Object(C.compose)(Object(I.a)(null))((function(e){var t=e.entity,n=t.type,a=t.id,i=t.isCollapsed,o=t.suggestEdit,c=void 0===o?{}:o,s=t.adminClosedComment,l="";"question"===n?l=a:"answer"===n&&(l=t.question.id);var u=Object(y.useSelector)((function(e){return Object(E.db)(e,{id:l})}));if(u){var d=u.status,b=u.adminClosedComment,h=u.isMuted,f=u.visibleOnlyToAuthor;if(null!=d&&d.isClose||null!=d&&d.isSuggest||null!=d&&d.isEvaluate||b||h||f)return z}return"question"===n&&u.redirection?Object(r.b)("link",{rel:"canonical",href:"https://www.zhihu.com/question/".concat(u.redirection.to.id)}):"answer"===n&&(null!=c&&c.status||i||s)||"article"===n&&(null!=c&&c.status||s)?z:""})),Q=n(1365),M=n(126),P=n(1338),L=n(215),_=n(92),D=n(41),F=n(31),H=n(612),U=n(110),V=n(1588),W=function(e){var t=e.pageInfo;return Object(k.i)(t),null},G=n(1840),K=function(e){var t=e.isQAPage,n=void 0!==t&&t,a=e.children,i=Object(y.useSelector)((function(e){return e.env.userAgent.GoogleBot}));return n&&i?Object(r.b)("div",{itemScope:!0,itemType:"https://schema.org/QAPage",children:a}):Object(r.b)(r.a,{children:a})},Z=n(158),J=n(582),Y=n.n(J);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var X=function(e){Object(d.a)(n,e);var t=$(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={time:e.props.seconds},e.handleClearInterval=function(){e.interval&&clearInterval(e.interval)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.setState({time:e.state.time-1},(function(){if(0===e.state.time){e.handleClearInterval();var t=e.props.id;location.href="/question/".concat(t)}}))}),1e3)}},{key:"componentWillUnmount",value:function(){this.handleClearInterval()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.destination,a=this.state.time;return Object(r.b)(Z.b,{title:t,subtitle:"".concat(a," 秒后自动跳转至").concat(n),errorImage:Y.a})}}]),n}(O.Component);X.defaultProps={seconds:5,destination:"回答所在的问题页",title:"该回答已被删除"};var ee=n(1187),te=n(216),ne=n(220),re=n.n(ne),ae=n(33),ie=n(1454),oe=n(289),ce=n(262),se=n(25),le=n(13),ue=n.n(le),de=n(972),be=n(1173),he=n(989),fe=n(189),pe=n(1289),me=n(1845),ve=n(2),Oe=n(172),je=n(436),ge="SpecialQuestionAuthor";function ye(e){var t=e.author,n=e.className,i=e.isMobile,o=t.avatarUrl,c=t.name,s=t.badge,l=t.badgeV2;return Object(r.b)("div",{className:ue()("".concat(ge,"-Wrapper"),n),children:Object(r.c)(a.Link,{className:ue()("".concat(ge),Object(ve.a)({},"ROOT_CLASS--mobile",i)),to:"/".concat(t.isOrg?"org":"people","/").concat(t.urlToken||t.id),children:[Object(r.b)(Oe.a,{size:i?22:28,url:o,alt:c,round:!0}),Object(r.b)("span",{className:"".concat(ge,"-Author"),children:t.name}),Object(r.b)(je.c,{className:"".concat(ge,"-Badge"),badge:l||s,size:i?16:18}),Object(r.b)("span",{className:"".concat(ge,"-Suffix"),children:"的提问"})]})})}ye.propTypes={author:v.a.object.isRequired,isMobile:v.a.bool};var we=n(1237),Ce=n(532),ke=(n(1320),n(480)),Ae=n(926),xe=n(43),Re=n.n(xe),Ne=n(937);function Se(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Te(e){var t=e.question,n=e.isAuthorCurrentUser,a=e.hasExtraContent,o=t.author,c=Object(O.useState)(!1),s=Se(i.a,c,2),l=(s[0],s[1],Object(O.useRef)(),Object(O.useRef)());return Object(O.useEffect)((function(){;""}),[n]),Object(O.useEffect)((function(){Object(Ae.onViewedOnce)(l.current,(function(){se.a.trackCardShow(l.current,{id:7064})}))}),[]),Object(r.c)("div",{className:ue()("QuestionAuthor",{"QuestionAuthor--hasExtraContent":a}),ref:l,children:[Object(r.b)(Ne.a,{preset:"plain",author:o,zaId:7063,zaExtra:{link:{url:"//www.zhihu.com/people/".concat(o.urlToken)}},noHeadline:!0}),""]})}var Be=n(37),Ee=n(153),Ie=n(143),ze=n(933),qe=n(922),Qe=n(52),Me=Object.assign;var Pe,Le=function(e){return j.a.createElement(Qe.a,Me({width:"99",height:"99",viewBox:"0 0 99 99"},e),j.a.createElement("path",{fill:"currentColor",d:"M118.269 98.6a4.063 4.063 0 01-2.54-.893L69.501 60.79l-44.83 36.055a4.06 4.06 0 01-4.972.1 4.2 4.2 0 01-1.419-4.834L29.43 61.626c.801-2.153 3.175-3.234 5.29-2.423 2.12.812 3.191 3.216 2.39 5.366l-5.897 16.387 35.73-28.735a4.053 4.053 0 015.09-.008l38.454 30.708-13.8-45.548a4.2 4.2 0 011.421-4.524L129.74 8.185H97.734L51.044 41.93A4.068 4.068 0 0145.31 41c-1.33-1.863-.918-4.466.917-5.815L93.995.648a4.067 4.067 0 012.408-.79h45.412a4.11 4.11 0 013.887 2.823 4.2 4.2 0 01-1.385 4.64L105.371 37.69l16.82 55.522a4.193 4.193 0 01-1.6 4.658 4.066 4.066 0 01-2.322.73M16.219 18.143a3.63 3.63 0 01-2.935-1.468c-1.16-1.577-.784-3.772.834-4.9L30.328.514c1.62-1.13 3.869-.765 5.028.812 1.16 1.577.785 3.772-.834 4.9L18.314 17.488a3.669 3.669 0 01-2.095.655M32.28 29.114a3.46 3.46 0 01-2.005-6.277L84.62-15.959a3.45 3.45 0 014.815.814 3.46 3.46 0 01-.812 4.822L34.28 28.474a3.435 3.435 0 01-2 .64M3.407 7.171c-1.053 0-2.092-.53-2.757-1.53-1.104-1.655-.764-3.97.757-5.17l2.202-1.737c1.52-1.2 3.648-.831 4.751.823 1.104 1.656.764 3.971-.757 5.171L5.4 6.466a3.204 3.204 0 01-1.994.705",fillRule:"evenodd"}))},_e=["questionId","isInAnswerPage"];function De(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Fe=function(e){var t,n=e.items,a=null==n||null===(t=n[0])||void 0===t?void 0:t.image;return Object(r.b)(w.Box,{css:function(e){return{flex:"0 0 44px",borderRadius:"4px",position:"relative","::after":{content:'""',position:"absolute",top:4,bottom:4,borderRadius:"inherit",right:"-4px",background:"".concat(e.colorMod(e.colors.GBK09A).alpha(.8)),width:"10px",zIndex:0}}},children:Object(r.b)(ze.a,{bg:"GBK09C",ratio:1,css:{zIndex:1},children:a&&Object(r.b)(w.Image,{size:"100%",src:Object(Ie.imgUrl)(a,"100w"),css:{borderRadius:"inherit",objectFit:"cover"}})})})},He=function(e){return[{width:"33px",right:"10px",zIndex:3},{width:"29px",right:"5px",zIndex:2},{width:"24px",right:0,zIndex:1}][e]},Ue=function(e){var t=e.items,n=null==t?void 0:t.map((function(e){return e.image}));return Object(r.b)(w.Box,{css:{flex:"0 0 44px",borderRadius:"4px"},children:Object(r.b)(ze.a,{ratio:1,children:(null==n?void 0:n.length)>0&&n.map((function(e,t){return Object(r.b)(w.Box,{css:Object.assign({borderRadius:"inherit",position:"absolute",bottom:0},He(t)),children:Object(r.b)(ze.a,{bg:"GBK09C",ratio:3/4,css:{zIndex:1},children:e&&Object(r.b)(w.Image,{size:"100%",src:Object(Ie.imgUrl)(e,"100w"),css:{borderRadius:"inherit",objectFit:"cover",boxShadow:"0.5px 0 2px 0 rgba(0, 0, 0, 0.1)"}})})},t)}))})})},Ve=function(e){var t=e.questionId,n=e.isInAnswerPage,a=Object(Be.default)(e,_e),o=Object(y.useSelector)((function(e){return Object(E.eb)(e,t)})),c=Object(y.useDispatch)(),s=Object(we.b)(),l=De(i.a,s,3),u=l[0],d=l[1],b=l[2];if(Object(O.useEffect)((function(){o||c(Object(E.Y)(t)).catch(b)}),[o,t,b,c]),Object(O.useEffect)((function(){o&&("not found"!==o.message?d():b())}),[o,b,d]),!o||"not found"===o.message||!u)return null;var h=o.name,f=o.num,p=o.upvoteNum,m=o.rankFieldType,v=o.items,j=o.urlToken,g=2===m,C=g?Ue:Fe;return Object(r.b)(A.a,{module:"Content",view:{id:8766,name:n?"answer":"question"},content:{token:j,parent_token:String(t)},trackCardShow:!0,children:Object(r.b)(k.b,{content:{type:"Topic",token:String(j)},children:Object(r.b)(k.f,{zaText:!0,shouldTrackClick:!0,as:"div","data-za-extra":JSON.stringify({button:{text:h}}),css:{position:"relative",zIndex:0},zaType:"Card",zaAction:"OpenUrl",zaBlock:"blueStar_questionPage_detailCard",zaEventType:"Click",extra:{link:{url:"https://www.zhihu.com/blue-star/ranking/".concat(j,"?origin_from=").concat(n?"answer":"question")}},children:Object(r.c)(w.Flex,Object.assign(Object.assign({as:qe.a,my:"14px",py:"8px",px:"12px",alignItems:"center",css:function(e){return{backgroundImage:"linear-gradient(to left, ".concat(e.colorMod(e.colors.GBL01A).alpha(.1),", ").concat(e.colorMod(e.colors.GBL01A).alpha(.04),")"),backgroundColor:e.colors.GBK99C,borderRadius:"5px",position:"relative",overflow:"hidden"}},"data-za-detail-view-id":"8767","data-za-detail-view-name":n?"answer":"question","data-za-extra":JSON.stringify({button:{text:h}}),href:"https://www.zhihu.com/blue-star/ranking/".concat(j,"?origin_from=").concat(n?"answer":"question")},a),{},{children:[Object(r.b)(Le,{css:function(e){return{position:"absolute",width:"40.5px",height:"49.5px",top:-5,right:-1,color:e.colors.GBK99A}}}),Object(r.b)(C,{items:v}),Object(r.c)(w.Flex,{ml:"14px",alignItems:"center",children:[Object(r.b)(w.Text,{color:"GBK02A",fontWeight:"bold",css:{fontSize:"17px",lineHeight:"18px"},children:"小蓝星 · ".concat(h)}),Object(r.b)(w.Text,{color:"GBK05A",css:{fontSize:"14px",lineHeight:"16px",marginLeft:"10px"},children:g?re()(Pe||(Pe=Object(te.a)(["收录",""," · ","知友推荐"])),Object(Ee.cnNiceNumber)(f),g?"部影视":"个商品",Object(Ee.cnNiceNumber)(p)):"来自知友的真实反馈"})]})]}))})})})},We=n(915),Ge=n(1037);function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Ze=function(e){Object(d.a)(n,e);var t=Ke(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.item;return Object(r.b)(We.a,{className:"QuestionTopic",children:Object(r.b)(Ge.a,{noHoverCard:!1,topic:e})})}}]),n}(O.Component),Je=Object(A.b)((function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}}))(Ze),Ye=n(1578),$e=n(1123),Xe=n(962),et=n(1103),tt=n(999),nt=n(1212),rt=["text"],at=function(e){var t=e.text,n=Object(Be.default)(e,rt);return Object(r.b)(ae.c,Object.assign(Object.assign({preset:"plain"},n),{},{icon:nt.a,label:t||"修改"}))};function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var ot=function(e){Object(d.a)(n,e);var t=it(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.tips;return Object(r.b)("div",{className:"QuestionReviewInfo",children:Object(r.b)("p",{children:e})})}}]),n}(O.PureComponent);function ct(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}ot.propsTypes={tips:v.a.string};function st(e){var t,n,a=e.html,o=e.excerpt,c=e.thumbnailInfo,s=e.collapsed,l=e.onExpand,u=e.editable,d=e.onEdit,b=e.hideWatermark,h=o.length<a.length,f=(h||o.length>=75)&&s,p=Object(O.useMemo)((function(){var e;return null==c||null===(e=c.thumbnails)||void 0===e?void 0:e.find((function(e){return"video"===e.type}))}),[c]),m=null==c||null===(t=c.thumbnails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url,v=Object(O.useState)(null),j=ct(i.a,v,2),g=j[0],y=j[1];return Object(r.b)("div",{css:{minHeight:"10px"},children:Object(r.c)("div",{className:ue()("QuestionRichText",{"QuestionRichText--expandable":h,"QuestionRichText--collapsed":s,"QuestionRichText--video":p&&s}),onClick:function(e){f&&"function"==typeof l&&l(e);var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&y(t)},children:[p&&s&&Object(r.b)("div",{className:"QuestionRichText--wrapImgae",children:Object(r.b)("img",{src:m,alt:"video",className:"QuestionRichText--image"})}),Object(r.c)("div",{children:[f?Object(r.b)("span",{itemProp:"text",children:Object(tt.b)(o,75)}):Object(r.b)(et.a,{itemProp:"text",tag:"span",html:a,hideWatermark:b}),f&&Object(r.c)(ae.c,{preset:"plain",className:"QuestionRichText-more",children:["显示全部 ",Object(r.b)($e.a,{center:!0})]})]}),u&&!f&&Object(r.b)(at,{onClick:d}),g&&Object(r.b)(Xe.a,{img:g,onClose:function(){return y(null)}})]})})}function lt(e){var t=e.reviewInfo,n=e.thumbnailInfo,a=e.html,i=e.excerpt,o=(t||{}).tips,c=Object(O.useMemo)((function(){var e;return null==n||null===(e=n.thumbnails)||void 0===e?void 0:e.find((function(e){return"video"===e.type}))}),[n]),s=Boolean(a&&i);return Object(r.c)("div",{children:[o&&c&&Object(r.b)(ot,{tips:o}),s?Object(r.b)(st,Object.assign({},e)):null]})}var ut=n(154),dt=n(924),bt=n(65),ht=n(467),ft=n(86),pt=n(217),mt=n(2918),vt=n(1726),Ot=n(552),jt=n(1186);function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var yt=function(e){Object(d.a)(n,e);var t=gt(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).getRenderProps=function(){var t=e.props,n=t.draft,a=t.question,i=a.id,o=a.relationship,c=(o=void 0===o?{}:o).myAnswer,s=t.params.answerId,l=t.isMobile;return c?c.isDeleted?{icon:Object(r.b)(mt.a,{size:17,className:"QuestionButton-icon"}),text:"撤销删除",props:{onClick:e.handleRestoreAnswer}}:!l&&s&&s===String(c.answerId)?{icon:Object(r.b)(vt.a,{size:17,className:"QuestionButton-icon"}),text:"编辑回答",props:{onClick:e.handleEditAnswer}}:{icon:Object(r.b)(vt.a,{size:17,className:"QuestionButton-icon"}),text:"查看我的回答",props:{to:"/question/".concat(i,"/answer/").concat(c.answerId),onClick:e.handleFocusAnswer},Wrapper:ut.a}:{icon:Object(r.b)(nt.a,{size:16,center:!0,className:"QuestionButton-icon"}),text:n?"编辑回答":"写回答",props:{onClick:e.handleAddAnswer}}},e.handleFocusAnswer=function(){var t=document.querySelector(".AnswerCard");t&&(t.classList.add("is-focus"),e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout((function(){return t.classList.remove("is-focus")}),300))},e.handleRestoreAnswer=function(){var t=e.props,n=t.question,r=n.relationship.myAnswer,a=n.id,i=t.restoreAnswer,o=t.showNotification;r.isDeleted&&i(a,r.answerId).then((function(){return o("已撤销删除回答")}))},e.handleAddAnswer=e.props.authRequired((function(t){var n=e.props,r=n.draft,a=n.question,i=a.id,o=a.reviewInfo,c=(o=void 0===o?{}:o).tips,s=n.zaId,l=n.cancelScheduledPublish;if(n.isMobile)window.location.href="/question/".concat(i,"/answers/editor");else if(Object(jt.d)())Object(jt.h)(i);else{var u=t.currentTarget,d=function(){c?e.props.showNotification(c,"red"):(s&&se.a.trackEvent(null,{id:s}),se.a.trackEvent(Object(ft.a)(e),{action:r&&r.editableContent?"Edit":"Answer",is_intent:!0,name:u.textContent}),e.context.startAddAnswer())};r&&r.schedule?pt.a.confirm("如果继续编辑该回答，原定时发送设置将会失效，需重新设置定时发送时间，是否继续编辑？",{title:"编辑回答",text:{ok:"继续编辑",cancel:"我再想想"}}).then((function(){l(e.props.question.id).then(d)}),(function(){})):d()}})),e.handleEditAnswer=e.props.authRequired((function(){var e=document.querySelector(".AnswerItem-editButton");e&&e.click()})),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){Object(Ot.b)()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.size,i=e.preset,o=e.color,c=void 0===o?"blue":o,s=e.onClick,l=this.getRenderProps(),u=l.icon,d=l.text,b=l.props,h=l.Wrapper,f=void 0===h?ae.c:h,p=Object(r.c)(O.Fragment,{children:[u,d]});return Object(r.b)(k.f,{zaType:"Button",zaText:d,as:"a",children:Object(r.b)(k.a,Object.assign(Object.assign(Object.assign({as:f,zaType:"Button",zaText:d,zaBlock:d},b),s&&{onClick:s}),{},{color:c,size:a,preset:i,className:n,children:t||p}))})}}]),n}(O.Component);yt.contextTypes={startAddAnswer:v.a.func};var wt=Object(C.compose)(a.withRouter,L.a,Object(y.connect)((function(e,t){return{draft:Object(E.n)(e,{id:t.params.id}),question:Object(E.db)(e,{id:t.params.id}),isMobile:Object(bt.d)(e),currentUser:Object(D.b)(e)}}),{restoreAnswer:_.y,cancelScheduledPublish:_.d,showNotification:F.h}))(yt);function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var kt=function(e){Object(d.a)(n,e);var t=Ct(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).zaRef=Object(O.createRef)(),e.createOpenInAppHandler=function(t){var n=e.props,r=n.question.id,a=n.isSpecialQuestionOrAnswer,i=n.currentUser;return function(){a?location.href="zhihu://question/".concat(r,"?utm_app_name=zhihu_check&utm_content=").concat(t):Object(ht.a)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:"关注问题",noEnteringSignin:Boolean(i)})}},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,a=n.relationship,i=n.relationship.isAuthor,o=n.isNormal,c=n.status,s=(c=void 0===c?{}:c).isLocked,l=n.questionType,u=n.isMuted,d=n.id,b=e.shouldOia,h=e.inTopBar,f=e.blockStrategies,p=(f=void 0===f?{}:f).isBlockingFollowQuestion,m="commercial"===l&&u;return Object(r.c)("div",{className:"QuestionButtonGroup",children:[Object(r.b)(k.e,{ref:this.zaRef}),i&&m?Object(r.b)(ut.a,{preset:"primary",a:!0,to:"https://e.zhihu.com",color:"green",children:"推广问题"}):!p&&Object(r.b)(dt.a,Object.assign({id:d,zaId:h?3408:3309,type:"question",preset:"primary",isFollowing:(a&&{}.hasOwnProperty.call(a,"isFollowing")?a:t).isFollowing,disabled:m},b&&{onClick:this.createOpenInAppHandler("follow_question")})),o&&!s&&Object(r.b)(wt,{color:"blue",zaId:h?3409:3311})]})}}]),n}(O.Component),At=Object(C.compose)(a.withRouter,Object(de.d)({dataPath:"question"}),de.c,Object(y.connect)((function(e,t){var n;return{shouldOia:Object(bt.i)(e),isSpecialQuestionOrAnswer:Object(bt.k)(e,{type:"question",id:null===(n=t.question)||void 0===n?void 0:n.id}),currentUser:Object(D.b)(e)}})))(kt),xt=n(1696),Rt=n(432),Nt=n(191),St=n(91),Tt=n(438),Bt=n(930),Et=n(1271),It=n(173);function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}function qt(e){var t=e.count,n=e.onEnd,a=Object(xt.a)(Object(O.useRef)(Date.now()+1e3*t).current,{onTick:function(e){e.done&&(null==n||n())}}),i=a.done,o=a.seconds;return Object(r.b)("span",{children:i?0:o})}var Qt=function(e){Object(d.a)(n,e);var t=zt(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1,invitationModalShown:!1},e.nextQuestion=function(t){var n=t.location.query,r=t.question.id,a=t.fromQuestion,i=t.loadItems,o=t.loadQuestion,c=t.currentUser;clearTimeout(e.timeout),e.setState({redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1}),c&&"guest"!==c.userType&&i(r,"inviters"),n.rf&&/^\d+$/.test(n.rf)&&!a&&(e.setState({redirectionLoading:!0}),o(Number(n.rf)).catch((function(){})).then((function(){e.setState({redirectionLoading:!1})})))},e.redirect=function(){var t=e.props,n=t.router,r=t.location.query,a=t.question,i=a.id,o=a.redirection;o&&o.to&&o.to.id&&"1"!==r.nr&&n.push("/question/".concat(o.to.id,"?rf=").concat(i))},e.handleRedirectionClose=function(){e.setState({redirectionHidden:!0,invitersHidden:!0}),e.timeout=setTimeout((function(){e.setState({invitersHidden:!1})}),1e3)},e.handleCloseInviters=function(){e.setState({invitersHidden:!0})},e.handleDeleteInviters=function(t){var n=e.props,r=n.question.id;(0,n.deleteInviters)(r),e.handleCloseInviters(),se.a.trackEvent(t.target,{action:"Ignore"})},e.handleCancelAnonymous=function(){(0,e.props.onInvitationTipClose)(),e.context.toggleAnonymous(!1)},e.handleInvite=function(t){e.setState({invitersHidden:!0,invitationModalShown:!0}),se.a.trackEvent(t.target,{action:"Invite",is_intent:!0})},e.handleInvitationModalHide=function(){e.setState({invitationModalShown:!1})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.nextQuestion(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"revokeRedirection",value:function(e){var t=this.props,n=t.router,r=t.question.id;(0,t.revokeQuestionRedirection)(e).then((function(){n[e===r?"replace":"push"]("/question/".concat(e))})),this.handleRedirectionClose()}},{key:"renderCommercialMuteStatus",value:function(){var e=this.props.question,t=e.questionType,n=e.isMuted;return e.relationship.isAuthor&&"commercial"===t&&n?Object(r.b)("div",{className:"QuestionStatus-bar",children:Object(r.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(r.c)("div",{className:"QuestionStatus-bar-commercialMuted",children:["该品牌提问尚未激活，无法在社区内流通。请"," ",Object(r.b)("a",{href:"https://e.zhihu.com",target:"_blank",rel:"noopener noreferrer",children:"前往广告平台"})," ","进行设置。"]}),Object(r.b)("p",{children:"未激活的品牌提问页可以添加回答，但相关动态不在社区内流通，包括不会出现在知乎首页、用户主页，也不会被搜索到。当与该品牌提问关联的广告开始投放时，提问被激活，并开始流通。"})]})}):null}},{key:"renderMute",value:function(){var e=this.props,t=e.isMuteSpecial,n=e.isMuteFreeze;return t?Object(r.b)("div",{className:"QuestionStatus-bar",children:Object(r.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(r.b)("strong",{children:"问题已解散"}),Object(r.b)("p",{children:"当前问题下的回答暂时无法查看。"})]})}):n?Object(r.b)("div",{className:"QuestionStatus-bar",style:{display:"none"},children:Object(r.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(r.b)("strong",{children:"问题已冻结"}),Object(r.b)("p",{children:"除浏览外不开放其他用户互动功能。"})]})}):null}},{key:"renderBar",value:function(){var e=this.props.question.status.unnormalDetails;return e&&Object(r.b)("div",{className:"QuestionStatus-bar",children:Object(r.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(r.c)("strong",{children:[e.description,"。"]}),Object(r.c)("em",{children:["原因：",e.reason,"。"]}),1033!==e.reasonId&&Object(r.b)(Tt.a,{html:e.note})]})})}},{key:"renderNotification",value:function(){var e=this,t=this.props,n=t.location.query,a=t.question,i=a.id,o=a.redirection,c=a.relationship,s=(c=void 0===c?{}:c).myAnswer,l=t.inviters,u=t.fromQuestion,d=t.isAnswerPage,b=this.state,h=b.redirectionLoading,f=b.redirectionHidden,p=b.invitersHidden,m=null,v=null;if(!h)if(o&&o.to&&o.to.id&&!f){var O=o.to,j=O.id,g=O.title,y="1"!==n.nr&&!d;m=y?"redirect-countdown":"redirect",v=Object(r.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(r.c)("div",{className:"QuestionStatus-notification-content",children:[y?Object(r.c)("span",{children:["此问题将在 ",Object(r.b)(qt,{count:5,onEnd:this.redirect})," ","秒后跳转至"]}):Object(r.b)("span",{children:"此问题已重定向至"})," ",Object(r.b)(ut.a,{preset:"plain",to:"/question/".concat(j,"?rf=").concat(i),children:g})]}),Object(r.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(r.b)(ae.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(i)},children:"撤销重定向"}),Object(r.b)("div",{className:"QuestionStatus-notification-divider"}),Object(r.b)(ae.c,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else if(u&&u.redirection&&u.redirection.to&&u.redirection.to.id&&u.redirection.to.id===i&&!f){var w=u.id,C=u.title;m="redirect-from",v=Object(r.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(r.c)("div",{className:"QuestionStatus-notification-content",children:["从问题"," ",Object(r.b)(ut.a,{preset:"plain",to:"/question/".concat(w,"?nr=1"),children:C})," ","跳转而来"]}),Object(r.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(r.b)(ae.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(w)},children:"撤销重定向"}),Object(r.b)("div",{className:"QuestionStatus-notification-divider"}),Object(r.b)(ae.c,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else l&&l.length&&!p&&!s&&(v=Object(r.b)(A.a,{module:"InvitationCard",trackCardShow:!0,children:Object(r.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(r.c)("div",{className:"QuestionStatus-notification-content",children:[l.map((function(e,t){return Object(r.c)("span",{children:[0!==t&&"、",Object(r.b)(Bt.a,{user:e,noBadge:!0,noHoverCard:!0,"data-za-detail-view-element_name":"User"})]},e.urlToken)}))," ","邀请你回答此问题"]}),Object(r.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(r.b)(ae.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleInvite,children:"邀请别人"}),Object(r.b)("div",{className:"QuestionStatus-notification-divider"}),Object(r.b)(ae.c,{preset:"plain",onClick:this.handleDeleteInviters,children:"忽略邀请"})]}),Object(r.b)("div",{children:Object(r.b)(ae.c,{className:"QuestionStatus-notification-closeButton",preset:"plain",onClick:this.handleCloseInviters,icon:Rt.a})})]})}));return Object(r.b)(Nt.a,{className:"QuestionStatus-notification",notification:v?{key:m,text:v}:null})}},{key:"renderInvitationTip",value:function(){var e=this.props,t=e.invitationTipShown,n=e.onInvitationTipClose;return Object(r.b)(Nt.a,{className:"QuestionStatus-notification",notification:t?{text:Object(r.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(r.b)("div",{className:"QuestionStatus-notification-content",children:"在匿名状态下无法邀请他人回答"}),Object(r.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(r.b)(ae.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleCancelAnonymous,children:"取消匿名"}),Object(r.b)("div",{className:"QuestionStatus-notification-divider"}),Object(r.b)(ae.c,{preset:"plain",onClick:n,children:"关闭"})]})]})}:null})}},{key:"render",value:function(){var e=this.props.question,t=this.state.invitationModalShown;return Object(r.c)("div",{className:"QuestionStatus",children:[this.renderCommercialMuteStatus(),this.renderMute(),this.renderBar(),this.renderNotification(),this.renderInvitationTip(),Object(r.b)(St.b,{size:"fullPage",onClose:this.handleInvitationModalHide,children:t&&Object(r.b)(Et.a,{question:e})})]})}}]),n}(O.Component);Qt.contextTypes={toggleAnonymous:v.a.func};var Mt=Object(C.compose)(Object(I.a)({replacement:null}),a.withRouter,It.a,Object(y.connect)((function(e,t){var n=e.entities.questions,r=e.question.inviters,a=t.location.query,i=t.question.id,o={isMuteSpecial:Object(E.D)(t.question),isMuteFreeze:Object(E.C)(t.question),inviters:r[i]};if(a.rf&&/^\d+$/.test(a.rf)){var c=n[Number(a.rf)];c&&(o.fromQuestion=c)}return o}),{loadItems:E.Q,loadQuestion:E.S,revokeQuestionRedirection:E.hb,deleteInviters:E.k}))(Qt),Pt=n(95),Lt=n(1035),_t=n(4),Dt=n(1433);function Ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}function Ht(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ut,Vt=function(e){Object(d.a)(n,e);var t=Ft(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).load=function(){var t=e.props,n=t.parent.id;(0,t.loadQuestionFollowers)(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.parent.followerCount,n=e.isFetching,a=e.isDrained,i=e.items,o=e.currentUser;return Object(r.b)(Dt.a,{currentUser:o,isFetching:n,isDrained:a,items:i,voteupCount:t,onLoad:this.load,text:"关注了"})}}]),n}(O.Component),Wt=Object(y.connect)((function(e,t){var n=t.parent.id,r=e.entities.users,a=e.question,i=a.followers,o=a.concernedFollowers,c=i[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},s=c.isFetching,l=c.isDrained,u=c.order,d=c.ids,b=(o[n]||{ids:[]}).ids;return{isFetching:s,isDrained:l,order:u,items:[].concat(Ht(_t.a,b),Ht(_t.a,d.filter((function(e){return!b.includes(e)})))).map((function(e){return r[e]})),currentUser:Object(D.b)(e)}}),{loadQuestionFollowers:E.V})(Vt),Gt=n(531);function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Zt=function(e){Object(d.a)(n,e);var t=Kt(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={followersShown:!1},e.showFollowers=function(){e.setState({followersShown:!0})},e.closeFollowers=function(){e.setState({followersShown:!1})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.currentUser,a=e.concernedFollowers,i=t.followerCount,o=t.visitCount,c=this.state.followersShown;return Object(r.c)("div",{className:"QuestionFollowStatus",children:[Object(r.c)(Lt.a,{divider:!0,className:"QuestionFollowStatus-counts",children:[n?Object(r.b)(Lt.a.Item,{tag:ae.c,preset:"plain",onClick:this.showFollowers,name:"关注者",value:i}):Object(r.b)(Lt.a.Item,{name:"关注者",value:i}),Object(r.b)(Lt.a.Item,{name:"被浏览",value:o})]}),Boolean(a&&a.length)&&Object(r.c)(ae.c,{preset:"plain",className:"QuestionFollowStatus-people",onClick:this.showFollowers,children:[Object(r.b)("span",{className:"QuestionFollowStatus-people-tip",children:re()(Ut||(Ut=Object(te.a)(["","也关注了该问题"])),1===a.length?a[0].name:"他们")}),a.map((function(e){return Object(r.b)(Bt.a,{user:e,avatar:!0,avatarProps:{size:26,round:!0},noLink:!0,noBadge:!0,noHoverCard:!0},e.id)}))]}),Object(r.b)(Pt.b,{size:"fullPage",onClose:this.closeFollowers,children:c&&Object(r.b)(Wt,{parent:t})})]})}}]),n}(O.Component),Jt=Object(C.compose)(a.withRouter,Object(y.connect)((function(e,t){var n=t.params;return{currentUser:Object(D.b)(e),concernedFollowers:Object(E.f)(e,{id:n.id})}}),{loadQuestionConcernedFollowers:E.U}),Object(Gt.a)({shouldLoad:function(e){return e.currentUser&&!e.concernedFollowers},load:function(e){return e.loadQuestionConcernedFollowers(e.params.id)}}))(Zt),Yt=n(287),$t=n(910),Xt=n(909),en=n(1688),tn=n(911),nn=n(134),rn=n(1748),an=n(1001),on=n(292),cn=n(965),sn=n(32),ln=n(377),un=n(1734);var dn=function(e){var t=Object(O.useRef)(null),n=e.authRequired,a=e.questionId,i=Object(y.useDispatch)(),o=Object(y.useSelector)((function(e){return Object(E.db)(e,{id:a})})),l=o.relationship,u=l.voting,d=l.isFollowing,b=o.voteupCount,h=o.canVote,f="0"===String(u);Object(O.useEffect)((function(){se.a.trackCardShow(t.current,{name:String(b),id:7228})}),[]);var p=function(){if(!d){var e=f;return i(Object(E.rb)(a,e))}},m=ue()("GoodQuestionAction-commonBtn",{"GoodQuestionAction-highLightBtn":"1"===String(u)}),v=n(Object(s.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Object(E.ub)(a,u));case 2:return e.next=4,p();case 4:n=f?"Upvote":"UnUpvote",se.a.trackEvent(t.current,{action:n,name:String(b),id:7229});case 6:case"end":return e.stop()}}),e)}))));return Object(r.b)("div",{className:"GoodQuestionAction",children:h&&Object(r.b)(k.a,{as:ae.c,zaText:f?"好问题":"取消好问题",zaType:"Button",zaAction:f?"Upvote":"UnUpvote",onRef:function(e){return t.current=e},className:m,preset:"plain",onClick:v,icon:un.a,zaBlock:f?"好问题":"取消好问题",label:b>0?"好问题 ".concat(b):"好问题"})})},bn=n(1510),hn=n(1157);function fn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var pn={true:{title:"确定解锁问题编辑？",subtitle:"该问题编辑已锁定，解锁后可被其他用户编辑，要解锁编辑吗？",confirmText:"解锁问题编辑"},false:{title:"确定锁定问题编辑？",subtitle:"锁定后，其他用户将不可编辑你提出的问题",confirmText:"锁定问题编辑"}};function mn(e){var t=e.showModal,n=e.showEncourageAuthorEditLock,a=e.handleConfirmEditLock,o=e.handleEditLockShown,c=n?"编辑已锁定":"锁定编辑",s=Object(O.useRef)(),l=Object(O.useState)(!1),u=fn(i.a,l,2),d=u[0],b=u[1];Object(O.useEffect)((function(){Re.a.get("question::hasSeenShowEditLockHint")||Object(hn.b)([Object(hn.a)(3e3).then((function(){Re.a.set("question::hasSeenShowEditLockHint",!0),b(!0)})),Object(hn.a)(3e3).then((function(){b(!1)}))])}),[]),Object(O.useEffect)((function(){Object(Ae.onViewedOnce)(s.current,(function(){se.a.trackCardShow(s.current,{id:7666},{button:{text:c}})}))}),[c]);var h=Object(O.useCallback)((function(){se.a.trackEvent(s.current,{id:7669,action:"Click"},{button:{text:c}}),o()}),[o,c]),f=function(e){var t=e?pn[n].confirmText:"取消";se.a.trackEvent(null,{id:7678,action:"Select",name:t},{button:{text:c}}),e?a():o()};return Object(r.c)(r.a,{children:[Object(r.b)(ae.c,{preset:"plain",onClick:h,label:c,icon:bn.a,onRef:s}),Object(r.b)(ke.a,{className:"QuestionEditLockMenu-Hint",isOpen:d,target:s.current,placement:"top",children:"锁定后问题不可被其他用户编辑"}),Object(r.b)(an.a,Object.assign({needCancel:!1,showButtonHorizontal:!0,showConfirmButtonRight:!0,onCancel:function(){return f(!1)},onSubmit:function(){return f(!0)},shown:t},pn[n]))]})}var vn=n(56),On=n(2385),jn=n(940),gn=n(67);function yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var wn=function(e){Object(d.a)(n,e);var t=yn(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={commentsShown:!1},e.handleCommentsShow=function(){var t=e.props,n=t.question.reviewInfo.tips,r=t.handleReviewingNotification;n?r():(se.a.trackEvent(Object(ft.a)(e),{action:"Comment",element:"Button",is_intent:!0}),e.setState({commentsShown:!0}))},e.handleCommentsClose=function(){e.setState({commentsShown:!1})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,n=e.router.location,r=n.pathname,a=n.search,i=Boolean(/^\/question\/(\d*)$/.test(r)),o=Object(vn.parse)(location.search.slice(1)).answer_deleted_redirect;if(i&&"true"!==o){var c=Object(gn.a)(location.hash);this.setState({byComment:c}),c&&(t.replace("".concat(r).concat(a)),this.handleCommentsShow())}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState({commentsShown:!1})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.textStyle,a=e.isMuteSpecial,i=t.commentCount,o=t.adminClosedComment,c=this.state.commentsShown,s="",l=i&&!o;return s="textNumber"===n?l?"评论 ".concat(Object(Ee.formatNumber)(i)):"":l?"".concat(Object(Ee.formatNumber)(i)," 条评论"):"添加评论",Object(r.c)("div",{className:"QuestionHeader-Comment",children:[Object(r.b)(k.a,{zaText:!0,zaType:"Button",zaBlock:"添加评论",as:ae.c,preset:"plain",onClick:this.handleCommentsShow,icon:On.a,label:s,disabled:a}),Object(r.b)(jn.a,{shown:c,type:"question",parent:t,byComment:this.state.byComment,commentNeedsReview:"censor"===t.commentPermission,onClose:this.handleCommentsClose})]})}}]),n}(O.Component);wn.propTypes={question:v.a.object.isRequired,handleReviewingNotification:v.a.func.isRequired};var Cn=Object(C.compose)(a.withRouter,Object(y.connect)((function(e,t){return{isMuteSpecial:Object(E.D)(t.question)}})))(wn),kn=n(1593);function An(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var xn={invitationShown:!1,reportShown:!1,editLockShown:!1,lockTipsShown:!1,deleteShown:!1,redirectionCreatorShown:!1},Rn=[{key:"all",name:"开放评论"},{key:"censor",name:"预审评论"},{key:"nobody",name:"关闭评论"}],Nn=[{key:"open",name:"开放回答"},{key:"censor",name:"预审回答"}],Sn=function(e){Object(d.a)(n,e);var t=An(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state=xn,e.handleReviewingNotification=function(){var t=e.props.question.reviewInfo.tips;e.props.showNotification(t,"red")},e.handleInvite=e.props.authRequired((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventId,r=void 0===n?3312:n;se.a.trackEvent(null,{id:r});var a,i=e.props,o=i.question,c=o.relationship.isAnonymous,s=o.status,l=(s=void 0===s?{}:s).isLocked,u=s.isClose,d=s.isEvaluate,b=s.isSuggest,h=o.reviewInfo,f=(h=void 0===h?{}:h).tips,p=i.onInvitationTipShow;f?e.handleReviewingNotification():c?p():(l?a="锁定":u?a="关闭":(d||b)&&(a="建议修改"),a?e.props.showNotification("该问题已被".concat(a,"，不能邀请人回答此问题"),"red"):e.handleInvitationShow())}),sn.ab.invite),e.handleInvitationShow=function(){return e.setState({invitationShown:!0})},e.handleInvitationHide=function(){return e.setState({invitationShown:!1})},e.handleReport=function(){e.setState({reportShown:!e.state.reportShown})},e.handleEditLockShown=function(){e.setState({editLockShown:!e.state.editLockShown})},e.handleLockClick=function(){return e.props.question.status.isLocked?e.handleUpdateQuestionLocked():e.handleLockTipsShow()},e.handleOpenStatusChange=function(t){var n=e.props;(0,n.updateBrandQuestionOpenStatus)(n.question.id,t)},e.handleUpdateQuestionLocked=function(){var t=e.props,n=t.question.id;(0,t.updateQuestionLocked)(n)},e.handleLockTipsShow=function(){return e.setState({lockTipsShown:!0})},e.handleLockTipsHide=function(){return e.setState({lockTipsShown:!1})},e.handleDelete=function(){return e.setState({deleteShown:!0})},e.handleDeleteModalClose=function(){return e.setState({deleteShown:!1})},e.handleConfirmDelete=function(){e.handleDeleteModalClose();var t=e.props,n=t.question,r=n.id,a=n.questionType,i=t.deleteQuestion,o=t.deleteBrandQuestion;return("commercial"===a?o:i)(r).then((function(){location.href="/"}))},e.handleConfirmEditLock=function(){e.handleEditLockShown();var t=e.props;(0,t.toggleQuestionEditLock)(t.question.id)},e.handleRedirectionCreatorShow=function(){e.props.question.reviewInfo.tips?e.handleReviewingNotification():e.setState({redirectionCreatorShown:!0})},e.handleRedirectionCreatorClose=function(){e.setState({redirectionCreatorShown:!1})},e.handleRedirectionCreated=function(t,n){var r=e.props,a=r.router,i=r.question.id,o=t.id;e.handleRedirectionCreatorClose(),n.then((function(){a.push("/question/".concat(o,"?rf=").concat(i))}))},e.handleCommentPermissionChange=function(t){var n=e.props;(0,n.updateQuestionPermission)(n.question.id,t)},e.handleShareMenuTogglerClick=function(){var t=e.props.question.reviewInfo;return!(t=void 0===t?{}:t).tips||(e.handleReviewingNotification(),!1)},e.toggleAnonymous=function(){var t=e.props,n=t.question.reviewInfo,r=n.tips,a=n.editTips,i=t.isCurrentAnswerCommercialReported;r?e.handleReviewingNotification():a?e.props.showNotification(a,"red"):i?e.props.showNotification("已经进行商业声明的内容不能启用匿名","red"):e.context.toggleAnonymous()},e.getQuestionStatus=function(){return Object(ee.c)(e.props.question.status)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.getHandleInvite;e&&e(this.handleInvite)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState(xn)}},{key:"shouldShowAnonymousMenuItem",get:function(){var e=this.props.currentUser;if(e&&!e.isOrg){var t=this.props.question,n=t.questionType;if(t.relationship.isAnonymous)return!0;if("normal"===n)return!0}return!1}},{key:"shouldShowMenu",get:function(){var e=this.props,t=e.question.questionType,n=e.permission.canBrandAdminEdit,r="commercial"===t;return!r||!(!r||!n)}},{key:"renderCommercialMenuItems",value:function(e){var t=this,n=this.props,a=n.permission.canBrandAdminEdit,i=n.question,o=i.status,c=(o=void 0===o?{}:o).isLocked,s=i.commentPermission,l=i.brandOpenStatus,u=i.brand,d=(u=void 0===u?{}:u).isPuQuestion;if(!a)return null;var b=Rn,h=Nn;return Object(r.c)(O.Fragment,{children:[b.map((function(n){var a=n.key,i=n.name,o=!s&&"all"===a||s===a;return Object(r.c)(nn.b,{className:e,onClick:function(){return t.handleCommentPermissionChange(a)},children:[o&&Object(r.b)($t.a,{className:"MenuItem-icon",text:!0,center:!0})," ",i]},a)})),Object(r.b)("li",{className:"Menu-divider"}),(d&&(h=[{key:"open",name:"开放回答"}]),Object(r.c)(r.a,{children:[!c&&h.map((function(n){var a=n.key,i=n.name,o=l===a;return Object(r.c)(nn.b,{className:e,onClick:function(){return!o&&t.handleOpenStatusChange(a)},children:[o&&Object(r.b)($t.a,{className:"MenuItem-icon",text:!0,center:!0})," ",i]},a)})),!d&&Object(r.b)(nn.b,{className:e,onClick:t.handleLockClick,children:c?"开放回答":"关闭回答"}),Object(r.b)("li",{className:"Menu-divider"})]}))]})}},{key:"renderMobileMenuItems",value:function(e){var t=this.props,n=t.question.id,a=t.shouldOia;return e.map((function(e){var t=e.text,i=e.handler;return Object(r.b)(nn.b,{onClick:a?function(){return Object(Yt.e)(Object(ln.a)({type:"question",id:n},{utm_content:"invite"}))}:i,children:t},t)}))}},{key:"renderLogMenuItem",value:function(){var e=this.props,t=e.question.id;return e.shouldOia?Object(r.b)(nn.b,{onClick:function(){return Object(Yt.e)(Object(ln.a)({type:"question",id:t}))},children:"查看问题日志"}):Object(r.b)(nn.b,{tag:ut.a,a:!0,to:"/question/".concat(t,"/log"),children:"查看问题日志"})}},{key:"render",value:function(){var e=this.state,t=e.invitationShown,n=e.reportShown,a=e.editLockShown,i=e.lockTipsShown,o=e.deleteShown,c=e.redirectionCreatorShown,s=this.props,l=s.question,u=s.question,d=u.id,b=u.title,h=u.answerCount,f=u.collapsedAnswerCount,p=u.relationship,m=p.isAuthor,v=p.isAnonymous,O=u.questionType,j=u.isEditable,g=u.author.urlToken,y=u.showEncourageAuthorEditLock,w=s.isMuteSpecial,C=s.isMuteFreeze,A=s.publicEditPermission,x=(A=void 0===A?{}:A).isQuestionRedirectEditable,R=s.currentUserUrlToken,N=s.permission.canBrandAdminEdit,S=s.editQuestionButton,T=s.currentUser,B=s.authRequired,E="commercial"===O,I=T&&!m,z=T&&m&&"boolean"==typeof y,q=E?N:Boolean(m&&0===h&&0===f),Q=[I&&{text:"举报",icon:Xt.a,handler:this.handleReport}].filter(Boolean),M=g===R,P=Object(ee.e)(j,M,x),L=""!==Object(rn.a)(l),_=this.shouldShowAnonymousMenuItem&&!L,D=_||this.shouldShowMenu,F=ue()("QuestionHeader-menu-item",{"QuestionHeader-menu-item--com":E});return Object(r.c)("div",{className:"QuestionHeaderActions",children:[Object(r.b)(k.a,{as:ae.c,zaText:!0,zaType:"Button",color:"grey",style:{marginRight:16},onClick:this.handleInvite,zaBlock:"邀请回答",label:"邀请回答",icon:en.a,disabled:w||C}),Object(r.b)(dn,{questionId:d,authRequired:B}),Object(r.b)(Cn,{question:l,handleReviewingNotification:this.handleReviewingNotification}),Object(r.b)(cn.a,{id:d,title:b,href:"/question/".concat(d),onTogglerClick:this.handleShareMenuTogglerClick,type:"question",disabled:w||C}),S,z&&Object(r.b)(mn,{showModal:a,showEncourageAuthorEditLock:y,handleEditLockShown:this.handleEditLockShown,handleConfirmEditLock:this.handleConfirmEditLock}),D&&Object(r.c)(nn.c,{toggler:Object(r.b)(ae.c,{preset:"plain","aria-label":"更多",icon:tn.a}),menuClassName:"QuestionHeader-menu",itemClassName:F,children:[!1,_&&Object(r.b)(nn.b,{onClick:this.toggleAnonymous,children:v?"取消匿名身份":"使用匿名身份"}),E&&this.renderCommercialMenuItems(F),q&&Object(r.b)(nn.b,{onClick:this.handleDelete,children:"删除问题"}),P&&!T.isOrg&&"normal"===O&&Object(r.b)(nn.b,{onClick:this.handleRedirectionCreatorShow,children:"问题重定向"}),!E&&this.renderLogMenuItem(),Q.map((function(e){var t=e.text,n=e.handler,a=e.disabled;return Object(r.b)(nn.b,{onClick:n,disabled:a,children:"举报问题"},t)}))]}),Object(r.b)(on.a,{type:"question",urlToken:d,shown:n,status:this.getQuestionStatus(),onClose:this.handleReport,zaEnabled:!0}),Object(r.b)(St.b,{size:"fullPage",onClose:this.handleInvitationHide,children:t&&Object(r.b)(Et.a,{question:l})}),Object(r.b)(an.a,{title:E?"关闭回答":"锁定问题",subtitle:"".concat(E?"关闭":"锁定","后该问题将无法添加新回答，你确定要").concat(E?"关闭":"锁定","吗？"),shown:i,onCancel:this.handleLockTipsHide,onSubmit:this.handleUpdateQuestionLocked}),Object(r.b)(St.b,{size:"large",title:"问题重定向",onClose:this.handleRedirectionCreatorClose,children:c&&Object(r.b)(kn.a,{question:l,onSubmitted:this.handleRedirectionCreated})}),Object(r.b)(an.a,{title:"删除问题",subtitle:"你确定要删除这个问题吗？相关的评论也将被删除。",onCancel:this.handleDeleteModalClose,onSubmit:this.handleConfirmDelete,shown:o})]})}}]),n}(O.PureComponent);Sn.contextTypes={toggleAnonymous:v.a.func};var Tn=Object(C.compose)(a.withRouter,L.a,Object(y.connect)((function(e,t){return{shouldOia:Object(bt.i)(e),isMuteSpecial:Object(E.D)(t.question),isMuteFreeze:Object(E.C)(t.question),publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:Object(E.bb)(e),isCurrentAnswerCommercialReported:Object(E.B)(e,t.question)}}),{deleteQuestion:E.l,deleteBrandQuestion:E.i,updateQuestionLocked:E.sb,toggleQuestionEditLock:E.jb,showNotification:F.h,updateQuestionPermission:E.tb,updateBrandQuestionOpenStatus:E.kb}))(Sn);function Bn(e){var t=e.brand,n=e.noDivider,a=t.name,i=t.logo,o=t.target,c=t.description,s=t.typeDescription,l=o?"a":"div";return Object(r.c)("div",{className:ue()("BrandQuestionSymbol",{"is-mobile":!1}),children:[Object(r.c)(l,Object.assign(Object.assign({className:"BrandQuestionSymbol-brandLink"},o&&{href:"/".concat("organization"===o.userType?"org":"people","/").concat(o.urlToken)}),{},{children:[Object(r.b)("img",{role:"presentation",src:i,className:"BrandQuestionSymbol-logo",alt:""}),Object(r.b)("span",{className:"BrandQuestionSymbol-name",children:a}),o&&Object(r.b)(je.c,{badge:o.badge})]})),Object(r.b)("span",{css:{marginLeft:5},children:c}),Boolean(s)&&Object(r.b)("span",{className:"BrandQuestionSymbol-typeDesc",children:s}),!n&&Object(r.b)("div",{className:"BrandQuestionSymbol-divider"})]})}var En=n(1814);function In(e,t){var n=new Date(e),r=new Date(t),a=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),i=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate());return Math.floor((i-a)/864e5)}var zn=Object.assign;var qn=function(e){return j.a.createElement(Qe.a,zn({viewBox:"0 0 72 18"},e),j.a.createElement("g",{fillRule:"evenodd"},j.a.createElement("rect",{width:"72",height:"18",rx:"2"}),j.a.createElement("text",{fill:"#FFF",fontSize:"12",fontWeight:"500"},j.a.createElement("tspan",{x:"19",y:"13"},"有奖问答")),j.a.createElement("path",{fill:"#FFF",d:"M13.4 5.8H11a.4.4 0 01-.4-.3l.1-.4 1.6-1.7c.4-.4 1-.5 1.6-.2.5.3.8 1 .7 1.5-.2.6-.7 1-1.3 1zm0-1.9L13 4l-.7.8h1c.3 0 .5-.2.5-.4 0-.3-.2-.5-.5-.5zM10 6.4v1.5H5.8a.8.8 0 110-1.5H10zm.8 0h4.3a.8.8 0 010 1.5H11V6.4zM10 8.7v6H8.4c-.8 0-1.1-.2-1.5-.4-.3-.1-.5-.4-.7-.7-.2-.3-.3-.7-.3-1.5v-.9c0-.8.1-1.1.3-1.5l.7-.7c.4-.2.7-.3 1.5-.3h1.7zm.8 0h1.7c.8 0 1.1.1 1.5.3l.7.7c.2.4.3.7.3 1.5v1c0 .7-.1 1-.3 1.4-.2.3-.4.6-.7.7-.4.2-.7.3-1.5.3h-1.7V8.7zm-3.3-3c-.6 0-1.1-.4-1.3-1-.1-.5.2-1.2.7-1.5.5-.3 1.2-.2 1.6.2l1.6 1.7s.1.3 0 .4c0 .2-.2.2-.3.3H7.6zM8 4a.4.4 0 00-.5 0c-.2 0-.4.3-.3.5 0 .2.2.3.4.3h1L8 4z",fillRule:"nonzero"})))};function Qn(e){var t=["一","二","三"],n=function(){var t=e.question,n=t.id,i=t.prize,o=i.endTime,c=i.rule,s=i.status;return Object(r.c)("div",{className:"BrandQuestionPrizes-tips",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(r.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动时间","："]}),En.a(new Date(1e3*o),"yyyy-MM-dd HH:mm")," 截止"]}),Object(r.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(r.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动规则","："]}),c]}),Object(r.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(r.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["获奖公示","："]}),"ongoing"===s&&"获奖名单将在活动结束后公布","finished"===s&&"开奖中，即将公布获奖名单","awarded"===s&&Object(r.b)(a.Link,{target:"_blank",to:"/organization/question/".concat(n,"/winners"),children:"查看获奖名单"}),!1]}),Object(r.c)("div",{className:"BrandQuestionPrizes-rule",children:["本问题设置了有奖问答，添加回答即视为参与活动，并同意遵守",Object(r.b)("a",{className:"BrandQuestionPrizes-ruleLink",href:"https://www.zhihu.com/organization/ophelp/norm/53",target:"_blank",rel:"noopener noreferrer",children:"《有奖问答活动管理办法》"})]})]})},i=e.handleToggle,o=e.expanded,c=e.question,s=c.id,l=c.prize,u=c.relationship,d=(u=void 0===u?{}:u).isAuthor,b=c.permission,h=(b=void 0===b?{}:b).isSuperUser;if(!l||!l.status)return null;var f=l.endTime,p=l.prizes,m=l.status,v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(t),r=Math.floor(n.getTime()/1e3),a=e-r;if(a<0)return null;var i,o=0,c=1,s=60*c,l=60*s,u=24*l;if(a>u){var d=new Date(1e3*e);o=In(n,d),i="天"}else a>l?(o=Math.floor(a/l),i="小时"):a>s?(o=Math.floor(a/s),i="分钟"):(o=a,i="秒");return{quantity:o,unit:i}}(f);return Object(r.c)("div",{className:ue()("BrandQuestionPrizes",{"is-mobile":!1}),children:[Object(r.c)("div",{className:"BrandQuestionPrizes-info",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-bar",onClick:i,children:[Object(r.c)("div",{className:"BrandQuestionPrizes-desc",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-symbol",children:[Object(r.b)(qn,{alt:"logo",width:72,height:18,fill:"ongoing"===m?"#ff9607":"#999999"}),"ongoing"===m&&Object(r.c)("span",{children:["距离结束还有",Object(r.b)("em",{children:v.quantity}),v.unit]}),"finished"===m&&"待开奖","awarded"===m&&"已开奖"]}),Object(r.c)("div",{className:"BrandQuestionPrizes-name",children:["奖品：",p[0].name,p.length>1&&"等"]})]}),Object(r.c)("div",{className:"BrandQuestionPrizes-images",children:[p.map((function(e,t){var n=e.imageUrl;return n&&Object(r.b)("img",{src:n,alt:""},"BrandQuestionPrizes-images".concat(t))})),Object(r.b)($e.a,{text:!0,center:!0,fill:"#9fadc7"})]})]}),o&&Object(r.b)("div",{className:"BrandQuestionPrizes-detail",children:p.map((function(e,n){var a=e.imageUrl,i=e.name,o=e.value,c=e.quantity;return Object(r.c)("div",{className:"BrandQuestionPrizes-prize",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-intro",children:[a&&Object(r.b)("img",{className:"BrandQuestionPrizes-prizeImage",src:a,alt:""}),Object(r.c)("div",{className:"BrandQuestionPrizes-prizeInfo",children:[Object(r.c)("div",{className:"BrandQuestionPrizes-prizeName",children:[p.length>1&&"".concat(t[n],"等奖："),i]}),Object(r.c)("div",{className:"BrandQuestionPrizes-prizeValue",children:["价值 ¥ ",o]})]})]}),Object(r.c)("div",{className:"BrandQuestionPrizes-prizeQuantity",children:[c," 份"]})]},"BrandQuestionPrizes-prize".concat(n))}))}),o&&!1]}),o&&n(),o&&Object(r.b)("hr",{className:"BrandQuestionPrizes-split"}),(h||d)&&Object(r.c)(ut.a,{className:"BrandQuestionPrizes-edit",to:"/organization/question/".concat(s,"/setting/").concat("finished"===m?"winners":"prize"),children:["ongoing"===m&&"编辑有奖回答","finished"===m&&"填写获奖名单"]})]})}function Mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Pn=function(e){Object(d.a)(n,e);var t=Mn(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,a=t.permission,i=void 0===a?{}:a,o=e.router,c=i.isSuperUser,s=i.canBrandAdminEdit,l=i.haveCard;return s||c?Object(r.b)(nn.c,{className:"BrandQuestionSettingMenu",toggler:Object(r.b)(ae.c,{children:"设置样式"}),children:Object(r.c)(r.a,{children:[Object(r.b)(nn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){o.push("/organization/question/".concat(n,"/setting/topbanner"))},children:"设置提问头图"}),Object(r.b)(nn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){o.push("/organization/question/".concat(n,"/setting/prize"))},children:"编辑有奖问答"}),l&&Object(r.b)(nn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){o.push("/organization/question/".concat(n,"/setting/advanced"))},children:"编辑品牌推荐"})]})}):null}}]),n}(O.Component),Ln=Object(C.compose)(a.withRouter,Object(y.connect)((function(e,t){return{question:e.entities.questions[t.question.id]}})),It.a)(Pn),_n=n(916),Dn=n(1120),Fn=n(483);function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Un=function(e){Object(d.a)(n,e);var t=Hn(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleFollow=function(){var t=e.props.pin,n=(t=void 0===t?{}:t).author.isFollowing?1977:1976;e.handleTrack(n)},e.handleTrack=function(t){var n=e.props.pin,r=(n=void 0===n?{}:n).author;se.a.trackEvent(Object(ft.a)(e),{id:t},{button:{text:r.name}})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,r=n.type,a=n.id,i=t.getPinContents;"pin"===r&&i(a,{failsafe:!0}).then((function(t){var n=t.payload,r=(void 0===n?{}:n).author,a=(r=void 0===r?{}:r).name;se.a.trackCardShow(e,{id:1969},{button:{text:a}})}))}},{key:"render",value:function(){var e=this,t=this.props.pin;if(!t||!t.content)return null;var n=t.author,a=t.id,i=t.content[0].content.replace(/<a.*class="hash_tag".*?<\/a>/g,""),o=n||{},c=o.type,s=o.urlToken,l=o.isFollowing,u="https://www.zhihu.com/pin/".concat(a);return Object(r.c)("div",{className:"QuestionRelatedCard",children:[Object(r.b)("div",{className:"QuestionRelatedCard-title",children:"相关报道"}),Object(r.c)("div",{className:"QuestionRelatedCard-content",children:[Object(r.b)("span",{dangerouslySetInnerHTML:{__html:Object(Dn.truncateHTML)(i,110).content}}),u&&Object(r.b)("a",{className:"QuestionRelated-jump",href:u,onClick:function(){e.handleTrack(1975)},children:"查看详情"})]}),s&&Object(r.c)("div",{className:"QuestionRelatedCard-footer",children:[Object(r.c)("div",{children:["来自",Object(r.b)("a",{className:"QuestionRelatedCard-from",href:"https://www.zhihu.com/people/".concat(s),target:"_blank",rel:"noopener noreferrer",onClick:function(){e.handleTrack(1971)},children:n.name})]}),Object(r.b)("div",{role:"button",tabIndex:0,onClick:this.handleFollow,children:Object(r.c)(dt.a,{className:"QuestionRelatedCard-follow",type:c,id:s,isFollowing:l,children:[Object(r.b)(_n.a,{text:!0,center:!0},"icon"),"关注机构"]})})]})]})}}]),n}(O.Component);Un.propTypes={target:v.a.shape({type:v.a.string,id:v.a.string}).isRequired};var Vn=Object(C.compose)(Object(y.connect)((function(e,t){return{pin:Object(Fn.g)(e,t.target.id)}}),{getPinContents:Fn.e}),Object(A.b)((function(e){return{module:"PinItem",card:{content:{type:"Pin",id:e.target.id}}}})))(Un);function Wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Gn,Kn,Zn,Jn,Yn=function(e){Object(d.a)(n,e);var t=Wn(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.question.author;return Object(r.b)("div",{className:"OrgQuestionSymbol",children:Object(r.c)("div",{className:ue()("OrgQuestionSymbol-inner",{"OrgQuestionSymbol-inner--mobile":!1}),children:[Object(r.c)("div",{className:"OrgQuestionSymbol-main QuestionHeader-main",children:[Object(r.b)("div",{className:"OrgQuestionSymbol-avatar",children:Object(r.b)(Bt.a,{user:e,avatar:!0,avatarProps:{size:38}})}),Object(r.c)("div",{className:"OrgQuestionSymbol-name",children:[Object(r.b)(Bt.a,{user:e})," 的提问"]})]}),Object(r.b)("div",{className:"OrgQuestionSymbol-tip",children:Object(r.b)(ut.a,{preset:"plain",a:!0,to:"/org-intro#org-question",target:"_blank",children:"了解机构提问"})})]})})}}]),n}(O.Component),$n=n(30),Xn=n.n($n),er=n(447),tr=n.n(er),nr=n(24),rr=n.n(nr),ar=n(123),ir=n.n(ar),or=n(105),cr=n(170),sr=n(72),lr=n.n(sr),ur=n(48),dr=n(476),br=n(8),hr=n(1011),fr=n(917),pr=["data"],mr=["data","onVote","onVoteError"];function vr(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Or=function(e,t){return Object(or.a)(ir()(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),t(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])}))))},jr=j.a.createContext({}),gr=function(){return Object(O.useContext)(jr)},yr=function(e){var t=e.data,n=e.onVote,a=void 0===n?lr.a:n,i=e.onVoteError,o=void 0===i?lr.a:i,s=e.children,l=Object(O.useState)(t),u=vr(rr.a,l,2),d=u[0],b=u[1],h=Object(O.useState)(!0),f=vr(rr.a,h,2),p=f[0],m=f[1],v=d.urlToken,j=d.vote,g=function(e){var t=Object(dr.b)();return function(n,r){return t("https://www.zhihu.com/api/v4/topics/".concat(e,"/vote/").concat(n),{method:r})}}(v);Object(O.useEffect)((function(){return b(t)}),[t]);var y=function(){var e=ir()(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null==j?void 0:j.totalVotes)||0,((null==j?void 0:j.liked)||(null==j?void 0:j.disliked))&&r--,a=Object.assign(Object.assign({},d),{},{vote:Object.assign(Object.assign({},j),{},{liked:t,disliked:n,totalVotes:r+(t||n?1:0)})}),e.next=5,ur.a.supportsAction("iOS/hapticFeedback");case 5:if(!e.sent){e.next=7;break}ur.a.dispatch("iOS/hapticFeedback");case 7:return b(a),m(!1),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=Or(ir()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("like","POST");case 2:a(y(!0,!1));case 3:case"end":return e.stop()}}),e)}))),o),C=Or(ir()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("like","DELETE");case 2:a(y(!1,!1));case 3:case"end":return e.stop()}}),e)}))),o),k=Or(ir()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("dislike","POST");case 2:a(y(!1,!0));case 3:case"end":return e.stop()}}),e)}))),o),A=Or(ir()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("dislike","DELETE");case 2:a(y(!1,!1));case 3:case"end":return e.stop()}}),e)}))),o),x=Object(O.useMemo)((function(){return{data:d,noAnimation:p,recommendVote:w,recommendUnVote:C,againstVote:k,againstUnVote:A}}),[A,k,C,w,d,p]);return Object(r.b)(jr.Provider,Object.assign({value:x},{children:s}),void 0)},wr=function(e,t,n){return function(t){var r=t.colors;return Object.assign({textDecoration:"none",border:e?"":"1px solid ".concat(r.GBK09A),borderRadius:e?"8px":"2px",fontSize:e?"13px":"15px",color:e?r.GBK06A:r.GBK02A},n&&{"*, *::before, *::after":{animation:"none !important"}})}},Cr=function(e,t){var n=null;if(e){var r="answer"===t;n={width:r?"30px":"48px",height:r?"40px":"66px"}}else n={width:"36px",height:"54px"};return Object.assign(Object.assign({},n),{},{flex:"0 0 auto",borderRadius:"3px",overflow:"hidden",objectFit:"cover",marginRight:"10px",filter:"brightness(.95)"})},kr=Object(br.h)(Gn||(Gn=tr()(["\n50% { opacity: 1; transform: scale(2.5); }\nto { transform: scale(0.6); top: -5px; }\n"]))),Ar=Object(br.h)(Kn||(Kn=tr()(["\n50% { opacity: 1; transform: scale(2.5); }\nto { transform: scale(0.6); bottom: -5px; }\n"]))),xr=Object(br.h)(Zn||(Zn=tr()(["\nfrom, 70%, to { transform: scale(1); }\n40% { transform: scale(1.2); }\n90% { transform: scale(1.05); }\n"]))),Rr=Object(br.h)(Jn||(Jn=tr()(["to { transform: scale(1); }"]))),Nr=function(e){var t=e.colors;return{position:"relative",boxSizing:"content-box",borderRadius:"50%",border:"0.5px solid ".concat(t.GBK09A),cursor:"pointer",transition:"background-color .5s","::before":{content:'""',width:"40px",height:"40px",margin:"-20px",position:"absolute",top:"50%",left:"50%",borderRadius:"50%",background:t.GBK99A,opacity:"0.2",zIndex:0,transform:"scale(0)"},'&[aria-pressed="true"]':{"::before":{animation:"".concat(Rr," .5s ease-in-out")},".Icon":{animation:"".concat(xr," .5s ease-in-out"),animationDelay:".5s"},".Sparkle":{"::before":{animation:"".concat(kr," .6s ease-in-out"),animationDelay:".2s"},"::after":{animation:"".concat(Ar," .6s ease-in-out"),animationDelay:".2s"}}}}},Sr=function(e){return{position:"absolute",top:0,left:0,width:"40px",height:"40px","::before, ::after":{content:'""',position:"absolute",marginLeft:"-1px",left:"50%",width:"2px",height:"2px",backgroundColor:e.colors.GBL01A,borderRadius:"50%",opacity:"0"},"::before":{top:"0"},"::after":{bottom:"0"},":nth-of-type(3)":{transform:"rotate(45deg)"},":nth-of-type(4)":{transform:"rotate(90deg)"},":nth-of-type(5)":{transform:"rotate(135deg)"}}},Tr={normal:"知友推荐",less:"评分积累中",close:"暂无评分"},Br=function(e){var t=e.vote,n=Object(cr.b)().Mobile;return!t||t.disable?null:Object(r.c)(w.Text,{children:["normal"===t.ratioStatus&&Object(r.c)(w.Text,Object.assign({as:"span",color:"GBL01A",fontSize:n?"inherit":"17px",fontWeight:"bold"},{children:[(100*t.score).toFixed(),"% "]}),void 0),Tr[t.ratioStatus]]},void 0)},Er=function(e){var t=e.vote,n=e.isTitle;return!t||t.disable||"close"===t.ratioStatus?null:Object(r.c)(w.Text,{children:[n&&Object(r.b)(r.a,{children:" · "},void 0),"".concat(Object(Ee.cnNiceNumber)(t.totalVotes),"人评价")]},void 0)},Ir=function(e){var t,n=e.topic,a=n.title,i=n.vote,o=Object(cr.b)().Mobile;return Object(r.c)(w.Flex,Object.assign({alignItems:"baseline",css:(t=o,function(e){return{color:e.colors.GBK02A,".topicMetaTitle":{display:"inline-block",marginRight:t?0:"11px",fontWeight:"bold",fontSize:t?"15px":"17px"}}})},{children:[Object(r.b)(w.Text,Object.assign({className:"topicMetaTitle"},{children:a}),void 0),!o&&Object(r.b)(Br,{vote:i},void 0),!o&&Object(r.b)(Er,{isTitle:!0,vote:i},void 0)]}),void 0)},zr=function(e){var t=e.topic,n=e.lines,a=void 0===n?1:n;return Object(r.b)(w.Text,Object.assign({color:"GBK06A",css:Object(hr.a)(a)},{children:t.excerpt}),void 0)},qr=function(e){var t=e.topic,n=e.position,a=t.vote,i=Object(cr.b)().Mobile,o=!a||a.disable;if(!i)return Object(r.b)(zr,{topic:t},void 0);var c="question"===n;return o?Object(r.b)(zr,{topic:t,lines:c?2:1},void 0):Object(r.c)(r.a,{children:[Object(r.b)(Br,{vote:a},void 0),c&&Object(r.b)(Er,{vote:a},void 0)]},void 0)},Qr={recommend:{tip:"推荐",icon:un.a,color:"GBL01A"},against:{tip:"不推荐",icon:function(e){return Object(r.b)(un.a,Object.assign({css:{transform:"rotate(180deg)"}},e),void 0)},color:"GBK04A"}},Mr=[0,1,2,3].map((function(e){return Object(r.b)("div",{css:Sr,className:"Sparkle"},e)})),Pr=function(e){var t=e.className,n=e.checked,a=e.type,i=e.onClick,o=Qr[a],c=o.tip,s=o.icon,l=o.color,u=Object(or.a)((function(e){e.preventDefault(),e.stopPropagation(),i("".concat(a).concat(n?"UnVote":"Vote"))}));return Object(r.c)(w.Flex,Object.assign({as:"button",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",p:0,bg:n?l:"GBK99A",color:n?"GBK99A":"GBL05A",css:Nr,className:t,"data-tooltip":c,"aria-pressed":n,"aria-label":c,onClick:u},{children:[Object(r.b)("div",Object.assign({className:"Icon"},{children:Object(r.b)(s,{size:20,center:!0},void 0)}),void 0),"recommend"===a&&Mr]}),void 0)},Lr=function(){var e,t,n=gr(),a=n.data,i=Xn()(n,pr),o=Object(or.a)((function(e){var t;null===(t=i[e])||void 0===t||t.call(i)}));return Object(r.c)(w.Flex,Object.assign({flex:"0 0 auto",css:{margin:"0 12px"}},{children:[Object(r.b)(Pr,{css:{marginRight:"9px"},type:"recommend",checked:null===(e=null==a?void 0:a.vote)||void 0===e?void 0:e.liked,onClick:o},void 0),Object(r.b)(Pr,{type:"against",checked:null===(t=null==a?void 0:a.vote)||void 0===t?void 0:t.disliked,onClick:o},void 0)]}),void 0)},_r=function(e){var t=e.className,n=e.position,a=e.onClick,i=gr(),o=i.data,c=i.noAnimation,s=o.urlToken,l=o.avatar,u=o.title,d=void 0===u?"":u,b=o.vote,h=Object(or.a)((function(){null==a||a()})),f=Object(cr.b)().Mobile,p=b&&"close"!==b.ratioStatus;return Object(r.c)(w.Flex,Object.assign({as:"a",alignItems:"center",bg:"GBK10A",p:"12px",className:t,css:wr(f,0,c),"aria-label":"话题 ".concat(d),target:"_blank",href:"https://www.zhihu.com/topic/".concat(s),onClick:h},{children:[l&&Object(r.b)("img",{alt:"",src:l,css:Cr(f,n)},void 0),Object(r.c)(w.Flex,Object.assign({flexDirection:"column",flex:"1 1 auto",justifyContent:"space-around"},{children:[Object(r.b)(Ir,{topic:o},void 0),Object(r.b)(qr,{topic:o,position:n},void 0)]}),void 0),p&&Object(r.b)(Lr,{},void 0)]}),void 0)},Dr=function(e){var t=e.data,n=e.onVote,a=e.onVoteError,i=Xn()(e,mr);return(null==t?void 0:t.title)?Object(r.b)(yr,Object.assign({data:t,onVote:n,onVoteError:a},{children:Object(r.b)(_r,Object.assign({},i),void 0)}),void 0):null},Fr=function(e){var t=e.className,n=e.data,a=n.avatar,i=n.urlToken,o=n.title,c=n.excerpt;return Object(r.c)(w.Box,Object.assign({as:"a",display:"block",p:"20px 20px 12px",className:t,css:{textDecoration:"none",outlineOffset:"-1px"},"aria-label":"话题 ".concat(o),target:"_blank",href:"https://www.zhihu.com/topic/".concat(i)},{children:[Object(r.c)(w.Flex,Object.assign({mb:"12px"},{children:[a&&Object(r.b)(w.Image,{flex:"0 0 auto",width:"50px",height:"70px",overflow:"hidden",mr:"12px",css:{objectFit:"cover",borderRadius:"3px",filter:"brightness(.95)"},alt:"",src:a},void 0),Object(r.c)("div",{children:[Object(r.b)(w.Text,Object.assign({color:"GBK02A",mb:"7px",fontSize:"15px",fontWeight:"bold",css:Object(hr.a)(1)},{children:o}),void 0),Object(r.b)(w.Text,Object.assign({color:"GBK04A",fontSize:"14px",css:Object(hr.a)(2)},{children:c}),void 0)]},void 0)]}),void 0),Object(r.c)(w.Text,Object.assign({color:"GBL07A",fontSize:"14px"},{children:["查看更多",Object(r.b)(fr.a,{center:!0,size:22},void 0)]}),void 0)]}),void 0)};function Hr(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ur=function(e){var t=e.data,n=Object(we.b)(),a=Hr(i.a,n,2),o=a[0],c=a[1];return Object(O.useEffect)((function(){c()}),[]),o?!t.vote||t.vote.disable?null:Object(r.b)(Dr,{css:{margin:"14px 0"},data:t,position:"question"}):null},Vr=Object.assign;var Wr=function(e){return j.a.createElement(Qe.a,Vr({viewBox:"0 0 24 24"},e),j.a.createElement("path",{d:"M17.248 6.5H13.11a.71.71 0 01-.657-.446.731.731 0 01.154-.787l2.812-3.045a2.395 2.395 0 012.926-.392c.95.558 1.527 1.767 1.243 2.844A2.431 2.431 0 0117.248 6.5zm-.114-3.357a.798.798 0 00-.572.24l-1.265 1.474h1.95c.447 0 .695-.44.695-.893a.815.815 0 00-.808-.821zM11.286 7.61v2.857H3.429a1.429 1.429 0 010-2.857h7.857zm1.428 0h7.857a1.429 1.429 0 010 2.857h-7.857V7.611zm-1.428 4.286V22.61H6.23c-.892 0-1.215-.093-1.541-.267a1.817 1.817 0 01-.756-.756c-.175-.326-.267-.65-.267-1.54V14.46c0-.892.092-1.215.267-1.541.174-.326.43-.582.756-.756.326-.174.649-.267 1.54-.267h5.056zm1.428 0h5.055c.892 0 1.215.093 1.541.267.326.174.582.43.756.756.175.326.267.65.267 1.54v5.587c0 .892-.092 1.215-.267 1.541-.174.326-.43.582-.756.756-.326.174-.649.267-1.54.267h-5.056V11.897zM6.752 6.5a2.431 2.431 0 01-2.341-1.826c-.284-1.077.293-2.286 1.243-2.844a2.395 2.395 0 012.926.392l2.812 3.045a.731.731 0 01.153.787.711.711 0 01-.656.446H6.752zm.686-3.117a.798.798 0 00-.976-.13c-.317.185-.585.637-.49.996a.81.81 0 00.78.608h1.951L7.438 3.383z"}))};function Gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Kr=function(e){Object(d.a)(n,e);var t=Gr(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={remainedTime:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.totalCountdownTime,r=t.onFinish;"number"==typeof n?(this.setState({remainedTime:n}),this.timer=setInterval((function(){e.setState({remainedTime:e.state.remainedTime-5})}),5e3)):"function"==typeof r&&r()}},{key:"componentDidUpdate",value:function(){var e=this.props.onFinish;this.state.remainedTime<=0&&(clearInterval(this.timer),"function"==typeof e&&e())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderCountdownTime",value:function(){var e=this.state.remainedTime;if(e<60)return Object(r.c)(O.Fragment,{children:["距结束不足 ",Object(r.b)("span",{children:"1"})," 分钟"]});var t,n,a=(t=e,n=Math.floor(t/60),{hours:Math.floor(n/60),minutes:n%60}),i=a.hours,o=a.minutes;return 0===i?Object(r.c)(O.Fragment,{children:["距结束还有 ",Object(r.b)("span",{children:o})," 分钟"]}):Object(r.c)(O.Fragment,{children:["距结束还有 ",Object(r.b)("span",{children:i})," 小时"," ",o>0&&Object(r.c)(O.Fragment,{children:[Object(r.b)("span",{children:o})," 分钟"]})]})}},{key:"render",value:function(){var e=this.props.className;return null===this.state.remainedTime?Object(r.b)("div",{className:e,children:"距结束还有"}):Object(r.b)("div",{className:e,children:this.renderCountdownTime()})}}]),n}(O.Component);function Zr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}Kr.propTypes={totalCountdownTime:v.a.number.isRequired,onFinish:v.a.func};var Jr,Yr=function(e){Object(d.a)(n,e);var t=Zr(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={expanded:!1,bodyHeight:0},e.contentRef=Object(O.createRef)(),e.handleExpand=function(){var t=e.contentRef.current;e.setState({expanded:!0,bodyHeight:"".concat(t.offsetHeight+1,"px")}),se.a.trackEvent(Object(ft.a)(e),{id:5036,action:"Expand"})},e.handleCollapse=function(){e.setState({expanded:!1,bodyHeight:0}),se.a.trackEvent(Object(ft.a)(e),{id:5037,action:"Fold"})},e.handleClickHeader=function(){e.state.expanded?e.handleCollapse():e.handleExpand()},e.handleCountdownFinish=function(){var t=e.props;(0,t.removeBrandQuestionRedPacket)(t.questionId)},e}return Object(u.a)(n,[{key:"renderCountdown",value:function(){var e=this.props.redPacket,t=e.countDownType,n=e.countDownValue,a="".concat("CommercialAnswerRedPacket","-countdown");return 2===t?Object(r.b)(Kr,{className:a,totalCountdownTime:n,onFinish:this.handleCountdownFinish}):Object(r.c)("div",{className:a,children:["还剩 ",Object(r.b)("span",{children:Object(Ee.cnNiceNumber)(n)}),"个红包"]})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.redPacket,a=n.title,i=n.image,o=n.iconText,c=n.content,s=this.state,l=s.expanded,u=s.bodyHeight;return Object(r.b)(A.a,{view:{id:5035},trackCardShow:!0,children:Object(r.c)("div",{className:ue()("CommercialAnswerRedPacket",t,Object(ve.a)({},"".concat("CommercialAnswerRedPacket","--expanded"),l)),children:[Object(r.c)("div",{className:"".concat("CommercialAnswerRedPacket","-header"),role:"button",tabIndex:0,onClick:this.handleClickHeader,children:[Object(r.c)("div",{className:"".concat("CommercialAnswerRedPacket","-main"),children:[Object(r.c)("div",{className:"".concat("CommercialAnswerRedPacket","-subtitle"),children:[Object(r.c)("div",{className:"".concat("CommercialAnswerRedPacket","-badge"),children:[Object(r.b)("span",{children:Object(r.b)(Wr,{size:11})}),Object(r.b)("span",{children:o})]}),this.renderCountdown()]}),Object(r.b)("div",{className:"".concat("CommercialAnswerRedPacket","-title"),children:a})]}),Object(r.b)("div",{className:"".concat("CommercialAnswerRedPacket","-image"),children:Object(r.b)("img",{src:Object(Ie.imgUrl)(i,"xl"),alt:""})}),Object(r.b)("div",{className:"".concat("CommercialAnswerRedPacket","-icon"),children:l?Object(r.b)(ie.a,{size:20}):Object(r.b)($e.a,{size:20})})]}),Object(r.b)("div",{className:"".concat("CommercialAnswerRedPacket","-body"),style:{height:u},children:Object(r.b)("div",{ref:this.contentRef,className:"".concat("CommercialAnswerRedPacket","-content"),dangerouslySetInnerHTML:{__html:c}})})]})})}}]),n}(O.Component),$r=Object(y.connect)(null,{removeBrandQuestionRedPacket:E.fb})(Yr),Xr=Object(I.a)(null)((function(e){var t,n,a,i=e.id,o=e.question,c=e.position,s=void 0===c?"top":c,l=function(e,t,n){var r=Object(y.useSelector)((function(t){var n,r;return null==t||null===(n=t.question)||void 0===n||null===(r=n.questionBanners)||void 0===r?void 0:r[e]})),a=Object(y.useDispatch)();return Object(O.useEffect)((function(){t&&a(Object(E.v)(e))}),[t,a,e]),null==r?void 0:r.filter((function(e){return e.position===n}))}(i,null==o?void 0:o.isBannered,s),u="normal"===o.questionType&&(null==l||null===(t=l[0])||void 0===t||null===(n=t.imagePc)||void 0===n?void 0:n[0]),d=null==l||null===(a=l[0])||void 0===a?void 0:a.verbPc;if(Object(O.useEffect)((function(){u&&se.a.trackCardShow(null,{id:7707},{button:{text:d}})}),[u,d]),!u)return null;var b=l[0],h=b.targetLinkPc,f=b.entryVerbPc,p=b.imagePc[0].url;return h&&d&&f&&p?Object(r.b)(w.Link,{className:"Card",css:Object.assign({display:"block",fontSize:0,marginBottom:16},"top"===s?{width:654,height:54,borderRadius:4}:{width:296,height:90,borderRadius:"2px 2px 0 0"}),href:h,onClick:function(e){se.a.trackEvent(e.target,{id:7708,action:"OpenUrl"},{link:{url:h},button:{text:d}})},target:"_blank",children:Object(r.b)(w.Image,{alt:f,src:p,css:{height:"100%",width:"100%",objectFit:"cover"}})}):null}));function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var ta=function(e){Object(d.a)(n,e);var t=ea(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={collapsed:!0,editShown:!1,invitationTipShown:!1,brandQuestionPrizesExpanded:!1},e.getHandleInvite=function(t){t&&(e.handleInvite=t)},e.handleExpand=function(){e.setState({collapsed:!1}),se.a.trackEvent(null,{id:6783,action:"Click"})},e.handleCollapse=function(){e.setState({collapsed:!0,shareMenuPositionStatus:"normal"})},e.handleEditShow=e.props.authRequired((function(){var t=(e.props.question.reviewInfo||{}).editTips;t?e.props.showNotification(t,"red"):e.setState({editShown:!0})})),e.handleEditClose=function(){e.setState({editShown:!1})},e.handleInvitationShow=function(){e.setState({invitationModalShown:!0})},e.handleInvitationHide=function(){e.setState({invitationModalShown:!1})},e.handleInvitationTipShow=function(){e.setState({invitationTipShown:!0})},e.handleInvitationTipClose=function(){e.setState({invitationTipShown:!1})},e.handleRedirectionCreatorShow=function(){e.setState({redirectionCreatorShown:!0})},e.handleRedirectionCreatorClose=function(){e.setState({redirectionCreatorShown:!1})},e.handleRedirectionCreated=function(t,n){var r=e.props,a=r.router,i=r.question.id,o=t.id;e.handleRedirectionCreatorClose(),n.then((function(){a.push("/question/".concat(o,"?rf=").concat(i))}))},e.handleDelete=function(){var t=e.props,n=t.question.id,r=t.isCommercialQuestion,a=t.deleteQuestion,i=t.deleteBrandQuestion;return r?i(n).then((function(){location.href="/"})):a(n).then((function(){location.href="/"}))},e.handleConfirmDelete=function(){e.handleDeleteModalClose(),e.handleDelete()},e.handleDeleteModalShow=function(){e.setState({deleteModalShown:!0})},e.handleDeleteModalClose=function(){e.setState({deleteModalShown:!1})},e.handlePositionStatusChange=function(t){e.setState({shareMenuPositionStatus:t})},e.handleBrandQuestionPrizesToggle=function(){e.setState({brandQuestionPrizesExpanded:!e.state.brandQuestionPrizesExpanded})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.isAnswerPage,e.question.id),n=e.isCommercialQuestion,r=e.loadBrand,a=e.loadQuestionCommercialBanner,i=e.loadBrandQuestionRedPacket,o=e.loadBrandQuestionPermission,c=e.loadBrandQuestionOpenStatus,s=e.loadBrandQuestionAdvancedStyle,l=e.loadBrandQuestionPrize,u=e.currentUser;u&&Object(be.c)("question",t,be.a),n&&(r(t),a(t),s(t),i(t).then((function(e){e&&e.payload||l(t)})),u&&"guest"!==u.userType&&(o(t),c(t)))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.isAnswerPage,a=e.question,i=a.id,o=a.relationship.isAnonymous,c=e.isAnswerPage;!this.state.collapsed&&e.question&&this.props.question&&e.question.detail.length!==this.props.question.detail.length&&this.setState({collapsed:!0,editShown:!1}),n===i&&r===c||this.setState({collapsed:!0,invitationTipShown:!1}),o||this.setState({invitationTipShown:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.collapsed,r=t.collapsed;if(n&&!r){var a=this.container.getBoundingClientRect().top;window.scrollTo(0,window.pageYOffset+a-document.documentElement.clientHeight)}}},{key:"hasExtraContentUnderAuthor",get:function(){var e=this.props,t=e.question,n=e.isCommercialQuestion,r=e.topicMeta,a=t.relatedCards,i=void 0===a?[]:a,o=t.annotationDetail,c=t.redPacket,s=t.prize;return o||i[0]||c||(null==s?void 0:s.status)||r.urlToken&&!n}},{key:"renderEditModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.permitEditTopics,n=this.props,a=n.question,i=n.brand,o=a.id,c=a.title,s=a.editableDetail,l=a.topics,u=a.questionType,d=a.relationship.isAnonymous,b=this.state.editShown;return Object(r.b)(Ye.a,{id:o,title:c,detail:s,topics:l,questionType:u,isAnonymous:d,show:b,onClose:this.handleEditClose,brand:i,permitEditTopics:t})}},{key:"renderFooter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.permitEditQuestion,n=e.permitEditTopics,a=this.props,i=a.question,o=a.isCommercialQuestion,c=a.currentUser,s=this.state.collapsed,l=o&&!0;return Object(r.c)("div",{className:"QuestionHeader-footer",children:[Object(r.b)("div",{className:"QuestionHeader-footer-inner",children:Object(r.c)("div",{className:"QuestionHeader-main QuestionHeader-footer-main",children:[Object(r.b)(At,{question:i}),l&&Object(r.b)(Ln,{question:i}),Object(r.b)(Tn,{question:i,onInvitationTipShow:this.handleInvitationTipShow,getHandleInvite:this.getHandleInvite,editQuestionButton:t&&Object(r.b)(at,{onClick:this.handleEditShow,text:"修改问题"})}),Object(r.b)("div",{className:"QuestionHeader-actions",children:!s&&Object(r.c)(ae.c,{preset:"plain",onClick:this.handleCollapse,children:["收起 ",Object(r.b)(ie.a,{center:!0})]})})]})}),c&&this.renderEditModal({permitEditTopics:n})]})}},{key:"renderSpecialQuestionAuthor",value:function(){var e=this.props.question.author;return Object(r.c)(O.Fragment,{children:[Object(r.b)(ye,{className:"QuestionHeader-specialQuestionAuthor",author:e}),Object(r.b)("div",{className:"QuestionHeader-topicDivider"})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,a=t.question,i=t.isAnswerPage,o=t.isCommercialQuestion,c=t.isOrgQuestion,s=t.isAuthorCurrentUser,l=t.brand,u=t.publicEditPermission,d=t.topicMeta,b=t.permission.canBrandAdminEdit,h=t.currentUser,f=t.blockStrategies,p=(f=void 0===f?{}:f).isBlockingBindTopic,m=a.title,v=a.detail,O=a.topics,j=void 0===O?[]:O,g=a.author,y=a.showAuthor,C=a.showEncourageAuthor,x=a.excerpt,R=a.thumbnailInfo,N=a.isEditable,S=a.id,T=a.reviewInfo,B=a.relatedCards,E=void 0===B?[]:B,I=a.annotationDetail,z=a.redPacket,q=a.relationship.isAuthor,Q=this.state,M=Q.collapsed,P=Q.invitationTipShown,L=Q.brandQuestionPrizesExpanded,_=j.map((function(e){return{name:e.name,id:e.id}})),D=u||{},F=D.isQuestionEditable,H=D.isQuestionTopicEditable,U=Object(ee.e)(N,s,F)||b,V=Object(ee.e)(N,s,H)||b,W=this.renderFooter({permitEditQuestion:U,permitEditTopics:V}),G=h&&"guest"!==h.userType;return Object(r.c)("div",{"data-zop-question":JSON.stringify({title:m,topics:_,id:S,isEditable:N}),children:[Object(r.b)(fe.a,{children:Object(r.b)(Mt,{question:a,location:n,invitationTipShown:P,onInvitationTipClose:this.handleInvitationTipClose,isAnswerPage:i})}),o&&(!M||!i)&&Object(r.b)(me.a,{type:a.type,id:a.id}),Object(r.b)(A.a,{module:"QuestionDescription",card:{content:{type:"Question",token:String(S)}},children:Object(r.b)("div",{children:Object(r.c)("div",{className:"QuestionHeader",ref:function(t){e.container=t},children:[Object(r.c)("div",{className:"QuestionHeader-content",children:[Object(r.c)("div",{className:"QuestionHeader-main",children:[Object(r.b)(Xr,{id:S,question:a}),Object(r.c)("div",{className:"QuestionHeader-tags",children:[o&&Object(r.b)(Bn,{brand:l}),!p&&Object(r.c)("div",{className:"QuestionHeader-topics",children:[Boolean(y&&!(o&&null!=l&&l.name))&&this.renderSpecialQuestionAuthor(),j.map((function(e){return Object(r.b)(Je,{item:e},e.id)}))]})]}),Object(r.c)("h1",{className:"QuestionHeader-title",children:[c&&re()(Jr||(Jr=Object(te.a)(["","提问："])),g.name),m]}),Boolean(!y&&!c&&!o&&C)&&Object(r.b)(Te,{question:a,isAuthorCurrentUser:s,hasExtraContent:this.hasExtraContentUnderAuthor}),Object(r.b)(w.Flex,{children:Object(r.b)(pe.a,{item:a,annotationProps:I&&{annotationDetail:I}})}),E[0]&&Object(r.b)(Vn,{target:E[0]}),z&&Object(r.b)($r,{questionId:S,redPacket:z}),Object(r.b)(Qn,{question:a,expanded:L,handleToggle:this.handleBrandQuestionPrizesToggle}),Object(r.c)(we.a,{children:[!o&&Object(r.b)(Ur,{data:d}),Object(r.b)(Ve,{questionId:S,isInAnswerPage:i})]}),Object(r.b)(lt,{html:v,reviewInfo:T,excerpt:x,thumbnailInfo:R,collapsed:M,onExpand:this.handleExpand,onEdit:this.handleEditShow,isAuthor:q,hideWatermark:null==l?void 0:l.noWatermark})]}),Object(r.b)("div",{className:"QuestionHeader-side",children:Object(r.b)("div",{className:"QuestionHeader-follow-status",children:Object(r.b)(Jt,{question:a})})})]}),M?W:Object(r.b)(oe.a,{bottom:!0,container:function(){return e.container},onPositionStatusChange:this.handlePositionStatusChange,children:W}),c&&Object(r.b)(Yn,{question:a})]})})}),Object(r.b)(he.a,{children:Object(r.c)("div",{className:ue()("QuestionHeader-content",{isLogin:G}),children:[Object(r.b)("div",{className:"QuestionHeader-main",children:Object(r.b)("h1",{className:"QuestionHeader-title",onClick:function(){Object(ce.scrollTo)(window,{top:0,behavior:"smooth"})},children:m})}),Object(r.b)(k.b,{block:"Toolbar",children:Object(r.b)(A.a,{module:"ToolBar",card:{content:{type:"Question",token:String(S)}},children:Object(r.b)("div",{className:"QuestionHeader-side",children:Object(r.b)(At,{question:a,inTopBar:!0})})})}),Object(r.b)("div",{className:"QuestionHeader-profile",children:Object(r.b)(Ce.a,{currentUser:h})})]})})]})}}]),n}(O.PureComponent);ta.propTypes={question:v.a.object,location:v.a.object,isAnswerPage:v.a.bool};var na=Object(C.compose)(a.withRouter,L.a,Object(de.d)({dataPath:"question"}),de.c,Object(y.connect)((function(e,t){var n=e.question.brand,r=e.publicEditPermission,a=e.currentUser,i=t.question,o=i.questionType,c=i.author;return{brand:n,publicEditPermission:r,currentUserUrlToken:a,permission:Object(E.bb)(e),isCommercialQuestion:"commercial"===o,isOrgQuestion:"org"===o,isAuthorCurrentUser:Object(D.j)(e,c)}}),{loadBrand:E.H,updateQuestionLocked:E.sb,deleteQuestion:E.l,deleteBrandQuestion:E.i,showNotification:F.h,loadQuestionCommercialBanner:E.T,loadBrandQuestionRedPacket:E.N,loadBrandQuestionPermission:E.L,loadBrandQuestionOpenStatus:E.K,loadBrandQuestionAdvancedStyle:E.I,loadBrandQuestionPrize:E.M}))(ta);function ra(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}function ia(e){var t=e.toString();return 1===t.length?"0".concat(t):t}var oa=function(e){var t=Object(x.parseInputTime)(e);return t?"".concat(t.getFullYear(),"-").concat(ia(t.getMonth()+1),"-").concat(ia(t.getDate()),"T").concat(ia(t.getHours()),":").concat(ia(t.getMinutes()),":").concat(ia(t.getSeconds())):""};function ca(){var e=document.querySelector("#js-answerAddCard .Editable-content");e?e.scrollIntoView({block:"end"}):window.scrollTo(0,0)}var sa=function(e){Object(d.a)(n,e);var t=aa(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={anonymousConfirmShown:!1,answering:!1,hideIsMutedCover:!1,signFlowModalShown:!1},e.editableStatscReporter=Object(R.c)("AnswerPage",(function(){return e.props.currentUserUrlToken})),e.getPublicEditPermission=function(){var t=e.props,n=t.question,r=t.currentUserUrlToken,a=t.getPublicEditPermission,i=p()(n,"author.urlToken","");p()(n,"isEditable",!1)&&r&&i!==r&&a()},e.handleToggleAnonymous=function(){var t=e.props,n=t.showNotification,r=t.reward.question,a=void 0===r?{}:r,i=t.id;i&&a[i]&&a[i].isRewardable?n("已开启赞赏的回答无法设为匿名，请先关闭赞赏","red"):e.setState({anonymousConfirmShown:!e.state.anonymousConfirmShown})},e.startAddAnswer=function(){var t=e.props,n=t.params.answerId,r=t.location.query.group_id,a=t.router;n||r?(a.push("/question/".concat(e.props.id)),setTimeout(e.focusAddAnswer)):e.focusAddAnswer()},e.endAddAnswer=function(){e.setState({answering:!1})},e.focusAddAnswer=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ca(),e.setState({answering:Date.now()},(function(){t&&setTimeout((function(){ca()}))}))},e}return Object(u.a)(n,[{key:"getChildContext",value:function(){return{toggleAnonymous:this.handleToggleAnonymous,startAddAnswer:this.startAddAnswer,endAddAnswer:this.endAddAnswer}}},{key:"componentDidMount",value:function(){var e=this;Object(R.d)();var t,n=this.props,r=n.question,a=n.answer,i=n.draft,o=n.currentUser,l=n.params,u=n.attachedArticleId,d=n.loadAttachedArticleToDraft,b=n.location;(!(t=null==a?void 0:a.updatedTime)||Date.now()-1e3*t>6e4)&&Object(M.loadScript)("https://zz.bdstatic.com/linksubmit/push.js",{crossOrigin:void 0}),function(){var t=Object(s.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(ee.f)(b),t.prev=1,!r){t.next=7;break}return t.next=5,e.fetchDraft();case 5:t.next=9;break;case 7:return t.next=9,e.fetchQuestionAndDraft();case 9:if(!e.props.params.answerId){t.next=11;break}return t.abrupt("return");case 11:if(!u){t.next=14;break}return t.next=14,d(l.id,u);case 14:(i&&!i.schedule||!i&&n||u)&&e.focusAddAnswer(n||u),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(){return t.apply(this,arguments)}}()(),this.getPublicEditPermission(),o&&"guest"!==o.userType||this.setState({signFlowModalShown:!0})}},{key:"componentDidUpdate",value:function(e){this.props.params.id!==e.params.id&&this.fetchQuestionAndDraft()}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe()}},{key:"fetchQuestionAndDraft",value:function(){var e=this.props,t=e.id,n=e.loadQuestion;return Promise.all([n(t),this.fetchDraft()])}},{key:"fetchDraft",value:function(){var e,t=this.props,n=t.loadDraft;return t.currentUser&&(e=n(this.props.params.id)),this.setState({anonymousConfirmShown:!1}),e}},{key:"renderMeta",value:function(){var e=this.props.question,t=Object(ee.d)(e);return Object.keys(t).map((function(e){return Object(r.b)("meta",{itemProp:e,content:t[e]},e)}))}},{key:"renderJSONLD",value:function(){var e=this.props,t=e.location,n=e.question,a=e.answer,o=e.params.answerId,c=e.ua;if(!/baiduspider/i.test(c.origin))return null;var s=Boolean(o),l=s?a:n;if(l){var u=s?[l.createdTime,l.updatedTime]:[l.created,l.updatedTime],d=ra(i.a,u,2),b=d[0],h=d[1],f=oa(b),p=oa(h);return Object(r.b)("script",{type:"application/ld+json",children:'\n        {\n          "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",\n          "@id": "https://www.zhihu.com'.concat(t.pathname,'",\n          "appid": "否",\n          "pubDate": "').concat(f,'",\n          "upDate": "').concat(p,'"\n        }')})}}},{key:"handleSignFlowModalClose",value:function(){this.setState({signFlowModalShown:!1})}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.location,i=n.params,o=n.children,c=n.question,s=n.router.location.query,l=n.topicMeta,u=n.answer,d=n.firstAnswer,b=Boolean(i.answerId);if(!c)return Object(r.b)("div",{});if("true"===s.answer_deleted_redirect)return Object(r.b)(X,{id:c.id});var h=c.questionType,f=c.isMuted,p=c.title,m=c.relationship,v=m.isAuthor,j=m.myAnswer,y=c.visibleOnlyToAuthor;if(!b&&!v&&y||b&&null!=u&&u.visibleOnlyToAuthor&&(null==u||null===(e=u.relationship)||void 0===e||!e.isAuthor))return Object(r.b)(B,{});var C=this.state,x=C.anonymousConfirmShown,N=C.answering,S=C.hideIsMutedCover,T=C.signFlowModalShown,E=b?u:c;return Object(r.c)(Q.a,{children:[Object(r.b)(W,{pageInfo:{pageId:b?"42":"172"}}),Object(r.b)(k.b,{content:{type:"Question",token:String(null==c?void 0:c.id)},children:Object(r.b)(k.f,{zaType:"Card",children:Object(r.b)(A.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(c.id)}},children:Object(r.b)(K,{isQAPage:!b,children:Object(r.c)("div",{className:"QuestionPage",itemScope:!0,itemProp:"mainEntity",itemType:"http://schema.org/Question",children:[E&&Object(r.b)(q,{entity:E}),T&&Object(r.b)(U.b,{showQrcodeFirst:!0,titlePart:Object(r.b)(V.a,{title:"登录知乎，问答干货一键收藏"}),maskClosable:!1,defaultType:"login",onClose:function(){t.handleSignFlowModalClose()}}),Object(r.b)(g.a,Object.assign({title:p},!b&&{meta:Object(P.c)(c,d)})),this.renderMeta(),this.renderJSONLD(),"commercial"===h&&f&&!S&&v&&Object(r.b)("div",{className:"QuestionPage-commercialIsMutedCover",onClick:function(){t.setState({hideIsMutedCover:!0})}}),y&&v&&!b&&Object(r.b)("div",{className:"QuestionPage-visibleYourself",children:"仅自己可见"}),Object(r.b)(na,{topicMeta:l,question:c,location:a,isAnswerPage:b}),Object(r.b)(w.Box,{id:"AnswerFormPortalContainer",bg:"GBK10C",mt:"10px",mx:"auto",css:{width:"1000px"}}),Object(r.b)(R.b.Provider,{value:this.editableStatscReporter,children:Object(O.cloneElement)(O.Children.only(o),{question:c,answering:N})}),Object(r.b)(G.a,{question:c,myAnswer:j,shown:x,onClose:this.handleToggleAnonymous})]})})})})})]})}}]),n}(O.PureComponent);sa.fetchData=function(e){var t=e.dispatch,n=e.getState,r=e.params,a=r.id,i=r.answerId;return n().env.userAgent.isBot?Promise.all([t(Object(E.Z)(a,i)),t(Object(E.ab)(a,i)),t(Object(E.S)(a))]):t(Object(E.S)(a))},sa.childContextTypes={toggleAnonymous:v.a.func,startAddAnswer:v.a.func,endAddAnswer:v.a.func};var la=Object(C.compose)(a.withRouter,L.a,Object(y.connect)((function(e,t){var n=t.params,r=n.id,a=n.answerId,i=t.location.query,o=e.question.topicMeta,c=e.entities.drafts,s=void 0===c?{}:c,l=e.env,u=l.referer,d=l.userAgent,b=e.reward,h=void 0===b?{}:b,f=e.currentUser,p=Boolean(a);return Object.assign({id:r,topicMeta:o[r]||{},question:Object(E.db)(e,{id:r}),attachedArticleId:i.attach_to_article,reward:h,draft:s["question_".concat(r)],referer:u,ua:d,currentUserUrlToken:f,currentUser:Object(D.b)(e)},p?{answer:Object(_.c)(e,{id:a})}:{firstAnswer:Object(_.i)(e,{id:r})})}),{loadQuestion:E.S,loadDraft:E.P,loadAttachedArticleToDraft:E.E,showNotification:F.h,getPublicEditPermission:H.b}))(sa),ua=n(920),da=n(434),ba=n(479),ha=n(1150),fa=n(1243);function pa(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ma=function(e){var t,n,a,o=e.question,c=o.id,s=o.title,l=o.person,u=e.headerInfo,d=e.enableIgnore,b=e.extraFooterInfo,h=e.button,f=e.handleIgnoreQuestion,p=void 0===f?lr.a:f,m="https://www.zhihu.com/question/".concat(c),v=Object(k.l)().trackEvent,j=Object(O.useState)(!1),g=pa(i.a,j,2),y=g[0],C=g[1];return Object(r.b)(k.b,{content:{type:"Question",token:String(c)},children:Object(r.c)(k.f,{zaType:"Card",as:w.Flex,zaText:s,className:"jsNavigable",justifyContent:"space-between",alignItems:"center",css:function(e){return{padding:"22px 0px",borderBottom:"1px solid ".concat(e.colors.GBK09A),position:"relative"}},onMouseEnter:function(){C(!0)},onMouseLeave:function(){C(!1)},children:[Object(r.c)(w.Box,{css:{flex:"1"},children:[Object(r.c)(w.Flex,{mb:12,color:"GBL05A",alignItems:"center",css:{fontSize:"15px"},children:[Object(r.b)("img",{alt:"",css:{width:"20px",height:"20px",borderRadius:"50%",marginRight:"8px"},src:null==u||null===(t=u.avatar)||void 0===t?void 0:t.url}),Boolean(l||(null==u||null===(n=u.avatar)||void 0===n?void 0:n.people))&&Object(r.c)(w.Flex,{alignItems:"center",css:function(e){return{color:e.colors.GBK03A,marginRight:"6px",fontSize:"14px",fontWeight:"16px"}},children:[Object(r.c)(w.Flex,{alignItems:"center",css:function(e){return{color:e.colors.GBK03A}},children:[l||(null==u||null===(a=u.avatar)||void 0===a?void 0:a.people),null!=u&&u.labels?Object(r.b)(w.Flex,{css:function(e){return{marginBottom:"3px",padding:"1px 2px",marginLeft:"4px",marginRight:"8px",color:e.colors.GBL01A,fontSize:"12px",border:"1px solid ".concat(e.colorMod(e.colors.GBL01A).alpha(.2)),borderRadius:"2px"}},children:null==u?void 0:u.labels}):null," ","邀请你回答"===(null==u?void 0:u.invite)?"":"的提问"]}),Object(r.b)(w.Flex,{css:function(e){return{color:e.colors.GBK06A,marginLeft:"6px",lineHeight:"21px"}},children:null==u?void 0:u.createdTime}),Object(r.b)(w.Flex,{css:function(e){return{color:e.colors.GBK06A,marginLeft:"6px"}},children:null==u?void 0:u.invite})]}),d&&y&&Object(r.b)(ae.c,{css:{position:"absolute",top:"12px",right:"0"},className:"QuestionItem-ignoreButton",preset:"plain","data-tooltip":"不感兴趣","aria-label":"不感兴趣","data-tooltip-preset":"white","data-tooltip-classname":"QuestionItem-ignoreButtonTooltip",color:"GBL07A",icon:Rt.a,onClick:function(){p(c),v({eventType:"Click",elementLocation:{type:"Button",text:"不感兴趣",content:{type:"Question",token:String(c)}}})}})]}),Object(r.b)(fa.b,{item:{question:{url:m,title:s}}}),Object(r.b)(w.Flex,{css:function(e){return{color:e.colors.GBK06A,fontSize:"14px"}},children:b})]}),h||Object(r.b)(ut.a,{css:function(e){return{width:"96px",height:"28px",lineHeight:"26px",borderRadius:"3px",color:e.colors.GBK99B,padding:0,border:"1px solid ".concat(e.colors.GBL01A),backgroundColor:e.colors.GBL01A,boxSizing:"border-box"}},icon:nt.a,label:"写回答",href:"".concat(m,"?write"),target:"_blank",onClick:function(){v({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Button",text:"写回答",content:{type:"Question",token:String(c)}}},{link:{url:"".concat(m,"?write")}})}})]})})};var va=function(e){var t=e.type,n=e.index,i=e.onClick,o=e.enablingTypeName,c=e.totals,s=t.name,l=t.text,u=t.queryName,d=t.icon,b=s===o;return Object(r.c)(a.Link,{className:ue()("QuestionType","QuestionWaiting-type",{"QuestionType--active":b}),role:"tab","aria-selected":b,"aria-setsize":c,"aria-posinset":n+1,to:u?"/question/waiting?type=".concat(u):"/question/waiting","data-za-detail-view-id":5362,"data-za-extra":JSON.stringify({button:{text:l}}),onClick:i,children:[Object(r.b)(d,{className:"QuestionType-icon",size:18}),l]})},Oa=n(639);function ja(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ga=Object(a.withRouter)(Object(y.connect)((function(e,t){var n=t.location.query.type;return{allWaitingQuestions:e.question.waitingQuestions,defaultType:Oa.b.find((function(e){return e.queryName===n}))||Oa.b[0]}}),{getWaitingQuestions:E.y,getWaitingInvitedQuestions:E.x,deleteWaitingQuestion:E.m,ignoreToolsQuestionInvite:E.A})((function(e){var t=e.allWaitingQuestions,n=e.defaultType,a=e.getWaitingQuestions,o=e.getWaitingInvitedQuestions,c=e.deleteWaitingQuestion,s=e.ignoreToolsQuestionInvite,l=Object(O.useRef)(null);Object(ba.b)(".jsNavigable",l,{scrollPaddingTop:140});var u=Object(O.useRef)(null),d=Object(O.useState)(n.name),b=ja(i.a,d,2),h=b[0],f=b[1],p=Object(O.useState)(Oa.b.reduce((function(e,t){var n=t.name;return Object.assign(Object.assign({},e),{},Object(ve.a)({},n,0))}),{})),m=ja(i.a,p,2),v=m[0],j=m[1],y=t[h].paging,w=function(){return o(null!=y&&y.next?y.next:"notifications/v3/timeline/entry/invite?invite_with_time_slice=1&limit=20&offset=0")},C=Object(O.useState)(new Set),k=ja(i.a,C,2),A=k[0],x=k[1],R=t[h],N=R.isEnd,S=R.isLoading,T=R.questions.filter((function(e){var t=Object(Oa.a)(e,h).question,n=t.ignoreId,r=t.id;return!A.has(n||r)}));return Object(r.c)("div",{className:"QuestionWaiting",ref:l,children:[Object(r.b)(g.a,{title:"等你来答"}),Object(r.c)(ua.d,{role:"region","aria-label":"问题列表",className:"QuestionWaiting-mainColumn",children:[Object(r.b)(oe.a,{offset:62,children:function(e){var n=e.isFixed;return Object(r.c)("div",{className:ue()("QuestionWaiting-typesContainer",{"QuestionWaiting-typesContainer--fixed":n}),children:[n&&Object(r.b)("div",{className:"QuestionWaiting-typesTopper"}),Object(r.b)("div",{role:"tablist","aria-label":"问题分类",className:ue()("QuestionWaiting-types",{"QuestionWaiting-types--fixed":n}),children:Oa.b.map((function(e,n){return Object(r.b)(va,{totals:Oa.b.length,type:e,index:n,enablingTypeName:h,onClick:function(){return function(e){j(Object.assign(Object.assign({},v),{},Object(ve.a)({},h,window.pageYOffset)));var n=e.name,r=e.request,i=r.endpoint,o=r.query;t[e.name].questions.length||("invite"!==e?a({type:n,endpoint:i,query:o}):w()),f(n),window.scrollTo(0,v[n])}(e)}},e.name)}))})]})}}),Object(r.b)(da.b,{ref:u,className:"QuestionWaiting-questions",onLoad:function(){"invite"===h?w():a({type:h,endpoint:n.request.endpoint,query:n.request.query,offset:T.length})},isLoading:S,placeholder:Object(r.b)(da.a,{className:"QuestionWaiting-placeholder"}),isDrained:N,children:T.map((function(e){var t,n=Object(Oa.a)(e,h),a=n.question,i=n.headerInfo,o=n.extraFooter,l=n.showTime,d=n.button,b=n.titleLink;return Object(r.b)(ma,{className:"QuestionWaiting-questionItem",question:a,headerInfo:i,extraFooterInfo:o,showTime:l,enableIgnore:!0,handleIgnoreQuestion:(t=a.ignoreId||a.id,function(){x(new Set(A).add(t)),"invite"===h?s(t):c(t),u.current.maybeRun()}),button:d,titleLink:b},e.id)}))})]}),Object(r.b)(ha.a,{omit:{noBanner:!0,noCategory:!0}})]})}))),ya=n(2311),wa=n(872);function Ca(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ka=function(e){var t=e.className,n=e.titleClassName,a=e.sourceClassName,o=e.hideButtonClassName,c=e.question,s=c.id,l=c.title,u=c.detail,d=c.excerpt,b=c.isDeleted,h=e.mainSource,f=e.subSource,p=e.mainTool,m=e.subTool,v=e.zaId,j=void 0===v?{}:v,g=e.onMouseEnter,y=void 0===g?lr.a:g,w=e.onMouseLeave,C=void 0===w?lr.a:w,k=e.onExpand,x=void 0===k?lr.a:k,R=e.onCollapse,N=void 0===R?lr.a:R,S="https://www.zhihu.com/question/".concat(s),T=Object(O.useState)(!0),B=Ca(i.a,T,2),E=B[0],I=B[1],z=Object(O.useCallback)((function(e){I(!0),N(e),se.a.trackEvent(e.target,{id:j.collapse,action:"Collapse"})}),[I,N,j]),q=Object(O.useCallback)((function(e){I(!1),x(e),se.a.trackEvent(e.target,{id:j.expand,action:"Expand"})}),[I,x,j]);return b?Object(r.c)("div",{className:ue()("ListQuestionItem","ListQuestionItem--deleted",t),children:[Object(r.b)("div",{className:"ListQuestionItem-hint",children:"该问题已被删除"}),Object(r.b)("div",{className:"ListQuestionItem-mainTool",children:p})]}):Object(r.b)(A.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(s)}},trackCardShow:Boolean(j.cardShow),view:{id:j.cardShow},children:Object(r.c)("div",{className:ue()("ListQuestionItem","jsNavigable",t),onMouseEnter:y,onMouseLeave:C,children:[(h||f)&&Object(r.c)("div",{className:ue()("ListQuestionItem-source",a),children:[h&&Object(r.b)("div",{className:"ListQuestionItem-mainSource",children:h}),f&&Object(r.b)("div",{className:"ListQuestionItem-subSource",children:f})]}),Object(r.b)("a",{className:ue()("ListQuestionItem-title",n,{"ListQuestionItem-title--noDetail":!u}),href:S,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":j.titleClick,children:l}),u&&Object(r.b)(lt,{className:"ListQuestionItem-RichText",html:u,reviewInfo:{},excerpt:d,collapsed:E,onExpand:q,editable:!1}),Object(r.c)("div",{className:"ListQuestionItem-tool",children:[Object(r.c)("div",{className:"ListQuestionItem-mainTool",children:[Object(r.b)(ut.a,{className:"ListQuestionItem-writeAnswerButton",color:"blue",icon:nt.a,label:"写回答",href:"".concat(S,"?write"),target:"_blank","data-za-not-track-link":!0,onClick:function(e){se.a.trackEvent(e.target,{id:j.writeAnswer,action:"Answer"})}}),p]}),(m||!m&&!E)&&Object(r.c)("div",{className:"ListQuestionItem-subTool",children:[m,!E&&Object(r.c)("div",{className:ue()("ListQuestionItem-hideButton",o),role:"button",tabIndex:0,onClick:z,children:["收起",Object(r.b)(ie.a,{className:"ToolsQuestionItem-hideButtonIcon",center:!0})]})]})]})]})})},Aa=n(2418),xa=n.n(Aa);function Ra(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Na(e){var t=e.laterQuestions,n=e.getLaterQuestions,o=e.updateLaterQuestion,c=Object(O.useRef)(null);Object(ba.b)(".jsNavigable",c);var s=Object(O.useRef)(null),l=Object(O.useState)(new Set),u=Ra(i.a,l,2),d=u[0],b=u[1],h=t.count,f=t.isEnd,p=t.isLoading,m=t.questions.filter((function(e){return!d.has(e.id)}));return Object(r.c)("div",{className:"QuestionLater",ref:c,children:[Object(r.c)(ua.d,{className:"QuestionLater-mainColumn",children:[Object(r.c)("div",{className:"QuestionLater-title",children:[Object(r.b)(ya.a,{className:"QuestionLater-titleIcon",size:30}),"我的稍后答",Boolean(h)&&Object(r.b)("div",{className:"QuestionLater-titleNumber",children:h})]}),!p&&0===m.length&&Object(r.c)("div",{className:"QuestionLater-empty",children:[Object(r.b)("img",{className:"QuestionLater-emptyImage",src:xa.a,alt:""}),Object(r.c)("div",{className:"QuestionLater-emptyText",children:["还没有稍后答，",Object(r.b)(a.Link,{className:"QuestionLater-emptyLink",to:"/question/waiting",children:"看看为你推荐的问题"})]})]}),Object(r.b)(da.b,{ref:s,className:"QuestionLater-questions",onLoad:function(){return n(20,m.length)},isLoading:p,placeholder:Object(r.b)(da.a,{className:"QuestionLater-placeholder"}),isDrained:f,children:m.map((function(e){return Object(r.b)(ka,{className:"QuestionLater-questionItem",question:e,zaId:{titleClick:5372,expand:5373,cardShow:5375,writeAnswer:5374},mainTool:Object(r.c)(O.Fragment,{children:[Object(r.c)(ae.c,{className:ue()("QuestionLater-deletingButton"),preset:"outline",color:"grey",onClick:function(t){b(new Set(d).add(e.id)),o(e.id,!1),s.current.maybeRun(),se.a.trackEvent(t.target,{id:5376,action:"Delete"})},children:[Object(r.b)(wa.a,{size:22}),"移除"]}),!e.isDeleted&&Object(r.c)("div",{className:"QuestionLater-info",children:[Object(Ee.formatNumber)(e.answerCount)," 个回答"," · ",Object(Ee.formatNumber)(e.visitCount)," 个浏览"]})]})},e.id)}))})]}),Object(r.b)(ha.a,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}Na.fetchData=function(e){return(0,e.dispatch)(Object(E.u)())};var Sa=Object(y.connect)((function(e){return{laterQuestions:e.question.laterQuestions}}),{getLaterQuestions:E.t,updateLaterQuestion:E.nb})(Na),Ta=n(2944);var Ba=function(e){var t=e.users,n=void 0===t?[]:t;return 0===n.length?null:1===n.length?Object(r.b)(Bt.a,{user:n[0]}):2===n.length?Object(r.c)(O.Fragment,{children:[Object(r.b)(Bt.a,{user:n[0]})," 和 ",Object(r.b)(Bt.a,{user:n[1]})]}):3===n.length?Object(r.c)(O.Fragment,{children:[Object(r.b)(Bt.a,{user:n[0]}),"、",Object(r.b)(Bt.a,{user:n[1]})," 和"," ",Object(r.b)(Bt.a,{user:n[2]})]}):n.length>3?Object(r.c)(O.Fragment,{children:[Object(r.b)(Bt.a,{user:n[0]}),"、",Object(r.b)(Bt.a,{user:n[1]})," 和"," ",Object(r.b)(Bt.a,{user:n[2]})," 等 ",n.length," 人"]}):null};var Ea=function(e){var t=e.user,n=t.isFollowed,a=t.isFollowing,i=t.gender,o=null;return n&&a?o="互相关注":a&&(o="你关注了".concat(function(e){return 0===e?"她":1===e?"他":"TA"}(i))),o?Object(r.b)("div",{className:"RelationLabel",children:o}):null},Ia=n(420);function za(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var qa=Ia.a[0];function Qa(e){var t=e.allInvitedQuestions,n=e.getInvitedQuestions,a=e.ignoreInvitedQuestion,o=e.updateLaterQuestion,c=Object(O.useRef)(null);Object(ba.b)(".jsNavigable",c);var s=Object(O.useRef)(null),l=Object(O.useState)(qa),u=za(i.a,l,2),d=u[0],b=u[1],h=Object(O.useState)(new Set),f=za(i.a,h,2),p=f[0],m=f[1],v=Object(O.useState)(new Set),j=za(i.a,v,2),g=j[0],y=j[1],w=Object(O.useState)(Ia.a.reduce((function(e,t){var n=t.name;return Object.assign(Object.assign({},e),{},Object(ve.a)({},n,0))}),{})),C=za(i.a,w,2),k=C[0],A=C[1],x=t[d.name],R=x.isEnd,N=x.isLoading,S=x.questions.filter((function(e){var t=e.question;return!p.has(t.id)}));return Object(r.c)("div",{className:"QuestionInvited",ref:c,children:[Object(r.c)(ua.d,{className:"QuestionInvited-mainColumn",children:[Object(r.c)("div",{className:"QuestionInvited-title",children:["邀请回答",Boolean(t.total.count)&&Object(r.b)("div",{className:"QuestionInvited-titleNumber",children:t.total.count-k.total})]}),Object(r.b)("div",{className:"QuestionInvited-tabs",children:Ia.a.map((function(e){return Object(r.c)("div",{className:ue()("QuestionInvited-tab",{"QuestionInvited-tab--active":e.name===d.name}),role:"button",tabIndex:0,onClick:function(){return function(e){t[e.name].questions.length||n(e,20,0),se.a.trackEvent(null,{id:5377},{button:{text:e.text}}),b(e)}(e)},children:[Object(r.b)("div",{className:"QuestionInvited-tabTitle",children:e.text}),Object(r.b)("div",{className:"QuestionInvited-tabMeta",children:t[e.name].count-k[e.name]})]},e.name)}))}),Object(r.b)(da.b,{ref:s,className:"QuestionInvited-questions",onLoad:function(){return n(d,20,S.length)},isLoading:N,placeholder:Object(r.b)(da.a,{className:"QuestionInvited-placeholder"}),isDrained:R,children:S.map((function(e){var t=e.inviters,n=e.question;return Object(r.b)(ka,{className:"QuestionInvited-questionItem",question:n,zaId:{titleClick:5378,expand:5379,cardShow:5380,writeAnswer:5381},mainSource:Object(r.c)("div",{className:"QuestionInvited-questionItemMainSource",children:[Object(r.b)(Ba,{users:t})," 邀请你回答"]}),subSource:1===t.length&&Object(r.b)(Ea,{user:t[0]}),mainTool:Object(r.c)(O.Fragment,{children:[Object(r.c)(ae.c,{className:ue()("QuestionInvited-deletingButton"),preset:"outline",color:"grey",onClick:function(e){m(new Set(p).add(n.id)),A(Object.assign(Object.assign({},k),{},Object(ve.a)({total:k.total+1},d.name,k[d.name]+1))),a(n.id),s.current.maybeRun(),se.a.trackEvent(e.target,{id:5382,action:"Ignore"})},children:[Object(r.b)(Ta.a,{size:18}),"忽略"]}),Object(r.c)(ae.c,{className:ue()("QuestionInvited-laterButton",{"QuestionInvited-laterButton--active":g.has(n.id)}),preset:"outline",color:"grey",onClick:function(e){var t=!g.has(n.id),r=new Set(g);t?r.add(n.id):r.delete(n.id),y(r),o(n.id,t),se.a.trackEvent(e.target,{id:5383,action:t?"Add":"UnAdd"})},children:[g.has(n.id)?null:Object(r.b)(ya.a,{}),g.has(n.id)?"已添加":"稍后答"]}),Object(r.c)("div",{className:"QuestionInvited-info",children:[Object(Ee.formatNumber)(n.answerCount)," 个回答"," · ",Object(Ee.formatNumber)(n.visitCount)," 个浏览"]})]})},n.id)}))})]}),Object(r.b)(ha.a,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}Qa.fetchData=function(e){return(0,e.dispatch)(Object(E.s)())};var Ma=Object(y.connect)((function(e){return{allInvitedQuestions:e.question.invitedQuestions}}),{getInvitedQuestions:E.r,ignoreInvitedQuestion:E.z,updateLaterQuestion:E.nb})(Qa),Pa=n(667),La=n(2396),_a=n(898),Da=n(533),Fa=n(2293),Ha=n(2294),Ua=n(235),Va=n(90),Wa=n(60);var Ga=n(2376),Ka=n(2375),Za=n(435);function Ja(e){if(!Object(Da.a)(e))return"";var t="";return Object(Fa.a)(e)?t+="今天":Object(Ha.a)(e)?t+="昨天":t+=Object(Ua.a)(e,"yyyy/MM/dd"),0!==function(e){Object(Wa.a)(1,arguments);var t=Object(Va.a)(e),n=t.getSeconds();return n}(e)?t+=" "+Object(Ua.a)(e,"HH:mm:ss"):0!==Object(Ga.a)(e)?t+=" "+Object(Ua.a)(e,"HH:mm"):0!==Object(Ka.a)(e)&&(t+=" "+Object(Ka.a)(e)+"点"),t}var Ya=function(e){var t=e.event,n=e.status,a=t.isOnline,i=t.events;if(!a&&0===n)return null;var o=Object(Pa.a)(),c=o.colors,s=c.GBL05A,l=c.GBK09A,u=c.GBK99A,d=c.GBL01A,b=o.fontWeights;return Object(r.b)(w.Box,{pt:"16px",css:Object.assign(Object.assign({},Object(La.a)({borderTop:"1px solid ".concat(l)})),{},{"&::after":{content:"''",display:"block",position:"absolute",width:"2px",height:"calc(100% - 30px - 52px)",backgroundColor:s,opacity:.12,left:"24px",top:"30px"}}),children:i.map((function(e,t){var a=e.content,i=e.created,o=e.url,c=0===t;return 1===n&&t>2?null:Object(r.c)(Za.b,{zaBlock:"EventItem",target:"_blank","data-za-detail-view-id":6621,href:o,pl:"40px",css:{paddingLeft:"40px",paddingRight:"16px",position:"relative",display:"block",paddingBottom:"16px","&::after":Object.assign({content:"''",zIndex:1,display:"block",position:"absolute",left:"25px",top:"0.5em",transform:"translateX(-50%)",boxShadow:"0px 0px 0px 2px ".concat(u),borderRadius:"50%",width:"6px",height:"6px",background:s},c&&{background:d,border:"2px solid ".concat(u),boxShadow:"0 0 0 1px ".concat(d)})},children:[Object(r.b)(w.Text,{css:Object.assign({color:s},c&&{color:d,fontWeight:b.bold}),children:Ja(1e3*i)}),Object(r.c)(w.Flex,{flexDirection:"row",alignItems:"center",mt:"6px",color:"GBK02A",css:Object.assign({},c&&{fontWeight:b.bold}),children:[Object(r.b)(w.Text,{flex:"0 1 auto",css:Object(hr.a)(1),children:a}),Object(r.b)(fr.a,{text:!0,css:{color:s,flex:"0 0 auto"}})]})]},i+o)}))})},$a=function(e){var t=e.slice(0,2).map((function(e){return e.content})).join("、");return t.length<=16?t:e[0]&&e[0].content},Xa=function(e){var t=e.event,n=e.status,a=e.onClick,i=t.url,o=!i,c=null,s=$e.a,l=6623;return 0===n?c="显示全部":1==n?(c=o?"展开全部进展":"查看全部进展",l=o?6623:6622,s=o?$e.a:fr.a):2==n&&(c="收起",s=ie.a),Object(r.c)(qe.a,{zaAction:i?"OpenUrl":null,zaBlock:"ViewAll","data-za-detail-view-id":l,target:"_blank",flex:"0 0 auto",ml:"8px",color:"GBL05A",css:{display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer"},onClick:function(e){i||(e.preventDefault(),a(!1))},href:i,children:[c,Object(r.b)(s,{})]})},ei=function(e){var t=e.event,n=e.status,a=e.onChangeStatus,i=e.getContainer,o=t.isOnline,c=t.url,s=t.events;if(o&&s.length<=3&&!c)return null;var l=Object(O.useRef)(),u=Object(or.a)((function(){0===n||1===n?a(2):2===n&&a(o?1:0),setTimeout((function(){var e;return null===(e=l.current)||void 0===e?void 0:e.check()}))}));return Object(r.b)(oe.a,{ref:l,bottom:!0,container:i,children:Object(r.c)(w.Flex,{flexDirection:"row",alignItems:"center",justifyContent:o||2===n?"flex-end":"flex-start",bg:"GBK99B",pl:"20px",pr:"13px",height:"48px",css:function(e){return Object(La.a)({borderTop:"1px solid ".concat(e.colors.GBK09A)})},children:[!o&&2!==n&&Object(r.c)(w.Text,{children:[$a(s),"等 ",s.length," 个事件进展"]}),Object(r.b)(Xa,{event:t,status:n,onClick:u})]})})};function ti(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ni=function(e){var t=e.event,n=t.isOnline,a=t.url,o=Object(O.useRef)(null),c=Object(O.useState)((function(){return a||n?1:0})),s=ti(i.a,c,2),l=s[0],u=s[1];return Object(r.c)("div",{ref:o,children:[Object(r.b)(Ya,{event:t,status:l}),Object(r.b)(ei,{event:t,status:l,onChangeStatus:u,getContainer:function(){return o.current}})]})},ri={special_event:"事件讨论",timeline_event:"最新进展"};var ai=function(e){var t,n=e.question;if(null===(t=n.event)||void 0===t||!t.events)return null;var a=Object(Pa.a)().colors,i=a.GBK09A,o=a.GBL01A,c=n.event,s=n.id,l=c.url,u=c.type,d=c.title,b=c.isOnline,h=function(e){var t=e.match(/special\/(\d+)/);return t&&t[1]}(l);return Object(r.b)(k.b,{block:"SpecialTimeline",content:{type:"SpecialTopic",token:h},children:Object(r.b)(A.a,{trackCardShow:!0,module:"Content",content:{type:"SpecialTopic",token:h,parent_token:String(s)},extra:{button:{text:b?"online":"offline"}},view:{id:6620},children:Object(r.c)(k.f,{as:ua.d,zaType:"Card",css:{fontSize:15},children:[Object(r.c)(w.Flex,{flexDirection:"row",alignItems:"center",pl:"18px",height:"48px",css:Object(La.a)({borderTop:"1px solid ".concat(i)}),children:[Object(r.b)(_a.a,{css:{color:o},size:20}),Object(r.c)(w.Text,{fontWeight:"bold",ml:"10px",children:[ri[u]," · ",d]})]}),Object(r.b)(ni,{event:c})]})})})},ii=n(1526),oi=n(1226),ci=n(1747),si=n(1364),li=n(1751),ui=n(1574);function di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var bi=function(e){Object(d.a)(n,e);var t=di(n);function n(){var e,r;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(r=t.call.apply(t,[this].concat(i))).state={topicBiosModalShown:!1,activeTabKey:"video_answer"===(null===(e=r.props.draft)||void 0===e?void 0:e.draftType)?si.a.videoAnswer:si.a.textAnswer},r.answerFormRef=Object(O.createRef)(),r.handleSubmit=function(e){var t=r.props,n=t.currentUser,a=t.question.id,i=t.addAnswer,o=t.scheduledPublish,c=t.validateScheduledPublish,s=t.loadDraft;if(e.publishAt){var l=o(a,e);return l.then((function(){r.context.endAddAnswer(),s(a)})),l}var u=function(){return i(a,e)};return n.autoSendingCreations?c(a).then(u,(function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return pt.a.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(u,(function(){}))})):u()},r.focus=function(){var e;null===(e=r.answerFormRef.current)||void 0===e||e.focus()},r.handleToggleAnonymous=function(){var e=r.context.toggleAnonymous,t=r.props,n=t.showNotification,a=t.question.relationship.isAnonymous,i=t.isOffice;if(a||!r.answerFormRef.current.hasVideo()){if(a||!r.answerFormRef.current.hasMCNLinkCard())return!a&&r.answerFormRef.current.hasADLinkCard()?r.answerFormRef.current.hasFeeConsultCard()?n("不能使用匿名身份插入付费咨询卡片","red"):void n("不能使用匿名身份插入推荐卡片","red"):void(!a&&r.answerFormRef.current.hasCommercialReport()&&i?n("已经进行商业声明的内容不能启用匿名","red"):e());n("不能使用匿名身份推荐商品","red")}else n("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red")},r.handleTabChange=function(e){if(e!==r.state.activeTabKey){var t=r.props,n=t.question.relationship.isAnonymous,a=t.showNotification;if(e===si.a.videoAnswer){var i;if(n)return void a("视频回答不支持匿名","red");null!==(i=r.answerFormRef.current)&&void 0!==i&&i.hasEditorContent()&&(Re.a.get("answerContentSync")||(a("图文回答内容已同步至视频描述"),Re.a.set("answerContentSync",!0)))}r.setState({activeTabKey:e})}},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.getBio)(t),this.props.answering&&setTimeout(this.focus)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.answering!==e.answering&&this.focus()}},{key:"render",value:function(){var e,t=this.state.activeTabKey,n=this.props.question,a=ui.a;return Object(r.c)("div",{className:"AnswerAdd",css:{position:"relative"},children:[Object(r.c)(w.Flex,{justifyContent:"space-between",css:function(e){return[{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}},{background:e.colors.GBK99A}]},children:[Object(r.b)(si.b,{activeTabKey:t,onChange:this.handleTabChange}),Object(r.b)(li.a,{handleClick:null===(e=this.answerFormRef.current)||void 0===e?void 0:e.toggleFullscreen})]}),Object(r.b)("div",{css:function(e){return{background:e.colorMod(e.colors.GBK10C).alpha(.45)}},children:Object(r.b)(a,{activeTabKey:t,handleTabChange:this.handleTabChange,handleToggleAnonymous:this.handleToggleAnonymous,imperativeRef:this.answerFormRef,question:n,onSubmit:this.handleSubmit,onCancel:this.context.endAddAnswer,useMediumEditor:!0})})]})}}]),n}(O.Component);bi.contextTypes={toggleAnonymous:v.a.func.isRequired,endAddAnswer:v.a.func};var hi=Object(C.compose)(a.withRouter,Object(y.connect)((function(e,t){var n=e.question.bio,r=e.topic.bios,a=e.answers.newAnswer,i=e.entities.drafts,o=void 0===i?{}:i,c=t.question.id,s=(n[c]||{result:{type:"headline"}}).result;return"topic"===s.type&&(s.bio=r[s.topic.id]||s.bio),{currentUser:Object(D.b)(e),questionBio:s,newAnswer:a,isOffice:Object(bt.e)(e),draft:o["question_".concat(c)]}}),{showNotification:F.h,addAnswer:_.a,scheduledPublish:_.z,validateScheduledPublish:_.J,loadDraft:E.P,getBio:E.q}))(bi);function fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var pi=function(e){Object(d.a)(n,e);var t=fi(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.question,r=n.id,a=n.relationship.myAnswer,i=void 0===a?{}:a,o=t.router,c=e.question,s=c.id,l=c.relationship.myAnswer,u=void 0===l?{}:l;r===s&&i.answerId!==u.answerId&&(se.a.trackEvent(this,{action:"StatusReport"},{status:{result:"Success",event:{action:"Answer"}}}),o.push("/question/".concat(r,"/answer/").concat(u.answerId)),Re.a.set("answer::justPublished",!0))}},{key:"render",value:function(){if(!this.props.currentUser)return null;var e=this.props,t=e.question,n=e.question,a=n.relationship.myAnswer,i=n.isNormal,o=n.status,c=(o=void 0===o?{}:o).isClose,s=o.isLocked,l=o.isSuggest,u=n.hasPublishingDraft,d=e.answering;return a?null:l?Object(r.c)("div",{className:"QuestionAnswers-answerTip",children:["被建议修改的问题不允许添加新的回答。",Object(r.b)(ut.a,{preset:"plain",to:"/question/21290061",children:"问题为什么会被建议修改？"})]}):s?Object(r.c)("div",{className:"QuestionAnswers-answerTip",children:["该问题目前已经被锁定，无法添加新答案。",Object(r.b)(ut.a,{preset:"plain",to:"/question/19604313",children:"问题为什么会被锁定？"})]}):c?Object(r.c)("div",{className:"QuestionAnswers-answerTip",children:["被关闭的问题不允许添加新的回答。",Object(r.b)(ut.a,{className:"QuestionAnswers-iconLink",preset:"plain",to:"/question/21290061","data-tooltip":"为什么部分问题会被「关闭」「建议修改」？","aria-label":"为什么部分问题会被「关闭」「建议修改」？",icon:oi.a})]}):u?Object(r.b)(ua.d,{className:"QuestionAnswers-answerTipCard",children:"你创建的回答正在发布中…"}):i?Object(r.b)(ci.a,{disabled:!1,children:Object(r.b)(ii.CSSTransitionGroup,{className:"QuestionAnswers-statusWrapper",transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"expand",component:"div",children:d&&Object(r.c)(ua.d,{className:"QuestionAnswers-answerAdd",id:"js-answerAddCard",children:[Object(r.b)("a",{name:"draft"}),Object(r.b)(hi,{question:t,answering:d})]})})}):null}}]),n}(O.PureComponent),mi=Object(a.withRouter)(Object(It.a)(pi)),vi=n(935),Oi=n(157),ji=n(1002);function gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var yi=[{text:"默认排序",value:"default"},{text:"".concat("按","时间排序"),value:"updated"}],wi={updatedAnswers:"updated",answers:"default"};var Ci=function(e){Object(d.a)(n,e);var t=gi(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleResourceChange=function(t){e.props.router.push("/question/".concat(e.props.question.id).concat("default"===t?"":"/answers/".concat(t)))},e}return Object(u.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){JSON.stringify(this.props.permission)!==JSON.stringify(e.permission)&&this.loadQuestionAnswerCount(e)}},{key:"loadQuestionAnswerCount",value:function(e){var t=e.question,n=t.id,r=t.questionType,a=e.permission.canBrandAdminEdit,i=e.loadBrandQuestionAnswerCount;"commercial"===r&&a&&i(n)}},{key:"renderAnswerListHeader",value:function(){var e=this.props,t=e.resource,n=e.question,a=n.id,i=n.answerCount,o=n.questionType,c=n.brand,s=(c=void 0===c?{}:c).isPuQuestion,l=c.answerCntDescription,u=e.commonAnswerCount,d=e.hiddenAnswerCount,b=e.permission.canBrandAdminEdit;return"commercial"===o&&void 0!==s?b?Object(r.c)("div",{className:"QuestionAnswers-navs",children:[Object(r.c)(ae.c,{preset:"plain",className:ue()("QuestionAnswers-nav",{"is--active":["answers","updatedAnswers"].includes(t)}),onClick:function(){location.href="/question/".concat(a)},children:[Object(Ee.formatNumber)(u)," 个回答",l]}),Object(r.c)(ae.c,{preset:"plain",className:ue()("QuestionAnswers-nav",{"is--active":"hiddenAnswers"===t}),onClick:function(){location.href="/question/".concat(a,"/answers/hidden")},children:[Object(Ee.formatNumber)(d)," 个隐藏回答"]})]}):Object(r.c)("span",{children:[Object(Ee.formatNumber)(i)," 个回答 ",l]}):Object(r.c)("span",{children:[Object(Ee.formatNumber)(i)," 个回答"]})}},{key:"isInUpdatedAnswers",get:function(){return"updatedAnswers"===this.props.resource}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.children,a=e.blockStrategies.isBlockingAnswerNewestList;return Object(r.b)(ua.d,{className:"AnswersNavWrapper",children:Object(r.b)(ji.a,Object.assign(Object.assign({title:this.renderAnswerListHeader()},!(a&&this.isInUpdatedAnswers)&&{options:"hiddenAnswers"===t?Object(r.b)("span",{children:"按时间排序"}):Object(r.b)(Oi.b,{listClassName:"Answers-select",needsReposition:!0,plain:!0,value:wi[t],onChange:this.handleResourceChange,css:{".Select-arrow":{width:"1.2em",height:"1.2em"}},children:yi.map((function(e){var t=e.value,n=e.text;return a&&t===wi.updatedAnswers?null:Object(r.b)(Oi.a,{value:t,text:n},t)}))})}),{},{children:n}))})}}]),n}(O.PureComponent),ki=Object(C.compose)(a.withRouter,de.c,Object(y.connect)((function(e){var t=e.question;return{commonAnswerCount:t.commonAnswerCount,hiddenAnswerCount:t.hiddenAnswerCount,permission:Object(E.bb)(e)}}),{loadBrandQuestionAnswerCount:E.J}))(Ci),Ai=n(374),xi=n(410),Ri=n.n(xi),Ni=n(135),Si=n.n(Ni),Ti=n(57),Bi=n(47),Ei=n.n(Bi),Ii=n(383),zi=n.n(Ii),qi=n(23),Qi=n.n(qi),Mi=n(27),Pi=n.n(Mi),Li=n(28),_i=n.n(Li),Di=n(17),Fi=n.n(Di),Hi=n(26),Ui=n.n(Hi),Vi=n(975),Wi=n(478),Gi=n(1203),Ki=n(455),Zi=n(1128),Ji=function(e){function t(){var e,n;Qi()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=_i()(this,(e=Fi()(t)).call.apply(e,[this].concat(a)))).state={display:!1},n.handleCloseByDocument=function(e){e.target.closest("div")&&"Pc-word-card-sign-label"!==e.target.closest("div").className&&n.setState({display:!1})},n.handleClick=function(){n.setState((function(e){return{display:!e.display}}));var e=n.sign.querySelector(".Pc-word-card-sign-label").getBoundingClientRect(),t=e.left,r=e.top,a=e.width,i=e.height+15,o=Math.floor(a/2);n.sign.querySelector(".Pc-word-card-sign-popup").style.top="".concat(r+i,"px"),n.sign.querySelector(".Pc-word-card-sign-popup").style.left="".concat(t-o,"px")},n.handleClose=function(){n.props.onClose&&n.props.onClose()},n.handleRef=function(e){n.sign=e},n}return Ui()(t,e),Pi()(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleCloseByDocument)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleCloseByDocument)}},{key:"render",value:function(){return j.a.createElement("div",{className:"Pc-word-card-sign",ref:this.handleRef},j.a.createElement("div",{className:"Pc-word-card-sign-label",onClick:this.handleClick},"广告​",j.a.createElement(Zi.a,{name:"triangle",className:"Pc-word-card-sign-svg"})),j.a.createElement("div",{className:"Pc-word-card-sign-popup ".concat(this.state.display?"Pc-word-card-sign-popup--isShowed":"Pc-word-card-sign-popup--isHidden")},j.a.createElement("span",{className:"Pc-word-card-sign-popup-arrow"}),j.a.createElement("div",{className:"Pc-word-card-sign-popup-menu"},j.a.createElement("button",{type:"button",onClick:this.handleClose},"不感兴趣"),j.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/promotion-intro"},"知乎广告介绍"))))}}]),t}(O.Component);Ji.propTypes={onClose:v.a.func};var Yi=n(992),$i=n(1065),Xi=n(44),eo=function(e){function t(){var e,n;Qi()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=_i()(this,(e=Fi()(t)).call.apply(e,[this].concat(a)))).state={display:!0},n.handleClick=function(e){e.stopPropagation();var t=Object(Wi.a)(n.props).ad.clickTracks;Object(Ki.a)(t)},n.handleClose=function(){var e=Object(Wi.a)(n.props).ad.closeTracks;Object(Ki.b)(e).then((function(){n.setState((function(e){return{display:!e.display}})),n.props.onClose&&n.props.onClose()}))},n.handleRef=function(e){n.root=e},n}return Ui()(t,e),Pi()(t,[{key:"componentDidMount",value:function(){if(this.root&&!this.props.preview){var e=Object(Wi.a)(this.props).ad,t=e.impressionTracks,n=e.debugTracks,r={impressionTracks:t,viewTracks:e.viewTracks,debugTracks:n};Object(Ki.f)(this.root,r),Object(Ki.c)(n,!!this.props.data.adjson)}}},{key:"render",value:function(){if(!this.state.display)return null;var e=Object(Wi.a)(this.props),t=e.ad,n=e.creative,r=t.expand.displayAdvertisingTag,a=n.asset,i=a.title,o=a.desc,c=a.cta,s=a.landingUrl,l=a.brandName,u=a.brandLogo,d="out_link"===Object(Xi.f)(n,"protoInfo.contentType","");return j.a.createElement("div",{className:"Pc-word",ref:this.handleRef},j.a.createElement("div",{className:"Pc-word-card"},j.a.createElement(to,{href:s,onClick:this.handleClick},j.a.createElement(no,{data:{name:l,logo:u}})),r&&j.a.createElement(Ji,{onClose:this.handleClose}),j.a.createElement(to,{href:s,onClick:this.handleClick},j.a.createElement("h2",{className:"Pc-word-card-title"},i),j.a.createElement("div",{className:"Pc-word-card-content  "},o&&j.a.createElement(j.a.Fragment,null,j.a.createElement("span",null,o),j.a.createElement("span",{className:"Pc-word-card-content-cta  "},c))))),j.a.createElement($i.a,{url:d?"":s}))}}]),t}(O.Component);function to(e){var t=e.children,n=zi()(e,["children"]);return j.a.createElement("a",Ei()({target:"_blank"},n),t)}function no(e){var t=e.data,n=t.name,r=t.logo;return j.a.createElement("div",{className:"Pc-word-card-brand"},j.a.createElement("div",{className:"Pc-word-card-brand-wrapper"},j.a.createElement(Yi.a,{src:r,alt:"logo",className:"Pc-word-card-brand-wrapper-img"}),j.a.createElement("span",null,n)))}function ro(e){var t=Object(Gi.a)(e.data);return t&&t.adjson?j.a.createElement(Vi.a,null,j.a.createElement(eo,Ei()({},e,t))):null}eo.propTypes={data:v.a.object.isRequired,onClose:v.a.func};var ao=n(931),io=n(1060),oo=n(6),co=["ids"],so=["item"];var lo={isDrained:!1,isFetching:!1,ids:[]};function uo(e,t){var n=t.id,r=t.resource;if("notificationAnswers"===r)return e.question[r][n]||lo;var a=e.question[r][n]||lo,i=a.ids,o=Object(Be.default)(a,co);return Object.assign({ids:i.filter((function(e){return"answer"===e.targetType})).map((function(e){return e.target}))},o)}var bo=function(e){var t=e.item,n=Object(Be.default)(e,so);return Object(r.b)(ao.a,{children:Object(r.b)(k.b,{moduleId:"question_page_answer_area",moduleIndex:n.dataZaIndex,extra:{attachedInfoBytes:t.attachedInfo},children:Object(r.b)(io.a,Object.assign({editable:!0,expanded:!0,relatedTo:"question",answer:t,zaInfos:{cardShow:4351,index:String(n.dataZaIndex)}},n))})},t.id)},ho=function(e,t,n){var r=t.relationship,a=r.canCollapseAnswers,i=r.canStickAnswers,o=t.hasPublishingDraft,c=e.map((function(e,t){return bo({item:e,canCollapse:a,canStick:i,hasPublishingDraft:o,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t})}));return n?c:Object(fe.b)(2,c)},fo=function(e,t){return e.map((function(e){return t[e]})).filter((function(e){return e&&!e.isDelete}))},po=Object(Ti.isBrowser)()?Si()(fo,(function(e,t){return"".concat(e.join(","),"-").concat(t.length)})):fo;function mo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function vo(e){var t=Object(O.useRef)(!1),n=Object(y.useDispatch)(),a=e.question.id,i=e.resource,o=e.question,c=o.relationship,s=c.canCollapseAnswers,l=c.canStickAnswers,u=o.hasPublishingDraft,d=Object(y.useSelector)((function(e){return uo(e,{id:a,resource:i})})),b=d.isFetching,h=d.isDrained,f=d.ids,p=Object(y.useSelector)((function(e){return e.env.userAgent.isBot})),m=Object(y.useSelector)(E.c),v=Object(y.useSelector)((function(e){return e.entities})).answers,j=h||b?f:f.slice(0,Math.max(5,f.length-5)),g=po(j,v).filter((function(e){return e&&!e.isDelete}));Object(O.useEffect)((function(){h||b||!t.current||n(Object(E.Q)(a,i,{offset:0,limit:5}))}),[i]),Object(Ai.a)((function(){t.current=!0}));var w={canCollapse:s,canStick:l,hasPublishingDraft:u},C=Object(y.useSelector)(E.p);return Object(r.b)("div",{children:Object(r.b)(da.b,{isLocal:!0,isLoading:b,isDrained:h,onLoad:function(){h||b||n(Object(E.Q)(a,i,{limit:5}))},placeholder:Object(r.b)(da.a,{className:"List-item"}),children:Object(r.b)(k.b,{extra:{configMap:{answer_card_tag:"answers"===i?"default":"new"}},children:p?g.map((function(e,t){return bo(Object.assign({item:e,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t},w))})):Object(fe.b)(2,Ri()(C.map((function(e,t){var n,a=C[t+1],i=(a?g.slice(e,a):g.slice(e)).map((function(n,r){var a=e+r+t;return bo(Object.assign({item:n,itemProp:0===a?"acceptedAnswer":"suggestedAnswer",dataZaIndex:a},w))}));return a?[].concat(mo(_t.a,i),[(n=m[a],n?Object(r.b)(ro,{data:n}):null)]):i}))))})})})}function Oo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var jo=function(e){Object(d.a)(n,e);var t=Oo(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.relationship.isAuthor,a=e.resource,i=e.router;"collapsedAnswers"!==a||r||i.push("/question/".concat(n))}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.question,a=e.question,i=a.questionType,o=a.answerCount;if(e.isMuteSpecial)return Object(r.b)(ua.d,{className:"Answers-none",children:Object(r.c)(vi.k,{children:[Object(r.b)(vi.b,{}),Object(r.b)("div",{children:"回答暂时无法查看"})]})});if("commercial"!==i&&!o){var c=n.status||{},s=c.isClose,l=c.isLocked,u=c.isSuggest;return s||l||u?null:Object(r.b)(ua.d,{className:"Answers-none",children:Object(r.c)(vi.k,{children:[Object(r.b)(vi.b,{}),Object(r.c)("div",{children:["暂时还没有回答，开始",Object(r.b)(wt,{preset:"plain",className:"QuestionAnswers-answerLink",children:"写第一个回答"})]})]})})}return Object(r.b)("div",{id:"QuestionAnswers-answers",className:"QuestionAnswers-answers","data-zop-feedlistmap":"answers"===t?"0,0,1,0":"0,0,1",children:Object(r.b)(ki,{question:n,resource:t,children:Object(r.b)(vo,{question:n,resource:t})})})}}]),n}(O.PureComponent),go=Object(C.compose)(Object(A.b)({module:"ContentList"}),a.withRouter,Object(y.connect)((function(e,t){return{isMuteSpecial:Object(E.D)(t.question)}})))(jo),yo=n(961),wo=n(1206),Co=["className","children"];function ko(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Ao=function(e){Object(d.a)(n,e);var t=ko(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,a=Object(Be.default)(e,Co);return Object(r.b)("div",Object.assign(Object.assign({},a),{},{className:ue()("QuestionMainDivider",t),children:Object(r.b)("span",{className:"QuestionMainDivider-inner",children:n})}))}}]),n}(O.Component);function xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Ro=function(e){Object(d.a)(n,e);var t=xo(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={opened:!1},e.handleLoad=function(){var t=e.props,n=t.question.id;return(0,t.loadItems)(n,"collapsedAnswers")},e.handleOpen=function(){e.handleLoad(),e.setState({opened:!0})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,a=e.items,i=e.question,o=e.question,c=o.collapsedAnswerCount,s=o.questionType,l=(e.currentUser,this.state.opened),u="org"===s,d="".concat(Object(Ee.formatNumber)(c)," 个回答被").concat(u?"隐藏":"折叠"),b=Object(r.b)(ut.a,{preset:"plain",to:u?"/org-intro#org-question":"/question/20120168",target:"_blank",children:"为什么？"});return l?Object(r.c)(ua.d,{children:[Object(r.c)(Ao,{children:[d,"（",b,"）"]}),Object(r.c)(yo.b,{children:[ho(a,i),n&&Object(r.b)(da.a,{className:"List-item"})]}),!t&&!n&&Object(r.b)(wo.a,{onClick:this.handleLoad,children:"更多"})]}):Object(r.c)("div",{className:"CollapsedAnswers-bar",style:{},children:[Object(r.b)(ae.c,{preset:"plain",onClick:this.handleOpen,children:d}),"（",b,"）"]})}}]),n}(O.Component),No=Object(C.compose)(It.a,Object(y.connect)((function(e,t){var n=uo(e,{id:t.question.id,resource:"collapsedAnswers"}),r=n.isFetching,a=n.isDrained,i=n.ids;return{isFetching:r,isDrained:a,items:po(i,e.entities.answers)}}),{loadItems:E.Q}))(Ro);function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var To=function(e){Object(d.a)(n,e);var t=So(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).load=function(){var t=e.props,n=t.isFetching,r=t.id,a=t.loadNotificationAnswers;n||a(r)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.id,r=e.items,a=e.router;r.length||a.replace(location.pathname),(t||r.length)&&Object(E.R)(n)}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,a=t.answerCount,i=e.question,o=e.items,c=e.isFetching,s=e.isDrained;return Object(r.c)("div",{className:"QuestionAnswers-answers",children:[Object(r.b)(ua.d,{children:Object(r.c)(wo.a,{to:"/question/".concat(n),children:["查看全部 ",Object(Ee.formatNumber)(a)," 条回答"]})}),Object(r.c)(ua.d,{children:[Object(r.c)(yo.b,{children:[ho(o,i),c&&Object(r.b)(da.a,{className:"List-item"})]}),!s&&!c&&Object(r.b)(wo.a,{onClick:this.load,children:"更多"})]}),Object(r.b)(ua.d,{children:Object(r.c)(wo.a,{to:"/question/".concat(n),children:["查看全部 ",Object(Ee.formatNumber)(a)," 条回答"]})})]})}}]),n}(O.PureComponent),Bo=Object(C.compose)(a.withRouter,Object(y.connect)((function(e,t){var n=uo(e,{id:t.id,resource:"notificationAnswers"}),r=n.isFetching,a=n.isDrained,i=n.ids;return{isFetching:r,isDrained:a,items:po(i,e.entities.answers)}}),{loadNotificationAnswers:E.R}))(To),Eo=["answers","hiddenAnswers","updatedAnswers","collapsedAnswers","notificationAnswers"];function Io(e){var t=e.id,n=Object(y.useSelector)((function(e){return e.question})),r=Eo.map((function(e){var r,a;return null===(r=n[e])||void 0===r||null===(a=r[t])||void 0===a?void 0:a.sessionId})).filter(Boolean),a=Object(y.useDispatch)(),i=Object(or.a)((function(){r&&r.forEach((function(e){a(Object(E.gb)({questionId:t,sessionId:e}))}))}));return Object(O.useEffect)((function(){return window.addEventListener("beforeunload",i),function(){return window.removeEventListener("beforeunload",i)}}),[i]),null}var zo=n(1281),qo=n(1290),Qo=n(1062),Mo=n(990),Po=n(155),Lo=n(1109);function _o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Do=function(e){Object(d.a)(n,e);var t=_o(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).goToBrand=function(){var t=e.props.brand.target;t&&(location.href="/org/".concat(t.urlToken))},e}return Object(u.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&n.target.urlToken&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.brand,n=t.logo,a=t.name,i=t.target,o=(t.isPuQuestion,t.aboutDescription),c=e.brandMember,s=e.currentUser;return Object(r.c)(ua.d,{className:ue()({MobileBrandQuestionAuthor:!1}),children:[Object(r.b)(ua.b,{className:"BrandQuestionAuthor-header",children:Object(r.b)("span",{className:"BrandQuestionAuthor-headerText",children:o})}),Object(r.c)(ua.c,{className:ue()("BrandQuestionAuthor",i&&"is-clickable"),onClick:this.goToBrand,children:[Object(r.b)("img",{src:n,className:"BrandQuestionAuthor-icon",alt:"brand"}),Object(r.c)("div",{className:"BrandQuestionAuthor-content",children:[Object(r.c)("div",{className:"BrandQuestionAuthor-name",children:[a,i&&i.urlToken&&Object(r.b)(je.c,{css:{marginLeft:3},badge:i.badge})]}),i&&i.headline&&Object(r.b)("div",{className:"BrandQuestionAuthor-intro",children:i.headline})]})]}),c&&c.id&&s&&s.id!==c.id&&Object(r.b)(Lo.a,{className:"BrandQuestionAuthor-buttons",user:c})]})}}]),n}(O.Component),Fo=Object(C.compose)(It.a,Object(y.connect)((function(e){var t=e.entities,n=e.question.brand,r={};return n&&n.target&&n.target.urlToken&&(r=t.users[n.target.urlToken]||{}),{brand:n,brandMember:r}}),{loadBrand:E.H,loadProfile:Po.i}))(Do),Ho=n(1761),Uo=Object(C.compose)(a.withRouter,Object(I.a)(null))((function(e){var t=e.params,n=Object(y.useSelector)((function(e){return Object(E.cb)(e,{id:t.id})})),a=Object(y.useDispatch)();return Object(O.useEffect)((function(){n||a(Object(E.W)(t.id))}),[t.id]),null!=n&&n.title?n.vote&&!n.vote.disable?null:Object(r.b)(ua.d,{css:{marginBottom:"10px"},children:Object(r.b)(Fr,{data:n})}):null}));function Vo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Wo=Object(C.compose)(Object(I.a)(null),It.a,Object(y.connect)(null,{getReadingMembership:E.w}))((function(e){var t=e.getReadingMembership,n=e.isLogin,a=Object(O.useState)(!1),o=Vo(i.a,a,2),c=o[0],s=o[1],l=Object(O.useState)(!1),u=Vo(i.a,l,2),d=u[0],b=u[1];Object(O.useEffect)((function(){n&&t().then((function(e){var t=e.payload;b(t.isHaveRight)})).catch((function(){}))}),[t,n]);var h=function(){s(!c)};return d&&Object(r.c)(r.a,{children:[Object(r.c)(ua.d,{className:"ReadingMembership",onClick:h,children:[Object(r.c)("div",{className:"ReadingMembership-banner",children:[Object(r.b)("div",{children:"领取读书会会员体验卡"}),Object(r.c)("div",{children:["海量电子书免费读 ",Object(r.b)(fr.a,{size:22})]})]}),Object(r.b)("img",{src:"https://pic3.zhimg.com/80/v2-ba02e89d92407e3e2491a27af5ace660_hd.jpeg",alt:""})]}),Object(r.b)(Pt.b,{className:"ReadingMembership-modal",onClose:h,children:c&&Object(r.c)("div",{className:"ReadingMembership-content",children:[Object(r.b)("img",{src:"https://pic2.zhimg.com/80/v2-8f8b9ff43e407c160bfc2d6352c662b6_hd.jpeg",alt:""}),Object(r.c)("div",{className:"ReadingMembership-title",children:[Object(r.b)("div",{children:"登录知乎 App 领取"}),Object(r.b)("div",{children:"读书会会员 7 天体验卡"})]}),Object(r.c)("div",{className:"ReadingMembership-qrcode",children:[Object(r.b)("div",{children:"知乎读书会会员，海量电子书免费读"}),Object(r.b)("img",{src:"https://pic2.zhimg.com/80/v2-e3a03af184c11dc3526218de74977fd5_hd.png",alt:"知乎二维码"}),Object(r.b)("div",{children:"扫码下载知乎 App"})]})]})})]})})),Go=n(5),Ko=n(2160);function Zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Jo=function(e){Object(d.a)(n,e);var t=Zo(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={hideDescription:!1},e.handleRef=function(t){e.title=t},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.title.offsetWidth<this.title.scrollWidth&&this.setState({hideDescription:!0})}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.title,a=e.description,i=e.meta,o=e.imageUrl,c=this.state.hideDescription;return Object(r.c)(ut.a,{preset:"plain",a:!0,to:t,className:"RelatedCommodities-item",target:"_blank",children:[Object(r.b)("img",{className:"RelatedCommodities-image",src:Object(Ie.imgUrl)(o,{quality:90,size:"250x0"}),alt:"live"}),Object(r.c)("div",{className:"RelatedCommodities-content",children:[Object(r.b)("div",{className:ue()("RelatedCommodities-subject",{"RelatedCommodities-subject-two":c}),style:{},ref:this.handleRef,"data-tooltip":n,children:n}),c||Object(r.b)("div",{className:"RelatedCommodities-description",children:a}),Object(r.b)("div",{className:"RelatedCommodities-meta",children:i})]})]})}}]),n}(O.Component),Yo=n(1832);function $o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Xo=function(e){Object(d.a)(n,e);var t=$o(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleListen=function(e){var t="".concat(e.target.closest("a").href,"?extra_auto_play=1");e.preventDefault(),e.stopPropagation(),se.a.trackEvent(e.target,{action:"OpenUrl",element_name:"Play"},{link:{url:t}}),window.open(t,"_blank")},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.item;switch(e.type){case"live":var t=e.id,n=e.subject,a=e.reviewScore,i=e.seats,o=(e.startsAt,e.speaker.member),c=o.name,s=o.avatarUrl;return Object(r.b)(Jo,{link:"/lives/".concat(t),imageUrl:s,title:n,description:c,meta:Object(r.c)("div",{className:"RelatedCommodities-scoreWrapper",children:[Object(r.b)(Yo.a,{score:a}),Boolean(i&&i.taken)&&"".concat(i.taken," 人参与"),!1]})});case"remix_album":case"podcast":case"remix":var l=e.id,u=e.artwork,d=e.title,b=e.author,h=(b=void 0===b?{}:b).user,f=e.trackCount,p="/remix/albums/".concat(l);return Object(r.b)(Jo,{link:p,imageUrl:u,title:d,description:h&&h.name,meta:Object(r.c)("div",{className:"RelatedCommodities-remixMeta",children:[Object(r.c)("div",{children:["共 ",Object(Ee.formatNumber)(f)," 节课"]}),Object(r.b)(ae.c,{className:"RelatedCommodities-remixListen",onClick:this.handleListen,preset:"plain",children:"试听"})]})});case"special":var m=e.id,v=e.subject,O=e.liveCount,j=e.liveMemberCount,g=e.speakers,y=e.artworkMobile,w=g.slice(0,2).map((function(e){return e.member.name})).join("、");return Object(r.b)(Jo,{link:"/lives/specials/".concat(m),imageUrl:y,title:v,description:"".concat(w).concat(g.length>=2?" 等":""),meta:"".concat(Object(Ee.formatNumber)(O)," 场 Live, ").concat(Object(Ee.formatNumber)(j)," 次参与")});case"book":var C=e.id,k=e.title,A=e.cover,x=e.authorName,R=e.readCount;return Object(r.b)(Jo,{link:"/pub/book/".concat(C),imageUrl:A,title:k,description:x,meta:Object(r.c)("div",{className:"RelatedCommodities-bookMeta",children:["".concat(Object(Ee.formatNumber)(R)," 人读过"),Object(r.c)("span",{className:"RelatedCommodities-bookRead",children:[Object(r.b)(Ko.a,{width:13,height:14,center:!0}),"阅读"]})]})});default:return null}}}]),n}(O.Component),ec=Object(A.b)((function(e){var t=e.item,n=e.index;if("book"===t.type)return{module:"EBookItem",index:n,content:{type:"EBook",token:String(t.id)},trackCardShow:!0};var r="special"===t.type?"LiveAlbum":Object(Go.pascalize)(t.type);return{module:"".concat(r,"Item"),index:n,content:Object.assign({type:r,id:t.id},"live"===t.type&&{author_member_hash_id:t.speaker.member.id}),trackCardShow:!0}}))(Xo);function tc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var nc=function(e){Object(d.a)(n,e);var t=tc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadRelatedCommodities)(t,n&&n.id)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadRelatedCommodities,a=e.question.id;n!==a&&r(a)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(r.c)(ua.d,{children:[Object(r.b)(ua.b,{className:"RelatedCommodities-title",children:"相关推荐"}),Object(r.b)(ua.c,{className:"RelatedCommodities-list",children:e.slice(0,3).map((function(e){return Object(r.b)(ec,{item:e},e.id)}))})]}):null}}]),n}(O.Component),rc=Object(C.compose)(Object(y.connect)((function(e,t){var n=e.question.relatedCommodities[t.question.id];return{attachedInfo:(n||[]).attachedInfo,items:n}}),{loadRelatedCommodities:E.Z}),Object(A.b)((function(e){return{attachedInfoBytes:e.attachedInfo,module:"ContentList",moduleName:"相关推荐"}})))(nc);function ac(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var ic=function(e){Object(d.a)(n,e);var t=ac(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.question,t=e.id,n=e.title,a=e.answerCount,i=e.followerCount,o="/question/".concat(t);return Object(r.c)("div",{className:"SimilarQuestions-item",itemProp:"zhihu:similarQuestion",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(r.b)("meta",{itemProp:"name",content:n}),Object(r.b)("meta",{itemProp:"url",content:"https://www.zhihu.com".concat(o)}),Object(r.b)("meta",{itemProp:"answerCount",content:a}),Object(r.b)("meta",{itemProp:"zhihu:followerCount",content:i}),Object(r.b)(ut.a,{preset:"plain",to:o,target:"_blank",children:n})," ",Object(Ee.formatNumber)(a)," 个回答"]})}}]),n}(O.Component),oc=Object(A.b)((function(e){var t=e.question;return{module:"QuestionItem",content:{type:"Question",token:String(t.id),author_member_hash_id:(t.author||{}).id},trackCardShow:!0}}))(ic);function cc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var sc=function(e){Object(d.a)(n,e);var t=cc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadSimilarQuestions)(t,n&&n.id)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadSimilarQuestions,a=e.question.id;n!==a&&r(a)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(r.c)(ua.d,{css:{borderRadius:"0 0 2px 2px"},role:"complementary","aria-label":"相关问题",children:[Object(r.b)(ua.b,{className:"SimilarQuestions-title",children:"相关问题"}),Object(r.b)(ua.c,{className:"SimilarQuestions-list",children:e.map((function(e){return Object(r.b)(oc,{question:e},e.id)}))})]}):null}}]),n}(O.Component),lc=Object(C.compose)(Object(y.connect)((function(e,t){return{items:e.question.similarQuestions[t.question.id]}}),{loadSimilarQuestions:E.ab}),Object(A.b)({module:"RelatedQuestions"}))(sc);function uc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var dc=function(e){Object(d.a)(n,e);var t=uc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.questionType,a=e.loadBrand;"commercial"===r&&a(n)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,a=n.id,i=n.questionType,o=e.brand;return Object(r.b)(Mo.a,{className:"Question-sideColumn Question-sideColumn--sticky",children:Object(r.c)(r.a,{children:["commercial"===i&&Object(r.b)(Ho.a,{questionId:a,pageType:"question"}),"commercial"===i&&o&&Object(r.b)(Fo,{brand:o}),"commercial"!==i&&Object(r.b)(qo.a,{type:"question"}),"normal"===i&&Object(r.b)("div",{className:"Card",children:Object(r.b)(zo.a,{isMobile:!1,id:"question/".concat(a),location:"new_question_up",query:{question_token:a}})}),Object(r.b)(Uo,{}),Object(r.b)(Wo,{}),Object(r.b)(Xr,{id:a,question:t,position:"right"}),"normal"===i&&Object(r.b)(lc,{question:t}),"normal"===i&&Object(r.b)(rc,{question:t}),"normal"===i&&Object(r.b)("div",{className:"Card",children:Object(r.b)(zo.a,{isMobile:!1,id:"question/".concat(a),location:"new_question_down_sticky",query:{question_token:a},delay:500})}),"commercial"===i&&Object(r.b)(qo.a,{type:"question"}),Object(r.b)(Qo.a,{})]})})}}]),n}(O.Component),bc=Object(C.compose)(Object(I.a)(null),Object(A.b)({module:"RightSideBar"}),Object(y.connect)((function(e){return{brand:e.question.brand}}),{loadBrand:E.H,loadProfile:Po.i}))(dc);function hc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var fc=function(e){Object(d.a)(n,e);var t=hc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"renderAnswers",value:function(){var e=this.props,t=e.resource,n=e.question,a=n.questionType,i=n.collapsedAnswerCount,o=n.answerCount,c=n.isNormal,s=n.status,l=(s=void 0===s?{}:s).isLocked,u=e.question,d=e.location,b=e.answering,h=e.invitationShowCount,f=e.isDrained,p=e.isMuteSpecial,m=e.isMuteFreeze,v="updatedAnswers"===t||f,O="commercial"!==a&&!o;return Object(r.c)("div",{children:[Object(r.b)(mi,{question:u,answering:b}),Object(r.b)(ai,{question:u}),Boolean(h)&&!p&&!m&&Object(r.b)(Et.a,{expandCount:h,question:u}),Object(r.b)(go,{resource:t,question:u,location:d}),c&&!l&&"updatedAnswers"!==t&&f&&!O&&Object(r.b)(A.a,{module:"BottomBar",children:Object(r.b)(ua.d,{children:Object(r.b)(wt,{className:"QuestionAnswers-answerButton",size:"spread"})})}),v&&i>0&&!p&&!d.pathname.includes("hidden")&&Object(r.b)(No,{question:u})]})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.isNormalNotification,a=e.notificationId,i=e.location;return Object(r.c)("div",{className:"Question-main",children:[Object(r.b)("div",{className:"Question-mainColumn",children:n?Object(r.b)(Bo,{location:i,question:t,id:a}):this.renderAnswers()}),Object(r.c)(fe.a,{children:[Object(r.b)(bc,{question:t}),Object(r.b)(Io,{id:t.id})]})]})}}]),n}(O.PureComponent);fc.fetchData=function(e){var t=e.params.id,n=e.route.resource,r=e.location.query,a=r.group_id,i=r.page,o=r.qc,c=e.dispatch,s=e.getState;if(!o&&a)return c(Object(E.R)(a));var l=s(),u=l.env.userAgent,d=Object(bt.d)(l),b=5;return u.isBot?b=20:d&&(b=4),c(Object(E.Q)(t,n,{offset:Object(oo.c)(Number(i)||1),limit:b}))};var pc=Object(C.compose)(Object(de.d)({dataPath:"question"}),Object(y.connect)((function(e,t){var n=t.params.id,r=t.route.resource,a=t.location.query,i=a.group_id,o=a.qc,c=e.currentUser,s=!o&&i,l=uo(e,{id:n,resource:r}).isDrained,u=Object(E.db)(e,{id:n}),d=u.answerCount,b=u.relationship.isAnonymous;return{isNormalNotification:s,notificationId:i,resource:r,question:u,isDrained:l,invitationShowCount:c&&!b&&d<4?d?5:3:0,isBot:e.env.userAgent.isBot,isHuman:Object(bt.c)(e),currentUser:Object(D.b)(e),canOia:Object(bt.d)(e),shouldOia:Object(bt.i)(e),shouldSpecialOia:Object(bt.j)(e),referer:Object(bt.h)(e),isMuteSpecial:Object(E.D)(u),isMuteFreeze:Object(E.C)(u),ua:Object(bt.m)(e),draft:Object(E.n)(e,{id:n})}})))(fc),mc=n(1112),vc=n(439),Oc=n(171);function jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var gc=function(e){Object(d.a)(n,e);var t=jc(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={contentRef:null,innerEditingState:!1,isWantToWrite:!1},e.contentRef=Object(O.createRef)(),e.handleCloseComment=function(){var t=e.props,n=t.location,r=n.pathname,a=n.search,i=t.byComment,o=t.router;i&&o.replace({pathname:r,search:a})},e.handleCloseEditing=function(){var t=e.props,n=t.location,r=n.pathname,a=n.query,i=n.hash,o=t.router;window.scrollTo(0,0),"#draft"!==i&&"#write"!==i||o.replace({pathname:r,query:a})},e.handleEditingStateChange=function(t){e.setState({innerEditingState:t})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.loadContentRightsNotification,r=e.location;e.currentUser&&Object(be.c)("answer",t,be.a),this.setState({contentRef:this.contentRef.current,isWantToWrite:Object(ee.f)(r)}),Re.a.get("answer::justPublished")&&(Re.a.delete("answer::justPublished"),n("answer",t))}},{key:"render",value:function(){var e,t=this.props,n=t.question,a=n.id,i=n.relationship,o=i.canCollapseAnswers,c=i.canStickAnswers,s=n.hasPublishingDraft,l=t.answer,u=t.location.hash,d=t.isSearchSpecialSource,b=t.hasLoadedDraft,h=t.isAnswerPage;return(null==l||null===(e=l.question)||void 0===e?void 0:e.id)!==a||l.isDelete?Object(r.b)(mc.a,{to:"/question/".concat(a)}):Object(r.b)(ua.d,{className:"AnswerCard",css:h&&this.state.innerEditingState&&{display:"none"},children:Object(r.b)("div",{className:"QuestionAnswer-content",ref:this.contentRef,tabIndex:0,children:Object(r.b)(vc.d,{root:this.state.contentRef,children:Object(r.b)(io.a,{relatedTo:"answer",answer:l,byComment:Object(gn.a)(u),onCloseComment:this.handleCloseComment,onCloseEditing:this.handleCloseEditing,canCollapse:o,canStick:c,editing:b&&this.state.isWantToWrite,editable:!0,canAbstract:!0,expanded:d||!0,hasPublishingDraft:s,itemProp:"mainEntityOfPage",showReviewingLabel:!0,isSearchSpecialSource:d,isAnswerPage:h,onEditingStateChange:this.handleEditingStateChange})})})})}}]),n}(O.Component),yc=Object(C.compose)(a.withRouter,It.a,Object(y.connect)((function(e,t){var n,r,a=e.question,i=(a=void 0===a?{}:a).draftStatus,o=t.answer;return{hasLoadedDraft:!1===(null==i||null===(n=i[null==o||null===(r=o.question)||void 0===r?void 0:r.id])||void 0===n?void 0:n.loading)}}),{loadAnswer:_.m,loadContentRightsNotification:Oc.Rb}))(gc);function wc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Cc=function(e){Object(d.a)(n,e);var t=wc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.items;t||n.length||this.loadItems()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.question.id,n=e.question.id,r=e.isDrained,a=e.items;n!==t&&!r&&a.length<2&&this.loadItems()}},{key:"loadItems",value:function(){var e=this.props,t=e.question.id,n=e.loadItems,r=e.answerId;return n(t,"answers",{limit:3,entitiesPrefilter:function(e){var t,n,a=null===(t=e.answers)||void 0===t?void 0:t[r];a&&(delete a.content,null===(n=a.author)||void 0===n||delete n.avatarUrl);return e}})}},{key:"render",value:function(){var e=this.props,t=e.question.relationship.canCollapseAnswers,n=e.items,a=e.isWechat;return n.length?Object(r.b)(ua.d,{className:"MoreAnswers",children:Object(r.b)(yo.b,{title:"更多回答","data-zop-feedlist":!0,children:n.map((function(e){return Object(r.b)(ao.a,{children:Object(r.b)(io.a,{relatedTo:"question",answer:e,canCollapse:t,lastreadTouchable:!0,blockReading:!a})},e.id)}))})}):null}}]),n}(O.Component),kc=Object(y.connect)((function(e,t){var n=t.question.id,r=t.answerId,a=e.entities.answers,i=uo(e,{id:n,resource:"answers"});return{isDrained:i.isDrained,items:i.ids.filter((function(e){return e!==Number(r)})).slice(0,2).map((function(e){return a[e]})),isWechat:e.env.userAgent.Wechat}}),{loadItems:E.Q})(Cc),Ac=n(958),xc=n(1043),Rc=n(1305),Nc=n(124);function Sc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Tc=function(e){Object(d.a)(n,e);var t=Sc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.author;return t&&t.length?Object(r.c)("div",{className:"AnswerAuthor-item",children:[Object(r.b)("span",{className:"AnswerAuthor-item-icon",children:Object(r.b)(Rc.a,{text:!0,center:!0})}),Object(r.b)("div",{className:"AnswerAuthor-item-value",children:Object(r.c)(xc.CJKSpace,{children:[t.slice(0,3).map((function(e,t){return Object(r.c)("span",{children:[0!==t&&"、",Object(r.b)(Bt.a,{user:e,noBadge:!0,noHoverCard:!0,children:e.name})]},e.urlToken)})),"也关注了",sn.R[n.gender]]})})]}):null}}]),n}(O.Component);Tc.propTypes={author:v.a.object.isRequired};var Bc=Object(C.compose)(Object(y.connect)((function(e,t){var n=t.author;return Object.assign({currentUser:Object(D.b)(e)},n&&function(e,t){var n=t.urlToken||t.id,r=e.people.mutualsByUser[n]||{isDrained:!1,isFetching:!1,ids:[]};return{isDrained:r.isDrained,isFetching:r.isFetching,items:r.ids.map((function(t){var n=Object(Nc.e)(e,{id:t});return n.code?null:n})).filter(Boolean)}}(e,{urlToken:n.urlToken}))}),{loadItems:Po.g}),Object(Gt.a)({shouldLoad:function(e){return e.currentUser&&e.author&&e.author.urlToken&&e.currentUser.urlToken!==e.author.urlToken&&!e.isDrained},load:function(e){return e.loadItems(e.author.urlToken,"mutuals")}}))(Tc),Ec=n(953),Ic=n(949);function zc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var qc=function(e){return e&&void 0!==e.answerCount&&"undefined"!=typeof articlesCount&&"undefined"!=typeof followerCount&&void 0!==e.badge};var Qc=function(e){Object(d.a)(n,e);var t=zc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.nextItem()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.answer.author.urlToken!==e.answer.author.urlToken&&this.nextItem(e)}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.props.onLoad&&this.props.onLoad()}},{key:"nextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.answer.author.urlToken,n=e.loadProfile,r=e.isDrained;t&&(r||n(t))}},{key:"render",value:function(){var e,t=this.props,n=t.user,a=t.isSelf;if(!n)return null;var i=n.urlToken,o=n.isOrg,c=n.headline,s=n.badge,l=n.badgeV2,u=n.answerCount,d=n.articlesCount,b=n.followerCount,h=je.e(l||s),f=h.identity,p=h.bestAnswerer,m=h.baike,v=o?"org":"people";return Object(r.c)(ua.d,{className:"AnswerAuthor",role:"complementary","aria-label":"关于作者",children:[Object(r.b)(ua.b,{className:"AnswerAuthor-title",children:"关于作者"}),Object(r.b)(ua.c,{children:Object(r.c)("div",{className:"AnswerAuthor-user",children:[Object(r.b)("div",{className:"AnswerAuthor-user-avatar",children:Object(r.b)(Ec.a,{user:n,avatarProps:{size:60},noHoverCard:!0})}),Object(r.c)("div",{className:"AnswerAuthor-user-content",children:[Object(r.b)("div",{className:"AnswerAuthor-user-name",children:Object(r.b)(Ic.a,{user:n,noBadge:!0,noHoverCard:!0})}),c&&Object(r.b)("div",{className:"AnswerAuthor-user-headline",children:Object(r.b)(Tt.a,{html:c})})]})]})}),Object(r.c)(ua.c,{children:[f&&Object(r.c)("div",{className:"AnswerAuthor-item",children:[Object(r.b)("a",{className:"AnswerAuthor-item-icon",href:"/account/verification/intro",target:"_blank",children:Object(r.b)(je.a,{center:!0,size:19})}),Object(r.b)("div",{className:"AnswerAuthor-item-value",children:f.slice(0,2).map((function(e){return e.description})).join("，")})]}),Boolean(null==p||null===(e=p.topics)||void 0===e?void 0:e.length)&&Object(r.c)("div",{className:"AnswerAuthor-item",children:[Object(r.b)("span",{className:"AnswerAuthor-item-icon",children:Object(r.b)(je.b,{center:!0,size:19})}),Object(r.c)("div",{children:[Object(r.b)(Ac.a,{topics:p.topics,user:n,noHoverCard:!0}),"的优秀答主"]})]}),Boolean(m)&&Object(r.c)("div",{className:"AnswerAuthor-item",children:[Object(r.b)("span",{className:"AnswerAuthor-item-icon",children:Object(r.b)(je.d,{center:!0,size:19})}),Object(r.b)("div",{children:m.description})]}),n&&!a&&Object(r.b)(Bc,{author:n})]}),i&&Object(r.c)(ua.c,{children:[Object(r.b)("div",{className:"AnswerAuthor-counts",children:Object(r.c)(Lt.a,{children:[Object(r.b)(Lt.a.Item,{tag:ut.a,preset:"plain",to:"/".concat(v,"/").concat(i,"/answers"),name:"回答",value:u,"data-za-detail-view-element_name":"Answer"}),Object(r.b)(Lt.a.Item,{tag:ut.a,preset:"plain",to:"/".concat(v,"/").concat(i,"/posts"),name:"文章",value:d,"data-za-detail-view-element_name":"Post"}),Object(r.b)(Lt.a.Item,{tag:ut.a,preset:"plain",to:"/".concat(v,"/").concat(i,"/followers"),name:"关注者",value:b,"data-za-detail-view-element_name":"Follower"})]})}),!a&&Object(r.b)(Lo.a,{className:"AnswerAuthor-buttons",user:n})]})]})}}]),n}(O.Component),Mc=Object(y.connect)((function(e,t){var n=t.answer,r=n.author,a=n.author.urlToken,i=e.entities.users,o=a?i[a]:r;return{currentUser:Object(D.b)(e),isDrained:qc(o),user:o,isSelf:Object(D.j)(e,o)}}),{loadProfile:Po.i})(Qc),Pc=n(929),Lc=n(1344);function _c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Dc=function(e){Object(d.a)(n,e);var t=_c(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).load=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerFavlists)(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,a=e.isFetching,i=e.isDrained;return Object(r.c)("div",{className:"AnswerFavlists",children:[Object(r.b)("div",{className:"AnswerFavlists-header",children:Object(r.c)("div",{className:"AnswerFavlists-title",children:["被收藏 ",Object(Ee.formatNumber)(n)," 次"]})}),!(i&&!t.length)&&Object(r.b)(da.b,{className:"AnswerFavlists-list",isLocal:!0,isLoading:a,isDrained:i,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(r.b)(da.a,{className:"AnswerFavlists-item",small:!0}),children:t.map((function(e){var t=e.id,n=e.type,a=e.creator,i=e.isFollowing,o=e.answerCount,c=e.followerCount;return Object(r.b)(yo.a,{children:Object(r.b)(Lc.a,{favlist:e,action:Object(r.b)(dt.a,{preset:"primary",id:t,type:n,isFollowing:i}),status:Object(r.c)(Pc.d,{children:[Object(r.c)("span",{children:["由"," ",Object(r.b)(Bt.a,{user:a,noBadge:!0,noHoverCard:!0,target:"_blank"})," ","创建"]}),Object(r.c)("span",{children:[Object(Ee.formatNumber)(o)," 条内容"]}),Object(r.c)("span",{children:[Object(Ee.formatNumber)(c)," 人关注"]})]})})},t)}))})]})}}]),n}(O.Component),Fc=Object(C.compose)(Object(y.connect)((function(e,t){var n=t.answer.id,r=e.entities.favlists,a=e.answers.favlists[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:a.ids.map((function(e){return r[e]})),count:a.totals,isFetching:a.isFetching,isDrained:a.isDrained}}),{loadAnswerFavlists:_.r}),Object(A.b)({module:"CollectionList"}))(Dc),Hc=n(1028);function Uc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Vc=function(e){Object(d.a)(n,e);var t=Uc(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).load=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerCopyrightApplicants)(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,a=e.isFetching,i=e.isDrained;return Object(r.c)("div",{className:"AnswerCopyrightApplicants",children:[Object(r.b)("div",{className:"AnswerCopyrightApplicants-header",children:Object(r.c)("div",{className:"AnswerCopyrightApplicants-title",children:["授权转载 ",Object(Ee.formatNumber)(n)," 次"]})}),!(i&&!t.length)&&Object(r.b)(da.b,{className:"AnswerCopyrightApplicants-list",isLocal:!0,isLoading:a,isDrained:i,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(r.b)(da.a,{className:"AnswerCopyrightApplicants-item",small:!0}),children:t.map((function(e){var t=e.applier,n=e.accountType,a=e.accountUsername,i=e.createdAt;return Object(r.b)("div",{className:"AnswerCopyrightApplicants-item",children:Object(r.b)(Hc.a,{user:t,meta:"".concat(n," ").concat(a),status:null,action:Object(r.c)("div",{className:"AnswerCopyrightApplicants-time",children:["申请于 ",Object(x.toDateString)(i)]})})},"".concat(t.name,".").concat(i))}))})]})}}]),n}(O.Component),Wc=Object(y.connect)((function(e,t){var n=t.answer.id,r=e.entities.copyrightApplicants,a=e.answers.copyrightApplicants[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:a.ids.map((function(e){return r[e]})),count:a.totals,isFetching:a.isFetching,isDrained:a.isDrained}}),{loadAnswerCopyrightApplicants:_.p})(Vc);function Gc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Kc=function(e){Object(d.a)(n,e);var t=Gc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicant,t=e.applier,n=e.accountType,a=e.accountUsername,i=e.createdAt;return Object(r.c)("div",{className:"AnswerInfo-copyright-applicant",children:[Object(r.b)(Bt.a,{user:t,noBadge:!0,noHoverCard:!0,target:"_blank"}),"，",n," ",a]},"".concat(t.name,".").concat(i))}}]),n}(O.Component);function Zc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Jc=function(e){Object(d.a)(n,e);var t=Zc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicants;return Object(r.b)(ua.c,{className:"AnswerInfo-copyright-applicants",children:e.map((function(e,t){return Object(r.b)(Kc,{copyrightApplicant:e},t)}))},"content")}}]),n}(O.Component);function Yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var $c=function(e){Object(d.a)(n,e);var t=Yc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.favlist,t=e.id,n=e.title,a=e.followerCount,i=e.creator;return Object(r.c)("div",{className:"AnswerInfo-favlist",children:[Object(r.b)("div",{className:"AnswerInfo-favlist-title",children:Object(r.b)(ut.a,{preset:"plain",a:!0,to:"/collection/".concat(t),target:"_blank","data-za-detail-view-element_name":"Collection",title:n,children:n})}),Object(r.c)("div",{className:"AnswerInfo-favlist-author",children:[Object(r.b)(Bt.a,{user:i,noBadge:!0,noHoverCard:!0,target:"_blank","data-za-detail-view-element_name":"Author"})," ","创建"]}),Object(r.c)("div",{className:"AnswerInfo-favlist-followers",children:[Object(Ee.formatNumber)(a)," 人关注"]})]},t)}}]),n}(O.Component),Xc=Object(A.b)((function(e){var t=e.favlist;return{module:"CollectionItem",content:{type:"Collection",token:String(t.id),follower_num:t.followerCount,author_member_hash_id:t.creator.id},trackCardShow:!0}}))($c);function es(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var ts=function(e){Object(d.a)(n,e);var t=es(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.favlists;return Object(r.b)(ua.c,{className:"AnswerInfo-favlists",children:e.map((function(e){return Object(r.b)(Xc,{favlist:e},e.id)}))},"content")}}]),n}(O.Component),ns=Object(A.b)({module:"CollectionList"})(ts);function rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var as=function(e){Object(d.a)(n,e);var t=rs(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={copyrightApplicantsModalShown:!1,favlistsModalShown:!1},e.handleCopyrightApplicantsModalShow=function(){se.a.trackEvent(Object(ft.a)(e),{action:"Click",element:"Button",name:"转载授权"}),e.setState({copyrightApplicantsModalShown:!0})},e.handleCopyrightApplicantsModalHide=function(){e.setState({copyrightApplicantsModalShown:!1})},e.handleFavlistsModalShow=function(){se.a.trackEvent(Object(ft.a)(e),{action:"Click",element:"Button",name:"被收藏"}),e.setState({favlistsModalShown:!0})},e.handleFavlistsModalClose=function(){e.setState({favlistsModalShown:!1})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.copyrightApplicants,r=e.favlists,a=e.loadAnswerCopyrightApplicants,i=e.loadAnswerFavlists;n.length||r.length||(a(t),i(t))}},{key:"componentDidUpdate",value:function(e){this.props.onLoad&&(!e.copyrightApplicants.length&&this.props.copyrightApplicants.length||!e.favlists.length&&this.props.favlists.length)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.copyrightApplicants,a=e.copyrightApplicantCount,i=e.favlists,o=e.favlistCount,c=this.state,s=c.favlistsModalShown,l=c.copyrightApplicantsModalShown;return n.length||i.length?Object(r.c)(ua.d,{role:"complementary","aria-label":"更多回答信息",children:[Boolean(n.length)&&[Object(r.c)(ua.b,{className:"AnswerInfo-title",children:["授权转载"," ",Object(r.b)(ae.c,{preset:"plain",onClick:this.handleCopyrightApplicantsModalShow,children:Object(Ee.formatNumber)(a)})," ","次"]},"header"),Object(r.b)(Jc,{copyrightApplicants:n.slice(0,5)},"content")],Boolean(i.length)&&[Object(r.c)(ua.b,{className:"AnswerInfo-title",children:["被收藏"," ",Object(r.b)(ae.c,{preset:"plain",onClick:this.handleFavlistsModalShow,children:Object(Ee.formatNumber)(o)})," ","次"]},"header"),Object(r.b)(ns,{favlists:i.slice(0,5)},"content")],Object(r.b)(Pt.b,{size:"fullPage",onClose:this.handleFavlistsModalClose,children:s&&Object(r.b)(Fc,{answer:t})}),Object(r.b)(Pt.b,{size:"fullPage",onClose:this.handleCopyrightApplicantsModalHide,children:l&&Object(r.b)(Wc,{answer:t})})]}):null}}]),n}(O.Component),is=Object(y.connect)((function(e,t){var n=t.answer.id,r=e.entities,a=r.copyrightApplicants,i=r.favlists,o=e.answers.copyrightApplicants[n]||{totals:0,ids:[]},c=e.answers.favlists[n]||{totals:0,ids:[]};return{copyrightApplicants:o.ids.map((function(e){return a[e]})),copyrightApplicantCount:o.totals,favlists:c.ids.map((function(e){return i[e]})),favlistCount:c.totals}}),{loadAnswerCopyrightApplicants:_.p,loadAnswerFavlists:_.r})(as);function os(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var cs=function(e){Object(d.a)(n,e);var t=os(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.answer.id!==this.props.answer.id}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,a=n.id,i=n.questionType,o=e.answer,c=Object(_.l)(o)||Object(_.j)(o);return Object(r.b)(Mo.a,{className:"Question-sideColumn Question-sideColumn--sticky",children:Object(r.c)(r.a,{children:[Object(r.b)(qo.a,{type:"question"}),c||"normal"===i&&437329650!==a&&Object(r.b)("div",{className:"Question-sideColumnAdContainer",children:Object(r.b)(zo.a,{isMobile:!1,id:"question/".concat(a,"/answer/").concat(o.id),location:"new_answer_up",query:{question_token:a,answer_token:o.id}})}),"commercial"===i&&Object(r.b)(Ho.a,{questionId:a}),o.author&&Object(r.b)(Mc,{answer:o}),Object(r.b)(Uo,{}),Object(r.b)(is,{answer:o}),Object(r.b)(Wo,{}),Object(r.b)(Xr,{id:a,question:t,position:"right"}),c||"normal"===i&&Object(r.b)(lc,{answer:o,question:t}),c||"normal"===i&&Object(r.b)(rc,{answer:o,question:t}),c||"normal"===i&&437329650!==a&&Object(r.b)("div",{children:Object(r.b)(zo.a,{isMobile:!1,id:"question/".concat(a,"/answer/").concat(o.id),location:"new_answer_down_sticky",query:{question_token:a,answer_token:o.id},delay:1e3})}),Object(r.b)(Qo.a,{})]})})}}]),n}(O.Component),ss=Object(C.compose)(Object(I.a)(null),Object(A.b)((function(e){var t=e.answer;return{module:"RightSideBar",content:Object.assign({},t.author&&{member_hash_id:t.author.id})}})))(cs);function ls(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var us=function(e,t){return t.showAllDescription.replace("{count}"," ".concat(e," "))},ds=function(e){Object(d.a)(n,e);var t=ls(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.itemNum,a=e.questionType,i=(e.bottom,e.brand);return Object(r.b)(ua.d,{className:ue()("ViewAll",{"ViewAll--bottom":!1}),children:Object(r.b)(wo.a,{className:"ViewAll-QuestionMainAction",to:t,"data-za-detail-view-element_name":"ViewAll",style:{},children:"commercial"===a&&null!=i&&i.showAllDescription?us(Object(Ee.formatNumber)(n),i):"查看全部 ".concat(Object(Ee.formatNumber)(n)," 个回答")})})}}]),n}(O.Component),bs=Object(A.b)((function(e){return{module:"MessageItem",content:{item_num:e.itemNum}}}))(ds),hs=n(1251),fs=Object.assign;var ps=function(e){return j.a.createElement(Qe.a,fs({width:"43",height:"50",fill:"none",viewBox:"0 0 43 50"},e),j.a.createElement("path",{fill:"#121212",d:"M23.376 45.237c-1.567 0-3.133.012-4.698 0a1.701 1.701 0 00-1.133.386 507.16 507.16 0 01-4.493 3.517 3.959 3.959 0 01-.694.449 1.305 1.305 0 01-1.792-1.537c.239-.737.477-1.47.744-2.192.158-.42.153-.597-.384-.68-1.963-.3-3.672-1.093-4.879-2.756a7.614 7.614 0 01-1.272-2.983c-.098-.477-.238-.455-.651-.317-.625.212-.783.568-.601 1.16.041.155.057.316.047.477a.988.988 0 01-.806 1.03.954.954 0 01-1.162-.589c-.115-.257-.189-.417-.527-.408a1.009 1.009 0 01-1.003-.701c-.188-.463.015-.828.337-1.112.238-.22.238-.356.067-.625a1.023 1.023 0 01.238-1.432.98.98 0 011.377.203c.293.348.542.344.966.227 1.315-.365 1.974-1.088 1.99-2.534.015-1.239.346-2.467.494-3.706.158-1.314-.1-2.61-.258-3.905-.205-1.67-.477-3.34-.742-4.992-.136-.89.44-1.462 1.325-1.312 1.119.186 1.104.183 1.255-.955.224-1.689.45-3.376.715-5.058a1.102 1.102 0 00-.522-1.243C5.336 12.284 4.34 10.273 3.93 7.954c-.462-2.57.65-4.554 2.53-6.175C8.34.156 10.609-.166 12.993.068a11.67 11.67 0 013.884 1.028 5.311 5.311 0 012.147 1.728c.303.436.645.541 1.138.539 4.362-.017 8.721 0 13.08 0 1.776 0 3.415.413 4.813 1.563 2.04 1.67 2.784 3.87 2.558 6.442-.009.08-.023.16-.04.239-.178.954-.21 1.655.715 2.479a4.5 4.5 0 01.386 6.15 13.421 13.421 0 01-2.2 2.246 1.322 1.322 0 00-.548.928c-.604 4.355-1.267 8.7-1.814 13.06-.539 4.327-3.407 7.65-7.566 8.59-.876.169-1.768.235-2.66.198H23.38l-.003-.021z"}),j.a.createElement("path",{fill:"#FEFEFE",d:"M12.394 47.606c.441-1.293.809-2.417 1.21-3.526.136-.377 0-.442-.335-.444-.715 0-1.431-.019-2.147-.07-1.346-.095-2.458-.698-3.412-1.624a1.357 1.357 0 01-.425-1.105c.046-.93.062-1.863.062-2.794a.614.614 0 01.492-.692c.513-.148 1.014-.338 1.517-.517.442-.156.642-.478.509-.929-.144-.477-.537-.532-.955-.41-.322.09-.64.21-.954.31-.403.13-.601 0-.592-.446.02-.89 0-1.782.024-2.675.05-2.944-.33-5.85-.775-8.751-.02-.117-.043-.239-.055-.351-.046-.535.086-.659.606-.53 1.095.267 2.2.504 3.278.833 1.67.51 3.329.365 4.975-.1 1.97-.559 3.798-1.473 5.64-2.343a1.038 1.038 0 00.604-.955c.072-1.047.16-2.095.238-3.14.048-.61.184-.715.747-.477 1.625.628 3.252 1.25 4.865 1.909a3.12 3.12 0 002.195.074c1.73-.558 3.348-1.413 5.018-2.114.745-.306.768-.306 1.074.458.532 1.322 1.038 2.653 1.603 3.963.191.444.079.695-.265.954a37.672 37.672 0 01-4.576 2.976c-.833.463-.883.568-.716 1.517.838 4.57 1.217 9.189 1.556 13.813a1.209 1.209 0 01-.44 1.085c-1.631 1.494-3.552 2.148-5.752 2.148-3.101-.029-6.184 0-9.276 0a1.432 1.432 0 00-1 .374c-1.436 1.179-2.93 2.317-4.538 3.58z"}),j.a.createElement("path",{fill:"#06F",d:"M32.376 15.823a3.172 3.172 0 00-.04-.366c-.284-1.171.035-2.087 1.026-2.834.584-.441.61-.926.293-1.403s-.78-.573-1.45-.239c-.24.122-.299.072-.356-.157a1.583 1.583 0 00-.212-.477.936.936 0 00-1.14-.408.995.995 0 00-.693 1.062c.023.211.06.42.112.627-.365-.05-.69-.239-1.05-.086a.99.99 0 00-.675.759.869.869 0 00.415.973c.392.239.802.427 1.215.62a.548.548 0 01.394.52c.023.655.076 1.308.133 1.957a.46.46 0 01-.327.542 2.832 2.832 0 01-2.343.05c-1.894-.8-3.817-1.517-5.743-2.26-.97-.376-1.536-.028-1.63 1.005-.114 1.262-.238 2.524-.312 3.791a.809.809 0 01-.51.78c-1.797.83-3.594 1.67-5.56 2.031a6.441 6.441 0 01-2.708-.06c-.752-.176-1.494-.398-2.248-.555-.36-.075-.439-.24-.39-.568.28-1.922.552-3.843.813-5.765.043-.322.183-.418.477-.336.424.112.871.104 1.29-.024.492-.132.82.045 1.163.365a8.126 8.126 0 003.209 1.849c.828.239 1.243-.11 1.08-.954-.142-.738-.262-1.482-.443-2.212a1 1 0 01.334-1.093 17.656 17.656 0 002.758-3.34c.821-1.272 1.265-2.642.954-4.171-.083-.418.063-.506.451-.506 4.18.012 8.363 0 12.544.012 1.708 0 3.242.477 4.435 1.782 1.29 1.42 1.484 3.102 1.336 4.94-.095 1.176-.522 1.791-1.732 2.147-1.489.434-2.878 1.21-4.309 1.837-.17.1-.363.157-.56.165z"}),j.a.createElement("path",{fill:"#FEFEFE",d:"M14.94 15.307c-.871-.3-1.477-.87-2.088-1.431-.318-.291-.685-.477-1.129-.392-1.88.404-3.219-.587-4.4-1.806-1.479-1.53-2.2-3.426-1.892-5.538.33-2.25 2.699-4.328 4.99-4.56 1.838-.206 3.7.034 5.425.702 2.83 1.107 3.775 3.844 2.207 6.442a15.454 15.454 0 01-3.102 3.656.992.992 0 00-.367 1.143c.153.56.231 1.147.356 1.784z"}),j.a.createElement("path",{fill:"#06F",d:"M35.01 38.244a128.668 128.668 0 00-.763-7.824 60.35 60.35 0 00-.527-3.464.584.584 0 01.324-.716c.842-.52 1.67-1.062 2.51-1.59.146-.09.296-.295.463-.197.167.098.088.36.064.544-.226 1.652-.455 3.299-.687 4.939-.362 2.507-.73 5.014-1.105 7.523a1.38 1.38 0 01-.279.785z"}),j.a.createElement("path",{fill:"#B7B7B6",d:"M37.792 17.19c-.238-.239-.353-.392-.303-.6 0-.03.13-.073.139-.061a.98.98 0 01.164.66z"}),j.a.createElement("path",{fill:"#121212",d:"M20.92 27.309c.025.954-.488 1.479-1.43 1.5-.943.022-1.633-.615-1.64-1.56-.007-.945.697-1.53 1.804-1.546.9-.012 1.231.42 1.267 1.606z"}),j.a.createElement("path",{fill:"#444",d:"M11.938 5.575c.172-.137.35-.265.537-.382a.804.804 0 011.178.294c.378.652.654 1.358.816 2.094.1.38-.176.432-.43.492-.252.06-.522.112-.6-.265-.094-.444-.172-.895-.308-1.329-.079-.255-.131-.656-.563-.518-.396.124-.477.416-.31.802.183.44.312.897.491 1.336.217.535-.2.623-.518.728-.317.105-.749.339-.93-.239a33.209 33.209 0 01-.897-3.567c-.098-.477.26-.553.584-.651.325-.098.575-.045.673.348.072.289.074.6.277.857zM9.266 9.09l.954-.356c.191-.067.356-.048.442.165a.32.32 0 01-.047.376.322.322 0 01-.11.077 9.983 9.983 0 01-2.172.775c-.446.093-.675-.238-.525-.715.22-.697.477-1.38.733-2.09-.332-.077-.616.095-.912.166-.186.046-.358.074-.453-.143a.354.354 0 01.179-.5c.67-.302 1.4-.445 2.133-.42.415.018.551.338.422.737-.196.591-.398 1.188-.644 1.927zm6.461-1.544c-.289.043-.458-.096-.55-.39-.15-.477-.238-.954-.355-1.43-.152-.597.208-.74.626-.862.46-.136.57.212.684.537.115.324.253.715.377 1.059.25.704-.002 1.064-.782 1.086z"}),j.a.createElement("path",{fill:"#4A4B4A",d:"M15.037 3.055a.77.77 0 01.75.77.728.728 0 01-.779.745.716.716 0 01-.741-.751c.028-.485.324-.707.77-.764z"}))},ms=Object.assign;var vs=function(e){return j.a.createElement(Qe.a,ms({width:"14",height:"14",fill:"none",viewBox:"0 0 14 14"},e),j.a.createElement("mask",{id:"id-628033106-a",width:"14",height:"14",x:"0",y:"0",maskUnits:"userSpaceOnUse"},j.a.createElement("path",{fill:"#fff",d:"M.001.014h13.985V14H.001V.014z",fillRule:"evenodd",clipRule:"evenodd"})),j.a.createElement("g",{mask:"url(#id-628033106-a)"},j.a.createElement("path",{fill:"#121212",d:"M2.543 8.278a.636.636 0 010 1.272h-.636A1.907 1.907 0 010 7.643V1.92C0 .868.854.014 1.907.014H7.63c1.053 0 1.907.854 1.907 1.907v.636a.636.636 0 01-1.271 0V1.92a.636.636 0 00-.636-.636H1.907a.636.636 0 00-.636.636v5.722c0 .35.285.635.636.635h.636zm3.814-3.814h5.722c1.053 0 1.907.854 1.907 1.907v5.722A1.907 1.907 0 0112.08 14H6.357a1.907 1.907 0 01-1.907-1.907V6.37c0-1.053.854-1.907 1.907-1.907zm0 1.271a.636.636 0 00-.635.636v5.722c0 .35.284.636.635.636h5.722a.636.636 0 00.636-.636V6.37a.636.636 0 00-.636-.636H6.357z",fillRule:"evenodd",clipRule:"evenodd"})))},Os=Object.assign;var js=function(e){return j.a.createElement(Qe.a,Os({width:"15",height:"14",fill:"none",viewBox:"0 0 15 14"},e),j.a.createElement("path",{fill:"#121212",d:"M3.55 14c-.106 0-.159 0-.265-.053a.583.583 0 01-.318-.53v-2.225H.954A.95.95 0 010 10.238V.965A.95.95 0 01.954.01h12.982a.95.95 0 01.954.954v9.273a.95.95 0 01-.954.954H7.418l-3.497 2.702c-.106.053-.212.106-.37.106zm-2.49-3.921h2.437c.318 0 .53.212.53.53v1.854l2.914-2.225c.106-.053.212-.106.318-.106h6.518V1.124H1.06v8.955z",fillRule:"evenodd",clipRule:"evenodd"}),j.a.createElement("path",{fill:"#121212",d:"M3.709 4.515h7.948v-1.06H3.71v1.06zm0 3.18h4.239v-1.06H3.709v1.06z",fillRule:"evenodd",clipRule:"evenodd"}))},gs=Object.assign;var ys=function(e){return j.a.createElement(Qe.a,gs({width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},e),j.a.createElement("mask",{id:"id-95574191-a",width:"16",height:"16",x:"0",y:"0",maskUnits:"userSpaceOnUse"},j.a.createElement("path",{fill:"#fff",d:"M.001.016h15.983V16H.001V.016z",fillRule:"evenodd",clipRule:"evenodd"})),j.a.createElement("g",{mask:"url(#id-95574191-a)"},j.a.createElement("path",{fill:"#121212",d:"M7.992.016C3.585.016 0 3.6 0 8.008a7.96 7.96 0 001.344 4.435.521.521 0 00.867-.58 6.915 6.915 0 01-1.169-3.855 6.958 6.958 0 016.95-6.95 6.958 6.958 0 016.95 6.95 6.958 6.958 0 01-6.95 6.95 6.917 6.917 0 01-3.865-1.175.522.522 0 00-.58.866A7.956 7.956 0 007.992 16c4.407 0 7.992-3.585 7.992-7.992S12.4.016 7.992.016zM5.046 8.368c-.221 0-.332-.096-.332-.29V7.29c0-.216.111-.323.332-.323h2.167a4.28 4.28 0 01-.394 1.401H5.046zm3.14-1.401h2.746a.47.47 0 01.28.071c.058.041.086.125.086.252v.845c0 .155-.12.233-.366.233H7.873a8.4 8.4 0 00.314-1.401zm-2.964 3.316c-.386.266-.945.508-1.677.727v.822c.301-.032.542-.069.722-.11a4.708 4.708 0 001.63-.774c.558-.409 1.07-.976 1.54-1.701h.712v1.615c0 .33.098.572.294.727.178.143.404.214.68.214h3.206V10.9H9.426c-.126 0-.218-.023-.275-.07-.054-.045-.079-.142-.076-.29l.005-1.293h2.166a.98.98 0 00.703-.261c.155-.149.233-.376.233-.68V7.03c0-.311-.085-.545-.256-.704-.105-.098-.268-.172-.49-.223l.252-.58c.073-.168.11-.308.11-.422a.823.823 0 00-.276-.608c-.187-.187-.444-.28-.77-.28h-5.14l.137-.47h-.893c-.161.449-.327.778-.498.987-.206.257-.447.412-.723.466v.907a2.96 2.96 0 00.908-.404 3 3 0 00.622-.608h5.221c.188 0 .304.013.352.038.073.038.109.092.109.162s-.03.175-.095.318l-.21.46H5.09c-.478 0-.805.083-.983.248-.187.177-.28.43-.28.76V8.26c0 .491.202.804.607.94.096.032.288.048.576.048h1.287c-.37.46-.728.805-1.074 1.036z",fillRule:"evenodd",clipRule:"evenodd"})))};function ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var Cs=function(e){Object(d.a)(n,e);var t=ws(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer,n=e.params.answerId,r=e.loadAnswer,a=e.currentUser,i=e.checkIfCanConvertToVessay;t||r(n),Object(hs.a)(a,null==t?void 0:t.author)&&i(n)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.params.answerId,n=e.params.answerId,r=e.loadAnswer;n!==t&&r(n)}},{key:"render",value:function(){if(!this.props.answer)return null;var e=this.props,t=e.answer,n=e.answer.id,a=e.question,i=e.question,o=i.id,c=i.answerCount,s=i.questionType,l=i.brand,u=e.location,d=e.isMuteSpecial,b=(e.currentUser||{}).userType;return!t.relationship.isAuthor&&t.visibleOnlyToAuthor?Object(r.b)(B,{}):Object(r.c)("div",{className:"Question-main",children:[Object(r.b)(g.a,{meta:Object(P.a)(t,a.topics)}),Object(r.b)(vc.b,{selector:[".ViewAll-QuestionMainAction",".QuestionAnswer-content",".List-item"].join(","),children:Object(r.c)("div",{className:"Question-mainColumn","data-zop-questionanswerlist":!0,children:[("guest"===b||!b)&&Object(r.c)("div",{className:"Question-mainColumnLogin",children:[Object(r.b)("div",{className:"Question-mainColumnLoginImg",children:Object(r.b)(ps,{})}),Object(r.c)("div",{className:"Question-mainColumnLoginContent",children:[Object(r.b)("div",{className:"Question-mainColumnLoginTitle",children:"登录后你可以"}),Object(r.c)("div",{className:"Question-mainColumnLoginDes",children:[Object(r.c)("span",{className:"Question-mainColumnLoginDesIcon",children:[Object(r.b)(vs,{}),"不限量看优质回答"]}),Object(r.c)("span",{className:"Question-mainColumnLoginDesIcon",children:[Object(r.b)(js,{}),"私信答主深度交流"]}),Object(r.c)("span",{className:"Question-mainColumnLoginDesIcon",children:[Object(r.b)(ys,{}),"精彩内容一键收藏"]})]})]}),Object(r.b)("div",{className:"Question-mainColumnLoginRightButton",children:Object(r.b)(U.b,{loginButton:Object(r.b)(ae.c,{className:"Question-mainColumnLoginButton",children:"登录"})})})]}),Object(_.l)(t)||Object(_.j)(t)||c>0&&!d&&Object(r.b)(bs,{itemNum:c,to:"/question/".concat(o),questionType:s,brand:l}),Object(r.b)(yc,{question:a,location:u,answer:t,isAnswerPage:!0}),Object(_.l)(t)||Object(_.j)(t)||Object(r.b)(kc,{question:a,answerId:n}),c>0&&!d&&Object(r.b)(bs,{itemNum:c,to:"/question/".concat(o),questionType:s,brand:l})]})}),Object(r.b)(fe.a,{children:Object(r.b)(ss,{question:a,answer:t})})]})}}]),n}(O.Component);Cs.fetchData=function(e){var t=e.dispatch,n=e.params.answerId;return t(Object(_.m)(n))};var ks=Object(y.connect)((function(e,t){var n=t.params,r=n.id,a=n.answerId,i=Object(E.db)(e,{id:r}),o=Object(_.c)(e,{id:a}),c=Object(D.b)(e),s=(i||{}).relationship||{myAnswer:{isDelete:!1}};return{question:i,isOffice:Object(bt.e)(e),answer:o&&Object.assign(Object.assign({},o),{},{isDelete:(o.relationship||{}).isAuthor&&(s.myAnswer||{}).isDeleted}),isMuteSpecial:Object(E.D)(i),currentUser:c}}),{loadAnswer:_.m,checkIfCanConvertToVessay:_.e})(Cs),As=n(238),xs=n(474),Rs=function(e){var t=e.handleTabChange,n=e.activeTabKey,a=e.isReediting,i=e.videoAnswerPublished,o=Object(y.useSelector)(As.a);return Object(r.b)(k.b,{block:"AnswerEditorPageHeader",children:Object(r.c)(w.Box,{bg:"GBK99A",css:{position:"relative",width:"100%",height:"52px",backgroundClip:"content-box",boxShadow:"0px 16px 32px rgba(0, 0, 0, 0.04)",zIndex:1},children:[Object(r.c)(w.Flex,{css:{position:"relative",width:"1000px",height:"52px",padding:"0 16px",margin:"0 auto",alignItems:"center"},children:[Object(r.b)(xs.a,{}),Object(r.b)(w.Box,{height:"28px",width:"1px",pl:"20px",sx:{borderRight:"1px solid",borderColor:"GBK09A"}}),a?Object(r.b)(w.Box,{fontSize:15,fontWeight:"bold",lineHeight:"21px",color:"GBK03A",pl:"20px",children:i?"本回答为视频回答":"本回答为图文回答"}):Object(r.b)(si.b,{activeTabKey:n,onChange:t})]}),Object(r.b)(w.Box,{css:{position:"absolute",top:"50%",left:"50%",transform:"translate(522px, -50%)"},children:Object(r.b)(Ce.a,{currentUser:o})})]})})},Ns=n(440),Ss=n(222),Ts=n(71),Bs=n.n(Ts),Es=n(443);function Is(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var zs=function(e,t){window.onbeforeunload=null,window.name="",requestAnimationFrame((function(){var n=window.location.host,r=t?"//".concat(n,"/question/").concat(e,"/answer/").concat(t):"//".concat(n,"/question/").concat(e);window.location.href=r}))},qs=function(e){var t,n=e.params,a=e.location,o=n.id,c=n.answerId,s=a.query,l=Object(y.useDispatch)(),u=Object(O.useRef)(null),d=Object(y.useSelector)((function(e){return Object(E.db)(e,{id:o})})),b=s.attach_to_article,h=Object(y.useSelector)((function(e){var t;return null===(t=e.entities.drafts)||void 0===t?void 0:t["question_".concat(o)]})),f=Object(y.useSelector)((function(e){return Object(_.c)(e,{id:c})})),p=["zvideo","video"].includes(null==f||null===(t=f.attachment)||void 0===t?void 0:t.type),m=Object(O.useState)("video_answer"===(null==h?void 0:h.draftType)?si.a.videoAnswer:si.a.textAnswer),v=Is(i.a,m,2),j=v[0],C=v[1],x=Object(y.useSelector)(D.c),N=Object(or.a)((function(){return x})),S=Object(O.useState)((function(){return Object(R.c)("QuestionAnswerEditable",N)})),T=Is(i.a,S,1)[0],B=Boolean(c),I=Object(Ss.a)(["autoSendingCreations"]),z=Object(or.a)((function(e){if(e!==j){var t=d.relationship.isAnonymous;if(e===si.a.videoAnswer){if(t)return void l(Object(F.h)("视频回答不支持匿名","red"));u.current.hasEditorContent()&&(Re.a.get("answerContentSync")||(l(Object(F.h)("图文回答内容已同步至视频描述")),Re.a.set("answerContentSync",!0)))}C(e)}})),q=Object(or.a)((function(e){if(e.publishAt){var t=l(Object(_.z)(o,e));return t.then((function(){zs(o)})),t}var n=function(){return l(Object(_.a)(o,e)).then((function(e){var t=e.payload;zs(o,t.id)}))};return I.autoSendingCreations?l(Object(_.J)(o)).then(n,(function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return pt.a.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(n,(function(){}))})):n()})),M=Object(or.a)((function(e){return l(Object(_.A)(c,e)).then((function(){zs(o,c)}))}));return Object(Ai.a)((function(){Object(R.d)(),c||b&&Object(E.E)(o,b)})),Object(Ai.a)((function(){return window.name=Object(jt.b)(o),function(){window.name=""}})),Object(r.b)(Q.a,{children:Object(r.c)(k.b,{content:{type:"Question",token:String(o)},children:[Object(r.b)(W,{pageInfo:{pageId:"10123"}}),Object(r.b)(g.a,Object.assign({title:"写回答"},Object(Ns.n)(Ns.m))),Object(r.b)(A.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(o)}},children:Object(r.c)(w.Box,{children:[Object(r.b)(Rs,{isReediting:B,handleTabChange:z,activeTabKey:j,videoAnswerPublished:p}),Object(r.b)(R.b.Provider,{value:T,children:Object(r.b)(fe.a,{children:Object(r.b)(k.b,{block:j===si.a.textAnswer?"TextAnswer":"VideoAnswer",children:Object(r.b)(ui.a,{question:d,answer:f,defaultValue:null==f?void 0:f.editableContent,isReediting:B,activeTabKey:j,imperativeRef:u,onSubmit:B?M:q})})})})]})})]})})};qs.fetchData=function(e){var t=e.dispatch,n=e.params,r=n.id,a=n.answerId,i=e.location.query,o=i.attach_to_article;return Promise.all([a&&t(Object(_.m)(a)),t(Object(E.P)(r)).then((function(){if(!a&&o)return t(Object(E.E)(r,o))})),t(Object(E.S)(r)).then((function(e){var t=e.payload,n=Bs()(i,["write"]),o=t.relationship,c=o.isAuthor,s=o.myAnswer,l=t.isNormal,u=t.status,d=(u=void 0===u?{}:u).isClose,b=u.isLocked,h=u.isSuggest,f=t.hasPublishingDraft,p=t.visibleOnlyToAuthor,m=function(e){var t=new Error;throw t.status=302,t.redirect=Object(Es.a)(e,n),t};return null!=s&&s.isDeleted?m("/question/".concat(r,"?answer_deleted_redirect=true")):a?s?String(s.answerId)!==a?m("/question/".concat(r,"/answer/").concat(s.answerId,"/edit")):void 0:m("/question/".concat(r,"/write")):s?m("/question/".concat(r,"/answer/").concat(s.answerId,"/edit")):h||b||d||f||!l||!c&&p?m("/question/".concat(r)):void 0}))].filter(Boolean))};var Qs=qs;t.default=Object(r.c)(a.Route,{children:[Object(r.b)(a.Route,{path:"waiting",component:ga,name:"QuestionWaiting",authRequired:!0,zaPageShowId:5541}),Object(r.b)(a.Route,{path:"later",component:Sa,name:"QuestionLater",authRequired:!0,zaPageShowId:5371}),Object(r.b)(a.Route,{path:"invited",component:Ma,name:"QuestionInvited",authRequired:!0,zaPageShowId:5543}),Object(r.c)(a.Route,{path:":id",component:la,name:"Question",children:[Object(r.c)(a.Route,{children:[Object(r.b)(a.IndexRoute,{component:pc,entity:"answers",resource:"answers",name:"QuestionPage",zaPageShowId:3378}),Object(r.b)(a.Route,{path:"answers/hidden",component:pc,entity:"answers",resource:"hiddenAnswers",name:"QuestionHiddenAnswers"}),Object(r.b)(a.Route,{path:"answers/updated",component:pc,resource:"updatedAnswers",name:"QuestionUpdatedAnswers"}),Object(r.b)(a.Redirect,{from:"answers/created",to:"answers/updated"})]}),Object(r.b)(a.Route,{path:"answer/:answerId",component:ks,name:"AnswerPage",zaPageShowId:2012}),Object(r.b)(a.Redirect,{from:"noti-answers",to:"."})]}),Object(r.b)(a.Route,{path:":id/write",showAppHeader:!1,component:Qs,name:"QuestionAnswerEditableAdd",authRequired:!0}),Object(r.b)(a.Route,{path:":id/answer/:answerId/edit",showAppHeader:!1,component:Qs,name:"QuestionAnswerEditableEdit",authRequired:!0})]})},928:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=n(52),o=Object.assign;var c=function(e){return a.a.createElement(i.a,o({width:"150",height:"120",viewBox:"0 0 150 120"},e),a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("path",{fill:"#EBEEF5",d:"M44 31.005v55.99A3.003 3.003 0 0047.003 90h53.994A3.005 3.005 0 00104 86.995v-55.99A3.003 3.003 0 00100.997 28H47.003A3.005 3.005 0 0044 31.005zm-3 0A6.005 6.005 0 0147.003 25h53.994A6.003 6.003 0 01107 31.005v55.99A6.005 6.005 0 01100.997 93H47.003A6.003 6.003 0 0141 86.995v-55.99z",fillRule:"nonzero"}),a.a.createElement("path",{fill:"#F7F8FA",d:"M59 50a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 40.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5zM59 73a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 63.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5z"})))}},931:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(35),a=n(37),i=n(1),o=n(0),c=n(961),s=n(439),l=["tabIndex","children"];function u(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var d=function(e){var t=e.tabIndex,n=void 0===t?0:t,d=e.children,b=Object(a.default)(e,l),h=Object(o.useState)(null),f=u(r.a,h,2),p=f[0],m=f[1];return Object(i.b)(c.a,Object.assign(Object.assign({tabIndex:n,onRef:m},b),{},{children:Object(i.b)(s.d,{root:p,children:d})}))}},933:function(e,t,n){"use strict";var r=n(37),a=n(1),i=n(0),o=n(59),c=["ratio","children"],s=function(e,t){var n=e.ratio,i=void 0===n?1:n,s=e.children,l=Object(r.default)(e,c);return Object(a.b)(o.Box,Object.assign(Object.assign({css:{position:"relative",paddingBottom:"".concat(1/i*100,"%"),height:"0",borderRadius:"inherit"}},l),{},{ref:t,children:Object(a.b)("div",{css:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",borderRadius:"inherit"},children:s})}))};t.a=Object(i.forwardRef)(s)},935:function(e,t,n){"use strict";n.d(t,"k",(function(){return c})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return g})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return k})),n.d(t,"g",(function(){return x})),n.d(t,"j",(function(){return S})),n.d(t,"f",(function(){return R.a}));var r=n(37),a=n(1),i=n(59),o=["children"],c=function(e){var t=e.children,n=Object(r.default)(e,o);return Object(a.b)(i.Flex,Object.assign(Object.assign({alignItems:"center",justifyContent:"center",flex:1,height:"100%"},n),{},{children:Object(a.b)(i.Text,{textAlign:"center",color:"GBL05A",children:t})}))},s=n(0),l=n.n(s),u=n(52),d=Object.assign;var b=function(e){return l.a.createElement(u.a,d({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M94 29v-2.002c0-.55.443-.998 1-.998h1c.553 0 1 .446 1 .998V29h2.002c.55 0 .998.443.998 1v1c0 .553-.446 1-.998 1H97v2.002c0 .55-.443.998-1 .998h-1c-.553 0-1-.446-1-.998V32h-2.002A.997.997 0 0191 31v-1c0-.553.446-1 .998-1H94zm30.613 17.724l-21.82-4.638.207-3.023 22.237 4.727a6.004 6.004 0 014.62 7.122l-7.9 37.158a6.001 6.001 0 01-7.116 4.627l-15.31-3.254.63-2.934 15.31 3.25c1.62.34 3.218-.69 3.56-2.32l7.9-37.16a3.005 3.005 0 00-2.31-3.567zM48.596 85.727l.624 2.935-12.717 2.703a6.004 6.004 0 01-7.117-4.628L21.488 49.58a6.004 6.004 0 014.62-7.123L47 38.017l.133 3.038-20.402 4.337a3 3 0 00-2.3 3.564l7.9 37.157a3.005 3.005 0 003.56 2.317l12.71-2.703zM100 82c0 3.314-2.688 6-6.006 6H56.006A6.01 6.01 0 0150 82V34c0-3.314 2.688-6 6.006-6h27.147v3H56.006A3.003 3.003 0 0053 34v48c0 1.65 1.35 3 3.006 3h37.988A3.003 3.003 0 0097 82V42.373h3V82zm-4.5-41C89.7 41 85 36.3 85 30.5S89.7 20 95.5 20 106 24.7 106 30.5 101.3 41 95.5 41zm0-3a7.5 7.5 0 100-15 7.5 7.5 0 000 15z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M47 73.22l-6.484 1.378c-.82.174-1.333.97-1.16 1.78.173.816.97 1.327 1.784 1.154L47 76.287V73.22zm0-8.594l-4.58.974c-.8.17-1.324.968-1.152 1.778a1.494 1.494 0 001.775 1.156l3.957-.84v-3.068zm0-17.285a6.002 6.002 0 00-8 5.66 6.002 6.002 0 008 5.66V47.34zm56 29.88l6.178 1.318a1.5 1.5 0 10.624-2.934L103 74.148v3.067zm0-8.58l4.275.91c.808.17 1.6-.34 1.775-1.157a1.507 1.507 0 00-1.15-1.78l-4.9-1.04v3.067zm0-8.97c.626.22 1.3.34 2 .34 3.314 0 6-2.685 6-6s-2.686-6-6-6c-.7 0-1.374.12-2 .34v11.32zM76 56a8 8 0 110-16 8 8 0 010 16zm-8 7.5c0-.828.667-1.5 1.505-1.5h12.99a1.5 1.5 0 110 3h-12.99A1.5 1.5 0 0168 63.5zm-5 8c0-.828.67-1.5 1.49-1.5h23.02c.822 0 1.49.666 1.49 1.5 0 .828-.67 1.5-1.49 1.5H64.49c-.822 0-1.49-.666-1.49-1.5z"})))},h=Object.assign;var f=function(e){return l.a.createElement(u.a,h({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M67.757 83H45c-1.66 0-3-1.338-3-2.998V37.998A3.003 3.003 0 0145 35h53.42v-3H45c-3.31 0-6 2.686-6 5.998v42.004A5.994 5.994 0 0045 86h21.515l6.853 6.854a2.99 2.99 0 004.234 0L84.456 86H105c3.31 0 6-2.686 6-5.998v-36.54h-3v36.54A3.003 3.003 0 01105 83H83.214l-7.728 7.728L67.756 83z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M55 48.5c0-.828.67-1.5 1.508-1.5h26.984a1.5 1.5 0 110 3H56.508A1.5 1.5 0 0155 48.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 59.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 70.5z"}),l.a.createElement("path",{fill:"#EBEEF5",d:"M94.868 50.46l18.92-18.92-2.83-2.827-18.918 18.92-2.12-2.123 18.917-18.918a3.005 3.005 0 014.245-.002l2.828 2.828a3.004 3.004 0 01-.002 4.245L96.99 52.58l-2.122-2.12zm-7.193 2.377l2.244-7.327 7.07 7.07-7.328 2.245c-1.575.482-2.473-.405-1.988-1.988z",fillRule:"nonzero"})))},p=Object.assign;var m=function(e){return l.a.createElement(u.a,p({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.316 2.79A1.99 1.99 0 0144 93V30.997C44 27.687 46.68 25 50.002 25h48.996A5.996 5.996 0 01105 30.998v62c0 .45-.147.866-.396 1.2l-4.112-2.658z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M55 39c0-.553.44-1 1-1h19c.553 0 1 .44 1 1v19c0 .553-.44 1-1 1H56c-.553 0-1-.44-1-1V39zm25 .5c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.5 1.5 0 110 3h-35.99A1.5 1.5 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0155 75.5z"})))},v=Object.assign;var O=function(e){return l.a.createElement(u.a,v({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M37.273 69.98c.212-3.3 3.063-5.98 6.387-5.98h63.91c3.315 0 6.175 2.673 6.387 5.98l1.285 20.04c.212 3.302-2.302 5.98-5.615 5.98H41.603c-3.313 0-5.827-2.673-5.615-5.98l1.285-20.04zm1.71 20.23C38.88 91.788 40.02 93 41.603 93h68.023c1.58 0 2.722-1.215 2.62-2.79l-1.284-20.037c-.11-1.726-1.657-3.173-3.394-3.173H43.66c-1.74 0-3.282 1.447-3.393 3.173L38.982 90.21zM47 58h58v-3.5a1.5 1.5 0 013 0v5c0 .414-.168.79-.44 1.06a1.49 1.49 0 01-1.06.44h-61a1.49 1.49 0 01-1.06-.44A1.49 1.49 0 0144 59.5v-5a1.5 1.5 0 013 0V58zm50-31H55v28.008h-3V25.992c0-1.1 1.025-1.992 2.283-1.992h43.434c1.26 0 2.283.898 2.283 1.992v29.016h-3V27zM60 87.5c0-.828.668-1.5 1.5-1.5h29c.828 0 1.5.666 1.5 1.5 0 .828-.668 1.5-1.5 1.5h-29c-.828 0-1.5-.666-1.5-1.5zM46 72.01c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm-52 7c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M71 34.5a1.5 1.5 0 011.497-1.5h7.006a1.5 1.5 0 110 3h-7.006A1.495 1.495 0 0171 34.5zm-9 8c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0162 42.5zm0 7c0-.828.67-1.5 1.495-1.5h19.01c.826 0 1.495.666 1.495 1.5 0 .828-.67 1.5-1.495 1.5h-19.01A1.494 1.494 0 0162 49.5z"})))},j=Object.assign;var g=function(e){return l.a.createElement(u.a,j({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M106.807 78h8.19A3.004 3.004 0 00118 74.998V34.002A3 3 0 00114.997 31H61.003A3.004 3.004 0 0058 34.002V36h-3v-1.998A6.004 6.004 0 0161.003 28h53.994A6 6 0 01121 34.002v40.996A6.004 6.004 0 01114.997 81h-5.372l-.375 6.004c-.138 2.207-1.514 2.732-3.074 1.172L99 81h-5v-3h6.243l6.178 6.178.388-6.178zM44.824 95.176c-1.56 1.56-2.936 1.035-3.074-1.172L41.312 87H37a6 6 0 01-6-6.006V45.006A6.01 6.01 0 0137 39h48a6 6 0 016 6.006v35.988A6.01 6.01 0 0185 87H53l-8.176 8.176zm-.245-3.998L51.755 84H85c1.65 0 3-1.35 3-3.006V45.006A3 3 0 0085 42H37c-1.65 0-3 1.35-3 3.006v35.988A3 3 0 0037 84h7.13l.45 7.178z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M94 49h9.494a1.5 1.5 0 110 3H94v-3zm0 9h9.494a1.5 1.5 0 110 3H94v-3zm-50 6.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 64.5zm0-14.503c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM44 73.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 73.5z"})))},y=Object.assign;var w=function(e){return l.a.createElement(u.a,y({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("path",{fill:"#EBEEF5",d:"M62.85 82.335c-.13-.03-.202-.04-.25-.044-.117 0-.31.05-.87.34-7.092 2.65-7.508 2.79-9.903 3.43-.955.26-1.885.46-2.826.63-1.24.23-2.52-.08-3.35-.83-1.12-1.01-1.16-2.58-.02-3.73l.28-.22s.074-.053.204-.19c.265-.26.54-.63.81-1.102.588-1.05 1.025-2.445 1.224-4.246.145-.8-.374-2.14-1.117-2.833-.23-.216-.696-.727-1.487-1.683-3.62-4.37-6.03-12.332-6.03-18.87C39.5 37.19 53.48 23.5 72.446 23.5c19.842 0 32.947 13.235 32.947 29.466 0 21.157-22.76 36.133-42.028 29.488-.182-.04-.473-.11-.515-.12zm-.068-3.038c.233.014.448.05.717.108l.6.14c17.56 6.102 38.29-7.514 38.29-26.58 0-14.58-11.77-26.465-29.95-26.465-17.32 0-29.95 12.36-29.95 26.466 0 5.885 2.203 13.176 5.333 16.96.716.865 1.102 1.287 1.222 1.4 1.432 1.34 2.34 3.65 2.044 5.404-.246 2.172-.8 3.94-1.585 5.338a8.3 8.3 0 01-1.213 1.68c1.02-.175 1.87-.366 2.75-.598 2.25-.596 2.667-.743 9.4-3.245.95-.47 1.596-.653 2.326-.608zm11.554 9.593a1.5 1.5 0 111.919-2.306c5.242 4.364 12.82 5.41 19.8 2.98l.173-.05c.084-.017.372-.085.433-.1.22-.046.39-.074.59-.086.61-.037 1.14.11 1.87.472 4.83 1.793 5.13 1.9 6.73 2.324.57.15 1.12.276 1.68.38-.22-.318-.46-.7-.68-1.153-.58-1.14-.99-2.51-1.173-4.12-.232-1.39.38-2.75 1.537-3.83.12-.11.43-.44.947-1.05 2.1-2.47 3.356-7.15 3.356-11.61 0-4.7-.62-7.39-2.7-10.094a1.5 1.5 0 012.381-1.828c2.56 3.33 3.318 6.62 3.318 11.925 0 5.11-1.433 10.45-4.066 13.555-.59.693-.98 1.107-1.19 1.304-.49.46-.675.873-.623 1.16.16 1.37.47 2.41.894 3.25.324.647.62 1.013.756 1.13 1.162 1.17.883 2.636-.177 3.54-.78.67-1.91 1-2.948.817-.69-.124-1.373-.28-2.073-.46-1.75-.466-2.05-.57-7.08-2.44l-.156-.068c-.344-.173-.42-.195-.414-.195-.142.03-.33.075-.464.105-7.91 2.728-16.56 1.52-22.627-3.533z"}))},C=Object.assign;var k=function(e){return l.a.createElement(u.a,C({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("path",{fill:"#EBEEF5",d:"M46.76 78.71a1.895 1.895 0 00-1.378 2.092c.13.948.94 1.648 1.904 1.635h55.468a1.882 1.882 0 001.884-1.635c.13-.95-.46-1.846-1.367-2.09a8.61 8.61 0 01-6.4-7.872l-2.473-20.928c-.96-7.872-6.567-14.37-14.178-16.435l-.986-.267-.113-1.014c-.24-2.106-2.01-3.696-4.11-3.696s-3.87 1.59-4.104 3.696l-.114 1.014-.98.267c-7.61 2.063-13.22 8.563-14.18 16.43L53.15 70.84c-.2 3.74-2.79 6.926-6.393 7.87zm50.61-29.155l2.482 20.982c.127 2.562 1.817 4.654 4.19 5.276a4.895 4.895 0 013.568 5.397c-.336 2.446-2.434 4.26-4.876 4.227H47.306a4.883 4.883 0 01-4.896-4.227 4.897 4.897 0 013.58-5.4 5.614 5.614 0 004.17-5.168l2.49-21.093c1.068-8.77 7.135-16.06 15.46-18.7.807-3.11 3.615-5.35 6.9-5.35s6.094 2.24 6.9 5.35c8.325 2.64 14.393 9.93 15.46 18.7zm-16.417 38.91c-.288 3.184-3.007 5.36-5.943 5.36-2.936 0-5.655-2.176-5.943-5.36l-2.988.27c.43 4.82 4.52 8.09 8.93 8.09s8.49-3.27 8.93-8.09l-2.99-.27z"}))},A=Object.assign;var x=function(e){return l.a.createElement(u.a,A({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("path",{fill:"#E7EAF1",d:"M39.09 35.994c.05-3.31 2.777-5.994 6.096-5.994h18.562c2.21 0 4.667 1.66 5.487 3.708L70.152 36h34.85A5.997 5.997 0 01111 41.99v40.02c0 3.308-2.69 5.99-6 5.99H45c-3.314 0-6-2.686-6-5.99V41.99c0-.077 0-.153.004-.23l.086-5.766zm2.914 5.81L42 41.99v40.02A2.998 2.998 0 0045 85h60c1.655 0 3-1.342 3-2.99V41.99a2.998 2.998 0 00-3-2.99H68.12l-1.67-4.177C66.085 33.915 64.73 33 63.747 33h-18.56c-1.68 0-3.07 1.368-3.097 3.038l-.086 5.767zM69.89 72.658c-1.56.715-3.105-.395-2.906-2.113l.697-6.032-4.11-4.47c-1.16-1.265-.58-3.076 1.115-3.418l5.952-1.2 2.982-5.29c.843-1.498 2.744-1.507 3.593 0l2.98 5.29 5.955 1.2c1.684.34 2.28 2.145 1.11 3.418l-4.11 4.47.698 6.032c.197 1.708-1.336 2.832-2.908 2.113l-5.52-2.527-5.523 2.53z"}))},R=n(928),N=Object.assign;var S=function(e){return l.a.createElement(u.a,N({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M109.545 78h5.463A2.995 2.995 0 00118 75.01V34.99c0-1.648-1.34-2.99-2.992-2.99H62.992A2.995 2.995 0 0060 34.99v2.027h-3V34.99c0-3.308 2.69-5.99 5.992-5.99h52.016A5.993 5.993 0 01121 34.99v40.02c0 3.308-2.69 5.99-5.992 5.99h-2.744l-.558 5.65c-.217 2.197-1.783 2.842-3.49 1.45l-8.7-7.1h-18.69v-3h19.76l8.29 6.767.67-6.767zM37.33 91.9c-1.942 1.057-3.23.15-2.878-2.027l1.237-7.64A25.886 25.886 0 0130 66c0-14.36 11.637-26 26-26 14.36 0 26 11.637 26 26 0 14.36-11.637 26-26 26-4.627 0-8.973-1.21-12.737-3.327L37.33 91.9zm5.958-6.656l1.447.814A22.878 22.878 0 0056 89c12.705 0 23-10.296 23-23 0-12.705-10.296-23-23-23-12.705 0-23 10.296-23 23a22.894 22.894 0 005.03 14.36l.833 1.04-1.11 6.855 5.535-3.01zm13.108-31.452c2.304 0 4.176.612 5.616 1.908 1.44 1.26 2.16 2.988 2.16 5.148 0 1.764-.468 3.24-1.368 4.392-.324.396-1.332 1.332-3.024 2.808-.684.576-1.188 1.224-1.512 1.872-.396.72-.576 1.512-.576 2.376v.612H53.84v-.612c0-1.332.216-2.484.72-3.42.468-1.008 1.836-2.484 4.068-4.464l.612-.684c.648-.828 1.008-1.692 1.008-2.628 0-1.26-.36-2.232-1.044-2.952-.72-.72-1.764-1.08-3.06-1.08-1.62 0-2.808.504-3.528 1.548-.648.864-.972 2.088-.972 3.672h-3.78c0-2.628.756-4.68 2.268-6.192 1.512-1.548 3.6-2.304 6.264-2.304zm-.648 21.06c.756 0 1.404.216 1.908.72.504.468.756 1.08.756 1.836s-.288 1.368-.792 1.872a2.703 2.703 0 01-1.872.72c-.72 0-1.368-.252-1.872-.756s-.756-1.116-.756-1.836c0-.756.252-1.368.756-1.836.504-.504 1.152-.72 1.872-.72z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M83.23 56h24.275c.818 0 1.495-.672 1.495-1.5 0-.834-.67-1.5-1.495-1.5H81.93a28.845 28.845 0 013.002 11h12.56a1.5 1.5 0 110 3h-12.51a29.422 29.422 0 00-.05-3zM72.285 42h35.22c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5H76a28.945 28.945 0 00-3.715-3z"})))}},978:function(e,t,n){"use strict";var r=n(35),a=n(0);function i(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}t.a=function(){var e=Object(a.useState)(!1),t=i(r.a,e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){o(!0)}),[]),n}},989:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(15),a=n(16),i=n(18),o=n(19),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),b=n(13),h=n.n(b),f=n(289),p=n(306),m=n(233),v=n(439),O=n(8),j=n(654),g=n(32),y=n(978),w=function(e){return"calc(".concat(e,"px + 2em)")},C=function(){var e=Object(y.a)();return Object(s.c)(s.a,{children:[Object(s.b)(O.c,{styles:{html:{scrollPaddingTop:w(g.i),scrollPaddingBottom:56}}}),e&&Object(s.b)(j.a,{children:Object(s.b)("div",{id:"_scroll-padding-polyfill_",style:{position:"fixed",top:0,left:0,right:0,pointerEvents:"none",background:"transparent",height:w(g.i+56)}})})]})};function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var A=function(e){Object(i.a)(n,e);var t=k(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={enabled:!1,shown:!1},e.handleScrollUp=function(){e.state.shown&&e.canToggle()&&e.setState({shown:!1})},e.handleScrollDown=function(){!e.state.shown&&e.canToggle()&&e.setState({shown:!0})},e.handlePositionStatusChange=function(t){e.canToggle()&&("normal"!==t?e.enable():e.disable())},e}return Object(a.a)(n,[{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.offset,r=t.children,a=this.state,i=a.enabled,o=a.shown;return Object(s.c)(d.Fragment,{children:[Object(s.b)(C,{}),Object(s.b)(v.a,{input:"/",action:function(){return e.setState({shown:!1})}}),Object(s.b)(f.a,{offset:n,onPositionStatusChange:this.handlePositionStatusChange,children:Object(s.b)("div",{})}),i&&Object(s.b)(p.a,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}),Object(s.b)(m.a.Inlet,{shown:o,children:Object(s.b)("div",{className:h()("PageHeader",{"is-shown":o}),children:r})})]})}}]),n}(d.Component);A.propTypes={prevent:u.a.bool,offset:u.a.number},A.defaultProps={prevent:!1,offset:g.i};var x=A}}]);
//# sourceMappingURL=main.question-routes.03c8178e4b30839a1268.js.map