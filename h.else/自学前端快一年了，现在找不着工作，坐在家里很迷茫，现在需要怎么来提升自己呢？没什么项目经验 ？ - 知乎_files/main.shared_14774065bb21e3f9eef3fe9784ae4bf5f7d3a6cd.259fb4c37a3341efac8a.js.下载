(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1013:function(e,t,n){"use strict";var o=n(921);t.a=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:" ",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{isBatched:!1,isLastOneOfBatch:!1},c=e.getSelection(),l=e.getCurrentContent(),s=l.createEntity(t,n,r),u=s.getLastCreatedEntityKey(),d=o.EditorState.set(e,{currentContent:s}),f=(d=o.AtomicBlockUtils.insertAtomicBlock(d,u,i)).getCurrentContent(),g=f.getBlockMap(),h=c.getStartKey(),b=f.getBlockForKey(h);b!==g.first()&&0===b.getLength()&&(g=g.delete(h),f=f.merge({blockMap:g}));var p=d.getSelection().getFocusKey(),m=f.getBlockForKey(p),v=(null==a?void 0:a.isBatched)&&!a.isLastOneOfBatch;return v||m===g.last()||0!==m.getLength()||(g=g.delete(p),f=f.merge({blockMap:g,selectionAfter:o.SelectionState.createEmpty(f.getKeyAfter(p))})),d=o.EditorState.set(d,{currentContent:f}),o.EditorState.forceSelection(d,d.getCurrentContent().getSelectionAfter())}},1026:function(e,t,n){"use strict";n.d(t,"a",(function(){return Kt})),n.d(t,"b",(function(){return bt})),n.d(t,"c",(function(){return Ut})),n.d(t,"d",(function(){return nt})),n.d(t,"e",(function(){return pt})),n.d(t,"f",(function(){return $e})),n.d(t,"g",(function(){return Ct})),n.d(t,"h",(function(){return et})),n.d(t,"i",(function(){return Ye})),n.d(t,"j",(function(){return _t})),n.d(t,"k",(function(){return Nt}));var o,r=n(40),i=n.n(r),a=n(34),c=n.n(a),l=n(123),s=n.n(l),u=n(23),d=n.n(u),f=n(27),g=n.n(f),h=n(30),b=n.n(h),p=n(29),m=n.n(p),v=n(447),O=n.n(v),y=n(24),j=n.n(y),k=n(0),A=n(72),C=n.n(A),w=n(25),x=(n(683),n(51)),L=n(105),B=n(867),z=n(888),S=n(1),I=n(3),G=n.n(I),E=n(13),R=n.n(E),T=n(8),N=n(945),P=n(71),W=n.n(P),K=n(143),V=n(5),M=n(499),D=n.n(M),U=n(153),_=n(2103),Z=n(2104),F=n(2107),H=n.n(F),q=n(57),Q=n(135),J=n.n(Q),Y=n(926),X=n(50),$=n(1011),ee=n(64),te=n.n(ee),ne=n(685),oe=n.n(ne),re=n(46),ie=n(56),ae=n.n(ie),ce=n(1678),le=["as","tag","className","html","clearBoth","richContentKey","root","Portal","useHooks"],se=["text","target","url","image","imageWidth","imageHeight","component","className","size","children"],ue=["inEditor","data-text","href","zaBlock"],de=["root"],fe=["src","useWebP","useMp4","onRef","onLoadStateChange"],ge=["html","css","options","linkCardInfo"],he=["lazyLoadImageOptions","useGifPortalOption"];function be(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var o=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}(t,void 0!==n&&n<o?n:o)}return e(t,n)}var pe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}};function me(e){var t=this;return e.length?function(n,o){for(var r=e.length-1,i=n;r>=0;)i=e[r].call(t,i,o),r--;return i}:C.a}var ve="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},Oe=function(e){var t=Object(k.useRef)(null);Object(k.useEffect)((function(){if(e)return ve((function(){e&&(t.current=function(e){var t=new IntersectionObserver((function(e){e.forEach(n)}),{threshold:[.1]});function n(e){if(0!==e.intersectionRatio){var n=e.target;n.dataset.zaDetailViewId=n.cardShowViewId,w.a.trackCardShow(n,{},{link:{url:n.href}}),t.unobserve(n),n.clickViewId&&(n.dataset.zaDetailViewId=n.clickViewId)}}return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'},{cardShowViewId:7692,selector:"a.FileLinkCard .FileLinkCard-info"},{cardShowViewId:9744,selector:".Catalog"}].forEach((function(n){var o=n.selector,r=n.cardShowViewId,i=n.clickViewId;Array.from(e.querySelectorAll(o)).forEach((function(e){e.cardShowViewId=r,e.clickViewId=i,t.observe(e)}))})),function(){t.disconnect()}}(e))})),function(){t.current&&t.current()}}),[e])},ye=function(e){return{elementLocation:{type:"Button",content:{type:e.dataset.zaContentType}}}},je=function(e){return{attachedInfoBytes:e.dataset.zaAttachInfo}},ke=[{selector:"a.external, a.internal",zaBlock:"ZTextLink"},{selector:"a.member_mention, a.UserLink-link",zaBlock:"ZTextMention"},{selector:"a.video-box",zaBlock:"ZTextVideoCard"},{selector:'a.LinkCard.old[data-draft-type="link-card"]',zaBlock:"ZTextLinkCard"},{selector:'a.LinkCard.new.static[data-draft-type="link-card"]:not([data-za-content-type="Zvideo"])',zaBlock:"ZTextLinkCard",viewInfoBuilder:ye,extraInfoBuilder:je},{selector:'a.LinkCard.new.static[data-draft-type="link-card"][data-za-content-type="Zvideo"]',zaBlock:"ZTextZVideoLinkCard",viewInfoBuilder:ye,extraInfoBuilder:je},{selector:"a.FileLinkCard",zaBlock:"ZTextFileLinkCard"}],Ae=function(e){var t,n,o=e.element,r=e.config,i=null===(t=r.viewInfoBuilder)||void 0===t?void 0:t.call(r,o,r),a=Object.assign({elementLocation:{type:"Button"},block:r.zaBlock},i),c=Object.assign({action:"OpenUrl",elementLocation:{type:"Button"},block:r.zaBlock,eventType:"Click"},i),l=Object.assign({link:{url:o.href}},null===(n=r.extraInfoBuilder)||void 0===n?void 0:n.call(r,o,r)),s=Object(x.l)().trackEvent,u=Object(x.k)(a,l),d=Object(L.a)((function(e){s(c,l),"ZTextLinkCard"===r.zaBlock&&o.dataset.isEcommerce&&e.preventDefault()}));return Object(k.useEffect)((function(){return o.addEventListener("click",d),function(){o.removeEventListener("click",d)}}),[]),Object(k.useEffect)((function(){return u(o),function(){return u(null)}}),[]),null},Ce=function(e){var t=e.root,n=Object(k.useState)([]),o=be(j.a,n,2),r=o[0],i=o[1];return Object(k.useEffect)((function(){if(t){var e=[];ke.forEach((function(n){var o=n.selector;Array.from(t.querySelectorAll(o)).forEach((function(t){e.push({el:t,config:n})}))})),i(e)}}),[t]),Object(S.b)(k.Fragment,{children:r.map((function(e,t){var n=e.el,o=e.config;return Object(S.b)(Ae,{element:n,config:o},t)}))})},we=/<p><br><\/p>/g,xe=/<[^<>\s]+(\s|>)/,Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solid";return{borderBottom:"1px ".concat(t," ").concat(e.colors.GBK05A)}},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solid";return{borderBottom:"1px ".concat(t," ").concat(e.colors.GBL07A)}},ze=function(e){return{color:e.colors.GBL07A,"&:hover":Be(e)}},Se=Object(T.h)(o||(o=O()(["\n   from {\n    opacity: 0;  \n   }\n   \n   to {\n    opacity: 1;\n  }\n"]))),Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[data-focus-visible]";return m()({outline:"none",transition:"box-shadow 0.3s"},"html".concat(t," &"),{boxShadow:"0 0 0 2px ".concat(e.colors.GBK99A,", 0 0 0 4px ").concat(e.colorMod(e.colors.GBL01A).alpha(.3))})},Ge={"--zFontSansSerif":"-apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif","--zFontMonospace":"Menlo, Monaco, Consolas, 'Andale Mono', 'lucida console', 'Courier New', monospace"},Ee=[function(e){return e?e.replace(we,'<p class="ztext-empty-paragraph"><br /></p>'):e},function(e){return e?e.replace(xe,(function(e,t){return e.replace(t," data-first-child".concat(t))})):e}],Re=Object(k.forwardRef)((function(e,t){var n,o=e.as,r=e.tag,i=e.className,a=e.html,c=e.clearBoth,l=void 0!==c&&c,s=e.richContentKey,u=e.root,d=e.Portal,f=e.useHooks,g=b()(e,le),h=me(Ee);f(u);var p=null!==(n=null!=o?o:r)&&void 0!==n?n:"div";return Object(S.c)(S.a,{children:[d&&Object(S.b)(d,{root:u}),Object(S.b)(p,Object.assign({ref:t,css:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},function(e){return{"a.UserLink-link":ze(e),"lazy[data-lazy-status]":{backgroundColor:e.colors.GBK10A},'lazy[data-lazy-status="ok"]':{backgroundColor:"transparent",animation:"".concat(Se," 0.5s ease-in")}}}(e)),function(e){return{wordBreak:"break-word",lineHeight:"1.6","> [data-first-child]":{marginTop:0},"> :last-child":{marginBottom:0},"h1,h2":{clear:"left",marginTop:"calc((".concat("1.4em"," * 2) / 1.2)"),marginBottom:"calc(".concat("1.4em"," / 1.2)"),fontSize:"1.2em",lineHeight:1.5,fontWeight:e.fontWeights.bold},"h3,h4,h5,h6":{clear:"left",marginTop:"calc((".concat("1.4em"," * 1.5) / 1.1)"),marginBottom:"calc(".concat("1.4em"," / 1.1)"),fontSize:"1.1em",lineHeight:"1.5",fontWeight:e.fontWeights.bold},u:{textDecoration:"none",borderBottom:"1px solid ".concat(e.colors.GBK03A)},b:{fontWeight:e.fontWeights.bold},sup:{fontSize:"0.8em"},"sup[data-draft-type='reference']":{color:e.colors.GBL07A},"a:focus":Ie(e),"a.ztext-link,a.internal,a.external":Object.assign(Object.assign({textDecoration:"none",cursor:"pointer"},Le(e)),{},{"&:hover":Object.assign({color:e.colors.GBL07A},Be(e))," > .ellipsis::after":{content:"'...'"},"> .invisible":{font:"0/0 a",color:"transparent",textShadow:"none",backgroundColor:"transparent"},u:{border:"none"}}),"a.member_mention":ze(e),p:{margin:"".concat("1.4em"," 0")},"p.ztext-empty-paragraph":{margin:"calc((".concat("2.8em","- (").concat("1.4em"," * 2 + 1.6em)) / 2) 0"),"+ .ztext-empty-paragraph":{margin:"".concat("1.4em"," 0")}},hr:{margin:"4em auto",width:"240px",maxWidth:"100%",border:"none",borderTop:"1px solid ".concat(e.colors.GBK08A)},"img[eeimg]":Object.assign({maxWidth:"100%",verticalAlign:"middle"},e.isDarkMod&&{filter:"invert(1)"}),'img[eeimg="1"]':{margin:"0 3px",maxWidth:"calc(100% - 6px)",display:"inline-block"},'img[eeimg="2"]':{margin:"".concat("1.4em"," auto"),display:"block"},blockquote:{margin:"".concat("1.4em"," 0"),paddingLeft:"1em",color:e.colors.GBK04A,borderLeft:"3px solid ".concat(e.colors.GBK08A)},"ol,ul":{margin:"".concat("1.4em"," 0"),padding:0,width:"100%","ol,ul":{margin:0},"li::before":{width:"1em"},"> ol, > ul":{display:"table-row","&::before":{display:"table-cell",content:"''"}}},ul:{display:"table","&>li":{display:"table-row",listStyle:"none","&::before":{display:"table-cell",content:"'•  '",whiteSpace:"pre"}}},ol:{display:"table",counterReset:"ol","> li":{display:"table-row",listStyle:"none","&::before":{display:"table-cell",textAlign:"right",counterIncrement:"ol",content:"counter(ol) '. '",whiteSpace:"pre"}}},"ol ol":{counterReset:"ol2","li::before":{counterIncrement:"ol2",content:"counter(ol2) '. '"}},"ol ol ol":{counterReset:"ol3","li::before":{counterIncrement:"ol3",content:"counter(ol3) '. '"}},"ol ol ol ol":{counterReset:"ol4","li::before":{counterIncrement:"ol4",content:"counter(ol4) '. '"}},figure:{margin:"".concat("1.4em"," 0"),".content_image,.origin_image":{margin:"0 auto"},figcaption:{marginTop:"calc(0.6em / 0.9)",padding:"0 1em",fontSize:"0.9em",lineHeight:"1.5",textAlign:"center",color:e.colors.GBK06A},"& + figure":{marginTop:"calc(".concat("1.4em"," * 1.6)")},"&[data-size='small'],&:not([data-size]) > [data-size='small']":{clear:"both"},"&[data-size='left'],&:not([data-size]) > [data-size='left']":{float:"left",margin:"0 20px 20px 0",maxWidth:"33%"},"&[data-size='right'],&:not([data-size]) > [data-size='right']":{float:"right",margin:"0 0 20px 20px",maxWidth:"33%"},"&[data-size='collapse']":{marginBottom:0,"& + figure":{marginTop:0}}},".content_image, .origin_image":{display:"block",maxWidth:"100%",margin:"".concat("1.4em"," auto"),"&[data-size='small']":{maxWidth:"40%"},"&.zh-lightbox-thumb":{cursor:"zoom-in"}},code:{margin:"0 2px",padding:"3px 4px",borderRadius:"3px",fontFamily:Ge.zFontMonospace,fontSize:"0.9em",backgroundColor:e.colors.GBK10A},pre:{margin:"".concat("1.4em"," 0"),padding:"calc(0.8em / 0.9)",fontSize:"0.9em",wordBreak:"initial",wordWrap:"initial",whiteSpace:"pre",overflow:"auto",WebkitOverflowScrolling:"touch",background:e.colors.GBK10A,borderRadius:"4px",code:{margin:0,padding:0,fontSize:"inherit",borderRadius:0,backgroundColor:"inherit"}},"li pre":{whiteSpace:"pre-wrap"},"table[data-draft-type='table']":{borderCollapse:"collapse",fontSize:"15px",margin:"".concat("1.4em"," auto"),maxWidth:"100%",tableLayout:"fixed",textAlign:"left",width:"100%","&[data-size='small']":{minWidth:"260px",width:"40%"},"&[data-row-style='striped'] tr:nth-of-type(2n + 1)":{background:e.colors.GBK10A},"td,th":{border:"1px solid ".concat(e.colors.GBK08A),lineHeight:"24px",height:"24px",padding:"3px 12px"},th:{background:e.colors.GBK09A,color:e.colors.GBK02A,fontWeight:500}},"& .video-box, & .link-box":{position:"relative",display:"flex",justifyContent:"space-between",margin:"".concat("1.4em"," 0"),overflow:"auto",whiteSpace:"normal",cursor:"pointer",border:"solid 1px ".concat(e.colors.GBK09A),borderRadius:"4px"}}}(e)),function(e){return{"& .highlight":{margin:"1em 0",pre:{margin:0},".hll":{backgroundColor:e.colors.GBK12A},".c":{fontStyle:"italic",color:e.colors.GBK06A},".err":{color:e.colors.GRD03A},".k":{fontWeight:e.fontWeights.bold},".o":{fontWeight:e.fontWeights.bold},".cm":{fontStyle:"italic",color:e.colors.GBK06A},".cp":{fontWeight:e.fontWeights.bold,color:e.colors.GBK06A},".c1":{fontStyle:"italic",color:e.colors.GBK06A},".cs":{fontStyle:"italic",fontWeight:e.fontWeights.bold,color:e.colors.GBK06A},".gd":{color:e.colors.GRD01A},".ge":{fontStyle:"italic"},".gr":{color:e.colors.GRD03A},".gh":{color:e.colors.GBK06A},".gi":{color:"#12b370"},".go":{color:e.colors.GBK05A},".gp":{color:e.colors.GBK04A},".gs":{fontWeight:e.fontWeights.bold},".gu":{color:e.colors.GBK06A},".gt":{color:e.colors.GRD03A},".kc":{fontWeight:e.fontWeights.bold},".kd":{fontWeight:e.fontWeights.bold},".kn":{fontWeight:e.fontWeights.bold},".kp":{fontWeight:e.fontWeights.bold},".kr":{fontWeight:e.fontWeights.bold},".kt":{fontWeight:e.fontWeights.bold,color:e.colors.GBL07A},".m":{color:e.colors.GBL01A},".s":{color:e.colors.GRD03A},".na":{color:e.colors.GBL01A},".nb":{color:e.colors.GBL01A},".nc":{fontWeight:e.fontWeights.bold,color:e.colors.GBL07A},".no":{color:e.colors.GBL01A},".ni":{color:e.colors.GRD07A},".ne":{fontWeight:e.fontWeights.bold,color:e.colors.GRD03A},".nf":{fontWeight:e.fontWeights.bold,color:e.colors.GRD03A},".nn":{color:e.colors.GBK04A},".nt":{color:e.colors.GBL07A},".nv":{color:e.colors.GBL01A},".ow":{fontWeight:e.fontWeights.bold},".w":{color:e.colors.GBK07A},".mf":{color:e.colors.GBL01A},".mh":{color:e.colors.GBL01A},".mi":{color:e.colors.GBL01A},".mo":{color:e.colors.GBL01A},".sb":{color:e.colors.GRD03A},".sc":{color:e.colors.GRD03A},".sd":{color:e.colors.GRD03A},".s2":{color:e.colors.GRD03A},".se":{color:e.colors.GRD03A},".sh":{color:e.colors.GRD03A},".si":{color:e.colors.GRD03A},".sx":{color:e.colors.GRD03A},".sr":{color:e.colors.GYL02A},".s1":{color:e.colors.GRD03A},".ss":{color:e.colors.GRD03A},".bp":{color:e.colors.GBK06A},".vc":{color:e.colors.GBL01A},".vg":{color:e.colors.GBL01A},".vi":{color:e.colors.GBL01A},".il":{color:e.colors.GBL01A},"&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-thumb:horizontal":{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.5),borderRadius:"6px","&:hover":{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.6)}}}}}(e)),l&&{"&::before, &::after":{clear:"both",content:'""',display:"block"}})},className:R()("RichText","ztext",i,{"RichText--clearBoth":l}),dangerouslySetInnerHTML:{__html:h(a)}},g),s||a)]})}));Re.propTypes={as:G.a.string,tag:G.a.string,html:G.a.string.isRequired,clearBoth:G.a.bool,ref:G.a.func,Portal:G.a.func,useHooks:G.a.func},Re.defaultProps={useHooks:C.a};var Te=Object(k.memo)(Re),Ne=Object(k.forwardRef)((function(e,t){var n=W()(e,["entityType","entityData","notCommerce"]),o=n.text,r=n.target,i=n.url,a=n.image,c=n.imageWidth,l=n.imageHeight,s=n.component,u=n.className,d=n.size,f=n.children,g=b()(n,se),h=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return"180x120";if(n<=.8)return"120x160"}return"ipico"}(c,l),p=Object(K.imgUrl)(a,h);return Object(S.b)(s,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ref:t,target:r,href:i,"data-draft-node":"block","data-draft-type":"link-card"},p&&{"data-image":p}),c&&{"data-image-width":c}),l&&{"data-image-height":l}),d&&{"data-size":d}),o!==i&&o&&{"data-text":o}),{},{className:R()("LinkCard new",u)},g),{},{children:f||Object(S.c)(S.a,{children:[Object(S.c)("span",{className:"LinkCard-contents",children:[Object(S.b)("span",{className:"LinkCard-title loading","data-text":!0}),Object(S.b)("span",{className:"LinkCard-desc loading"})]}),Object(S.b)("span",{className:"LinkCard-image LinkCard-image--default"})]})}))}));Ne.propTypes={component:G.a.oneOfType([G.a.string,G.a.func]),target:G.a.string,url:G.a.string.isRequired,text:G.a.string,image:G.a.string,imageWidth:G.a.oneOfType([G.a.string,G.a.number]),imageHeight:G.a.oneOfType([G.a.string,G.a.number])},Ne.defaultProps={component:"a",target:"_blank"};var Pe={answer:"回答",article:"文章",zvideo:"视频",question:"问题",collection:"收藏夹",roundtable:"圆桌",topic:"话题"},We={voteupCount:"赞同",commentCount:"评论",playCount:"播放",followerCount:"关注",answerCount:"回答",visitCount:"浏览"},Ke={answer:["voteupCount","commentCount"],article:["voteupCount","commentCount"],zvideo:["playCount","voteupCount"],question:["followerCount","answerCount"],collection:["visitCount","followerCount"],default:["followerCount","visitCount"]},Ve=function(e){var t=e.twoLine,n=e.children;return Boolean(n)&&Object(S.b)("span",{className:R()("LinkCard-title",{"two-line":t}),children:n})},Me=function(e){var t=e.data,n=t.objectType,o=(Ke[n]||Ke.default).map((function(e){var n=t[e];return"".concat(Object(U.cnNiceNumber)(n)).concat(We[e])})).filter(Boolean).join(" · ");return Object(S.c)("span",{className:"LinkCard-desc",children:[o,Object(S.b)("span",{className:"LinkCard-tag",children:Pe[n]})]})},De=function(e){var t=e.url,n=Object(k.useMemo)((function(){var e=null,n=D()(t,!0);return"link.zhihu.com"===n.hostname&&(e=n.query.target),(e||t).replace(/^https?:\/\//,"")}),[t]);return Object(S.c)("span",{className:"LinkCard-desc",children:[Object(S.b)(_.a,{size:14,center:!0}),n]})},Ue=function(e){var t=e.url,n=e.isVideo,o=e.ratio,r=void 0===o?1:o,i=e.onClick;return Boolean(t)&&Object(S.c)("span",{className:"LinkCard-image",style:{height:60*r},children:[Object(S.b)("img",{src:t,onClick:i,alt:n?"点击可播放视频":""}),n&&Object(S.b)("span",{className:"LinkCard-image--video",children:Object(S.b)(Z.a,{size:10,center:!0})})]})},_e=function(e,t){var n=e.url,o=e.data,r=e.onClick,i=e.onClickImage,a=o.title,c=o.thumbnail,l=o.objectType;return Object(S.c)(S.a,{children:[Object(S.c)("span",{ref:t,className:"LinkCard-contents",onClick:r,children:[Object(S.b)(Ve,{twoLine:!0,children:a}),l?Object(S.b)(Me,{data:o}):Object(S.b)(De,{url:n})]}),Object(S.b)(Ue,{url:c,isVideo:"zvideo"===l,onClick:i})]})},Ze=Object(k.forwardRef)(_e),Fe=function(e){var t=e.className,n=e.html;return n?Object(S.b)("span",{className:"LinkCard-richText ".concat(t),dangerouslySetInnerHTML:{__html:"<object>".concat(n,"</object>")}}):null},He=function(e){var t=e.data,n=t.title,o=t.desc,r=t.url,i=t.image,a=t.ratio,c=t.isVideo;return Object(S.c)(S.a,{children:[Object(S.c)("span",{className:"LinkCard-contents",children:[Object(S.b)(Ve,{twoLine:!0,children:n},"title"),Object(S.b)(Fe,{className:"LinkCard-desc",html:o}),!o&&Object(S.b)(De,{url:r},"url")]}),Object(S.b)(Ue,{url:i,ratio:a,isVideo:c})]})},qe={ANSWER:"Answer",ARTICLE:"Column",ZVIDEO:"Zvideo",QUESTION:"Question",COLLECTION:"Collection",ROUNDTABLE:"Roundtable",SPECIAL:"Special",TOPIC:"Topic"},Qe=function(e){var t=Object(k.useMemo)((function(){return function(e){var t={};if(e.data){var n=Object(V.camelizeKeys)(JSON.parse(e.data)),o=n.source,r=void 0===o?{}:o,i=n.display,a=void 0===i?{}:i,c=n.zaData,l=void 0===c?{}:c,s=a.cardOpenUrl,u=a.title,d=a.content,f=a.desc,g=a.image||{};t={source:r,url:s,title:u,content:d,desc:f,image:g.imageUrl,ratio:g.ratio,isVideo:g.isVideo,zaAttachInfo:l.attachInfo}}return Object.assign(Object.assign(Object.assign({},t),e),{},{title:e.text||t.title,image:t.image||e.image})}(e)}),[e]),n=t.source,o=t.target,r=t.title,i=t.url,a=t.zaAttachInfo;return Object(S.b)(Ne,{notCommerce:!0,target:o,text:r,url:i,"data-za-attach-info":a,"data-za-content-type":qe[null==n?void 0:n.contentType]||"Unknown",className:"static",children:Object(S.b)(He,{data:t})})},Je=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,Ye=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.decodeValue,r=void 0!==o&&o,i={};t=Je.exec(e);){var a=t[1],c=t[3]||t[4];i[a]=(r?$e(c):c)||""}return i},Xe=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}function et(){return Math.max(window.innerHeight/10,100)}var tt=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t);if([n.overflow,n.overflowY,n.overflowX].some((function(e){return"scroll"===e||"auto"===e})))return t;t=t.parentNode||t.parentElement}return window};function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=tt(e),r=e.getBoundingClientRect().top+(o.pageYOffset||o.scrollTop||0)-(n?et():0)-t;o.scrollTo({top:r,behavior:"smooth"})}var ot=/<a\b([^>]*data-draft-type="link-card"[^>]*)>(.*?)<\/a>/g,rt=function(e){var t=e.target,n=e.url,o=e.component,r=e.className;return Object(S.b)(o,{target:t,href:n,"data-draft-node":"block","data-draft-type":"link-card","data-is-ecommerce":"1",className:R()("LinkCard",r),children:Object(S.c)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard",children:[Object(S.b)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper",children:Object(S.b)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})}),Object(S.c)("div",{className:"LinkCard-ecommerceLoadingCardLoadingbar",children:[Object(S.b)("span",{}),Object(S.b)("span",{})]})]})})};rt.defaultProps={component:"a",target:"_blank"};var it=/<a\b([^>]*BIZ(=|%3D)ECOMMERCE[^>]*)>(.*?)<\/a>/g;var at=function(){function e(t){var n,o,r,i=this;d()(this,e),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i.url||(i.url=e),e!==i.url)throw new Error("mismatch url\n".concat(e,"\n").concat(i.url),e,i.url);return new Promise((function(e,n){i.addToQueue({options:t,resolve:e,reject:n})}))},(o="fetch")in(n=this)?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,this.instance=null,this.customFetch=t,this.delay=200,this.maxDelay=1e3,this.url="",this.queueMaxLength=10,this.queue=[],this.startTime=Date.now(),this.timeout=null,this.initialized=!1}var t;return g()(e,[{key:"initConfig",value:function(e){var t=e.delay,n=e.maxDelay,o=e.maxBatchCount;t&&(this.delay=t),n&&(this.maxDelay=n),o&&(this.maxBatchCount=o),this.initialized=!0}},{key:"buildFetchParams",value:function(e){var t=be(j.a,e,1)[0].options,n=e.reduce((function(e,t){var n,o;return(null===(n=(o=t.options).dataBuilder)||void 0===n?void 0:n.call(o,e,t))||e}),{}),o=this.url,r=!t.method||"GET"===t.method.toUpperCase();if(r){var i=D()(o,!0);i.query=Object.assign(Object.assign({},i.query),n),o=i.toString()}return[o,Object.assign(Object.assign({},t),{},{data:r?null:Object.assign(Object.assign({},t.data),n)})]}},{key:"doFetch",value:(t=s()(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.queue,this.queue=[],e.prev=4,e.next=7,this.customFetch.apply(this,be(c.a,this.buildFetchParams(t)));case 7:n=e.sent,t.forEach((function(e){var t=e.options,o=e.resolve;t.resultBuilder?o(t.resultBuilder(n)):o(n)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.forEach((function(t){return t.reject(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return t.apply(this,arguments)})},{key:"addToQueue",value:function(e){var t=this;this.initialized||this.initConfig(e.options),clearTimeout(this.timeout),(Date.now()-this.startTime>this.maxDelay||this.queue.length>=this.maxBatchCount)&&(this.startTime=Date.now(),this.doFetch()),this.queue.push(e),setTimeout((function(){t.startTime=Date.now(),t.doFetch()}),this.delay)}}]),e}(),ct=null,lt=function(){throw new Error("Not implemented")},st=function(){return function(e){return function(t,n){return ct||(ct=new at(e)),ct.fetch(t,n)}}(function(e){return function(){var t=s()(i.a.mark((function t(n,o){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,o);case 2:return r=t.sent,t.t0=V.camelizeKeys,t.next=6,r.json();case 6:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}("undefined"!=typeof fetch?fetch:lt))},ut="https://www.zhihu.com/api/v4/link_card_infos",dt=J()((function(){if(!Object(q.isBrowser)())return ut;var e=window.location,t=e.hostname,n=e.origin;return[".zpres.zhihu.dev",".zpres.zhihu.com"].some((function(e){return t.endsWith(e)}))?"".concat(n,"/api/v4/link_card_infos"):ut})),ft={},gt=function(e,t,n){var o=e["data-text"],r=e.href,i=e.zvideoLinkCardProps;Object(k.useEffect)((function(){n&&Object(Y.onViewedOnce)(t.current,(function(){return e=t.current,void w.a.trackCardShow(e,{id:7844},{button:{text:"inlinezvideo"}});var e}))}),[n,t]);var a=Object(L.a)((function(e){!function(e,t,n){var o;w.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(o=t.onImageClick)||void 0===o||o.call(t,e,n)}(e,{title:o,url:r,video:{}})})),c=Object(L.a)((function(e){!function(e,t,n){var o;w.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(o=t.onImageClick)||void 0===o||o.call(t,e,n)}(e,i,{title:o,url:r})}));return n?{handleImageClick:a,handleInfoClick:c}:{}},ht={answer:"Answer",article:"Column",zvideo:"Zvideo",question:"Question",collection:"Collection",roundtable:"Roundtable",topic:"Topic"},bt=k.forwardRef((function(e,t){var n=W()(e,["zvideoLinkCardProps"]),o=n.inEditor,r=n["data-text"],a=n.href,c=n.zaBlock,l=b()(n,ue),u=Object(k.useRef)(),d=function(e){var t=Object(k.useRef)(0),n=e.inEditor,o=e["data-offset-key"],r=e["data-text"],a=e["data-image"],c=e.href,l=Object(k.useRef)(!1),u=Object(k.useRef)(c),d="draftjs"===n,f=Object(k.useState)((function(){return d&&ft[o]||null})),g=be(j.a,f,2),h=g[0],b=g[1],p=Object(B.a)({once:!0}),m=be(j.a,p,2),v=m[0],O=m[1],y=Object(L.a)((function(e){var t=e||h;if(!t||0===Object.keys(t).length)return{objectType:null,title:r||c,thumbnail:a};t.title=r||t.title||c,t.thumbnail=a||t.thumbnail;var n=Object.assign(Object.assign({},t),{},{cached:!0});return d&&(ft[o]=n),n})),A=Object(L.a)(st()),C=Object(L.a)(s()(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current+=1,e.prev=1,e.next=4,A(dt(),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},dataBuilder:function(e){return e.urls="".concat(e.urls?e.urls+",":"").concat(c),e},resultBuilder:function(e){return e[c]}});case 4:n=e.sent,b(y(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.current<=1?C():b(y());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))));return Object(k.useEffect)((function(){(!O||h&&h.cached)&&u.current===c||C()}),[O,h,C,c]),Object(k.useEffect)((function(){n&&l.current&&b(y(u.current!==c?{title:r}:null))}),[n,y,r,c]),Object(k.useEffect)((function(){u.current=c}),[c]),Object(k.useEffect)((function(){l.current=!0}),[]),[v,h]}(e),f=be(j.a,d,2),g=f[0],h=f[1],p=gt(e,u,"zvideo"===(null==h?void 0:h.objectType)),m=p.handleImageClick,v=p.handleInfoClick,O=Object(k.useCallback)(pe(t,g,u),[]),y=o?Ze:x.a,A=o?null:{as:Ze,shouldTrackShow:!0,zaText:!0,zaType:"Button",zaAction:"OpenUrl",zaBlock:c,extra:{link:{url:a}},"data-za-module":"Content"},C=Object(S.b)(y,Object.assign(Object.assign({},A),{},{url:a,data:h,onClick:v,onClickImage:m}));return Object(S.b)(Ne,Object.assign(Object.assign({ref:O,text:r,url:a,component:"a"},l),{},{children:Boolean(h)&&Object(S.b)(x.b,{content:{type:ht[h.objectType]||"Unknown"},children:C})}))})),pt=function(e){return function(t){var n=Object(k.useState)(null),o=be(j.a,n,2),r=o[0],i=o[1],a=e.idAttr,c=e.selector,l=e.component,s=e.targetClassName,u=e.cardDataFilter,d=e.getCardProps,f=t.root,g=b()(t,de),h=a&&c&&s&&Object(k.useCallback)((function(e){return function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var o=e.getAttribute(t),r=document.createElement("div");return r.className=n,e.parentNode.replaceChild(r,e),{data:{id:o},target:r}}}({idAttr:a,targetClassName:s})(e)}),[a,s]),p=Object(k.useMemo)((function(){return h?function(e){return Array.from(e.querySelectorAll(c)).map(h)}:C.a}),[h,f,c]);return Object(k.useEffect)((function(){if(f||c&&u){var e=(u||p)(f).map((function(e){var t=e.data,n=e.target,o=null;return"function"==typeof d&&(o=d(t)),Object(X.createPortal)(Object(S.b)(l,Object.assign(Object.assign({id:t.id},o),g),t.id),n)}));e.length>0&&i(e)}}),[f]),r}},mt=pt({cardDataFilter:function(e){return Array.from(e.querySelectorAll("a.LinkCard[data-draft-type=link-card]:not([data-is-ecommerce])")).map((function(e){var t,n=(t=e.attributes,Array.from(t).reduce((function(e,t){return"class"===t.name?e.className=t.value:e[t.name]=t.value,e}),{})),o=document.createElement("div");return o.className="RichText-LinkCardContainer",e.parentNode.replaceChild(o,e),{data:n,target:o}}))},getCardProps:function(e){return e.href&&e.href.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)?e.zaBlock="ZTextZVideoLinkCard":e.zaBlock="ZTextLinkCard",e},component:bt}),vt=function(e){return{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",padding:12,borderRadius:"inherit",height:80,boxSizing:"border-box",background:e.colorMod(e.colors.GBK10A).alpha(.88),color:e.colors.GBK08A}},Ot=function(e){return{width:60,height:60,background:e.colors.GBK09A,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,marginRight:10}},yt=function(e){return{height:60,flex:1,display:"flex",flexDirection:"column",span:{height:16,display:"inline-block",background:e.colors.GBK09A},"span:nth-of-type(1)":{width:60,marginBottom:4},"span:nth-of-type(2)":{width:127}}},jt=function(e){return{".LinkCard.old":{position:"relative",display:"block",margin:"1em auto",width:390,boxSizing:"border-box",borderRadius:12,maxWidth:"100%",overflow:"hidden","&,&:hover":{textDecoration:"none",border:"none !important",color:"inherit !important"}},".LinkCard-ecommerceLoadingCard":vt(e),".LinkCard-ecommerceLoadingCardAvatarWrapper":Ot(e),".LinkCard-ecommerceLoadingCardNetwork":{width:20,height:20},".LinkCard-ecommerceLoadingCardLoadingbar":yt(e)}},kt=function(e){return{position:"relative",display:"flex",boxSizing:"border-box",flexDirection:"row",alignItems:"center",width:390,minHeight:84,borderRadius:8,maxWidth:"100%",overflow:"hidden",margin:"16px auto",padding:"12px 12px 9px 12px",backgroundColor:e.colors.GBK10A,"&, &:hover":{textDecoration:"none",border:"none !important",color:"inherit !important"},".LinkCard-contents":{display:"block",flex:"1 1 auto",position:"relative",".loading":{height:14,background:e.colors.GBK09A,borderRadius:7},"&.withTitle":{marginBottom:3}},".LinkCard-title":Object.assign(Object.assign({display:"block",fontSize:15,fontWeight:500,lineHeight:1.4,marginBottom:2,color:e.colors.GBK02A},Object($.a)(1)),{},{"&.two-line":Object.assign({lineHeight:"20px"},Object($.a)(2)),"&.loading":{marginBottom:8,width:"80%","&.withTitle":{marginBottom:6}},"&.loadingTitle":{marginBottom:5}}),".LinkCard-excerpt":Object.assign(Object.assign({display:"block",textOverflow:"ellipsis",fontSize:13,lineHeight:"18px",color:e.colors.GBK06A,marginBottom:4},Object($.a)(1)),{},{".LinkCard-author":{color:e.colors.GBK03A}}),".LinkCard-desc":Object.assign(Object.assign({display:"block",fontSize:13,height:18,lineHeight:"18px",color:e.colors.GBK06A,wordBreak:"break-all"},Object($.a)(1)),{},{".LinkCard-tag,.tag":{display:"inline-block",fontSize:11,marginLeft:8,padding:"0 4px",borderRadius:3,background:e.colorMod(e.colors.GBK08A).alpha(.3)},"&.loading":{width:"40%"},svg:{marginRight:2}}),".LinkCard-image":{flex:"0 0 auto",backgroundColor:e.colors.GBK09A,backgroundSize:"cover",backgroundPosition:"center",position:"relative",display:"block",width:60,height:60,marginLeft:20,objectFit:"cover",borderRadius:"inherit",overflow:"hidden","&.LinkCard-image--default":{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.colors.GBK09A,color:e.colors.GBK08A,svg:{color:e.colors.GBK06A}},img:{width:"100%",height:"100%",objectFit:"cover"},".LinkCard-image--video":{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",width:24,height:24,borderRadius:12,background:e.colorMod(e.colors.GBK99C).alpha(.9),pointerEvents:"none",svg:{color:e.colors.GBK03A}}},".LinkCard-richText":{".text":{color:e.colors.GBK03A},".bold":{fontWeight:e.fontWeights.bold},".tag":{marginLeft:4}}}},At=function(e){return{".LinkCard.new":kt(e)}},Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))},wt=function(e){return Object.assign(Object.assign({},jt(e)),At(e))},xt=function(e){return Object.assign(Object.assign({},At(e)),jt(e))},Lt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.rootMargin,r=n.threshold,i=n.once,a=void 0===i||i;e=Array.isArray(e)?e:e?[e]:[];var c=Object(k.useRef)(null),l=Object(L.a)(t);Object(k.useEffect)((function(){if(e.length)return c.current&&e.forEach((function(e){return c.current.unobserve(e)})),c.current=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(l(e),a&&c.current.unobserve(e.target))}))}),{rootMargin:o,threshold:r}),e.forEach((function(e){return c.current.observe(e)})),function(){e.forEach((function(e){return c.current.unobserve(e)}))}}),[e,o,JSON.stringify(r),a])},Bt=n(135);var zt="function"==typeof Image,St={},It=zt?Bt((function(e){return new Promise((function(t){return n=e,o=function(e,n){St[e]=n,t(n)},(r=new Image).onload=function(){var e=r.width>0&&r.height>0;o(n,e)},r.onerror=function(){o(n,!1)},void(r.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,o,r}))})):function(){return Promise.resolve(!1)},Gt=function(e){var t=St[e],n=Object(k.useState)(t),o=be(j.a,n,2),r=o[0],i=o[1];return zt&&void 0===t&&It(e).then(i),r},Et=te()((function(){return/Mobile/.test(navigator.userAgent)}));function Rt(e,t){var n={monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}};w.a.trackMonitor({name:t},n)}var Tt=function(e){var t=e.onLoadStateChange,n=e.enableWebP,o=e.size,r=e.quality;return function(e){var i=e.target,a=function(e){var t=e.image,n=e.enableWebP,o=e.size,r=e.quality,i=void 0===r?80:r,a=t.dataset,c=a.actualsrc,l=a.actualgif;return n&&l&&l.match(/.gif$/i)?c:(o||(o="720w",!Et()&&window.devicePixelRatio>=1.5&&(o="1440w"),Et()&&window.devicePixelRatio*window.innerWidth>=1080&&(o="1440w")),Object(K.imgUrl)(c,{quality:i,size:o}))}({image:i,enableWebP:n,size:o,quality:r});if(n&&(a=function(e){return e.replace(/\.(jpg|png|jpeg|gif)/,".webp")}(a)),i.src=a,i.complete)i.dataset.lazyStatus="ok";else{t&&i.addEventListener("loadstart",(function(){t("loadstart",a)})),i.dataset.lazyStatus="loading";var c=setTimeout((function(){i.complete||Rt(i.url,"image_web_timeout_image"),t&&t("timeout",a)}),15e3);i.addEventListener("load",(function(){i.dataset.lazyStatus="ok",clearTimeout(c),Rt(i.url,"image_web_success_image"),t&&t("load",a)})),i.addEventListener("error",(function(){clearTimeout(c),Rt(i.url,"image_web_fail_image"),t&&t("error",a)}))}}},Nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useWebP,o=void 0===n||n,r=t.disabled,i=void 0!==r&&r,a=t.onLoadStateChange,c=t.size,l=t.quality,s=Object(k.useState)([]),u=be(j.a,s,2),d=u[0],f=u[1],g=Gt("lossless");Lt(d,Tt({onLoadStateChange:a,enableWebP:g&&o,size:c,quality:l}),{rootMargin:"300px"}),Object(k.useEffect)((function(){if(e&&!i){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&f(t)}}),[e,i])},Pt=function(e,t){w.a.trackEvent(e,{action:"StatusReport",element:"Card"},{status:{result:t}})},Wt=function(e,t){var n,o,r;null===(n=window)||void 0===n||null===(o=n.Raven)||void 0===o||null===(r=o.captureException)||void 0===r||r.call(o,e,{fingerprint:["gif2mp4"],extra:t})},Kt=function(e){var t=e.src,n=e.useWebP,o=void 0===n?"auto":n,r=e.useMp4,i=void 0!==r&&r,a=e.onRef,c=e.onLoadStateChange,l=b()(e,fe),s=Object(k.useState)(""),u=be(j.a,s,2),d=u[0],f=u[1],g=Object(k.useState)(null),h=be(j.a,g,2),p=h[0],m=h[1],v=Object(k.useState)(Date.now()),O=be(j.a,v,2),y=O[0],A=O[1],x=Object(k.useState)(!1),L=be(j.a,x,2),B=L[0],I=L[1],G=Object(k.useState)(null),E=be(j.a,G,2),R=E[0],T=E[1],N=Gt("animation"),P=Object(k.useCallback)((function(){var e=(Object(ne.imgPathParse)(t)||{}).hash;i&&Object(Y.onViewedOnce)(p,(function(){var t;(t=e,fetch("https://api.zhihu.com/gif2mp4/".concat(t),{credentials:"include",headers:{"X-Requested-With":"Fetch"}}).then((function(e){return e.json()}))).then((function(e){var t,n,o=e.playlist,r=(null==o||null===(t=o.SD)||void 0===t?void 0:t.play_url)||(null==o||null===(n=o.LD)||void 0===n?void 0:n.play_url);r&&re.b.increment("Gif2Mp4Player.mp4.fetch.success.count"),f(r)})).catch(C.a)}))}),[p,t,i]);Object(k.useEffect)(P,[t,i,p]),Object(k.useEffect)((function(){p&&w.a.setModule(p,{module:"GifItem"})}),[p]),Lt(p,(function(){w.a.trackCardShow(p,{element:"Card"})})),Object(z.a)((function(){re.b.increment("Gif2Mp4Player.mp4.play.failure.count"),Wt(new Error("Gif2Mp4 play timeout"),{src:t,videoUrl:d}),I(!1)}),B?2e3:null),Object(z.a)((function(){re.b.increment("Gif2Mp4Player.mp4.play.success.count"),re.b.timing("Gif2Mp4Player.mp4.first_frame_time",Date.now()-y-100),I(!1),T(null)}),R);var W=oe()(t,{extension:("auto"===o?N:o)?"webp":"gif"});return Object(S.b)(ce.d,Object.assign({videoUrl:d,src:W,onRef:Object(k.useCallback)(pe(a,m),[]),onPlayChange:function(e){e||(A(Date.now()),d&&(re.b.increment("Gif2Mp4Player.mp4.click.count"),I(!0)),w.a.trackEvent(p,{action:"Click",element:"Image"}))},onLoadStart:function(){if(d){var e=ae.a.parse(d).expiration;e&&Number(e)<Date.now()/1e3+900&&P()}A(Date.now()),c&&c("loadstart",W)},onSuccess:function(){Pt(p,"Success"),d?B&&T(100):re.b.timing("Gif2Mp4Player.gif.first_frame_time",Date.now()-y),c&&c("load",W)},onFailed:function(e){Pt(p,"Fail"),d&&(B&&(re.b.increment("Gif2Mp4Player.mp4.play.failure.count"),I(!1),T(null)),Wt(e,{videoUrl:d,src:t})),c&&c("error",W)}},l))},Vt=function(e){var t=e.dataset,n=t.thumbnail,o={src:n,poster:n,size:t.size},r=document.createElement("div");return r.className="RichText-gifPlaceholder",e.parentNode.replaceChild(r,e),{data:o,target:r}},Mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Component,o=void 0===n?Kt:n,r=Object(k.useState)(null),i=be(j.a,r,2),a=i[0],c=i[1];return Object(k.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll("img.origin_image[data-thumbnail],img.content_image[data-thumbnail]"));if(t.length){var n=t.map((function(e){return Vt(e)})).map((function(e,t){var n=e.data,r=e.target;return Object(X.createPortal)(Object(S.b)(o,Object.assign({},n),t),r)}));c(n)}}}),[e]),a},Dt=me([function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.linkCardInfo;return e?e.replace(ot,(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Ye(t,{decodeValue:!0}),i=r.target,a=void 0===i?"_blank":i,c=r.href,l=void 0===c?"":c,s=r["data-image"],u=r["data-image-width"],d=r["data-image-height"],f=r["data-entity-type"],g=r["data-entity-data"],h=r["data-size"],b=r["data-is-ecommerce"];if(b)return e;var p=o.replace(/<[^>]*>/g,"");p=$e(p),l.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)&&!p&&(p="知乎视频");var m=n?Qe:Ne;return Object(N.renderToStaticMarkup)(Object(S.b)(m,Object.assign({text:p,url:l,target:a,image:s,imageWidth:u,imageHeight:d,entityType:f,entityData:Xe(g),size:h},n&&{data:n[l]})))})):e},function(e){return e?e.replace(it,(function(e,t){var n=Ye(t,{decodeValue:!0}),o=n["data-draft-type"],r=n.href,i=n.class;return"link-card"!==o?e:Object(N.renderToStaticMarkup)(Object(S.b)(rt,{url:r,className:H()(i,{old:!0,new:!1,static:!1})}))})):e}]),Ut=Object(k.forwardRef)((function(e,t){var n=Object(k.useState)(null),o=be(j.a,n,2),r=o[0],i=o[1],a=e.html,c=e.css,l=e.options,s=void 0===l?{}:l,u=e.linkCardInfo,d=b()(e,ge),f=s.lazyLoadImageOptions,g=s.useGifPortalOption,h=b()(s,he);Nt(r,f),Oe(r);var p=[wt,xt,c].reduce((function(e,t){return t||(t={}),"function"==typeof t?function(n){return Object.assign(Object.assign({},e(n)),t(n))}:function(n){return Object.assign(Object.assign({},e(n)),t)}}),(function(e){return{}})),m=Object(k.useCallback)(pe(t,i),[]);return Object(S.c)(k.Fragment,{children:[!u&&Object(S.b)(mt,{css:xt,root:r}),Mt(r,g),Object(S.b)(Ce,{root:r}),Object(S.b)(Te,Object.assign({ref:m,html:Dt(a,{linkCardInfo:u}),css:p,root:r,options:h},d))]})})),_t=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g},1223:function(e,t,n){"use strict";t.a=function(e){var t=e.getCurrentContent();return t.getBlockMap().filter((function(e){return"atomic"===e.getType()})).map((function(e){var n=e.getEntityAt(0);return n?t.getEntity(n):null})).filter(Boolean)}},1316:function(e,t,n){"use strict";n.d(t,"a",(function(){return te})),n.d(t,"b",(function(){return ne})),n.d(t,"c",(function(){return oe}));var o,r=n(447),i=n.n(r),a=n(24),c=n.n(a),l=n(30),s=n.n(l),u=n(1026),d=n(0),f=n(13),g=n.n(f),h=n(220),b=n.n(h),p=n(25),m=n(72),v=n.n(m),O=n(5),y=n(926),j=n(153),k=n(61),A=n.n(k),C=n(51),w=n(1023),x=n(1317),L=n(105),B=n(867),z=n(1),S=["onRef"],I=["id","useZVideoLinkCard","inEditor"];function G(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var o=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}(t,void 0!==n&&n<o?n:o)}return e(t,n)}var E=function(e){var t=e.className;return Object(z.c)("svg",{viewBox:"0 0 72 72",className:t,children:[Object(z.b)("circle",{cx:"36",cy:"36",fill:"#fff",fillOpacity:".95",r:"36"}),Object(z.b)("path",{d:"M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z",fill:"#444",fillRule:"nonzero"})]})};function R(e){var t=String(e);return t.length<2&&(t="0"+t),t}function T(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(R(n),":").concat(R(t))}var N=function(){return{borderRadius:"8px",boxSizing:"border-box",display:"block",margin:"1em auto",maxWidth:"100%",overflow:"hidden",position:"relative","&,&:hover":{border:"none !important",color:"inherit !important",textDecoration:"none"}}},P=function(){return{position:"relative",paddingBottom:"56%"}},W=function(){return{left:"0",height:"100%",position:"absolute",top:"0",width:"100%"}},K=function(){return{backgroundSize:"cover",backgroundPosition:"center",position:"relative",paddingBottom:"56%"}},V=function(){return{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"60px"}},M=function(){return{bottom:"10px",color:"#fff",fontSize:"14px",lineHeight:"16px",position:"absolute",right:"12px"}},D=function(e){return{backgroundColor:e.colors.GBK10A,padding:"12px"}},U=function(e){return{color:e.colors.GBK02A,fontSize:"16px",lineHeight:"22px",fontWeight:e.fontWeights.bold}},_=function(e){return{alignItems:"center",color:e.colors.GBK06A,display:"flex",fontSize:"14px",lineHeight:"20px",marginTop:"6px"}},Z=function(){return{height:"20px",marginRight:"8px",width:"20px"}},F=function(e){return{background:e.colors.GBK10A,borderRadius:"8px",boxSizing:"border-box",display:"block",margin:"1em auto",maxWidth:"100%",overflow:"hidden",paddingBottom:"56%",position:"relative"}},H=function(e){return{alignItems:"center",color:e.colors.GBK06A,display:"flex",fontSize:"28px",left:"50%",lineHeight:"40px",position:"absolute",textAlign:"center",transform:"translate(-50%, -50%)",top:"50%"}},q=Object.freeze({__proto__:null,ZVideoLinkCard:N,ZVideoLinkCardPlayerContainer:P,ZVideoLinkCardPlayer:W,ZVideoLinkCardImage:K,ZVideoLinkCardPlayIcon:V,ZVideoLinkCardDuration:M,ZVideoLinkCardInfo:D,ZVideoLinkCardTitle:U,ZVideoLinkCardAuthor:_,ZVideoLinkCardAvatar:Z,ZVideoLinkErrorCard:F,ZVideoLinkErrorCardMessage:H}),Q=function(e){var t,n,o=null==e||null===(t=e.refTo)||void 0===t||null===(n=t.contents)||void 0===n?void 0:n[0];return null==o?void 0:o[null==o?void 0:o.type]},J=function(e){var t=e.onRef,n=s()(e,S),o=Object(d.useRef)();return Object(d.useLayoutEffect)((function(){t(o)}),[o,t]),Object(z.b)(w.a,Object.assign({ref:o},n))},Y=function(e){var t=e.enableInlinePlay,n=e.onImageClick,o=e.zvideo,r=e.zaButtonText,i=e.getVideoUrl,a=e.zaProps,l=e.onLinkCardPlayerLoaded,s=o.imageUrl,u=o.video,f=u.videoId,g=u.duration,h=Object(d.useCallback)((function(e){p.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:r}}),n(e,o)}),[n,o,r]),b=Object(L.a)((function(e){"function"==typeof l&&e&&l({videoId:f,videoIframeRef:e})})),m=Object(B.a)({once:!0,threshold:[0,.1]}),v=G(c.a,m,2),O=v[0],y=v[1];return Object(z.b)(z.a,{children:t?Object(z.b)("div",{ref:O,className:"ZVideoLinkCard-playerContainer",css:P,children:y&&Object(z.b)(J,{onRef:b,type:"video",className:"ZVideoLinkCard-player",css:W,src:i?i(f):"https://www.zhihu.com/video/".concat(f),iframeProps:{allowFullScreen:!0},zaProps:a})}):Object(z.c)("div",{className:"ZVideoLinkCard-image",css:K,style:{backgroundImage:"url(".concat(s,")")},onClick:h,children:[Object(z.b)(E,{className:"ZVideoLinkCard-playIcon",css:V}),Boolean(g)&&Object(z.b)("div",{className:"ZVideoLinkCard-duration",css:M,children:T(g)})]})})},X=function(e){var t=e.onInfoClick,n=e.zvideo,r=e.zaButtonText,a=e.showReferenceInfo,c=e.showCoCreationInfo,l=e.subAuthor,s=void 0===l?{}:l,u=n.title,f=n.url,g=n.author,h=n.playCount,m=Object(d.useCallback)((function(e){p.a.trackEvent(e.target,{id:7847,action:"OpenUrl"},{button:{text:r}}),t(e,n)}),[t,n,r]);return Object(z.c)("div",{className:"ZVideoLinkCard-info",css:D,onClick:m,children:[Object(z.b)("div",{className:"ZVideoLinkCard-title",css:U,children:u}),Boolean(f)&&Object(z.c)("div",{className:"ZVideoLinkCard-author",css:_,children:[c?Object(z.c)(z.a,{children:[Object(z.b)(x.b,{url:g.avatarUrl,alt:"",size:20,round:!0,css:{zIndex:1}}),Object(z.b)(x.b,{url:s.avatarUrl,alt:"",size:20,round:!0,css:{marginLeft:-4,marginRight:8}}),Object(z.b)("div",{children:"".concat(g.name,"、").concat(s.name," 联合创作")})]}):Object(z.c)(z.a,{children:[Object(z.b)(x.b,{className:"ZVideoLinkCard-avatar",css:Z,url:g.avatarUrl,alt:"",size:20,round:!0}),Object(z.b)("div",{children:a?"".concat(g.name," 引用创作"):b()(o||(o=i()(["","的视频"])),g.name)})]}),Boolean(h)&&Object(z.c)("div",{children:[" · ",Object(j.cnNiceNumber)(h),"播放"]})]})]})};function $(e){var t,n=Object(d.useRef)(null),o=e.component,r=void 0===o?"a":o,i=e.getVideoUrl,a=e.className,c=e.onClick,l=e.onMouseDown,s=e.zvideo,u=e.enableInlinePlay,f=void 0!==u&&u,h=e.onImageClick,b=void 0===h?v.a:h,m=e.onInfoClick,O=void 0===m?v.a:m,j=e.renderInjection,k=e.zaProps,A=e.onLinkCardPlayerLoaded,w=s.id,x=s.url,L=s.video,B=L.videoId,S=L.status,I=s.creationRelationship,G=!x?"inlinezvideo":"zvideo",E=Q(null==I?void 0:I.coCreation),R=Boolean(E),T="ZTextZVideoLinkCard";if(R?T="ZTextCoCreationZVideoLinkCard":(T="ZTextReferenceZVideoLinkCard",t=Boolean(Q(null==I?void 0:I.reference))),Object(d.useEffect)((function(){j||Object(y.onViewedOnce)(n.current,(function(){p.a.trackCardShow(n.current,{id:7844},{button:{text:G}})}))}),[G,j]),j){if("function"!=typeof j)throw new Error("renderInjection must be function");return j(e)}return"converting_failure"===S?Object(z.b)(ee,{error:"视频转码失败，请重新上传视频"}):Object(z.b)(d.Fragment,{children:Object(z.c)(C.c,{as:r,shouldTrackClick:!0,shouldTrackShow:!0,zaAction:"OpenUrl",zaEventType:"Click",zaBlock:T,zaType:"Card",view:{elementLocation:{content:{type:"Zvideo",id:w},card:{index:0}}},extra:{link:{url:x}},className:g()("ZVideoLinkCard",a),css:N,ref:n,href:x,target:"_blank",rel:"noopener noreferrer",onClick:c,onMouseDown:l,"data-za-not-track-link":!0,"data-za-module":"Content","data-za-module-info":JSON.stringify({card:{content:{type:"Zvideo",token:w,video_id:B}}}),children:[Object(z.b)(Y,{zvideo:s,enableInlinePlay:f,zaButtonText:G,onImageClick:b,getVideoUrl:i,zaProps:Object.assign({token:w},k),onLinkCardPlayerLoaded:A}),Object(z.b)(X,{zvideo:s,zaButtonText:G,onInfoClick:O,showReferenceInfo:t,showCoCreationInfo:R,subAuthor:null==E?void 0:E.author})]})})}function ee(e){var t=e.error;return Object(z.b)("div",{className:"ZVideoLinkErrorCard",css:F,children:Object(z.b)("div",{className:"ZVideoLinkErrorCard-message",css:H,children:t.message||"视频加载错误"})})}function te(e){var t=e.id,n=e.useZVideoLinkCard,o=e.inEditor,r=s()(e,I),i=Object(d.useState)(null),a=G(c.a,i,2),l=a[0],f=a[1],g=Object(d.useState)(null),h=G(c.a,g,2),b=h[0],p=h[1];return Object(d.useEffect)((function(){if(n){var e=new URLSearchParams({include:A()({creation_relationship:!0})}),o="https://www.zhihu.com/api/v4/zvideos/".concat(t,"/card?").concat(e.toString());Object(u.g)(o).then((function(e){return Object(O.camelizeKeys)(e)})).then((function(e){e.error?p(e.error):f(e)})).catch((function(e){p(e)}))}}),[n,t]),n?b?Object(z.b)(ee,{error:b}):l?Object(z.b)($,Object.assign({zvideo:l,css:q,component:o?"div":"a"},r)):null:Object(z.b)(u.b,Object.assign({inEditor:o,component:o?"div":"a",href:"https://www.zhihu.com/zvideo/".concat(t)},r))}te.defaultProps={useZVideoLinkCard:!0};var ne=Object(u.e)({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),o="link-card"===e.getAttribute("data-draft-type");if(!n||!o)return null;var r=null===(t=n.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/))||void 0===t?void 0:t[1];if(r){var i=document.createElement("div");return i.className="RichText-ZVideoLinkCardContainer",e.parentNode.replaceChild(i,e),{data:{id:r},target:i}}return null})).filter(Boolean)},component:te}),oe=function(e,t,n){var o=Object(d.useRef)(n),r=Object(L.a)((function(e){var n=e.currentTarget,o={title:n.dataset.text,href:n.href};"IMG"===e.target.tagName?function(e,t,n){var o;p.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(o=t.onImageClick)||void 0===o||o.call(t,e,n)}(e,t,Object.assign(Object.assign({},o),{},{video:{}})):function(e,t,n){var o;p.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(o=t.onImageClick)||void 0===o||o.call(t,e,n)}(e,t,o)}));Object(d.useEffect)((function(){if(e&&o.current){var t=Array.from(e.querySelectorAll(".LinkCard.new.static.zvideo"));return t.forEach((function(e){Object(y.onViewedOnce)(e,(function(){return t=e,void p.a.trackCardShow(t,{id:7844},{button:{text:"inlinezvideo"}});var t})),e.addEventListener("click",r)})),function(){t.forEach((function(e){e.removeEventListener("click",r)}))}}}),[e,o,r])}},1666:function(e,t,n){"use strict";var o=n(24),r=n.n(o),i=n(30),a=n.n(i),c=n(47),l=n.n(c),s=n(230),u=n(0),d=n(51),f=n(33),g=n(134),h=n(8),b=["childItems","isMenuToggler","showTogglerIcon"];function p(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var o=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}(t,void 0!==n&&n<o?n:o)}return e(t,n)}var m=function(e){return"undefined"!=typeof navigator&&/Mac/i.test(navigator.userAgent)?e.replace(/\+/g,""):e.replace("⌘","Ctrl").replace("⌥","Alt").replace("⇧","Shift")},v=function(e){return{background:e.colors.GBL01A,svg:{fill:e.colors.GBK99B},".togglerIcon":{borderLeftColor:e.colors.GBK99B},color:e.colors.GBK99B}},O=function(e){return{background:e.colors.GBK10A,svg:{fill:e.colors.GBL01A},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},y=function(e){return{svg:{fill:e.colors.GBL01A},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},j={name:"5barcq",styles:"width:24px;height:24px;position:relative;border-radius:4px;"},k=Object(u.forwardRef)((function(e,t){var n,o=e.icon,r=e.className,i=e.label,a=e.shortcut,c=e.isActive,u=e.firstLine,g=e.text,b=e.onClick,p=e.isMenuItem,k=void 0!==p&&p,A=e.sectionFirst,C=e.sectionLast,w=e.disabled,x=e.isMenuOpen,L=e.showTogglerIcon,B=e.isMenuToggler,z=e.menuItemText,S=u||!k,I=!u||k,G=!u||k,E=i&&i!==g&&i!==z||a,R=L&&Object(h.g)("div",{className:"togglerIcon",css:function(e){return Object.assign(Object.assign({position:"absolute"},u?{right:"-4px",bottom:"-4px"}:{right:"-1px",bottom:"-1px"}),{},{width:0,height:0,border:"4px solid transparent",borderLeft:"4px solid ".concat(e.colors.GBL05A),transform:"rotate(45deg)"})}});return Object(h.g)(d.a,l()({as:f.c,zaType:"Button",zaText:i,ref:t,preset:f.b.Plain,className:r,disabled:w,css:function(e){return{"&.Button.Button--plain":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?k?{padding:"4px 12px"}:{padding:"2px",margin:k?"0":"4px"}:Object.assign({},k?{padding:"10px 16px",textAlign:"left"}:{padding:"6px 16px 6px 12px"})),{},{fontWeight:e.fontWeights.bold,color:e.colors.GBL05A},k&&{width:"100%"}),{},{display:"flex",alignItems:"center"},G&&C&&{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}),G&&A&&{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}),(u||k)&&{borderRadius:"6px"}),c&&y(e)),{},{"&:hover":O(e)},x&&B&&Object.assign(Object.assign({},v(e)),{},{"&:hover":v(e)})),{},{"&:active":v(e)})}},"aria-label":i,"data-tooltip-position":k&&!u?"right":"bottom","data-tooltip-will-hide-on-click":!0},E&&{"data-tooltip":i+(a?" ".concat(m(a)):"")},{onClick:b}),S||u&&R?Object(h.g)("div",{css:j},S&&Object(h.g)(o,{css:function(e){return{color:e.colors.GBL05A}},center:!0}),u&&R):null,I&&Object(h.g)("span",{css:Object(s.a)(Object.assign(Object.assign({},(!k||u)&&{marginLeft:"4px"}),{},{width:"100%"}),"")},k?null!==(n=null!=z?z:g)&&void 0!==n?n:i:null!=g?g:i),!u&&R)}));t.a=function(e){var t=e.childItems,n=e.isMenuToggler,o=e.showTogglerIcon,i=a()(e,b),c=Object(u.useState)(!1),d=p(r.a,c,2),f=d[0],m=d[1];if(n){if(0===t.length)return null;if(1===t.length)return Object(h.g)(k,l()({},i,t[0]));var v=Object(h.g)(k,l()({},i,{isMenuToggler:!0,isMenuOpen:f,showTogglerIcon:o}));return Object(h.g)(g.c,{toggler:v,onOpen:function(){return m(!0)},onClose:function(){return m(!1)},arrowed:!1,menuContainerClassName:"ToolbarV2Menu-container"},Object(h.g)("div",{css:Object(s.a)({display:e.firstLine?"flex":"block"},"")},t.map((function(t){return Object(h.g)(k,l()({key:t.label,isMenuItem:!0,firstLine:e.firstLine},t))}))))}return Object(h.g)(k,e)}},1678:function(e,t,n){"use strict";n.d(t,"a",(function(){return K})),n.d(t,"b",(function(){return V})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return q}));var o=n(24),r=n.n(o),i=n(30),a=n.n(i),c=n(29),l=n.n(c),s=n(23),u=n.n(s),d=n(27),f=n.n(d),g=n(26),h=n.n(g),b=n(28),p=n.n(b),m=n(17),v=n.n(m),O=n(1),y=n(0),j=n.n(y),k=n(143),A=n(13),C=n.n(A),w=n(79),x=n.n(w),L=n(146),B=n.n(L),z=n(2108),S=n(266),I=n.n(S),G=n(867),E=n(887),R=["gifKey","isPlaying"],T=["onChange","onRef","threshold","autoplayOnShow"];function N(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var o=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}(t,void 0!==n&&n<o?n:o)}return e(t,n)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var W;!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Failed=3]="Failed"}(W||(W={}));var K=function(e){return Object(O.b)("svg",Object.assign(Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),{},{children:Object(O.c)("g",{fill:"none",fillRule:"evenodd",children:[Object(O.b)("ellipse",{fill:"#000",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(O.b)("ellipse",{stroke:"#FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:30,cy:30,rx:26,ry:26}),Object(O.b)("svg",Object.assign(Object.assign({x:16,y:18.5},e),{},{children:Object(O.b)("path",{d:"M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z",fill:"#fff"})}))]})}))},V=function(e){return Object(O.c)("svg",Object.assign(Object.assign({width:"60px",height:"60px",viewBox:"0 0 60 60",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(O.c)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[Object(O.b)("ellipse",{fill:"#000000",opacity:"0.45",cx:"30",cy:"30",rx:"30",ry:"30"}),Object(O.b)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5",cx:"30",cy:"30",rx:"26",ry:"26"}),Object(O.c)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:"30",cy:"30",rx:"26",ry:"26",children:[Object(O.b)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"90 30 30",dur:"0.3s"}),Object(O.b)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"0.3",fill:"freeze"})]})]}),Object(O.b)("svg",{x:"16",y:"18.5",children:Object(O.b)("g",{fill:"#ffffff",children:Object(O.b)("path",{x:"100",y:"100",d:"M12.8422852,12.9814453 L12.8422852,11.3994141 L7.63916016,11.3994141 L7.63916016,13.0517578 L10.9086914,13.0517578 L10.9086914,13.3242188 C10.8911133,15.2050781 9.46728516,16.4707031 7.39306641,16.4707031 C5.01123047,16.4707031 3.51708984,14.625 3.51708984,11.6367188 C3.51708984,8.70117188 5.00244141,6.84667969 7.34912109,6.84667969 C9.08056641,6.84667969 10.284668,7.68164062 10.7768555,9.2109375 L12.7543945,9.2109375 C12.3237305,6.64453125 10.2319336,5.00976562 7.34912109,5.00976562 C3.79833984,5.00976562 1.50439453,7.61132812 1.50439453,11.6542969 C1.50439453,15.75 3.77197266,18.3076172 7.36669922,18.3076172 C10.6889648,18.3076172 12.8422852,16.2246094 12.8422852,12.9814453 Z M17.5180664,18 L17.5180664,5.31738281 L15.5493164,5.31738281 L15.5493164,18 L17.5180664,18 Z M22.659668,18 L22.659668,12.7441406 L28.1088867,12.7441406 L28.1088867,11.0039062 L22.659668,11.0039062 L22.659668,7.11035156 L28.6098633,7.11035156 L28.6098633,5.31738281 L20.690918,5.31738281 L20.690918,18 L22.659668,18 Z"})})}),Object(O.c)("path",{d:"M56,30 C56,15.6405965 44.3594035,4 30,4",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",fill:"none",children:[Object(O.b)("animate",{attributeName:"opacity",from:"0",to:"1",dur:".6",fill:"freeze"}),Object(O.b)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"360 30 30",dur:"1.625s",repeatCount:"indefinite"})]})]}))},M=function(e){return Object(O.b)("svg",Object.assign(Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),{},{children:Object(O.c)("g",{fill:"none",fillRule:"evenodd",children:[Object(O.b)("ellipse",{fill:"#282828",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(O.b)("path",{d:"M41.552 18.93A15.954 15.954 0 0 0 30 14c-8.837 0-16 7.163-16 16s7.163 16 16 16c7.811 0 14.315-5.597 15.72-13",stroke:"#FFF",strokeWidth:2,strokeLinecap:"round"}),Object(O.b)("path",{d:"M45.108 16.236c.44-.33.797-.151.797.4v7.005c0 .55-.358.73-.797.4L40.7 20.736c-.44-.33-.439-.866 0-1.195l4.407-3.305z",fill:"#FFF"})]})}))},D=function(){return Object(O.b)("div",{className:"GifPlayer-cover",css:function(e){return{width:"100%",paddingTop:"".concat(56.25,"%"),position:"relative",background:e.colors.GBK10A}},children:Object(O.b)("div",{css:{position:"absolute",width:"100%",height:"100%",top:0,left:0}})})},U=function(e){var t=e.onChange,n=e.onRef,o=e.threshold,i=e.autoplayOnShow,c=a()(e,T),l=Object(G.a)({threshold:o}),s=N(r.a,l,3),u=s[0],d=s[2];return Object(y.useEffect)((function(){d&&t&&t(d)}),[d,t]),Object(O.b)("div",Object.assign({ref:Object(E.a)(n,i?u:null)},c))},_=function(){return new Promise(requestAnimationFrame)},Z=function(e){h()(n,e);var t=P(n);function n(){var e;return u()(this,n),(e=t.apply(this,arguments)).state={isLoaded:!1},e.videoEle=null,e.imgRef=Object(y.createRef)(),e.onPlay=function(){var t=e.props.onSuccess;t&&t()},e.onError=function(t){var n=e.props,o=n.onFailed,r=n.gifKey;o&&o(t.currentTarget.error),e.props.updateGif({gifKey:r,loadState:W.Failed})},e.handleClick=function(t){var n=e.props,o=n.onClick,r=n.disableTogglePlayOnClick,i=n.loadState;o&&o(t),r&&i!==W.Failed||e.togglePlayState()},e.handleImageLoad=function(){return e.setState({isLoaded:!0})},e.handleIntersectionChange=function(t){var n,o;e.props.autoplayOnShow&&(t.isIntersecting&&t.intersectionRatio>=.3&&e.triggerPlayGif(),t.isIntersecting||0!==t.intersectionRatio||null===(o=(n=e.props).updateGif)||void 0===o||o.call(n,{gifKey:e.props.gifKey,isPlaying:!1}))},e.wrapperIcon=function(e){return Object(O.b)("div",{className:"GifPlayer-icon",css:{position:"absolute",top:"50%",left:"50%",pointerEvents:"none",transition:"0.3s ease-out",transitionProperty:"transform, opacity",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"left top",opacity:"1"},children:e})},e}return f()(n,[{key:"canPlay",get:function(){return this.props.loadState===W.Ok}},{key:"componentDidMount",value:function(){var e;(null===(e=this.imgRef.current)||void 0===e?void 0:e.complete)&&this.handleImageLoad()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isPlaying,o=t.videoUrl,r=t.loadState;this.videoEle&&n&&o!==e.videoUrl&&this.videoEle.play(),e.videoUrl||!o||r!==W.Loading&&!n||this.triggerPlayGif(),this.videoEle&&this.videoEle.duration&&!n&&e.isPlaying!==n&&(this.videoEle.currentTime=0,this.videoEle.controls=!1,this.videoEle.pause())}},{key:"componentWillUnmount",value:function(){this.props.removeGif({gifKey:this.props.gifKey})}},{key:"triggerPlayGif",value:function(){this.props.isPlaying||this.togglePlayState()}},{key:"togglePlayState",value:function(){var e=this.props,t=e.onPlayChange,n=e.isPlaying,o=e.videoUrl;return t&&t(n),o?this.toggleVideo():this.canPlay?this.toggleGifImage():void this.loadGif()}},{key:"toggleGifImage",value:function(){var e=this.props,t=e.gifKey,n=e.isPlaying;this.props.updateGif({gifKey:t,isPlaying:!n})}},{key:"toggleVideo",value:function(){var e=this.props,t=e.gifKey,n=e.onLoadStart,o=e.loadState,r=e.isPlaying;this.videoEle&&(r?this.videoEle.pause():(o===W.Failed&&(this.videoEle.src=this.videoEle.src),this.videoEle.play(),n&&n())),this.props.updateGif({gifKey:t,isPlaying:!r})}},{key:"loadGif",value:function(){var e=this,t=this.props,n=t.gifKey,o=t.src,r=t.onLoadStart,i=t.onSuccess,a=t.onFailed;t.loadState!==W.Loading&&(this.props.updateGif({gifKey:n,loadState:W.Loading}),r&&r(),Promise.all([Object(k.loadImage)(o),_().then(_)]).then((function(){i&&i(),e.props.videoUrl||e.props.updateGif({gifKey:n,isPlaying:!0,loadState:W.Ok})})).catch((function(t){a&&a(t),e.props.videoUrl||e.props.updateGif({gifKey:n,loadState:W.Failed})})))}},{key:"render",value:function(){var e,t,n,o,r=this,i=this.props,a=i.poster,c=i.src,l=i.size,s=i.loadState,u=i.isPlaying,d=i.onRef,f=i.videoUrl,g=i.customIcons,h=i.autoplayOnShow,b=this.canPlay&&u,p=s===W.Loading,m=s===W.Failed,v=this.state.isLoaded;return p?o=this.wrapperIcon(null!==(e=null==g?void 0:g.loading)&&void 0!==e?e:Object(O.b)(V,{})):m?o=this.wrapperIcon(null!==(t=null==g?void 0:g.failed)&&void 0!==t?t:Object(O.b)(M,{})):u||(o=this.wrapperIcon(null!==(n=null==g?void 0:g.normal)&&void 0!==n?n:Object(O.b)(K,{}))),o&&(this.lastIcon=o),Object(O.c)(U,{threshold:[0,.3],onChange:this.handleIntersectionChange,autoplayOnShow:h,onRef:d,className:C()("GifPlayer",{isPlaying:u}),"data-size":l,onClick:this.handleClick,css:[{position:"relative",display:"block",margin:"0 auto",overflow:"hidden",maxWidth:"100%",cursor:"pointer",textAlign:"center",img:{maxWidth:"100%",verticalAlign:"top",margin:"0 auto"}},"small"===l&&{maxWidth:"40%"},u&&{".GifPlayer-icon":{transform:"scale(0.3) translate(-50%, -50%)",opacity:"0"}}],children:[!v&&Object(O.b)(D,{}),Object(O.b)("img",{className:C()("ztext-gif",{"GifPlayer-gif2mp4Image":f}),style:{display:v?"block":"none"},role:"presentation",src:b?c:a,"data-thumbnail":a,"data-size":l,ref:this.imgRef,onLoad:this.handleImageLoad,alt:b?"动图":"动图封面"}),f&&Object(O.b)("video",{ref:function(e){r.videoEle=e},className:"ztext-gif GifPlayer-gif2mp4",src:f,"data-thumbnail":a,poster:a,"data-size":l,controls:!1,preload:"metadata",loop:!0,muted:!0,onPlay:this.onPlay,onError:this.onError,playsInline:!0,css:{height:"100%",objectFit:"cover",position:"absolute",left:"50%",top:"0",transform:"translateX(-50%)"}}),o||this.lastIcon]})}}]),n}(j.a.Component);Z.defaultProps={isPlaying:!1,loadState:W.Initial};var F,H,q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.a;return function(n){return x()(function(o){h()(i,o);var r=P(i);function i(){var e;return u()(this,i),(e=r.apply(this,arguments)).key=t(),e}return f()(i,[{key:"render",value:function(){return Object(O.b)(n,Object.assign(Object.assign({},this.props),l()({},e,this.key)))}}]),i}(j.a.Component),n)}}("gifKey")((F=function(e,t){return e.value[t.gifKey]},H={updateGif:function(e){return function(t){var n=e.gifKey,o=e.isPlaying,r=a()(e,R),i=Object.assign({},t);if(o)for(var c=0,s=Object.keys(i);c<s.length;c++){var u=s[c],d=i[u];u!==n&&d.isPlaying&&(i[u]=Object.assign(Object.assign({},d),{},{isPlaying:!1}))}return Object.assign(Object.assign({},i),{},l()({},n,Object.assign(Object.assign({},t[n]),{},{isPlaying:o},r)))}},removeGif:function(e){return function(t){var n=Object.assign({},t);return delete n[e.gifKey],n}}},function(e){var t,n=(t=[],{value:{},listen:function(e){t.push(e)},unlisten:function(e){t=t.filter((function(t){return t!==e}))},emit:function(e){this.value=e,t.forEach((function(t){return t(e)}))}}),o=Object(z.createSubscription)({getCurrentValue:function(e){return e.value},subscribe:function(e,t){return e.listen(t),function(){return e.unlisten(t)}}}),r=function(e,t){return e?I()(e,(function(e){return function(){return t(e.apply(void 0,arguments))}})):{dispatch:t}}(H,(function(e){return n.emit(e(n.value))})),i=Object.assign((function(t){return Object(O.b)(o,{source:n,children:function(o){return Object(O.b)(e,Object.assign(Object.assign(Object.assign({},t),F({value:o,source:n},t)),r))}})}),{source:n});return x()(i,e)})(Z))},1685:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(30),r=n.n(o),i=(n(0),n(1666)),a=n(8),c=["toolbarButton"];function l(e){var t=e.toolbarButton,n=void 0===t?i.a:t,o=r()(e,c);return Object(a.g)("div",null,Object(a.g)(n,o))}},1687:function(e,t,n){"use strict";var o=n(47),r=n.n(o),i=(n(0),n(2910)),a=n(347),c=n(8);t.a=function(e){var t=e.toolbarButton,n=void 0===t?a.a:t;return Object(c.g)("div",null,Object(c.g)(n,r()({label:e.isActive?"删除目录":"添加目录",shortcut:"⌘+⇧+0",icon:i.b},e)))}},2107:function(e,t,n){var o;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n=function(){function e(){}function t(e,t){for(var n=t.length,o=0;o<n;++o)r(e,t[o])}e.prototype=Object.create(null);var n={}.hasOwnProperty;var o=/\s+/;function r(e,r){if(r){var i=typeof r;"string"===i?function(e,t){for(var n=t.split(o),r=n.length,i=0;i<r;++i)e[n[i]]=!0}(e,r):Array.isArray(r)?t(e,r):"object"===i?function(e,t){if(t.toString===Object.prototype.toString)for(var o in t)n.call(t,o)&&(e[o]=!!t[o]);else e[t.toString()]=!0}(e,r):"number"===i&&function(e,t){e[t]=!0}(e,r)}}return function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=new e;t(i,o);var a=[];for(var c in i)i[c]&&a.push(c);return a.join(" ")}}();e.exports?(n.default=n,e.exports=n):void 0===(o=function(){return n}.apply(t,[]))||(e.exports=o)}()},2108:function(e,t,n){"use strict";e.exports=n(2109)},2109:function(e,t,n){"use strict";
/** @license React v17.0.0
 * create-subscription.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=n(0);t.createSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe;return function(e){function o(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this).state={source:n.props.source,value:null!=n.props.source?t(n.props.source):void 0},n._hasUnmounted=!1,n._unsubscribe=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(o,e),o.getDerivedStateFromProps=function(e,n){return e.source!==n.source?{source:e.source,value:null!=e.source?t(e.source):void 0}:null};var r=o.prototype;return r.componentDidMount=function(){this.subscribe()},r.componentDidUpdate=function(e,t){this.state.source!==t.source&&(this.unsubscribe(),this.subscribe())},r.componentWillUnmount=function(){this.unsubscribe(),this._hasUnmounted=!0},r.render=function(){return this.props.children(this.state.value)},r.subscribe=function(){var e=this,o=this.state.source;if(null!=o){var r=n(o,(function(t){e._hasUnmounted||e.setState((function(e){return t===e.value||o!==e.source?null:{value:t}}))}));if("function"!=typeof r)throw Error(function(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}(266));this._unsubscribe=r,(r=t(this.props.source))!==this.state.value&&this.setState({value:r})}},r.unsubscribe=function(){"function"==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null},o}(o.Component)}},2918:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var o=n(0),r=n.n(o),i=n(12),a=Object.assign;function c(e){return r.a.createElement(i.a,a(a({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowUturnLeft24","data-old-api":"Undo24"},e),{className:"ZDI ZDI--Undo24"+(e.className?" ".concat(e.className):"")}),r.a.createElement("path",{d:"M4.165 6.59l3.522-3.522a.75.75 0 011.06 1.061L6.494 6.384h6.155c3.924 0 7.029 2.69 7.029 6.687 0 2.017-.96 3.706-2.297 4.875-1.329 1.162-3.071 1.849-4.732 1.849H5.082a.75.75 0 010-1.5h7.566c1.269 0 2.666-.535 3.745-1.478 1.07-.935 1.784-2.234 1.784-3.746 0-3.064-2.325-5.187-5.53-5.187H6.494l2.255 2.255a.75.75 0 01-1.06 1.061L4.163 7.677a.748.748 0 010-1.086z"}))}function l(e){return r.a.createElement(i.a,a(a({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowUturnLeft24","data-old-api":"Undo"},e),{className:"Zi Zi--Undo"+(e.className?" ".concat(e.className):"")}),r.a.createElement("path",{d:"M4.165 6.59l3.522-3.522a.75.75 0 011.06 1.061L6.494 6.384h6.155c3.924 0 7.029 2.69 7.029 6.687 0 2.017-.96 3.706-2.297 4.875-1.329 1.162-3.071 1.849-4.732 1.849H5.082a.75.75 0 010-1.5h7.566c1.269 0 2.666-.535 3.745-1.478 1.07-.935 1.784-2.234 1.784-3.746 0-3.064-2.325-5.187-5.53-5.187H6.494l2.255 2.255a.75.75 0 01-1.06 1.061L4.163 7.677a.748.748 0 010-1.086z"}))}},2919:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var o=n(0),r=n.n(o),i=n(12),a=Object.assign;function c(e){return r.a.createElement(i.a,a(a({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowUturnRight24","data-old-api":"Redo24"},e),{className:"ZDI ZDI--Redo24"+(e.className?" ".concat(e.className):"")}),r.a.createElement("path",{d:"M19.454 6.6L15.92 3.07a.75.75 0 10-1.06 1.06l2.255 2.255H10.96c-3.924 0-7.029 2.69-7.029 6.687 0 2.017.96 3.706 2.297 4.875 1.329 1.162 3.071 1.849 4.733 1.849h7.565a.75.75 0 000-1.5H10.96c-1.27 0-2.667-.535-3.745-1.478-1.07-.935-1.785-2.233-1.785-3.746 0-3.064 2.325-5.187 5.53-5.187h6.155l-2.255 2.256a.75.75 0 001.06 1.06l3.536-3.535a.75.75 0 00-.003-1.064z"}))}function l(e){return r.a.createElement(i.a,a(a({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowUturnRight24","data-old-api":"Redo"},e),{className:"Zi Zi--Redo"+(e.className?" ".concat(e.className):"")}),r.a.createElement("path",{d:"M19.454 6.6L15.92 3.07a.75.75 0 10-1.06 1.06l2.255 2.255H10.96c-3.924 0-7.029 2.69-7.029 6.687 0 2.017.96 3.706 2.297 4.875 1.329 1.162 3.071 1.849 4.733 1.849h7.565a.75.75 0 000-1.5H10.96c-1.27 0-2.667-.535-3.745-1.478-1.07-.935-1.785-2.233-1.785-3.746 0-3.064 2.325-5.187 5.53-5.187h6.155l-2.255 2.256a.75.75 0 001.06 1.06l3.536-3.535a.75.75 0 00-.003-1.064z"}))}},974:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var o=n(29),r=n.n(o),i=n(149),a=n.n(i),c=n(503),l=n.n(c);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var d={CONTENT_OPERATION:"content_operation",TEXT_STYLE:"text_style",LIST:"list",BLOCK:"block",STRUCTURE_GENERATION:"structure_generation",PROFESSIONAL_MEDIA:"professional_media",BASIC_MEDIA:"basic_media",BUSINESS_MEDIA:"business_media"},f=function(e){var t,n=Object.values(d).reduce((function(e,t){return Object.assign(Object.assign({},e),{},r()({},t,[]))}),{}),o=[],i=[],c=s(e,!0);try{for(c.s();!(t=c.n()).done;){var u=t.value.toolbarV2;if(a()(u)||Array.isArray(u)){var f,g=s(a()(u)?[u]:u,!0);try{for(g.s();!(f=g.n()).done;){var h=f.value;h.parentName?i.push(h):o.push(h)}}catch(e){g.e(e)}finally{g.f()}}}}catch(e){c.e(e)}finally{c.f()}for(var b=function(){var e=m[p],t=e.section,o=e.parentName,r=n[t];if(o){var i=r.find((function(e){return e.name===o}));if(!i)return"continue";i.childItems||(i.childItems=[]),i.childItems.includes(e)||(i.childItems.push(e),i.childItems=l()(i.childItems,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0})))}else r.push(e),r=l()(r,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0}));n[t]=r},p=0,m=[].concat(o,i);p<m.length;p++)b();return n};t.a=d}}]);
//# sourceMappingURL=main.shared_14774065bb21e3f9eef3fe9784ae4bf5f7d3a6cd.259fb4c37a3341efac8a.js.map