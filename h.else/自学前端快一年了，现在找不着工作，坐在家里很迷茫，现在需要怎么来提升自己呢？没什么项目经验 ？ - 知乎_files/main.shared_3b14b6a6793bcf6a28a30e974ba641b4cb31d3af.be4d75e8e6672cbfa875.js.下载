(window.webpackJsonp=window.webpackJsonp||[]).push([[14,96],{1019:function(e,t,n){"use strict";var r=n(1144);n.d(t,"getReferencedContent",(function(){return r.d})),n.d(t,"isCoCreateRelation",(function(){return r.e})),n.d(t,"isReferenceRelation",(function(){return r.f}));var a=n(1740);n.d(t,"CoCreationLabel",(function(){return a.a}));var o=n(1741);n.o(o,"CancelCoCreation")&&n.d(t,"CancelCoCreation",(function(){return o.CancelCoCreation})),n.o(o,"CoCreationLinkCard")&&n.d(t,"CoCreationLinkCard",(function(){return o.CoCreationLinkCard})),n.o(o,"CreationRelationshipBar")&&n.d(t,"CreationRelationshipBar",(function(){return o.CreationRelationshipBar})),n.o(o,"renderDualAuthor")&&n.d(t,"renderDualAuthor",(function(){return o.renderDualAuthor}));var i=n(1833);n.d(t,"CreationRelationshipBar",(function(){return i.a}));var c=n(1742);n.d(t,"CoCreationLinkCard",(function(){return c.a}));var l=n(1743);n.d(t,"renderDualAuthor",(function(){return l.a}));var s=n(1848);n.d(t,"CancelCoCreation",(function(){return s.a}))},1031:function(e,t,n){"use strict";e.exports=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}},1032:function(e,t,n){"use strict";var r=n(1256),a=[],o=[],i=r.makeRequestCallFromTimer((function(){if(o.length)throw o.shift()}));function c(e){var t;(t=a.length?a.pop():new l).task=e,r(t)}function l(){this.task=null}e.exports=c,l.prototype.call=function(){try{this.task.call()}catch(e){c.onerror?c.onerror(e):(o.push(e),i())}finally{this.task=null,a[a.length]=this}}},1038:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(2),a=n(15),o=n(16),i=n(18),c=n(19),l=n(9),s=n(37),u=n(1),d=n(0),f=n(20),b=n(21),p=n(38),h=n(176),m=n(226),v=n(215),g=["ids"],O=["currentUser","authRequired"];function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var y=function(){return n.e(113).then(n.bind(null,1197)).then((function(e){return e.FavlistsModal}))},w={ids:[],isFetching:!1,isDrained:!1},C=Object(p.createSelector)((function(e){return e.favlists[e.currentUser]||w}),(function(e){return e.entities.favlists}),(function(e,t){var n=e.ids,r=Object(s.default)(e,g);return Object.assign(Object.assign({},r),{},{items:n.map((function(e){return t[e]}))})}));var x=function(e){Object(i.a)(n,e);var t=j(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onFavlistAdd=function(){for(var t=e.props,n=t.type,r=t.id,a=t.onFavlistAdd,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return a.apply(void 0,i.concat([{type:n,id:r}]))},e.onLoad=function(){var t=e.props,n=t.onLoad,a=t.type,o=t.id,i=t.onUpdateReaction;return n(a,o).then((function(e){i({contentType:a,contentId:o,relations:e.payload.data.reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(r.a)({},t.id,t.isFavorited))}),{})})}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.authRequired,r=Object(s.default)(e,O);return Object(u.b)(h.a,Object.assign(Object.assign({getComponent:y},r),{},{authRequired:n,isUserActive:Boolean(null==t?void 0:t.isActive),onLoad:this.onLoad,onFavlistAdd:this.onFavlistAdd}))}}]),n}(d.Component),k=Object(f.compose)(v.a,Object(b.connect)((function(e,t){var n=t.id,r=t.type,a=e.favlists.relations,o=e.currentUser,i=C(e);return{isFetching:i.isFetching,isDrained:i.isDrained,items:i.items,relations:a["".concat(r,"_").concat(n)],zaEnabled:!0,urlToken:o}}),(function(e,t){return{onUpdateFav:function(){return e(m.g.apply(void 0,arguments))},onFavlistAdd:t.onFavlistAdd||function(){return e(m.a.apply(void 0,arguments))},onLoad:function(){return e(m.d.apply(void 0,arguments))},onUpdateReaction:function(){return e(m.h.apply(void 0,arguments))}}})))(x)},1043:function(e,t,n){e.exports=n(220),e.exports.CJKSpace=n(1227).CJKSpace},1060:function(e,t,n){"use strict";n.d(t,"a",(function(){return yr}));var r=n(35),a=n(4),o=n(15),i=n(16),c=n(86),l=n(18),s=n(19),u=n(9),d=n(8),f=n(1),b=n(972),p=n(906),h=n(911),m=n(1212),v=n(1723),g=n(899),O=n(13),j=n.n(O),y=n(64),w=n.n(y),C=n(3),x=n.n(C),k=n(0),S=n.n(k),A=n(21),T=n(49),I=n(59),R=n(20),E=n(38),N=n(25),B=n(51),z=n(33),L=n(176),P=n(91),_=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}];function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var D=function(e){Object(l.a)(n,e);var t=M(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,r=e.onChange,a=e.className;return Object(f.b)("div",{className:j()("RadioButtons",a),children:t.map((function(e,t){var a=e.value,o=e.text,i=e.placeholder;return Object(f.c)("label",{className:"RadioButtons-item",children:[Object(f.b)("span",{className:"RadioButtons-text",children:o}),Object(f.b)("input",{type:"radio",className:"RadioButtons-input",value:a,checked:n===a,onChange:function(){return r(a,i)}})]},t)}))})}}]),n}(k.PureComponent);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}D.propTypes={options:x.a.arrayOf(x.a.shape({value:x.a.string,text:x.a.string,placeholder:x.a.string})).isRequired,value:x.a.string,onChange:x.a.func,className:x.a.string};var F=function(){return Promise.all([n.e(1),n.e(4),n.e(103),n.e(105),n.e(2),n.e(3),n.e(5),n.e(19),n.e(123)]).then(n.bind(null,2971))},V=_.map((function(e){var t=e.code,n=e.description,r=e.placeholder;return{text:n,value:String(t),placeholder:r}})),G=function(e){Object(l.a)(n,e);var t=U(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},e.handleReasonCodeChange=function(t,n){e.setState({selectedReasonCode:Number(t),selectedReasonPlaceholder:n||""}),e.input&&e.input.resetWithValue(n||"")},e.handleAddAnnotation=function(){var t=e.props,n=t.addAnnotation,r=t.type,a=t.urlToken,o=t.showNotification,i=t.onClose;n(r,a,e.state.selectedReasonCode,e.input.toHTML()).then((function(){i(),o&&o("标记内容成功")}))},e.handleReasonDescriptionChange=function(t){e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state,i=o.selectedReasonCode,c=o.isReasonDescriptionEmpty,l=o.selectedReasonPlaceholder,s=function(e){var t=_.find((function(t){return t.code===e}));return t&&t.description}(i),u=32300===i;return Object(f.b)(P.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:a,children:r&&Object(f.c)("div",{children:[Object(f.c)("div",{className:"AddAnnotationModal-body",children:[Object(f.b)(D,{options:V,onChange:this.handleReasonCodeChange,value:String(i)}),i&&Object(f.c)("div",{children:[Object(f.c)("div",{className:"AddAnnotationModal-description",children:[s,"（",u?"必填":"选填","）"]}),Object(f.b)(L.a,{getComponent:F,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:l,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange})]})]}),Object(f.b)(P.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup",children:Object(f.b)(z.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||u&&c,children:"标记"})})]})})}}]),n}(k.PureComponent);G.propTypes={addAnnotation:x.a.func.isRequired,onClose:x.a.func.isRequired,shown:x.a.bool.isRequired,type:x.a.oneOf([0,1,2]).isRequired,urlToken:x.a.oneOfType([x.a.number,x.a.string]),showNotification:x.a.func,className:x.a.string};var q=n(57),H=n(94),W=n.n(H),K=n(144);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Q=function(e){Object(l.a)(n,e);var t=Z(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isReasonDescriptionEmpty:!0},e.handleCancelAnnotation=function(){var t=e.props,n=t.cancelAnnotation,r=t.type,a=t.urlToken,o=t.showNotification,i=t.onClose;n(r,a,32305,e.input.value).then((function(){i(),o&&o("撤销标记成功")}))},e.handleReasonDescriptionChange=function(t){return e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,a=t.className,o=this.state.isReasonDescriptionEmpty;return Object(f.b)(P.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:a,children:r&&Object(f.c)("div",{className:"CancelAnnotationModal",children:[Object(f.b)(K.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),Object(f.c)(P.a,{direction:"horizontal",children:[Object(q.isBrowser)()&&!W()(window.navigator.userAgent).Mobile&&Object(f.b)(z.c,{onClick:n,size:"spread",children:"取消"}),Object(f.b)(z.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:o,children:"撤销标记"})]})]})})}}]),n}(k.PureComponent);Q.propTypes={cancelAnnotation:x.a.func.isRequired,onClose:x.a.func.isRequired,shown:x.a.bool.isRequired,type:x.a.oneOf([0,1,2]).isRequired,urlToken:x.a.oneOfType([x.a.number.isRequired,x.a.string.isRequired]),showNotification:x.a.func,className:x.a.string};var Y=n(489),J=n(433),X=n(217),$=n(920),ee=n(134),te=n(43),ne=n.n(te),re=n(1747),ae=n(1186),oe=n(1748),ie=n(1340),ce=n(1019),le=n(1144),se=n(105),ue=n(287),de=n(1548),fe=n(65),be=n(32),pe=n(377),he=n(1187),me=Object(T.withRouter)((function(e){var t=e.parent,n=t.type,r=t.id,a=t.question,o=e.location.pathname,i=Object(fe.p)(),c=Object(A.useSelector)((function(e){var t=null==o?void 0:o.includes("/answer/"),n=!t&&(null==o?void 0:o.includes("/question/"));return Object(fe.k)(e,{type:t?"answer":n?"question":"",id:r||(null==a?void 0:a.id)})})),l=Object(se.a)((function(e,t){e&&e.stopPropagation(),be.E&&i||("zvideo"!==n?c?location.href="zhihu://".concat(n,"/").concat(r,"?utm_app_name=zhihu_check"):(Object(ue.e)(Object(pe.a)({type:n,id:r},{launch_button:t})),e.preventDefault()):Object(ue.e)(Object(pe.a)({type:n,id:r},{launch_button:t})))}));return Object(f.b)("div",{className:"CommentsForOia",children:Object(f.b)(de.b,{css:{margin:0},showInteractions:!1,resourceType:n,resourceId:String(r),showCommentInput:!1,openInApp:function(e){return l(e,he.b.comment_list)},customHeader:function(){return null},customFooter:function(e){return e<=2||be.E?null:Object(f.b)(z.c,{color:"blue",preset:"primary",onClick:function(e){return l(e,he.b.comment_more)},children:"打开 App 查看更多评论"})}})})})),ve=n(158),ge=n(467),Oe=n(1e3),je=n(1431),ye=n(1844),we=n(1083),Ce=n(1183),xe=n(1345),ke=n(215),Se=n(1549),Ae=n(92),Te=n(2),Ie=n(5),Re=n(45),Ee=n(6),Ne=Object.assign({},Object(Ee.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),Be=function(e){return e===be.e?"answers":e===be.g?"pins":e===be.f?"articles":null},ze=n(171),Le=n(41),Pe=n(31),_e=n(132),Me=n(452),De=n(278),Ue=n(1181),Fe=n(988),Ve=n(1584),Ge=n(1342),qe=n(1288),He=n(1574),We=n(1751),Ke=n(937),Ze=n(1845),Qe=n(1367),Ye=n(973),Je=n(940),Xe=n(12),$e=Object.assign;function et(e){return S.a.createElement(Xe.a,$e($e({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowTurnRight24","data-old-api":"Jump"},e),{className:"Zi Zi--Jump"+(e.className?" ".concat(e.className):"")}),S.a.createElement("path",{d:"M14.528 4.47a.75.75 0 10-1.06 1.06l4.723 4.72H10c-2.125 0-3.699.54-4.643 2.114-.87 1.45-1.107 3.651-1.107 6.636a.75.75 0 001.5 0c0-3.015.263-4.814.893-5.864C7.2 12.21 8.125 11.75 10 11.75h8.187l-4.717 4.718a.75.75 0 101.06 1.06l6-6a.75.75 0 00-.008-1.068l-5.994-5.99z",fillRule:"evenodd",clipRule:"evenodd"}))}var tt=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var r=n.tail,a=r.url,o=r.message;return Object(f.c)("a",{className:j()("CommercialQuestionTail",t),href:a,children:[o,Object(f.b)(et,{className:"CommercialQuestionTail-Icon",center:!0,text:!0})]})},nt=n(1001),rt=n(929),at=n(95),ot=n(154),it=n(1720),ct=n.n(it),lt=n(2414),st=n.n(lt),ut=n(1721),dt=n.n(ut),ft=n(2415),bt=n.n(ft),pt={answerAdmireCouldOpen:{image:st.a,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:st.a,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:bt.a,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:bt.a,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:dt.a,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:dt.a,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}};var ht=function(e){var t=e.notification,n=void 0===t?{}:t,r=e.className,a=e.onRead,o=e.onUseAdmire,i=e.onUseRecommend,c=Object.keys(n).find((function(e){return n[e]})),l=pt[c]||{},s=l.title,u=l.image,d=l.content,b=l.buttonText,p=l.buttonLink,h=l.detailViewName,m=l.cardShowId,v=l.buttonClickId,g=l.readAlwaysId,O=l.readNextId;return Object(k.useEffect)((function(){c&&N.a.trackCardShow(null,{id:m,name:h})}),[c,m,h]),Object(f.b)(at.b,{className:j()("CreatorRightsNotification",r),onClose:function(){a("next"),N.a.trackEvent(null,{id:O,name:h})},children:c&&Object(f.c)(k.Fragment,{children:[Object(f.b)("img",{className:"CreatorRightsNotification-background",src:ct.a,alt:"blue background"}),Object(f.b)("img",{className:"CreatorRightsNotification-liukanshan",src:u,alt:"liukanshan image"}),Object(f.b)("div",{className:"CreatorRightsNotification-title",children:s}),Object(f.b)("div",{className:"CreatorRightsNotification-content",children:d}),Object(f.c)(at.a,{className:"CreatorRightsNotification-buttonGroup",children:[p?Object(f.b)(ot.a,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:p,target:"_blank",onClick:function(){a("current"),N.a.trackEvent(null,{id:v,name:h})},children:b}):Object(f.b)(z.c,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){a("current"),N.a.trackEvent(null,{id:v,name:h}),"answerAdmireCouldUse"===c&&o(),"recommendationCouldUse"===c&&i()},children:b}),Object(f.b)(z.c,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){a("always"),N.a.trackEvent(null,{id:g,name:h})},children:"不再提醒"})]})]})})},mt=n(1115),vt=n(1038),gt=n(1280),Ot=n(1289),jt=n(1589),yt=function(e){var t=e.show,n=e.onCancel,r=e.onSubmit,a=Object(B.l)().trackEvent;return Object(f.b)(jt.a,{className:"SkipModal",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:t&&Object(f.c)(B.f,{zaType:"Block",zaBlock:"expandBlockModal",zaText:"展开阅读全文弹窗",children:[Object(f.b)("div",{className:"title",children:"即将打开“知乎App”继续阅读"}),Object(f.c)("div",{className:"button_container",children:[Object(f.b)(z.c,{preset:"plain",onClick:function(){a({eventType:"Click",block:"expandModal_cancel",elementLocation:{type:"Button"}}),n()},children:"取消"}),Object(f.b)(z.c,{preset:"primary",onClick:function(){a({eventType:"Click",action:"OpenUrl",block:"expandModal_open",elementLocation:{type:"Button"}}),r()},children:"打开App"})]})]})})},wt=n(506),Ct=n(1009),xt=function(e){var t=e.show,n=e.children,r=e.className,a=Object(k.useRef)();return Object(k.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(wt.a)(a.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),Object(f.b)("div",{className:r,children:Object(f.c)("div",{ref:a,children:[Object(f.b)("div",{className:j()({"ModalLoading-background":t})}),Object(f.c)("div",{className:j()("ModalLoading-content",{"ModalLoading-modalShow":t}),children:[n,Object(f.b)(Ct.a,{})]})]})})},kt=n(170),St=n(1368),At=[{title:"知乎",imageSrc:"https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png",description:"有问题，就会有回答",button:"打开"},{title:"浏览器",imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",description:"",button:"继续"}],Tt={uc:{imageSrc:"https://pic4.zhimg.com/80/v2-eb129ee601fe0521fbc05703a615ddd5_1440w.png",title:"UC 浏览器"},qq:{imageSrc:"https://pic1.zhimg.com/80/v2-211dd15e1000c599f5b89ecf4e1eb3b6_1440w.png",title:"QQ 浏览器"},wx:{imageSrc:"https://pic1.zhimg.com/80/v2-05fe05b84411fc88790189e95d7e84aa_1440w.png",title:"微信"},huawei:{imageSrc:"https://pic1.zhimg.com/80/v2-88a3ad0d3764917daaf92f5133a7024d_1440w.jpeg",title:"华为浏览器"},safari:{imageSrc:"https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png",title:"Safari"},chrome:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"Chrome"},default:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"浏览器"}},It=function(e){var t=e.show,n=e.onCancel,r=e.onSubmit,a=e.id,o=e.type,i=Object(kt.b)(),c=i.origin.toLowerCase(),l=i.Android?Tt.chrome.imageSrc:Tt.safari.imageSrc,s=ne.a.get("question:firstCheckedTrue");Object(k.useEffect)((function(){s&&t&&!i.Wechat&&(location.href="zhihu://".concat(o,"/").concat(a))}),[s,t,o,a,i.Wechat]);var u="";return u=i.UC?"uc":i.Wechat?"wx":i.MQQBrowser?"qq":/huawei|honor/g.test(c)?"huawei":/chrome/g.test(c)||/crios/g.test(c)?"chrome":i.Safari?"safari":"default",At[1].title=Tt[u].title,At[1].imageSrc="default"===u?l:Tt[u].imageSrc,Object(f.c)(jt.a,{className:"ModalWrap",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:[t&&Object(f.b)(St.a,{className:"ModalWrap-body"}),Object(f.c)("div",{className:"ModalWrap-content",children:[Object(f.b)("div",{className:"ModalWrap-title",children:"继续浏览内容"}),At.map((function(e,t){return Object(f.c)("div",{className:"ModalWrap-item",children:[e.imageSrc&&Object(f.b)("div",{className:"ModalWrap-itemImg",children:Object(f.b)("img",{src:e.imageSrc,alt:""})}),Object(f.c)("div",{className:"ModalWrap-itemContent",children:[Object(f.b)("div",{className:"ModalWrap-itemTitle",children:e.title}),e.description&&Object(f.b)("div",{className:"ModalWrap-itemDesc",children:e.description})]}),Object(f.b)("div",{className:"ModalWrap-itemBtn",role:"button",tabIndex:0,onClick:function(){return function(e){0===e?(ne.a.set("question:firstCheckedTrue","true"),r()):n()}(t)},children:e.button})]},t)}))]})]})},Rt=n(47),Et=n.n(Rt),Nt=n(80),Bt=n.n(Nt),zt=n(23),Lt=n.n(zt),Pt=n(27),_t=n.n(Pt),Mt=n(28),Dt=n.n(Mt),Ut=n(17),Ft=n.n(Ut),Vt=n(26),Gt=n.n(Vt),qt=n(195),Ht=n.n(qt),Wt=n(48),Kt=n(455),Zt=n(975),Qt=n(89),Yt=n(44),Jt=n(992);function Xt(e,t){return e.length<=t?e:"".concat(e.substring(0,t),"...")}function $t(e){var t=e.logoUrl,n=e.productName,r=e.productDesc,a=e.link,o=void 0===a?"":a,i=e.btnText,c=void 0===i?"":i,l=e.className,s=void 0===l?"":l,u=e.productNameMaxLength,d=void 0===u?6:u,f=e.productDescMaxLength,b=void 0===f?15:f,p=e.btnTextMaxLength,h=void 0===p?4:p,m=e.type,v="".concat("pc"===m?"pc":"app","_EAnswerCard");return S.a.createElement("a",{ref:e.cardRef,onClick:e.onClick,href:o,target:"_blank",className:j()("".concat(v),s)},S.a.createElement(B.f,{zaType:"Card",zaBlock:"advertPluginCard"}),S.a.createElement(Jt.a,{src:t,className:"".concat(v,"-image"),alt:"logo"}),S.a.createElement("div",{className:"".concat(v,"-content")},S.a.createElement("div",{className:j()("".concat(v,"-content-appName")),style:{WebkitBoxOrient:"vertical",maxWidth:"".concat(d+1,"em")}},Xt(n,d)),r&&S.a.createElement("div",{className:"".concat(v,"-content-desc"),style:{maxWidth:"".concat(b+1,"em")}},Xt(r,b))),S.a.createElement("div",{className:"".concat(v,"-button"),style:{maxWidth:"".concat(h+1,"em")},onClick:e.onBtnClick},Xt(c,h)),"app"===m&&S.a.createElement("div",{className:"app_EAnswerCard-bottom-close",onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),t.onClose()}(t,e)}},"×"))}var en=n(511),tn=function(e){function t(e){var n;return Lt()(this,t),(n=Dt()(this,Ft()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,N.a.trackCardShow(e,{id:5642}),Object(Kt.h)(e,{trackMethod:Kt.i,tracks:t}))},n.addDSCListener=function(){try{var e=n.props.data.pluginType;if(/^android/i.test(e)){n.appPromotionUrl=null,n.downloadInfo=null,n.landingUrl=Object(Yt.f)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".landingUrl"),"");var t=Object(Yt.f)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".downloadInfo"),"{}"),r=Object(Yt.f)(JSON.parse(t.adjson||"{}"),"ads[0].creatives[0].asset.app_promotion_url","");r&&(en.a({app_promotion_url:n.appPromotionUrl},"ad/getDownloadStatus").then((function(e){var t=e.status,r=e.data;t||console.log("下载插件 ad/getDownloadStatus 调用失败！"),n.setState({status:r.status})})).catch(console.log),n.appPromotionUrl||Wt.a.listen("ad/downloadStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,r=void 0===t?"error":t;n.setState({status:r})}))),n.appPromotionUrl=r,n.downloadInfo=t}}catch(e){console.log(e)}},n.onBtnClick=function(e){"pc"!==Object(Yt.i)().os&&n.appPromotionUrl&&n.downloadInfo&&(e.stopPropagation(),e.preventDefault(),n.sendClickTrack(),en.a(n.downloadInfo,"ad/downloadApk"))},n.sendClickTrack=function(){N.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(Kt.a)({trackMethod:Kt.i,tracks:n.track.click})},n.handleClick=function(e){e.stopPropagation(),n.sendClickTrack(),"pc"!==Object(Yt.i)().os&&n.landingUrl&&n.downloadInfo&&(e.preventDefault(),en.a(n.downloadInfo,"ad/open"))},n.sessionId=Ht()(),n.init(e),n.viewShow=!1,n.state={status:"ready"},n}return Gt()(t,e),_t()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,a=void 0===r?"":r,o=(n[t.pluginType]||{}).trackUrl,i=void 0===o?{}:o,c=Object(Yt.i)(),l={xSuger:a,sessionId:this.sessionId,os:c.os,cardType:"".concat(c.os,"_download")};this.track=Object(Yt.w)(i,l)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(Yt.i)();N.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_download")}),e&&this.onceViewTrack(this.card,this.track.view),this.addDSCListener()}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,a=t.plugin,o=t.className,i=void 0===o?"":o,c=t.pluginType,l=(a[c]||{}).plugin,s=(void 0===l?{}:l)[c],u=Object(Yt.i)(),d=this.state.status,f=void 0===d?"ready":d,b={className:i,type:"pc"===u.os?"pc":"app",btnText:s.interaction||"立即下载",onClick:this.handleClick,productNameMaxLength:13,productDescMaxLength:15,btnTextMaxLength:4,onClose:this.props.onClose};return/^ios/i.test(c)?(b.logoUrl=s.icon,b.productName=s.name,s.score>0&&(b.productDesc="Appstore 评分：".concat(s.score)),b.link=s.landingUrl):/^android/i.test(c)&&(b.logoUrl=s.icon||r.avatarUrl||"",b.productName=s.name,b.link=s.landingUrl,b.onBtnClick=this.onBtnClick,Qt.d[f]&&(b.btnText=Qt.d[f])),b.link?S.a.createElement(B.c,Et()({as:$t,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},b)):null}}]),t}(S.a.Component);tn.propTypes={data:x.a.object.isRequired};var nn=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?S.a.createElement(Zt.a,null,S.a.createElement(tn,e)):null},rn=function(e){function t(e){var n;return Lt()(this,t),(n=Dt()(this,Ft()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,N.a.trackCardShow(n.card,{id:5642}),Object(Kt.h)(e,{trackMethod:Kt.i,tracks:t}))},n.handleClick=function(e){e.stopPropagation(),N.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(Kt.a)({trackMethod:Kt.i,tracks:n.track.click});var t=Object(Yt.f)(n.props.data,"plugin.leads.plugin.leads",{}),r=n.props.data,a=r.contentType,o=r.contentToken;t.isCanvas&&(e.preventDefault(),t.creativeId=Object(Yt.h)(),en.a(t,"ad/openForm"));var i=t.cardType,c=t.hashId;if("message"===i){e.preventDefault();var l={inbox_id:c,initial_message:"",auto_focus:!0,title:"",source_type:a,source_id:o};en.a(l,"base/openInbox")}},n.isHiddenEcommerceAd=function(e){return!(!e.isCanvas||e.adjson)||!(e.isCanvas||e.token||e.landingUrl)},n.sessionId=Ht()(),n.init(e),n.viewShow=!1,n}return Gt()(t,e),_t()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,r=t.suger,a=void 0===r?"":r,o=t.pluginType,i=Object(Yt.f)(e.data,"plugin.leads.plugin.leads",{}).cardType,c=(n[o]||{}).trackUrl,l=void 0===c?{}:c,s=Object(Yt.i)().os,u={xSuger:a,sessionId:this.sessionId,os:s,cardType:i};this.track=Object(Yt.w)(l,u)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(Yt.i)();N.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_leads")}),e&&this.onceViewTrack(this.card,this.track.view);var n=Object(Yt.f)(this.props.data,"plugin.leads.plugin.leads",{}),r=n.isCanvas,a=n.adjson;r&&en.a({adjson:a},"ad/preload")}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,r=void 0===n?{}:n,a=t.plugin,o=void 0===a?{}:a,i=t.className,c=void 0===i?"":i,l=t.pluginType,s=Object(Yt.f)(o,"".concat(l,".plugin.").concat(l),{});return this.isHiddenEcommerceAd(s)?null:S.a.createElement(B.c,Et()({as:$t,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},{className:c,type:"app",logoUrl:r.avatarUrl,productName:r.name,productNameMaxLength:13,productDesc:s.desc,productDescMaxLength:15,link:s.landingUrl||"javascript:",btnText:s.interaction||"立即咨询",btnTextMaxLength:4,onClick:this.handleClick,onClose:this.props.onClose}))}}]),t}(S.a.Component);rn.propTypes={data:x.a.object.isRequired};var an=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?S.a.createElement(Zt.a,null,S.a.createElement(rn,e)):null},on=function(e){function t(){var e,n;Lt()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Dt()(this,(e=Ft()(t)).call.apply(e,[this].concat(a)))).state={display:!1},n.onClose=function(){n.setState({display:!0})},n.getContent=function(e){var t=e.data;if(!t||!t.plugin)return null;var r=(t=Object(Yt.c)(Object(Ie.camelizeKeys)(t))).plugin,a=Object(Yt.i)();if(r.androidDownload||r.iosDownload){var o="".concat(a.os,"Download");if("pc"===a.os)o=("mac"===a.pc?["iosDownload","androidDownload"]:["androidDownload","iosDownload"]).find((function(e){return r[e]}))||"";return S.a.createElement(nn,Et()({},e,{data:Bt()({},t,{pluginType:o}),onClose:n.onClose}))}return r.leads&&"pc"!==a.os?S.a.createElement(an,Et()({},e,{data:Bt()({},t,{pluginType:"leads"}),onClose:n.onClose})):null},n}return Gt()(t,e),_t()(t,[{key:"render",value:function(){var e=this.props.data,t=this.state.display;return e&&e.plugin&&!t?S.a.createElement(S.a.Fragment,null,this.getContent({data:e})):null}}]),t}(S.a.Component),cn=n(221),ln=n(615);function sn(e){var t=e.loadBrandContentPlugin,n=e.contentType,r=e.contentToken,a=e.author,o=e.plugin,i=Object(k.useCallback)((function(){t(n,r)}),[n,r,t]),c="organization"===a.userType&&!o;if(Object(k.useEffect)((function(){c&&i()}),[c,i]),!o)return null;var l={contentType:n,contentToken:r,suger:{},author:a,plugin:o,visible:!0};return Object(f.b)("div",{className:"OrgEquityPlugin",children:Object(f.b)(on,{data:l})})}sn.propTypes={contentType:x.a.oneOf(["answer","article"]).isRequired,contentToken:x.a.oneOfType([x.a.number,x.a.string]).isRequired,author:x.a.object.isRequired};var un=Object(R.compose)(Object(cn.a)(null),Object(A.connect)((function(e,t){var n=t.contentType,r=t.contentToken;return{plugin:Object(ln.c)(e,{contentType:n,contentToken:r})}}),{loadBrandContentPlugin:ln.b}))(sn),dn=n(292);function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var bn=function(e){Object(l.a)(n,e);var t=fn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.activateReward;return Object(f.c)("div",{className:"Reward",children:[Object(f.b)("button",{className:"Reward-activateBtn",onClick:e,children:"开启赞赏"}),Object(f.b)("div",{className:"Reward-activateHint",children:"赞赏开启后，读者将可以付费支持你的创作。"})]})}}]),n}(k.Component);function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}bn.propTypes={activateReward:x.a.func};var hn=function(e){Object(l.a)(n,e);var t=pn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.totalMoney,n=e.showRewarders;return Object(f.b)("div",{children:Boolean(t)&&Object(f.b)("div",{className:"Reward-money",children:Object(f.c)("span",{onClick:n,role:"button",tabIndex:0,children:["¥ ",t.toFixed(2)]})})})}}]),n}(k.Component);hn.propTypes={totalMoney:x.a.number,showRewarders:x.a.func};var mn=n(1433);function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var gn=function(e){Object(l.a)(n,e);var t=vn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,r=e.items,a=e.voteupCount,o=e.isRewardList,i=e.onClose,c=e.notice;return Object(f.b)(P.b,{size:"fullPage",onClose:i,children:t&&Object(f.b)(mn.a,{items:r,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:a,onLoad:n,isRewardList:o,notice:c,type:"rewardPeople"})})}}]),n}(k.Component);gn.propTypes={onLoad:x.a.func,modalShown:x.a.bool};var On=n(153),jn=n(39);function yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var wn=function(e){Object(l.a)(n,e);var t=yn(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={hoverName:""},e.hoverUser=function(t){e.setState({hoverName:t.target.dataset.name})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.handleListShown,a=t.rewardMemberCount,o=t.onUserClick,i=this.state.hoverName,c=n.slice(0,5);return Object(f.c)("div",{className:"Reward-count",children:[Object(f.b)("p",{className:"Reward-User-text",onClick:r,children:"".concat(Object(On.formatNumber)(a)," 人已赞赏")}),Object(f.c)("div",{children:[c.map((function(t,n){return Object(f.b)(T.Link,{to:"//".concat(jn.a.wwwHost,"/").concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:o,children:Object(f.b)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"})},n)})),a>6&&Object(f.c)("span",{className:"Reward-MoreUser",onClick:r,children:[Object(f.b)("i",{}),Object(f.b)("i",{}),Object(f.b)("i",{})]})]})]})}}]),n}(k.Component);wn.propTypes={users:x.a.array,handleListShown:x.a.func,rewardMemberCount:x.a.number,onUserClick:x.a.func},wn.defaultProps={users:[]};var Cn=Object(J.b)({module:"UserList",moduleName:"*** 人已赞赏"})(wn);function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var kn=function(e){Object(l.a)(n,e);var t=xn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,r=e.isAuthor,a=e.users,o=e.onUserClick;return t?Object(f.b)(Cn,{users:a,onUserClick:o,handleListShown:n,rewardMemberCount:t}):Object(f.b)("div",{className:"Reward-countZero",children:r?null:"还没有人赞赏，快来当第一个赞赏的人吧！"})}}]),n}(k.Component);function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}kn.propTypes={rewardMemberCount:x.a.number,handleListShown:x.a.func,isAuthor:x.a.bool,users:x.a.array,onUserClick:x.a.func};var An=function(e){Object(l.a)(n,e);var t=Sn(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return Object(f.c)("div",{children:[Object(f.b)("div",{className:"Reward-tagline",children:t||be.p}),Object(f.b)("button",{className:"Reward-rewardBtn",onClick:n,children:"赞赏"})]})}}]),n}(k.Component);function Tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}An.propTypes={onClick:x.a.func,tagline:x.a.string};var In=function(){return n.e(113).then(n.bind(null,3005)).then((function(e){return e.TipjarDialog}))},Rn=function(e){Object(l.a)(n,e);var t=Tn(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={TipjarRender:!1,modalShown:!1},e.onSubmitReward=function(t){ne.a.set("isRewardable",!0),e.updateReward(t)},e.onPaySuccess=function(){var t=e.props,n=t.reward,r=t.currentUser,a=t.id,o=t.type,i=n[o][a].users,c=[r];Array.isArray(i)&&(i.push(r),c=i),e.props.onRewardSuccess(c,a,o),e.colseTijarDialog(),e.props.showNotification("你已赞赏成功！")},e.onLoad=function(t){"article"===e.props.type?"normal"===t?e.onLoadArticleRewardUser():e.onLoadArticleRewardUserDetails():e.onLoadRewardUser()},e.onLoadArticleRewardUser=function(){var t=e.props.id;e.props.getArticleRewardUser(t)},e.onLoadArticleRewardUserDetails=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getPagingArticleRewardUserDetails(n):e.props.getPagingArticleRewardUser(n)},e.onLoadRewardUser=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getRewardUserDetails(e.props.id):e.props.getRewardUser(n).then((function(t){var n=t.payload.data;if(n.length>0){var r={};n.forEach((function(e){r[e.urlToken]=e})),e.props.updateEntitiesUsers(r)}}))},e.handleListShown=function(t){var n=e.props.onRewardUserMoreClick;n&&n(t),e.setState({modalShown:!0})},e.handleListHide=function(){e.setState({modalShown:!1})},e.updateReward=function(t){var n=e.props,r=n.type,a=n.id,o=n.rewardInfo.canOpenReward;if("article"===r){var i=!!o||void 0;e.props.updateArticleReward(a,t,i)}else e.props.updateAnswerReward(a,t)},e.activateReward=function(){e.onSubmitReward(be.p)},e.showRewarders=function(){e.setState({modalShown:!0})},e.addReward=e.props.authRequired((function(t,n){var r=e.props,a=r.id;"article"===r.type?e.props.createArticleTipjar(a,t):e.props.createTipjar(a,t,n)}),void 0,Pe.b),e.handleRewardButtonClick=function(t){var n=e.props.onRewardButtonClick;n&&n(t),e.setState({TipjarRender:!0})},e.colseTijarDialog=function(){e.setState({TipjarRender:!1})},e.removeTradeNumber=function(){var t=e.props,n=t.id,r=t.type;e.props.removeTradeNumber(n,r)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.isAuthor,r=e.isMobile,a=e.id,o=e.reward,i=e.author,c=e.type,l=e.ua,s=e.rewardInfo,u=s.canOpenReward,d=s.isRewardable,b=s.tagline,p=s.rewardTotalMoney,h=s.rewardMemberCount,m=e.onRewardUserClick,v=e.balanceEnable;if(n&&t&&"organization"===t.userType)return null;var g=this.state,O=g.TipjarRender,j=g.modalShown;if(n&&u)return Object(f.b)("div",{children:Object(f.b)(bn,{activateReward:this.activateReward})});if(d){var y=o&&o[c][a]||{},w=y.tradeNumber,C=y.users,x=y.notice,k=Object(f.b)(gn,{modalShown:j,items:C,voteupCount:h,onLoad:this.onLoad,isRewardList:n,notice:x,onClose:this.handleListHide}),S=Object(f.b)(kn,{rewardMemberCount:h,handleListShown:this.handleListShown,onUserClick:m,users:C,isAuthor:n});if(!n)return Object(f.c)("div",{className:"Reward",children:[Object(f.b)(An,{tagline:b,onClick:this.handleRewardButtonClick}),S,k,Object(f.b)(L.a,{getComponent:In,author:i,tagline:b,isMobile:r,ua:l,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:w,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:O,type:c,balanceEnable:v})]});var A=(Number(p)||0)/100;return Object(f.c)("div",{className:"Reward",children:[Object(f.b)(hn,{tagline:b,totalMoney:A,showRewarders:this.showRewarders}),k,S]})}return null}}]),n}(k.Component);Rn.propTypes={reward:x.a.object,isAuthor:x.a.bool,author:x.a.object,id:x.a.number,rewardInfo:x.a.object,currentUser:x.a.object,ua:x.a.object,type:x.a.string,isMobile:x.a.bool,balanceEnable:x.a.bool,onRewardButtonClick:x.a.func,onRewardUserClick:x.a.func,onRewardUserMoreClick:x.a.func},Rn.defaultProps={rewardInfo:{},type:"answer",balanceEnable:!0};var En=Object(R.compose)(ke.a,Object(A.connect)(null,{updateAnswerReward:Ae.E,updateArticleReward:Me.l,createArticleTipjar:Me.b,getRewardUserDetails:Me.i,getPagingArticleRewardUser:Me.f,getPagingArticleRewardUserDetails:Me.g,getArticleRewardUser:Me.e,updateEntitiesUsers:Me.m,getRewardUser:Me.h,createTipjar:Me.c,removeTradeNumber:Me.k,onRewardSuccess:Me.j,showNotification:Pe.h}))(Rn),Nn=n(964),Bn=n(965),zn=(n(1752),n(37)),Ln=n(1043);function Pn(e){var t=e.markInfo,n=be.J[t.markType];if(!n)return null;var r=t.roundtable&&"https://www.zhihu.com/roundtable/".concat(t.roundtable.urlToken);return r?Object(f.b)("a",{href:r,children:n}):Object(f.b)("span",{children:n})}var _n=n(1831),Mn=["id","voteupCount","markInfos","actorToken","action","concernedUpvoters"];function Dn(e){var t=e.markInfos,n=Object(k.useMemo)((function(){return t.filter((function(e){return be.J[e.markType]})).map((function(e,t){return Object(f.c)(k.Fragment,{children:[0!==t&&"、",Object(f.b)(Pn,{markInfo:e})]},t)}))}),[t]);return n.length?Object(f.c)(Ln.CJKSpace,{children:["收录于",n]}):null}function Un(e){var t=e.id,n=e.voteupCount,r=e.markInfos,a=e.actorToken,o=e.action,i=e.concernedUpvoters,c=Object(zn.default)(e,Mn),l=Object(k.useMemo)((function(){var e;return null!==(e=null==i?void 0:i.filter((function(e){return a!==e.urlToken})))&&void 0!==e?e:[]}),[i,a]);return Object(f.b)(J.a,{trackCardShow:!0,view:{id:8257},children:Object(f.c)(I.Text,Object.assign(Object.assign({color:"GBL05A",fontSize:14,mt:"16px"},c),{},{children:[r&&Object(f.c)(f.a,{children:[Object(f.b)(Dn,{markInfos:r}),Boolean(n)&&" · "]}),Object(f.b)("span",{onClick:function(){return N.a.trackEvent(null,{id:8258,action:"Click"})},children:Object(f.b)(_n.a,{id:t,type:"answer",voteupCount:n,upvotedFollowees:l,too:"voted"===o})})]}))})}var Fn=n(1813),Vn=n(1753),Gn=n(1510),qn=function(){return Object(f.c)("div",{className:"SelfVisibleLable-wrap",children:[Object(f.b)(Gn.a,{className:"SelfVisibleLable-lockIcon",width:16,center:!0}),"仅自己可见"]})},Hn=function(e){var t=e.answer,n=e.canCollapse,r=t.collapsedBy,a=t.relationship,o=(a=void 0===a?{}:a).isAuthor,i=t.visibleOnlyToAuthor;return o&&i?Object(f.b)(qn,{}):"org"!==r||n?null:Object(f.c)("div",{className:"AnswerItem-status",children:["回答被提问机构移至隐藏区（",Object(f.b)("a",{href:"/org-intro#org-question",target:"_blank",children:"为什么？"}),"）"]},"negativeLabels")},Wn=function(e){var t=e.isNormal,n=void 0===t||t,r=e.collapsedBy,a=e.suggestEdit,o=e.collapseReason,i=e.isCollapsed,c=e.question,l=(c=void 0===c?{}:c).brand,s=(l=void 0===l?{}:l).isPuQuestion;return!n&&null!=a&&a.unnormalDetails?{abnormalDetailProps:{abnormalDetail:a.unnormalDetails}}:("community"===r||s)&&i?{collapseReasonProps:{collapseReason:o}}:null},Kn=function(e){var t=e.answer,n=e.canCollapse,r=e.hideCommercialInviteLabel,a=t.collapsedBy,o=t.relevantInfo,i=(o=void 0===o?{}:o).relevantType,c=o.brandSpecialExtra,l=void 0===c?{}:c;if(Object(Ae.k)(t)||Object(Ae.l)(t)||"org"===a&&!n){if("brand_special"===i&&!r)return{type:"answer",data:l};if("brand_best"===i)return{data:l}}return null},Zn=function(e){var t=e.annotationDetail,n=e.isNormal,r=void 0===n||n,a=e.collapsedBy;return r&&"community"!==a&&t?{annotationDetail:t}:null},Qn=n(1425);function Yn(e){var t=e.questionId,n=e.title,r=e.href,a=e.zaTitleId,o=e.showStickyMark,i=e.showHeightLight,c=e.onClick;return Object(f.c)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(f.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(t)}),Object(f.b)("meta",{itemProp:"name",content:n}),o&&Object(f.b)(Qn.a,{}),Object(f.b)(T.Link,Object.assign(Object.assign({to:r,target:"_blank","data-za-detail-view-element_name":"Title"},a&&{"data-za-detail-view-id":a}),{},{onClick:c,children:i?Object(f.b)("span",{dangerouslySetInnerHTML:{__html:n},className:"AnswerItem-highlight"}):n}))]})}Yn.propTypes={questionId:x.a.number.isRequired,title:x.a.string.isRequired,href:x.a.string.isRequired,zaTitleId:x.a.number,showStickyMark:x.a.bool,onClick:x.a.func};var Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,r=t.unescapable,a=e.labelInfo,o=e.hermesLabel;return Object(f.b)(k.Fragment,{children:!n&&!r&&Object(f.b)(gt.a,{labelInfo:a||o})})},Xn=n(1543),$n=n(1754),er=n(971),tr=n(1816),nr=n(1755),rr=(n(1756),function(e,t){return null!=e&&e.plainText?"".concat(e.plaintext," · "):Object(ce.isReferenceRelation)(t)?"引用创作 · ":null});function ar(e){var t=e.videoId,n=e.zvideoId,r=e.title,a=e.playCount,o=void 0===a?0:a,i=e.voteupCount,c=void 0===i?0:i,l=e.isComplete,s=void 0!==l&&l,u=e.startTime,d=void 0===u?0:u,b=e.creationReferences,p=e.creationRelationship,h=e.shouldExpandState,m=e.itemId,v=e.itemType,g=Number(d/1e3),O=Object(k.useRef)({currentTime:0}),j=Object(k.useRef)(Object(er.c)(t,"*",!0));Object(k.useEffect)((function(){var e=j.current.subscribeMessage((function(e,t){e===er.b.DOM.TIMEUPDATE&&(O.current.currentTime=t.currentTime)}));return function(){return e.unsubscribe()}}),[]);return Object(f.c)("div",{className:"VideoAnswerPlayer",children:[Object(f.b)("div",{className:"VideoAnswerPlayer-video",children:Object(f.b)(tr.a,{itemId:m,itemType:v,videoId:t,zaProps:{type:"Answer",token:m}})}),h&&Object(f.c)("div",{role:"button",tabIndex:0,"aria-label":"跳转到对应视频",className:"VideoAnswerPlayer-stateBar",onClick:function(){var e=(O.current.currentTime+g).toFixed(1);window.open("https://".concat(jn.a.wwwHost,"/zvideo/").concat(n,"?playTime=").concat(e))},children:[Object(f.c)("div",{className:"VideoAnswerPlayer-state",children:[Object(f.b)("div",{className:"VideoAnswerPlayer-state--title",children:r}),Object(f.c)("div",{className:"VideoAnswerPlayer-state--data",children:[rr(b,p),Object(On.cnNiceNumber)(o),"播放",c>0?" · ".concat(Object(On.cnNiceNumber)(c),"赞同"):null]})]}),!s&&Object(f.c)("div",{className:"VideoAnswerPlayer-action",children:[Object(f.b)(nr.a,{style:{marginRight:"6px"}}),"完整版"]})]})]})}var or=function(e){var t=e.shouldExpand,n=e.showPlayer,r=e.campaign,a=e.answer,o=e.videoAnswerData,i=e.meta,c=e.videoRef,l=e.alwaysShowVolumeButton,s=e.hideCoCreationFeature,u=e.isRecommend,d=!s&&Object(ce.isCoCreateRelation)(null==o?void 0:o.creationRelationship);return Object(f.c)(f.a,{children:[n&&(u?Object(f.b)(ar,Object.assign({itemId:a.id,itemType:a.type,videoRef:c,alwaysShowVolumeButton:l,shouldExpandState:t},o)):Object(f.b)($n.a,Object.assign({itemId:a.id,itemType:a.type,videoRef:c,alwaysShowVolumeButton:l,shouldExpandState:t},o))),i,t&&Object(f.c)(I.Flex,{mt:"14px",children:[d&&Object(f.b)(ce.CoCreationLabel,{mr:"12px"}),Object(f.b)(Xn.a,{my:"0px"})]}),t&&r&&Object(f.b)(Ot.a,{item:Object.assign(Object.assign({},a),{},{campaign:r,collapseReason:null,type:"zvideo"})})]})},ir=n(296),cr=n(1114),lr={up:1,neutral:0,down:-1};function sr(e){var t=e.id,n=e.voteupCount,r=e.voting,a=e.isOwner,o=e.answer,i=e.currentUser,c=e.disabled,l=Object(A.useDispatch)();Object(k.useEffect)((function(){!c&&i&&l(Object(ir.b)(["opposeRight"]))}),[c,i,l]);var s=Object(k.useCallback)((function(e){l(Object(Ae.H)(o.id,lr[e],{zVideoId:t}))}),[t,l,o.id]);return Object(f.b)(cr.a,{type:"zvideo",count:n,voting:r,onVote:s,isOwner:a})}function ur(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var fr=function(e){return"plain"===e||"special-plain"===e},br=fr,pr=function(e){return"special-plain"===e},hr={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},mr=function(e){var t;if(e.videoAnswerData)return e;if(null!==(t=e.attachment)&&void 0!==t&&t.video){var n=e.attachment.video,r=n.title,a=n.subVideoId,o=n.parentVideoId,i=n.zvideoId,c={videoId:a,zvideoId:i,title:r,playCount:n.playCount,voteupCount:n.voteupCount,isComplete:!i||o===a,startTime:n.startTime,creationReferences:n.creationReferences};return Object.assign(Object.assign({},e),{},{videoAnswerData:c})}return e};function vr(e){var t=Object(Ce.a)(e);return t?e.videoAnswerData&&"object"==typeof e.videoAnswerData?Object.assign(Object.assign({},e),{},{creationRelationship:t,videoAnswerData:Object.assign(Object.assign({},e.videoAnswerData),{},{creationRelationship:t})}):Object.assign(Object.assign({},e),{},{creationRelationship:t}):e}var gr=["zhi-hu-ri-bao-51-41"],Or=Object(E.createSelector)((function(e,t){return Object.assign(Object.assign({},t.answerFromProps?t.answer:e.entities.answers[t.answer.id]||t.answer),{},{videoAnswerData:t.answer.videoAnswerData})}),(function(e,t){return e.entities.questions[t.answer.question.id]}),(function(e,t){return t?Object.assign(Object.assign({},e),{},{question:Object.assign(Object.assign({},e.question),t)}):e})),jr=function(e){Object(l.a)(n,e);var t=dr(n);function n(){var e,r,i,l,s,u,d,b;Object(o.a)(this,n);for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];return(e=t.call.apply(t,[this].concat(h))).state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:e.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:e.props.expanded,hasFetchedLabels:!1,showWechatExpand:!1,skipModalShow:!1,autoExpand:!1,shownLoadingBar:!1,wxIsReady:!1},e.answerFormRef=Object(k.createRef)(),e.rewardContainerRef=Object(k.createRef)(),e.richContentRef=Object(k.createRef)(),e.zaRef=Object(k.createRef)(),e.loadEntityWords=w()((function(){var t=e.props,n=t.answer,r=(n=void 0===n?{}:n).id;(0,t.loadAnswerEntityWords)(r)})),e.handleLoadedNext=function(){e.setState({wxIsReady:!0}),e.state.shownLoadingBar&&e.createOpenInAppHandler(e.state.autoExpand?"expand_answer2":"expand_answer1")(),e.setState({shownLoadingBar:!1})},e.showOiaModal=function(){var t=e.props,n=t.blockReading,r=t.itemProp,a=t.isBaidu;("mainEntityOfPage"===r||"acceptedAnswer"===r)&&!a&&!document.referrer.includes("sm.cn")&&n&&e.setState({showWechatExpand:!0,autoExpand:!0})},e.onCloseReward=function(){var t=e.props.answer.id;ne.a.set("isRewardable",!1),e.props.updateAnswerReward(t,"")},e.openModal=function(t,n){e.setState(Object.assign({},n))},e.openDeleteModal=function(){setTimeout((function(){e.setState({deleteModalShown:!0})}))},e.closeModal=function(){e.setState({commentsShown:!1});var t=e.props.onCloseComment;"function"==typeof t&&t()},e.closeDeleteModal=function(){e.setState({deleteModalShown:!1})},e.disableAuth=(r=e.props,i=r.router,l=(i=void 0===i?{}:i).location,s=(l=void 0===l?{}:l).pathname,u=r.isBaidu,d=r.isMobile,b=r.currentUser,d&&!b&&!u&&!s.startsWith("/topic")),e.loadAnswerConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,r=t.answer,a=t.loadAnswerConcernedVoters,o=t.currentUser;!n&&o&&a(r.id)},e.handleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.trackUserAction,a=void 0===r||r,o=e.props,i=o.onToggleExpand,c=o.trackPromotionClick;i&&i(t),t&&e.loadAnswerConcernedVoters(),a&&t&&c&&c(),e.setState({contentExpanded:t})},e.handleReshipmentSettings=function(t){var n=e.props,r=n.answer.id,a=n.updateAnswerReshipmentSettings,o=n.fillCurrentUserIfNeeded;"need_payment"===t?Promise.resolve(o(["caEnabled"])).then((function(){e.props.currentUser.caEnabled?a(r,t):window.open("/copyright/invite")})):a(r,t)},e.handleLoadAnswerForSettings=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerForSettings)(n)},e.handleDeleteAnswer=function(){var t=e.props,n=t.answer.id;(0,t.deleteAnswer)(n)},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleCollapseModalShow=function(){e.setState({collapseModalShown:!0})},e.handleCollapseModalHide=function(){e.setState({collapseModalShown:!1})},e.handleUpdateAnswerCollapsed=function(){var t=e.props,n=t.answer,r=n.id,a=n.collapsedBy,o=t.updateAnswerCollapsed,i=t.showNotification;return"community"===a?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):o(r)},e.handleUpdateAnswerStick=function(){var t=e.props,n=t.answer.id;return(0,t.updateAnswerStick)(n)},e.handleRestoreAnswer=function(){var t=e.props,n=t.answer,r=n.id,a=n.question;(0,t.restoreAnswer)(a.id,r)},e.handleClickCommentsPreview=function(t){var n=e.props,r=n.isMobile,a=n.relatedTo;r&&"answer"===a&&(t.stopPropagation(),e.setState({commentsShown:!0}))},e.openInApp=function(){Object(ge.a)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:"评论弹层",noEnteringSignin:Boolean(e.props.currentUser)})},e.handleCommentModalMount=function(t){var n=function(t){t.stopPropagation(),e.openInApp()};return null==t||t.addEventListener("click",n),function(){return null==t?void 0:t.removeEventListener("click",n)}},e.setEditingState=function(t,n){"function"==typeof e.props.onEditingStateChange&&e.props.onEditingStateChange(t),e.setState({editing:t},n)},e.handleStartEditAnswer=function(){var t=e.props,n=t.draftStatus,r=t.hasPublishingDraft,a=t.isMobile,o=t.isAnswerPage,i=t.showNotification,c=t.answer,l=c.author,s=c.id,u=c.question.id,d=c.question,f=Object(oe.a)(d);Object(oe.b)(l)&&""!==f?i(f,"red"):n&&n.loading?X.a.alert("草稿正在加载中……"):r?X.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。"):a?e.context.startAddAnswer(e.props.answer.id):o?Object(ae.d)()?Object(ae.h)(u,s):e.setEditingState(!0,(function(){var t,n;null===(t=e.answerFormRef.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t)})):Object(ae.h)(u,s)},e.handleCancelEditAnswer=function(){e.setEditingState(!1);var t=e.props,n=t.onCloseEditing,r=t.onCloseComment;"function"==typeof r&&r(),"function"==typeof n&&n()},e.handleSubmitAnswer=function(t){var n=e.props,r=n.answer.id,a=n.updateAnswer;return e.handleCancelEditAnswer(),a(r,t).then((function(t){return N.a.trackEvent(e.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),t}))},e.handleReportOpen=function(){var t=e.props.zaInfos.report;N.a.trackEvent(e.contentItem,Object.assign({action:"Report",element:"Button",is_intent:!0},t&&{id:t})),e.props.authRequired((function(){return e.setState({reportModalShown:!0})}),be.ab.report)()},e.handleReportHide=function(){e.setState({reportModalShown:!1})},e.handleFavlistsShown=function(t){var n=e.props,r=n.shouldOia,a=n.zaInfos.favlists;N.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},a&&{id:a})),r?e.createOpenInAppHandler("collect_answer")(t):e.disableAuth?e.handleToggleGuide():e.props.authRequired((function(){return e.setState({favlistsShown:!0})}),be.ab.favlists)()},e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;N.a.trackEvent(e.contentItem,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.handleShowAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!0})},e.handleCloseAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!1})},e.handleShowCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!0})},e.handleCloseCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.handleClickVideoMoreButton=function(){e.setState({shouldShowVideoDetails:!1})},e.startEditing=function(){var t=e.props,n=t.isAuthor,r=t.editable;t.currentUser&&n&&r&&e.handleStartEditAnswer()},e.addRewardTagline=function(t){var n=e.props.answer.id;Object(Me.a)(t,n)},e.createOpenInAppHandler=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.props,a=r.answer,o=a.type,i=a.id,l=r.blockReading,s=r.isSpecialQuestionOrAnswer,u=r.currentUser,d=r.relatedTo;return function(r,a){if(r&&r.preventDefault(),"answer"===d)if(l&&N.a.trackEvent(Object(c.a)(e),{id:5550,action:"Click"},{button:{text:"openapp"}}),s)location.href="zhihu://".concat(o,"/").concat(i,"?utm_app_name=zhihu_check");else{var f=he.a[a]||he.a[t],b=Object.assign(Object.assign({},l&&{yyb_ckey:"CK1430255776739"}),{},{preventToOIA:n});he.b[f]&&(b.launch_button=he.b[f]);var p=be.O[a]||be.O[t];Object(ge.a)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:p,noEnteringSignin:Boolean(u)},b)}}},e.renderLabels=function(){var t=e.props.answer,n=t.isNormal;if((void 0===n||n)&&e.isPaidAnswer)return{labels:[],editingLabels:[]};var r=e.props,a=r.useNewLabels,o=r.canCollapse,i=r.relatedTo,c=r.showReviewingLabel,l=r.hideCommercialInviteLabel,s=e.state,u=s.contentExpanded,d=s.editing,b=Hn({answer:t,canCollapse:o,showReviewingLabel:c}),p=Wn(t),h=Kn({answer:t,canCollapse:o,hideCommercialInviteLabel:l}),m=Zn(t);if(!a){var v=Object(f.b)(Ot.a,Object.assign(Object.assign({useOldLabels:!0,item:{isLabeled:!0}},p),{},{commercialProps:h,annotationProps:m,showLegacyPositiveLabel:Object(Ae.l)(t),editing:d}));return{labels:[b,v],editingLabels:[v]}}if(b||p)return{labels:[b,Object(f.b)(Ot.a,Object.assign({item:{isLabeled:!0}},p),"labels")],editingLabels:[]};var g=[Object(f.b)(Ot.a,{item:t,commercialProps:h,annotationProps:m,editing:d},"labels")];return{labels:u||i?g:[],editingLabels:g}},e.renderPrefix=function(){var t=e.props,n=t.answer,r=t.relatedTo,a={contentExpanded:e.state.contentExpanded,unescapable:Boolean(r)};return e.isVideoAnswer&&!e.contentDisplayed&&e.coCreate?Object(f.b)(ce.CoCreationLabel,{mb:"4px"}):Jn(n,a)},e.renderVoteButton=function(){var t=e.props,n=t.answer,r=t.shouldOia,a=t.zaInfos,o=a.voteUp,i=a.voteDown,c=t.isMuteSpecial,l=t.isMuteFreeze,s=t.isAuthor,u=t.currentUser,d=e.state.positionStatus,b=n.question,p=b.questionType,h=b.isMuted,m=n.relationship,v=(m=void 0===m?{}:m).isRecognized,g=m.voting,O=n.attachment,j=n.voteupCount,y="commercial"===p&&h||c||l;return e.isLegacyVideoAnswer?Object(f.b)(sr,{answer:n,id:O.attachmentId,voteupCount:j,voting:g,isOwner:s,disabled:y,currentUser:u}):Object(f.b)(Vn.a,Object.assign(Object.assign({answer:n,disabled:y,isOwner:s},r&&{onClick:e.createOpenInAppHandler("vote_answer")}),{},{disableAuth:e.disableAuth,isRecognized:v,handleToggleGuide:e.handleToggleGuide,positionStatus:d,zaIds:{voteUp:o,voteDown:i}}),"vote")},e.renderAuthorInfo=function(){var t=e.props,n=t.preset,r=t.relatedTo,a=t.answer,o=a.id,i=a.author,c=a.creationRelationship;if(e.coCreate){var l=!pr(n);return Object(ce.renderDualAuthor)(n,i,c,l)}return!pr(n)&&Object(f.b)(Ke.a,{className:j()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":r}),preset:br(n)?"plain":"default",author:i,relatedTo:r,id:o,userLinkV2:!0},"authorInfo")},e.renderMetaAndBeforeContent=function(){var t,n,r=e.props,o=r.preset,i=r.answer.creationRelationship,c=e.renderAuthorInfo(),l=e.renderAnswerExtraInfo(),s=e.renderLabels().labels,u=null==i||null===(t=i.coCreation)||void 0===t?void 0:t.refBy,d=null==i||null===(n=i.reference)||void 0===n?void 0:n.refBy,b=e.contentDisplayed&&(u||d)&&Object(f.b)(I.Box,{my:"16px",children:Object(f.b)(ce.CoCreationLinkCard,{type:"answer",coCreationRefBy:u,referenceRefBy:d})});return fr(o)?[[c].concat(ur(a.a,s),[b]),l]:[[c].concat(ur(a.a,s),[b,l]),null]},e}return Object(i.a)(n,[{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}},{key:"isVideoAnswer",get:function(){var e=this.props.answer.attachment;return 2===(null==e?void 0:e.type)||"zvideo"===(null==e?void 0:e.type)||"video"===(null==e?void 0:e.type)}},{key:"isLegacyVideoAnswer",get:function(){var e=this.props.answer.attachment;return"zvideo"===(null==e?void 0:e.type)}},{key:"isAuthorInGeneral",get:function(){var e=this.props,t=e.isAuthor,n=e.isSubAuthor,r=e.hideCoCreationFeature;return t||n&&!r}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,r=t.byComment,a=t.editing,o=t.loadVideoDetails,i=t.isSearchSpecialSource,c=t.isMobile,l=t.isWechat,s=this.state.shareVideoQuery;if(s&&o(s).then((function(){e.setState({shouldShowVideoDetails:!0})})),n&&(this.loadAnswerConcernedVoters(),this.loadEntityWords()),r&&setTimeout((function(){return e.setState({commentsShown:Boolean(r)})})),a&&this.startEditing(),c&&!i&&this.showOiaModal(),c&&l)if(document.addEventListener("WeixinJSBridgeReady",(function(){e.handleLoadedNext()})),"complete"===document.readyState)this.handleLoadedNext();else{window.addEventListener("load",(function t(){window.removeEventListener("load",t),e.handleLoadedNext()}))}}},{key:"componentDidUpdate",value:function(e,t){!t.contentExpanded&&this.state.contentExpanded&&this.loadEntityWords(),!this.props.editing||e.editing||this.state.editing||this.startEditing()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,r=n.reshipmentSettings,a=n.commentPermission,o=e.answer,i=o.reshipmentSettings,c=o.commentPermission;!r&&i&&!a&&c&&setTimeout((function(){return t.settingsTogglerEl.click()}))}},{key:"getShareVideoId",value:function(){var e=this.props,t=e.location;return e.isMobile?t.query.preview_video_id:null}},{key:"renderReshipmentSettings",value:function(e){var t=this,n=this.props.currentUser;return Object.keys(hr).map((function(r){return"need_payment"===r&&null!=n&&n.isOrg?null:Object(f.b)(Ue.a,{onClick:function(){return t.handleReshipmentSettings(r)},checked:r===e,children:hr[r]},r)}))}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=e.actor,r=e.action,a=e.concernedUpvoters,o=e.isHuman,i=e.useNewLabels,c=e.isMobile,l=t.id,s=t.voteupCount,u=t.markInfos,d=t.isNormal;if(!((!o||!c)&&(void 0===d||d)))return null;var b=(null==u?void 0:u.length)>0&&!i;return b||s?Object(f.b)(Un,{id:l,voteupCount:s,markInfos:b&&u,actorToken:null==n?void 0:n.urlToken,action:r,concernedUpvoters:a},"AnswerItemExtraInfo"):null}},{key:"renderSettings",value:function(){var e=this,t=this.props,n=t.answer,r=n.id,a=n.collapsedBy,o=n.reshipmentSettings,i=n.commentPermission,c=n.question.questionType,l=n.rewardInfo,s=(l=void 0===l?{}:l).isRewardable,u=void 0!==s&&s,d=n.relevantInfo,b=n.creationRelationship,h=t.answer,m=t.canCollapse,v=t.isMobile;if(!t.currentUser||!this.isAuthorInGeneral)return null;var g=Object(f.c)(f.a,{children:[this.renderReshipmentSettings(o),Object(f.b)(ee.a,{}),Object(f.b)(we.c,{className:"AnswerItem-selectMenuItem",target:h,onChange:this.props.updateAnswerCommentPermission,current:i}),Object(f.b)(ee.a,{}),u&&Object(f.b)(ee.b,{onClick:this.onCloseReward,children:"关闭赞赏"}),Object(f.b)(ee.b,{onClick:this.openDeleteModal,children:"删除"}),"commercial"===c&&m&&"nobody"===a&&(!d||"brand_special"!==d.relevantType)&&[Object(f.b)(ee.a,{},"MenuDivider"),Object(f.b)(ee.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"},"MenuItem")]]});if(o&&i){var O,j,y=null==b||null===(O=b.coCreation)||void 0===O||null===(j=O.bizInfo)||void 0===j?void 0:j.canCancelPermission;return Object(f.b)(ee.c,{arrowed:Boolean(y),toggler:Object(f.b)(z.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:p.a,label:!v&&"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:y?Object(f.b)(ee.b,{children:Object(f.b)(ce.CancelCoCreation,{contentType:"answer",contentId:r})}):g},"settings")}return Object(f.b)(z.c,{preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:p.a,label:!v&&"设置"},"settings")}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?Object(f.b)(ee.b,{onClick:function(){N.a.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer=".concat(e),target:"_blank",children:"申请授权"}):"disallowed"===t?Object(f.b)(ee.b,{tag:"a",target:"_blank",href:"/term/zhihu-terms#sec-licence-6",children:"禁止转载"}):null}},{key:"renderOptions",value:function(){var e=this;if(!this.props.currentUser||this.isAuthorInGeneral)return null;var t=this.props,n=t.answer,r=t.canCollapse,a=t.renderExtraOptions,o=t.permission.canBrandAdminEdit,i=t.isMobile,c=t.isAuthor,l=n.id,s=n.reshipmentSettings,u=n.collapsedBy,b=n.question,p=b.questionType,m=b.brand,v=(m=void 0===m?{}:m).isPuQuestion,g=n.annotationAction,O=void 0===g?[]:g,j=n.annotationDetail,y={toggler:Object(f.b)(z.c,{preset:"plain",className:"OptionsButton",icon:h.a,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},w="commercial"===p,C="nobody"!==u;return c?null:Object(d.e)(ee.c,Object.assign(Object.assign({},y),{},{key:"options"}),i&&Object(f.b)(Ve.a,{answer:n}),r&&!w&&Object(f.b)(ee.b,{onClick:C?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow,children:C?"取消隐藏":"隐藏"}),o&&w&&!C&&!v&&Object(f.b)(ee.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"}),O&&O.some((function(e){return be.d.add===e}))&&!j&&Object(f.b)(ee.b,{onClick:this.handleShowAddAnnotationModal,children:"标记内容"}),O&&O.some((function(e){return be.d.cancel===e}))&&j&&Object(f.b)(ee.b,{onClick:this.handleShowCancelAnnotationModal,children:"撤销标记"}),Object(f.b)(B.a,{zaAction:"Report",zaType:"Button",zaModuleId:"click_report",as:ee.b,onClick:this.handleReportOpen,children:"举报"}),this.renderReshipment(l,s),a&&a({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=function(e){var t=e.thumbnail,n=e.voteupCount,r=e.question.id,a=e.id,o=e.createdTime,i=e.updatedTime,c=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/".concat(r,"/answer/").concat(a),dateCreated:new Date(1e3*o).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:c}}(this.props.answer);return Object.keys(e).map((function(t){return Object(f.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,r=(n=void 0===n?{}:n).winnersAnswerTokens,a=n.prizes;if(!n.status)return null;var o=["一","二","三"],i=null;return a&&r&&r.forEach((function(e,n){e.includes(t)&&null===i&&(i=a&&a[1]&&a[1].name?"得".concat(o[n],"等奖"):"奖")})),i&&Object(f.c)("div",{className:"AnswerItem-brandQuestionPrizeTip",children:["该回答在有奖问答中获",i]})}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,r=t.expanded,a=t.isBrandAnswer,o=n.question;return(r||e)&&(o&&"commercial"===o.questionType||a)?Object(f.b)(Ze.a,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e,t,n,r=this.props,a=r.shouldOia,o=r.answer,i=o.id,c=o.createdTime,l=o.updatedTime,s=o.question.id,u=o.playCount,d=o.attachment,b=o.ipInfo,p=u||(null==d||null===(e=d.zvideo)||void 0===e?void 0:e.playCount)||(null==d||null===(t=d.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.playCount)||0,h="".concat(be.H,"/question/").concat(s,"/answer/").concat(i);return Object(f.b)(Nn.a,Object.assign(Object.assign(Object.assign({created:c,updated:l,href:h},this.isVideoAnswer&&p>0&&{videoPlayCount:Number(p)}),a&&{onClick:this.createOpenInAppHandler("click_answer")}),{},{ipInfo:b}))}},{key:"contentDisplayed",get:function(){var e=this.props.relatedTo,t=this.state.contentExpanded;return Boolean(e||t)}},{key:"coCreate",get:function(){var e=this.props,t=e.answer.creationRelationship,n=e.hideCoCreationFeature;return Boolean(!n&&Object(ce.isCoCreateRelation)(t))}},{key:"render",value:function(){var e,t,n,a=this,o=this.props,i=o.answer,c=o.reward,l=o.answer,s=l.id,u=l.isNormal,d=void 0===u||u,b=l.isDelete,p=l.question,h=l.rewardInfo,O=void 0===h?{}:h,y=l.question,w=y.title,C=y.id,x=y.questionType,k=y.commercial,S=y.brand,A=(S=void 0===S?{}:S).isPuQuestion,T=l.author,R=l.excerpt,E=l.content,N=l.enableConvert,L=l.editableContent,P=l.commentCount,_=l.adminClosedComment,M=l.collapsedBy,D=l.isSticky,U=l.thumbnail,F=l.thumbnailExtraInfo,V=l.reviewInfo,q=(V=void 0===V?{}:V).isReviewing,H=V.editType,W=l.relevantInfo,K=(W=void 0===W?{}:W).relevantType,Z=l.annotationDetail,Y=l.paidInfo,J=void 0===Y?{}:Y,ee=l.creatorRightsNotification,te=l.attachment,ne=l.vessayInfo,ae=l.videoAnswerData,oe=o.relatedTo,ce=o.editable,le=o.byComment,se=o.draft,ue=o.expanded,de=o.lastreadTouchable,fe=o.canCollapse,he=o.canStick,ge=o.itemProp,we=void 0===ge?"answer":ge,Ce=o.addAnnotation,ke=o.cancelAnnotation,Se=o.showNotification,Ae=o.dataZaIndex,Te=o.blockReading,Ie=o.isWechat,Re=o.isHuaweiBrowser,Ee=o.isHonor,Ne=o.lessExcerpt,Be=o.isHuman,ze=o.ua,Le=o.shouldSpecialOia,Pe=o.shareVideoDetail,_e=o.trackPromotionClick,Me=o.formatContent,De=o.zaInfos,Ue=De.expand,Fe=De.title,Ke=De.thank,Ze=De.toggleComment,Xe=De.share,$e=De.getCommentAction,et=o.handleToggleSticky,at=o.renderActionButtons,ot=o.permission.canBrandAdminEdit,it=o.readContentRightsNotification,ct=o.ecommerce,lt=o.isMobile,st=o.canAbstract,ut=o.isBaidu,dt=o.isMuteSpecial,ft=o.isMuteFreeze,bt=o.isAuthor,pt=o.isTopic,gt=o.xiaomi,Ot=o.showCommentForOia,jt=o.pathname,wt=o.richContentKey,Ct=o.useVessayV2,kt=o.shouldAlwaysShowPlayer,St=o.isShenma,At=o.isRecommend,Tt=o.videoRef,Rt=o.alwaysShowVolumeButton,Et=o.showHeightLight,Nt=void 0!==Et&&Et,Bt=o.truncateDisabled,zt=void 0!==Bt&&Bt,Lt=o.forceCommentOia,Pt=void 0!==Lt&&Lt,_t=o.hideCoCreationFeature,Mt=o.entityWords,Dt=o.isAnswerPage,Ut=o.currentUser,Ft=o.blockStrategies,Vt=Object(Ge.b)([Object(Ge.a)(Ft)],at),Gt="function"==typeof et,qt="".concat(be.H,"/question/").concat(C,"/answer/").concat(s),Ht=this.state,Wt=Ht.reportModalShown,Kt=Ht.deleteModalShown,Zt=Ht.collapseModalShown,Qt=Ht.favlistsShown,Yt=Ht.editing,Jt=Ht.commentsShown,Xt=Ht.commentsAutoFocus,$t=Ht.commentPattern,en=Ht.addAnnotationModalShown,tn=Ht.cancelAnnotationModalShown,nn=Ht.positionStatus,rn=Ht.shareVideoQuery,an=Ht.shouldShowVideoDetails,on=Ht.contentExpanded,cn=Ht.showWechatExpand,ln=Ht.skipModalShow,sn=Ht.autoExpand,fn=Ht.shownLoadingBar,bn=Ht.wxIsReady,pn=null==te||null===(e=te.video)||void 0===e?void 0:e.campaign,hn=rn&&an?{title:Pe.title,thumbnail:Pe.coverUrl,isLens:!0,id:rn,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(rn)}:null;if(b)return Object(f.c)("div",{className:"AnswerItem-deleted",children:["你已经删除了该问题的回答，如果需要修改，请先  ",Object(f.b)("a",{role:"button",tabIndex:0,onClick:this.handleRestoreAnswer,children:"撤销删除"})]});var mn=!this.isVideoAnswer||!(q&&"create"===H),vn="commercial"===x,gn="nobody"!==M,On=U||(null==te||null===(t=te.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.thumbnail);if(Yt){var jn,yn=He.a,wn=Object(f.c)("div",{children:[Object(f.c)(I.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return[{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}},{background:e.colors.GBK99A}]},children:[Object(f.b)("div",{css:function(e){return[{fontWeight:"bold",fontSize:15,color:e.colors.GBK03A,borderBottom:"1px solid ".concat(e.colors.GBK10A)},{borderBottom:"none",paddingLeft:20}]},children:this.isVideoAnswer?"本回答为视频回答":"本回答为图文回答"}),Object(f.b)(We.a,{handleClick:null===(jn=this.answerFormRef.current)||void 0===jn?void 0:jn.toggleFullscreen})]}),Object(f.b)(yn,{className:"AnswerItem-form",isReediting:!0,imperativeRef:this.answerFormRef,question:p,answer:i,defaultValue:L,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:O.isRewardable,addRewardTagline:this.addRewardTagline,useMediumEditor:!0})]});return Dt?Object(f.b)(re.a,{children:Object(f.b)($.d,{css:{overflow:"visible"},children:Object(f.c)("div",{css:function(e){return{background:e.colorMod(e.colors.GBK10C).alpha(.45)}},children:[Object(f.b)(Oe.a,{}),wn]})})}):wn}var Cn=this.renderMetaAndBeforeContent(),xn=ur(r.a,Cn,2),kn=xn[0],Sn=xn[1],An="mainEntityOfPage"===we||"acceptedAnswer"===we,Tn=Le&&!An,In=!hn&&this.renderEditTime(),Rn=J.type,zn=J.content,Ln=this.isPaidAnswer,Pn=Ln?zn:E,_n=!oe&&Object(f.b)(Yn,{questionId:C,title:w,href:qt,zaTitleId:Fe,showStickyMark:Gt&&this.props.isSticky,showHeightLight:Nt,onClick:_e}),Mn=d||bt,Dn=gt&&jt.match(/\/question\/\d+$/g),Un=Me?Me(Pn||R,i):Pn||R||"",Vn=Boolean(N||(null==ne?void 0:ne.enableVideoTranslate)),Gn=ae&&(kt||this.contentDisplayed),qn=At&&this.isVideoAnswer,Hn=lt&&"answer"===oe;return Object(f.c)(rt.e,{onRef:function(e){return a.contentItem=e},className:"AnswerItem","data-za-index":Ae,"data-zop":JSON.stringify({authorName:T.name,itemId:s,title:w,type:"answer"}),data:i,link:qt,meta:qn?null:kn,title:_n,lastreadTouchable:de,name:s,itemProp:we,itemType:"http://schema.org/Answer",itemScope:!0,children:[d&&(!pt||on)&&Object(f.b)(Fn.b,{answer:i}),this.renderMeta(),vn&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),Mn?Object(f.c)(f.a,{children:[this.isVideoAnswer&&Object(f.b)(or,Object.assign(Object.assign({shouldExpand:this.contentDisplayed,showPlayer:Gn,campaign:pn,answer:i,videoAnswerData:ae,videoRef:Tt,alwaysShowVolumeButton:Rt},qn?{meta:kn}:{}),{},{hideCoCreationFeature:_t,isRecommend:At})),Object(f.c)(Nn.b,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({entityWords:Mt,richContentKey:wt,className:j()({"RichContent-mobileBaidu":ut,"RichContent-hasCatalog":Object(ie.a)(i,"answer"),"AnswerItem-highlight":Nt}),truncateDisabled:zt,imperativeRef:this.richContentRef,canAbstract:st,onToggleExpend:this.handleExpand},Tn&&{expandText:"阅读全文"}),Te&&An&&{expandText:"展开阅读全文"}),lt&&Be&&!An&&{collapsedHeight:180}),{},{cover:this.isVideoAnswer&&kt?null:On,hasVideo:!kt&&Boolean(F&&"video"===F.type)||this.isVideoAnswer,videoData:hn,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(oe),expanded:ue,onPositionStatusChange:this.handlePositionStatusChange,before:Sn,excerpt:Me?Me(R,i):R,html:Un,prefix:this.renderPrefix(),isNovel:"interactive_novel"===Rn,ecommerce:ct,forceSticky:Hn,isVideoAnswer:this.isVideoAnswer,after:Object(f.c)("div",{children:[Object(f.b)(Fn.a,{answer:i,ua:ze}),Object(f.b)(tt,{className:"AnswerItem-CommercialQuestionTail",commercial:k}),!lt&&on&&Object(f.b)(un,{contentType:"answer",contentToken:s,author:T}),In,Ut&&bt&&ce&&Object(f.b)(ve.a,{children:Object(f.c)("a",{className:"AnswerItem-editButton",role:"button",tabIndex:0,onClick:this.handleStartEditAnswer,children:[Object(f.b)(m.a,{text:!0,center:!0})," ",Object(f.c)("span",{className:"AnswerItem-editButtonText",children:["修改",se&&se.editableContent&&"（有未发布的编辑草稿）"]})]})}),!lt&&Ut&&Object(f.b)(En,{imperativeRef:this.rewardContainerRef,reward:c,currentUser:Ut,rewardInfo:O,isAuthor:bt,id:s,author:T,ua:ze,balanceEnable:!1})]}),data:i,onClick:Te&&An?function(){(Dn||Ie||St)&&lt?(a.setState({autoExpand:!1}),a.richContentRef.current.handleExpand()):lt?be.E?(a.setState({autoExpand:!1}),a.richContentRef.current.handleExpand()):a.setState({skipModalShow:!0,autoExpand:!1}):a.setState({showWechatExpand:!0,autoExpand:!1})}:Tn?be.E&&lt?function(){a.richContentRef.current.handleExpand()}:a.createOpenInAppHandler("expand_answer"):a.disableAuth&&Te&&a.handleToggleGuide},Ne?{limit:74}:{}),this.coCreate?{limitWithImage:74}:{}),{},{zaIds:{expand:Ue},children:[mn&&ot&&vn&&gn&&!A&&Object(f.b)(z.c,{className:j()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===M}),onClick:this.handleUpdateAnswerCollapsed,children:"公开回答"}),mn&&he&&!gn&&"brand_special"!==K&&Object(f.b)(z.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick,children:D?"取消精选":"设为精选"}),!this.props.isBaidu&&Vt({componentList:[{name:"vote",component:mn&&this.renderVoteButton()},{name:"comment",component:mn&&!(lt&&"answer"!==oe)&&Object(f.b)(Ye.a,Object.assign(Object.assign({onInstance:function(e){return a.commentButton=e},onClick:this.openModal},(lt&&Be&&Le||Pt)&&{onClick:function(e){Hn?a.openModal(e,{commentsShown:!0}):a.createOpenInAppHandler("comment_answer")}}),{},{commentsShown:Jt,commentClosed:_,count:P,positionStatus:nn,zaInfos:{toggleComment:Ze,getCommentAction:$e}}),"comment")},{name:"share",component:mn&&!lt&&Object(f.b)(Bn.a,{disabled:dt||ft,id:s,type:"answer",title:w,authorName:T&&T.name,href:qt,positionStatus:nn,zaShareId:Xe},"share")},{name:"favlist",component:mn&&!(lt&&"answer"!==oe)&&(!Ut||!Ut.isOrg)&&Object(f.b)(mt.a,{onRef:function(e){return a.favButtonRef=e},onClick:this.handleFavlistsShown,label:lt?"":"收藏",disabled:dt||ft},"favlist")},!lt&&{name:"thank",component:mn&&!bt&&Object(f.b)(Ve.a,Object.assign({zaInfo:Ke,answer:i,disabled:dt||ft},this.isLegacyVideoAnswer&&{zVideoId:te.attachmentId}),"thank")},{name:"sticky",component:!lt&&Gt&&bt&&Object(xe.a)(Ut)&&Object(f.b)(z.c,{preset:"plain",onClick:et,icon:this.props.isSticky?v.b:g.b,label:this.props.isSticky?"取消置顶":"置顶"},"sticky")},{name:"vessay",component:!lt&&bt&&Vn&&Object(f.b)(ye.a,{type:"answer",id:s,useVessayV2:Ct,isAuthor:bt},"vessay")},{name:"options",component:lt&&Be||mn&&this.renderOptions()},{name:"settings",component:lt&&Be||this.renderSettings()},{name:"annotation",component:!on&&Object(f.b)(qe.a,{annotationDetail:Z},"annotation")}]})]}))]}):In,Mn&&!Ln&&Object(f.b)(Qe.a,{content:Pn,type:"answer",urlToken:String(s)}),Ot&&jt.startsWith("/question")&&Hn&&Object(f.b)("div",{role:"tablist",tabIndex:0,onClick:this.handleClickCommentsPreview,onKeyDown:function(e){"Enter"===e.key&&a.handleClickCommentsPreview(e)},children:Object(f.b)(me,{parent:i})}),Object(f.b)(B.e,{ref:this.zaRef}),Object(f.b)(Je.a,Object.assign({shown:Jt,parent:i,byComment:le,commentPattern:$t,autoFocus:Xt,onClose:this.closeModal,useBizComment:!0},Hn&&{onMount:this.handleCommentModalMount})),Object(f.b)(dn.a,{type:"answer",urlToken:s,shown:Wt,onClose:this.handleReportHide,zaEnabled:!0}),Object(f.b)(G,{addAnnotation:Ce,onClose:this.handleCloseAddAnnotationModal,shown:en,type:be.e,urlToken:s,showNotification:Se}),Object(f.b)(Q,{cancelAnnotation:ke,onClose:this.handleCloseCancelAnnotationModal,shown:tn,type:be.e,urlToken:s,showNotification:Se}),Ut&&bt&&Object(f.b)(nt.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:Kt,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),fe&&Object(f.b)(nt.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:Zt,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),Object(f.b)(vt.a,{id:s,type:"answer",shown:Qt,onClose:this.handleFavlistHide,zaEnabled:!0}),lt&&this.state.guideShown&&Object(f.b)(je.a,{redirectUrl:qt,buttons:[Ie?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],urlScheme:Object(pe.a)({type:"answer",id:s}),onClose:this.handleToggleGuide}),Object(f.b)(ht,{notification:ee,onRead:function(e){it("answer",s,e)},onUseAdmire:function(){a.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var e=a.props.postToolsRecommend;X.a.confirm(Object(f.b)("div",{style:{textAlign:"center"},children:"该推荐将使用本月的 1 次推荐次数。"}),{title:"确定是否推荐？"}).then((function(){return e("answer",String(s))}),(function(){}))}}),Object(f.b)(It,{show:cn&&!Dn&&lt&&!Ie&&!be.E,id:i.id,type:i.type,onCancel:function(){a.setState({showWechatExpand:!1},(function(){sn||a.richContentRef.current.handleExpand()}))},onSubmit:function(){a.setState({showWechatExpand:!1}),Ie?bn?a.createOpenInAppHandler(sn?"expand_answer2":"expand_answer1")():a.setState({shownLoadingBar:!0}):a.createOpenInAppHandler(sn?"expand_answer2":"expand_answer1")()}}),Object(f.b)(yt,{show:ln&&!be.E,id:i.id,type:i.type,onCancel:function(){a.setState({skipModalShow:!1},(function(){a.richContentRef.current.handleExpand()}))},onSubmit:function(){a.createOpenInAppHandler("expand_answer",Re||Ee)()}}),Object(f.b)(xt,{show:fn&&lt})]})}}]),n}(k.PureComponent);jr.contextTypes={startAddAnswer:x.a.func},jr.propTypes={relatedTo:x.a.oneOf(["question","answer"]),editable:x.a.bool,preset:x.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:x.a.bool,shareVideoDetail:x.a.object,formatContent:x.a.func,renderExtraOptions:x.a.func,zaInfos:x.a.object,onToggleExpand:x.a.func,useNewLabels:x.a.bool,renderActionButtons:x.a.func,canAbstract:x.a.bool,trackPromotionClick:x.a.func,isSearchSpecialSource:x.a.bool,hideCommercialInviteLabel:x.a.bool,hideCoCreationFeature:x.a.bool},jr.defaultProps={editable:!1,canAbstract:!1,isSearchSpecialSource:!1,preset:"primary",zaInfos:{},renderActionButtons:Ve.b,shouldAlwaysShowPlayer:!1,hideCoCreationFeature:!1};var yr=Object(R.compose)(Object(Fe.a)((function(e){var t=e.answer;return{content:{type:"Answer",token:String(t.id)}}})),Object(J.b)((function(e){var t=e.answer,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=void 0===a?{}:a;return Object.assign(Object.assign(Object.assign({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},o.index&&{index:o.index}),o.cardShow&&{view:{id:o.cardShow}}),{},{trackCardShow:r})})),T.withRouter,ke.a,Object(b.d)({dataPath:"answer"}),b.c,Object(A.connect)((function(e,t){var n,r,a=e.entities.drafts,o=void 0===a?{}:a,i=e.question,c=(i=void 0===i?{}:i).draftStatus,l=e.answers,s=(l=void 0===l?{}:l).paidContent,u=void 0===s?{}:s,d=l.entityWords,f=void 0===d?{}:d,b=e.reward,p=e.switches,h=e.video,m=(h=void 0===h?{}:h).shareVideoDetail,v=e.env,g=v.edition,O=v.userAgent,j=t.answer,y=t.relatedTo,w=t.location.pathname,C=w.split("/"),x=!1,k=!0;!C[1]||"org"!==C[1]&&"people"!==C[1]||(x=C[2]&&-1!==gr.indexOf(C[2]),k=!1);var S=Object(R.compose)(vr,mr)(Or(e,t)),A=Object(Le.b)(e),T=["question","answer"].includes(y),I=Object(fe.c)(e)&&T,E=Object(fe.j)(e),N=O.Mobile,B=O.Qzone,z=N&&E&&!B,L=Object(le.c)(S.creationRelationship),P=Object(Le.j)(e,L),_=(null!==(n=null===(r=j.relationship)||void 0===r?void 0:r.isAuthor)&&void 0!==n?n:Object(Le.j)(e,j.author))&&!P;return{entityWords:f[j.id],draft:j&&o["question_".concat(j.question.id)],draftStatus:null==c?void 0:c[j.question.id],answer:S,ua:Object(fe.m)(e),pathname:w,xiaomi:g.xiaomi,isShenma:g.shenma||/quark/gi.test(e.env.userAgent.origin)||O.UC,reward:b,switches:p,isHuman:I,shouldOia:Object(fe.i)(e)&&!x,shouldSpecialOia:Object(fe.j)(e)&&!x,isSpecialQuestionOrAnswer:Object(fe.k)(e,{type:T&&y,id:T?"answer"===y?j.id:j.question.id:""}),useVessayV2:Object(fe.a)(e,Se.b)===Se.a,isMobile:Object(fe.d)(e),isWechat:e.env.userAgent.Wechat,isHuaweiBrowser:/huaweibrowser/gi.test(e.env.userAgent.origin)||/huawei/gi.test(e.env.userAgent.origin)&&!e.env.userAgent.UC&&!e.env.userAgent.Wechat&&!e.env.userAgent.MQQBrowser&&!/quark/gi.test(e.env.userAgent.origin)&&!/baidu/gi.test(e.env.userAgent.origin),isHonor:/honor/gi.test(e.env.userAgent.origin)&&/MQQBrowser/gi.test(e.env.userAgent.origin),concernedUpvoters:Object(Ae.f)(e,{id:j.id}),currentUser:A,shareVideoDetail:m,isBrandAnswer:Object(Ae.j)(j),permission:Object(_e.bb)(e),ecommerce:Object(Y.c)(e,{type:"answer",urlToken:String(j.id)}),isBaidu:Object(fe.i)(e)&&g.baidu,showCommentForOia:Object(fe.i)(e),blockReading:z,paidContent:u,isMuteSpecial:Object(_e.D)(S.question),isMuteFreeze:Object(_e.C)(S.question),isAuthor:_,isSubAuthor:P,isQuestionPage:k}}),{updateAnswerReshipmentSettings:Ae.D,updateAnswerCommentPermission:Ae.C,updateAnswerCollapsed:Ae.B,updateAnswerStick:Ae.F,deleteAnswer:Ae.h,restoreAnswer:Ae.y,updateAnswer:Ae.A,loadAnswerForSettings:Ae.s,showNotification:Pe.h,addAnnotation:function(e,t,n,r){return{API:{types:Ne.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(Re.a)(Object(Ie.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=Be(e);return r?Object(Te.a)({},r,Object(Te.a)({},t,n)):null}}}},cancelAnnotation:function(e,t,n,r){return{API:{types:Ne.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(Re.a)(Object(Ie.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=Be(e);return r?Object(Te.a)({},r,Object(Te.a)({},t,Object.assign(Object.assign({},n),{},{annotationDetail:null}))):null}}}},addRewardTagline:Me.a,updateAnswerReward:Ae.E,loadAnswerConcernedVoters:Ae.o,fillCurrentUserIfNeeded:Le.f,loadVideoDetails:De.d,readContentRightsNotification:ze.bd,postToolsRecommend:ze.Wc,showMobileSignInModal:_e.ib,loadAnswerEntityWords:Ae.q}),gt.c)(jr)},1077:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(32),a=50,o={expand:2765,title:2812,voteUp:2756,voteDown:2761,toggleComment:2757,share:2758,favlists:2759,thank:2767,options:2760,report:2796,ignore:2821,follow:2797,getCommentAction:function(e){return e?"Expand":"Collapse"}},i=r.i+10},1103:function(e,t,n){"use strict";var r=n(4),a=n(37),o=n(35),i=n(1),c=n(0),l=n.n(c),s=n(20),u=n(489),d=n(46),f=n(1026),b=n(143),p=n(48),h=n(170),m=function(e){var t=Object(h.b)(),n=Object(c.useCallback)((function(n){t.ZhihuHybrid&&function(e,t){var n=t.root;if(!e.defaultPrevented){var r=e.target;if("img"===r.tagName.toLowerCase()&&(r.src.includes("zhimg")||!r.src.includes("equation"))&&(!r.classList.contains("ztext-gif")||r.parentNode.classList.contains("isPlaying"))){var a=Array.from(n.querySelectorAll(["img"])).filter((function(e){return e.src.includes("zhimg")&&!e.src.includes("equation")})),o=a.indexOf(r);if(-1!==o){e.preventDefault();var i=a.map((function(e){return e.dataset.thumbnail&&e.src.replace(/\.jpg|\.webp/,".gif")||e.dataset.src||e.src||""})).map((function(e){return Object(b.imgUrl)(e,Object.assign({quality:""},e.endsWith("webp")&&{extension:"jpg"}))}));Object(p.a)("base/openImage").dispatch({images:i,index:o})}}}}(n,{root:e})}),[e,t.ZhihuHybrid]);Object(c.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},v=n(158),g=n(3),O=n.n(g),j=n(13),y=n.n(j),w=n(667);function C(e){var t=e.content,n=e.className,r=Object(h.b)(),a={"KfeCollection-NovelDisplayBlock-Dark":Object(w.a)().isDarkMode,"KfeCollection-NovelDisplayBlock-Pc":!r.Mobile};return Object(c.useEffect)((function(){var e=Array.from(document.querySelectorAll('img[data-novel="role-image"]')),t=r.Mobile?"openInApp":"zh-lightbox-thumb";e.forEach((function(e){e.className="".concat(e.className," ").concat(t)}))}),[r.Mobile]),l.a.createElement("div",{className:y()("KfeCollection-NovelDisplayBlock",n,a),dangerouslySetInnerHTML:{__html:t}})}C.propTypes={content:O.a.string.isRequired};var x=C;function k(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var S=function(e){var t=e.className,n=e.html,r=e.lazyLoadImageProps,a=Object(c.useState)(null),l=k(o.a,a,2),s=l[0],u=l[1];return Object(f.k)(s,r),Object(i.b)("div",{ref:u,children:Object(i.b)(x,{className:t,content:n})})},A=n(72),T=n.n(A);var I=function(e){var t=this;return e.length?function(n,r){for(var a=e.length-1,o=n;a>=0;)o=e[a].call(t,o,r),a--;return o}:T.a},R=n(869),E=n(8);function N(e){var t=e.id,r=e.parentType,a=e.parentId,o=e.suger,i=e.data,c=e.isEditor,l=void 0!==c&&c,s=Object(R.a)((function(){return n.e(33).then(n.bind(null,3015))}),t),u=Object(R.a)((function(){return n.e(64).then(n.bind(null,3004))}),t);return t.startsWith("fee_")&&u?Object(E.g)(u,{id:t,isEditor:l}):s?Object(E.g)(s,{id:t,parentType:r,urlToken:a,suger:o,data:i,isEditor:l}):null}N.propTypes={id:O.a.string.isRequired,parentType:O.a.oneOf(["answer","article"]),parentId:O.a.string,suger:O.a.object,data:O.a.object,isEditor:O.a.bool};var B=Object(f.e)({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:N}),z=n(1072),L=n(945),P=n(193),_=n.n(P),M=n(105),D=function(e){var t=e.referenceList,n=e.onClick,r=e.listRef;return Object(E.g)(c.Fragment,null,Object(E.g)("h2",null,"参考"),Object(E.g)("ol",{className:"ReferenceList",onClick:n,ref:r},_()(t,"refKey").map((function(e){var n=t.filter((function(t){return t.refKey===e.refKey})),r=n.length>1?Object(E.g)(l.a.Fragment,null,Object(E.g)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map((function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(E.g)("sup",{key:n,className:"ReferenceList-backLink"},Object(E.g)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))}))):Object(E.g)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(E.g)("li",{id:e.refKey,key:e.refKey,tabIndex:0},r,e.text&&Object(E.g)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(E.g)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))}))))},U=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,F=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,r=[];return n=n.replace(U,(function(e,n){var a=Object(f.i)(n,{decodeValue:!0}),o=a["data-text"],i=void 0===o?"":o,c=a["data-url"],l=void 0===c?"":c,s=a["data-numero"],u=t?"ref_".concat(t,"_").concat(s):"ref_".concat(s),d=r.filter((function(e){return e.refKey===u})),b="".concat(u,"_").concat(d.length);r.push({refKey:u,text:i,url:l,numero:s});var p=[i,l].filter(Boolean).join(" ");return Object(L.renderToStaticMarkup)(Object(E.g)("sup",{"data-text":i,"data-url":l,"data-numero":s,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":p,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},Object(E.g)("a",{id:b,href:"#".concat(u),"data-reference-link":!0,"aria-labelledby":u},"[",s,"]")))})),r.length?n=n.concat(Object(L.renderToStaticMarkup)(Object(E.g)(D,{referenceList:r}))):n}(t,e)}},V=function(e,t){var n=Object(M.a)((function(n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var r=e.target.getAttribute("href"),a=t.querySelector(r);if(a){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby"))return void n.onReferenceClick(e);a.focus({preventScroll:!0}),Object(f.d)(a),document.documentElement.setAttribute("data-focus-visible","")}}}(n,e,t)}));Object(c.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},G=n(153),q=n(1011),H=[{extensionList:["doc","docx","txt"],type:"doc"},{extensionList:["jpg","jpeg","png","bmp"],type:"image"},{extensionList:["mp3","aac"],type:"music"},{extensionList:["pdf"],type:"pdf"},{extensionList:["xls","xlsx","csv"],type:"table"},{extensionList:["torrent"],type:"torrent"},{extensionList:["mp4","flv"],type:"video"},{extensionList:["zip","rar","7z"],type:"zip"},{extensionList:[""],type:"folder"}];function W(e){var t=e.className,n=e.isDirectory,r=void 0!==n&&n,a=e.extension,o=function(e){return"https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_".concat(e,".svg")}(r?"folder":function(e){var t=H.find((function(t){return t.extensionList.includes(e)}));return t?t.type:"other"}(a));return Object(E.g)("img",{className:y()("FileExtensionIcon",t),src:o})}var K={baidu:"百度网盘"};function Z(e){var t=e.component,n=void 0===t?"a":t,r=e.className,a=e.href,o=e.type,i=void 0===o?"file":o,l=e.name,s=e.extension,u=e.size,d=e.source,f=e.onRef,b=e.onClick,p=e.onMouseDown,h=Number(u);return Object(E.g)(n,{className:y()("FileLinkCard",r),href:a,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":7693,ref:f,onClick:b,onMouseDown:p},Object(E.g)(W,{className:"FileLinkCard-icon",isDirectory:"directory"===i,extension:s}),Object(E.g)("div",{className:"FileLinkCard-info"},Object(E.g)("div",{className:"FileLinkCard-name"},l),Object(E.g)("div",{className:"FileLinkCard-meta"},Boolean(h)&&Object(E.g)("div",{className:"FileLinkCard-size"},Object(G.unitPrefix)(h)),Boolean(h)&&d&&Object(E.g)(c.Fragment,null," · "),d&&Object(E.g)("div",{className:"FileLinkCard-source"},function(e){return K[e]||e}(d)))))}var Q=/<a\b([^>]*data-draft-type="file-link-card"[^>]*)>(.*?)<\/a>/g,Y=function(e){return e?e.replace(Q,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Object(f.i)(t,{decodeValue:!0}),a=r.href,o=void 0===a?"":a,i=r["data-file-type"],c=r["data-file-extension"],l=r["data-file-size"],s=r["data-file-source"],u=Object(f.f)(n);return Object(L.renderToStaticMarkup)(Object(E.g)(Z,{href:o,name:u,type:i,extension:c,size:l,source:s}))})):e},J=function(e){return{alignItems:"center",backgroundColor:e.colorMod(e.colors.GBK10A).alpha(.88),borderRadius:"12px",boxSizing:"border-box",display:"flex",margin:"1em auto",maxWidth:"100%",overflow:"hidden",padding:"12px",position:"relative",width:"390px"}},X=function(e){return Object.assign({color:e.colors.GBK02A,fontSize:"15px",fontWeight:500,lineHeight:"21px"},Object(q.a)(2))},$=function(e){return{color:e.colors.GBK06A,fontSize:"12px",display:"flex",lineHeight:"14px",marginTop:"5px"}},ee=n(24),te=n.n(ee),ne=n(30),re=n.n(ne),ae=n(50),oe=n(59),ie=n(51),ce=n(1220),le=n(1123),se=n(1454),ue=n(917),de=n(260),fe=n(25),be=n(375),pe=n.n(be),he=n(1822);function me(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=Object.prototype.hasOwnProperty,Oe=Object.getOwnPropertySymbols,je=Object.prototype.propertyIsEnumerable,ye=Object.assign,we=function e(t){var n=t.size,r=t.text,a=t.center,o=function(e,t){var n={};for(var r in e)ge.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Oe){var a,o=me(Oe(e),!0);try{for(o.s();!(a=o.n()).done;){r=a.value;t.indexOf(r)<0&&je.call(e,r)&&(n[r]=e[r])}}catch(e){o.e(e)}finally{o.f()}}return n}(t,["size","text","center"]);r&&(n="1.2em");var i=l.a.createElement("svg",ye(ye({},o),n&&{width:n,height:n}));return a?l.a.createElement("span",{style:e.strutStyle},"​",i):i};we.defaultProps={fill:"currentColor"},we.strutStyle={display:"inline-flex",alignItems:"center"};var Ce=we,xe=Object.assign;var ke=function(e){return l.a.createElement(Ce,xe(xe({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Catalog24"+(e.className?" ".concat(e.className):"")}),l.a.createElement("path",{d:"M10 5a1 1 0 011-1h10a1 1 0 110 2H11a1 1 0 01-1-1zm4 6a1 1 0 100 2h7a1 1 0 100-2h-7zm0 7a1 1 0 100 2h7a1 1 0 100-2h-7zm-8.335.25a.915.915 0 01-.915-.915V12.75H10a.75.75 0 000-1.5H4.75V6.665c0-.505.41-.915.915-.915H7a.75.75 0 000-1.5H5.665A2.415 2.415 0 003.25 6.665v10.67a2.415 2.415 0 002.415 2.415H10a.75.75 0 000-1.5H5.665z"}))},Se=["children","pl","targetId","handleScroll","index"],Ae=["className"],Te=["className"],Ie=["children","targetId","active","setCursor"],Re=["children","pl","targetId","handleScroll","handleAction","index","status","className","isCollapsed","inEditor","active"],Ee=["className"],Ne=["className"],Be=["isCollapsed","inEditor","catalogRef","contentRoot","catalogLength","contentRootLeft","shouldCollapse"];function ze(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Le=function(e){var t=e.children,n=e.pl,r=e.targetId,a=e.handleScroll,o=e.index,c=re()(e,Se);return Object(i.b)(oe.Text,Object.assign(Object.assign({flexShrink:0,display:"flex",alignItems:"center",color:"GBK02A",fontSize:"12px",height:"20px",lineHeight:"19px",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"6px"}}},c),{},{children:Object(i.c)(oe.Flex,{pl:n,css:{cursor:"pointer",alignItems:"center"},"data-catalog-target-id":r,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",onClick:function(e){a(e,o)},children:[Object(i.b)(oe.Text,{css:[Object(q.a)(1),{pointerEvents:"none",wordBreak:"break-all"}],dangerouslySetInnerHTML:{__html:t}}),Object(i.b)(ce.a,{size:"20px",css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GBK08A,flex:"0 0 auto",pointerEvents:"none"}}})]})}))},Pe=function(e){var t=e.className,n=re()(e,Ae);return Object(i.b)(Le,Object.assign({className:y()(t,"Catalog-FirstLevelTitle"),fontWeight:"bold",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"6px"}}},n))},_e=l.a.forwardRef((function(e,t){var n=e.isFold,r=e.onClick,a=n?le.a:se.a,o=n?"展开目录":"收起目录";return Object(i.c)(i.a,{children:[Boolean(n)&&Object(i.b)("div",{className:"bottom-shadow",css:function(e){return{position:"absolute",bottom:"25px",width:"100%",height:"40px",background:"linear-gradient(to bottom, ".concat(e.colorMod(e.colors.GBK99A).alpha(0),", ").concat(e.colors.GBK99A,")")}}}),Object(i.c)(oe.Flex,{ref:t,alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",color:"GBL05A",css:{cursor:"pointer"},onClick:r,children:[o,Object(i.b)(a,{size:18,css:{marginTop:"1px"}})]})]})})),Me={1:Pe,2:function(e){var t=e.className,n=re()(e,Te);return Object(i.b)(Le,Object.assign({className:y()(t,"Catalog-SecondLevelTitle"),pl:"10px",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"0px"}}},n))}},De=function(e){var t=e.catalog,n=e.className,r=e.canFold,a=e.inEditor,o=e.scrollOffset,l=void 0===o?0:o,s=r&&!a&&(null==t?void 0:t.length)>3,u=Object(c.useCallback)((function(e,t){if(a){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var r=Array.from(n.querySelectorAll("h2,h3"))[t];r&&requestAnimationFrame((function(){return Object(f.d)(r,l)}))}}}),[a,l]);return null!=t&&t.length?Object(i.c)(oe.Box,{className:y()(n,"Catalog"),mb:"48px",css:{"& .Catalog-wrapper":{position:"relative"}},"data-za-detail-view-name":"正文",children:[Object(i.b)("h2",{css:{marginBottom:"18px !important",marginTop:"0px !important"},children:"目录"}),Object(i.c)(oe.Box,{className:"Catalog-wrapper",children:[Object(i.b)(oe.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",overflow:"hidden",height:s?"84px":"auto",children:t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,a=e.index,o=Me[t]||Pe;return Object(i.b)(o,{targetId:r,handleScroll:u,index:a,children:n},String([r,a]))}))}),Boolean(s)&&Object(i.b)(_e,{isFold:!0})]})]}):a?Object(i.c)(oe.Flex,{flexDirection:"column",alignItems:"center",mb:"18px",children:[Object(i.b)(oe.Box,{size:"160px",mb:"10px",children:Object(i.b)(oe.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})}),Object(i.b)(oe.Text,{color:"GBK06A",fontSize:"17px",lineHeight:"24px",textAlign:"center",children:"在内容中设置标题将会在此处同步展示"})]}):null},Ue=function(e){var t=e.contentHTML,n=Object(c.useState)(!0),r=ze(te.a,n,2),a=r[0],o=r[1],l=Object(M.a)((function(){o(!a)}));return Object(i.c)(ie.b,{block:"ZTextCatalog",children:[Object(i.b)(ie.f,{as:oe.Flex,zaType:"Block",className:"Catalog-content",flexDirection:"column",css:{fontSize:"12px",overflow:"hidden"},style:{height:a?"84px":"auto"},dangerouslySetInnerHTML:{__html:t}}),Object(i.b)(ie.a,{as:_e,zaType:"Button",zaAction:a?"Expand":"Collapse",isFold:a,onClick:l})]})},Fe=function(e){var t=e.root,n=Object(c.useState)(null),r=ze(te.a,n,2),a=r[0],o=r[1];return Object(c.useEffect)((function(){if(t){var e=t.querySelector(".Catalog-wrapper");if(e&&e.querySelector(".bottom-shadow")){var n=e.querySelector(".Catalog-content").innerHTML,r=document.createElement("div");r.className="Catalog-wrapper",e.parentNode.replaceChild(r,e),o(Object(ae.createPortal)(Object(i.b)(Ue,{contentHTML:n}),r))}}}),[t]),a},Ve="removed",Ge="added",qe=/<(h2|h3)[^>]*>(.*?)<\/\1>/g,He={h2:1,h3:2},We=function(e,t){return"h_".concat(e||"editor","_").concat(t)},Ke=function(e){return e.replace(f.j,"").replace(/<[^>]*>/g,"")},Ze=function(e){return He[e]},Qe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return{catalog:[],html:e};var r=[];return t=t||"editor",n="function"==typeof n?n:function(){return String(n)},e=e.replace(qe,(function(e,a){var o,i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=Ke(c),s=Ze(a),u=We(t,r.length),d=(null===(o=e.match(/(data-into-catalog-status=\\{0,1}"\S{1,}\\{0,1}")/))||void 0===o||null===(i=o[0])||void 0===i?void 0:i.indexOf(Ve))>-1?Ve:"";return r.push({text:l,titleLevel:s,Tag:a,targetId:u,status:d}),n({text:l,titleLevel:s,targetId:u,Tag:a,originText:c,status:d})})),{catalog:r,html:e}},Ye=function(e){var t=e.originText,n=e.targetId,r=e.Tag,a=e.status;return Object(L.renderToStaticMarkup)(Object(i.b)(r,{id:n,"data-into-catalog-status":a,dangerouslySetInnerHTML:{__html:t}}))},Je=function(e){return function(t,n){var r=n.sourceId,a=n.theme,o=n.shouldShowCatalog,c=n.shouldFoldCatalog;if(!t)return t;if(!o)return t;var l=Qe(t,r,Ye),s=l.catalog,u=l.html;return s.length?e?u:Object(L.renderToStaticMarkup)(Object(i.b)(de.a,{theme:a,children:Object(i.b)(De,{catalog:s,canFold:c})})).concat(u):u}},Xe=function(e,t,n){var r=Object(ie.l)().trackEvent,a=Object(c.useCallback)((function(a){!function(e,t,n,r){if(!e.defaultPrevented){var a=e.target.getAttribute("data-catalog-target-id");if(a){n({action:"OpenUrl",block:"ZTextCatalog",eventType:"Click",elementLocation:{type:"Button",text:e.target.innerText}},{link:{url:window.location.href}}),fe.a.trackEvent(e.target);var o=t.querySelector("#"+a);o&&(e.preventDefault(),Object(f.d)(o,10+r,!1))}}}(a,t||e,r,n)}),[e,t,r,n]);Object(c.useEffect)((function(){if(e)return e.addEventListener("click",a),function(){e.removeEventListener("click",a)}}),[e,a])},$e=function(e){var t=e.children,n=e.targetId,r=e.active,a=e.setCursor,o=re()(e,Ie);return Object(i.b)(ie.a,Object.assign(Object.assign({as:oe.Text,zaType:"Text",color:r?"GBL01A":"GBK02A",fontWeight:r?"bold":"normal",css:{fontSize:"14px"}},o),{},{children:Object(i.c)(oe.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(){var e=document.querySelector("#"+n);a(n),e&&Object(f.d)(e)},children:[Object(i.b)(oe.Text,{css:Object(q.a)(1),children:t}),Object(i.b)(ue.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})}))},et=function(e){return Object(i.b)($e,Object.assign({},e))},tt={1:et,2:function(e){return Object(i.b)($e,Object.assign({pl:"20px"},e))}},nt=function(e){var t=e.catalog,n=e.className,r=Object(c.useState)(null),a=ze(te.a,r,2),o=a[0],l=a[1];return Object(c.useEffect)((function(){if(null!=t&&t.length){var e=null,n=Object(f.h)();t.forEach((function(t){var r=document.querySelector("#"+t.targetId);(null==r?void 0:r.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),l(e)}}),[]),null!=t&&t.length?Object(i.b)(ie.b,{block:"Popup",children:Object(i.b)(ie.f,{zaType:"Popup",as:oe.Box,className:y()(n),children:Object(i.b)(oe.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,a=tt[t]||et;return Object(i.b)(a,{targetId:r,active:o===r,setCursor:l,children:n},r)}))})})}):null},rt=function(e){var t=e.className,n=e.shown,r=e.onClose,a=e.zaContent,o=e.catalog;return Object(i.b)(he.a,{wrapperClassName:"CatalogModal-wrapper",className:y()("CatalogModal",t),title:"目录",onClose:r,children:n&&Object(i.b)(nt,{css:{paddingBottom:"16px"},catalog:o,zaContent:a})})},at=function(e){var t=e.children,n=e.pl,r=e.targetId,a=e.handleScroll,o=e.handleAction,c=e.index,l=e.status,s=e.className,u=e.isCollapsed,d=e.inEditor,f=e.active,b=re()(e,Re);return Object(i.b)(ie.a,Object.assign(Object.assign({as:oe.Text,zaType:"Text",className:y()(s,"Catalog-Title"),flexShrink:0,display:"flex",alignItems:"center",color:"GBL05A",fontSize:"12px",height:"20px",lineHeight:"20px",pl:"30px",css:function(e){return{position:"relative",height:"30px",lineHeight:"30px","&.Catalog-FirstLevelTitle, &.Catalog-SecondLevelTitle":{position:"relative",height:"30px",color:f?e.colors.GBL01A:e.colors.GBL05A,"&::before":{content:'" "',position:"absolute",backgroundColor:f?e.colors.GBL01A:e.colors.GBL05A,display:"inline-block",borderRadius:"50%",top:"12px",marginRight:"12px"},"&:hover::before":{backgroundColor:e.colors.GBL01A}},"&.Catalog-FirstLevelTitle::before":{left:u?"78px":"16px",width:"6px",height:"6px"},"&.Catalog-SecondLevelTitle::before":{left:u?"79px":"17px",width:"4px",height:"4px"},".Catalog-TitleIcon":Object.assign({position:"absolute",right:"10px",width:"12px",height:"12px",objectFit:"contain"},("toAdd"!==l||!t)&&{display:"none"}),"&::after":{content:'" "',display:"block",position:"absolute",left:u?"81px":"19px",top:0,transform:"translateX(-50%)",width:"2px",height:"40px",marginTop:"12px",background:e.colorMod(e.colors.GBL05A).alpha(.12)},"&:last-child":{"&::after":{height:0}}}}},b),{},{onClick:function(e){a(e,c)},children:!u&&Object(i.c)(oe.Flex,{px:"10px",ml:n,css:function(e){return Object.assign(Object.assign({cursor:"pointer",alignItems:"center",width:"100%"},"toAdd"===l&&Boolean(t)&&{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px"}),{},{"&:hover":{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px",".Catalog-TitleIcon":{display:"block"}}})},"data-catalog-target-id":r,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",children:[Object(i.b)(oe.Text,{css:[Object(q.a)(1),{pointerEvents:"none",wordBreak:"break-all",width:"calc(100% - 22px)"}],dangerouslySetInnerHTML:{__html:t}}),d&&("toAdd"===l?Object(i.b)(oe.Image,{src:"https://pic3.zhimg.com/v2-b01c062116d91b98059d7c90bb1139d2.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),o(e,c,Ge)}}):Object(i.b)(oe.Image,{src:"https://pic2.zhimg.com/v2-4bf4e045dbe37447d257b72b5a79b05c.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),o(e,c,Ve)}}))]})}))},ot=function(e){var t=e.className,n=re()(e,Ee);return Object(i.b)(at,Object.assign({className:y()(t,"Catalog-FirstLevelTitle"),fontWeight:"500",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"4px"},"&+.Catalog-SecondLevelTitle":{marginTop:"4px"}}},n))},it={1:ot,2:function(e){var t=e.className,n=re()(e,Ne);return Object(i.b)(at,Object.assign({className:y()(t,"Catalog-SecondLevelTitle"),pl:"10px",fontWeight:"400",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"4px"},"&+.Catalog-SecondLevelTitle":{marginTop:"4px"}}},n))}},ct=function(){return Object(i.c)(oe.Flex,{flexDirection:"column",alignItems:"center",mb:"18px",children:[Object(i.b)(oe.Box,{size:"160px",mb:"10px",children:Object(i.b)(oe.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})}),Object(i.b)(oe.Text,{color:"GBK05A",fontSize:"12px",lineHeight:"19px",textAlign:"center",children:"在内容中设置标题会在此展示"})]})},lt=function(e){var t=e.isCollapsed,n=e.isCollapsedChange,r=e.contentRootLeft,a=e.inEditor,o=e.onClose,c=e.setShownCatalogModal,l=e.shouldCollapse;return Object(i.c)(oe.Flex,{px:"10px",py:"8px",bg:"GBK99A",alignItems:"center",justifyContent:"space-between",color:"GBL05A",css:Object.assign({width:"100%",height:"40px",borderRadius:t?!a&&!l&&r>=190?"4px 0px 0px 4px":"0px 4px 4px 0px":"4px",zIndex:"1",boxShadow:"0px 1px 3px rgba(18, 18, 18, 0.1)"},t&&(l||r<190)?{position:"relative",top:"50px"}:{position:"sticky",top:"0"}),children:[Object(i.c)(oe.Flex,{alignItems:"center",children:[Object(i.b)(ke,{size:15,text:!0,center:!0}),Object(i.b)(ie.c,{as:oe.Text,zaType:"Button",zaText:!0,shouldTrackShow:!0,shouldTrackClick:t,ml:"10px",fontSize:"14px",css:t&&{cursor:"pointer",whiteSpace:"nowrap"},onClick:function(){t&&(l||r<190?c(!0):n(!1))},children:t&&!a&&!l&&r>=190?"展开目录":"目录"})]}),a&&Object(i.b)(oe.Image,{src:"https://pic1.zhimg.com/v2-6264c104a2b3efcd0bd3c4876232aec3.png",onClick:o,css:{width:"15px",height:"15px",cursor:"pointer"}}),!a&&!t&&Object(i.b)(ie.a,{as:oe.Text,zaType:"Button",zaText:"收起目录",p:"2px 6px",bg:"GBK10A",color:"GBL05A",fontSize:"12px",lineHeight:"16px",css:{borderRadius:"10px",cursor:"pointer"},onClick:function(){n(!0)},children:"收起"})]})},st=function(e){var t,n,r=e.isCollapsed,a=e.inEditor,o=e.catalogRef,l=e.contentRoot,s=e.catalogLength,u=e.contentRootLeft,d=e.shouldCollapse,f=re()(e,Be),b=Object(c.useState)(0),p=ze(te.a,b,2),h=p[0],m=p[1];return Object(c.useEffect)((function(){var e,t=null===(e=o.current)||void 0===e?void 0:e.clientHeight;a||m(-t)}),[o,a,u]),Object(c.useEffect)((function(){if(a)if(0===s)-267!==h&&m(-267);else{var e=76+34*s,t=parseInt(getComputedStyle(o.current).maxHeight),n=-Math.min(t,e);h!==n&&m(n)}}),[a,s,o,h]),a||l?(a?(t=180,n=-180):u<190||d?(t=76,n=-20):r?(t=100,n=-120):n=-(t=Math.min(u-40,250))-30,Object(i.b)(ie.b,{block:a?"EditPage":"AnswerPage",children:Object(i.b)(ie.f,Object.assign({ref:o,zaType:"Block",as:oe.Box,css:{position:"sticky",top:0,width:t,marginLeft:n,marginBottom:h,zIndex:1}},f))})):null},ut=function(e){var t=e.catalogContainerRef,n=e.isShowScrollerArrow,r=e.catalog,a=e.isCollapsed,o=e.cursor,l=e.handleScroll,s=e.handleAction,u=e.inEditor,d=e.maskGradientColor,f=Object(c.useState)(!1),b=ze(te.a,f,2),p=b[0],h=b[1],m=Object(c.useState)(!1),v=ze(te.a,m,2),g=v[0],O=v[1],j=pe()((function(){var e;(null===(e=t.current)||void 0===e?void 0:e.scrollTop)<20?h(!1):h(!0);var n=t.current||{},r=n.scrollHeight,a=n.clientHeight,o=n.scrollTop;O(!(r-a-o<20))}),100);return Object(c.useEffect)((function(){var e=t.current;if(e)return e.addEventListener("scroll",j),function(){return e.removeEventListener("scroll",j)}}),[t,j]),Object(i.b)(oe.Box,{mt:"20px",ref:t,css:function(e){return Object.assign({maxHeight:"calc(100vh - 200px)",overflow:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},n&&{"&::before, &::after":{content:'" "',position:"absolute",width:"calc(100% - 15px)",height:"36px",pointerEvents:"none",marginLeft:"15px",zIndex:1,transition:"opacity .2s ease-in-out"},"&::before":{opacity:p?1:0,top:"60px",background:"linear-gradient(180deg, ".concat(e.colors[d]," 0%, ").concat(e.colorMod(e.colors[d]).alpha(0)," 100%)")},"&::after":{opacity:g?1:0,bottom:"20px",background:"linear-gradient(180deg, ".concat(e.colorMod(e.colors[d]).alpha(0)," 0%, ").concat(e.colors[d]," 100%)")}})},children:Object(i.b)(oe.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",children:r.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,c=e.status,d=e.index,f=it[t]||ot;return c!==Ve?Object(i.b)(f,{targetId:r,handleScroll:l,handleAction:s,index:d,status:c,isCollapsed:a,inEditor:u,active:o===(r||d),children:n},String([r,d])):null}))})})},dt=function(e){var t=e.catalog,n=e.className,r=e.inEditor,a=e.scrollOffset,o=void 0===a?0:a,l=e.onClose,s=e.contentRoot,u=e.onChange,d=e.catalogRef,b=e.shouldCollapse,p=e.maskGradientColor,h=void 0===p?"GBK10A":p,m=Object(c.useRef)(),v=Object(c.useRef)(),g=d||m,O=Object(c.useState)(!r),j=ze(te.a,O,2),w=j[0],C=j[1],x=Object(c.useState)(0),k=ze(te.a,x,2),S=k[0],A=k[1],T=Object(c.useState)(!1),I=ze(te.a,T,2),R=I[0],E=I[1],N=Object(c.useState)(null),B=ze(te.a,N,2),z=B[0],L=B[1],P=Object(c.useState)(!1),_=ze(te.a,P,2),M=_[0],D=_[1];Xe(null==g?void 0:g.current,s,o);var U=Object(c.useCallback)((function(e,t){if(r){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var a=Array.from(n.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return Object(f.d)(a,o)}))}}}),[r,o]),F=Object(c.useCallback)((function(e,n,r){var a=document.querySelector(".DraftEditor-editorContainer");if(a){var o=Array.from(a.querySelectorAll("h2,h3"))[n].getAttribute("data-offset-key").split("-")[0];t[n].status=Ve,u(o,r)}}),[t,u]);Object(c.useEffect)((function(){if(!b&&s){var e=s.getBoundingClientRect().left;A(e),e>=190&&C(!1)}}),[s,b]);var V=null==v?void 0:v.current;Object(c.useEffect)((function(){V&&V.scrollHeight>V.clientHeight&&D(!0)}),[V]);var G=Object(c.useMemo)((function(){return null==t?void 0:t.filter((function(e){return e.status!==Ve}))}),[t]),q=G.length,H=pe()((function(){var e,n,a,o;if(!q||r||w||(a=null,o=Object(f.h)(),t.forEach((function(e){if(e.status!==Ve){var t=document.querySelector("#"+e.targetId);(null==t?void 0:t.getBoundingClientRect().top)<=o+2&&(a=e.targetId)}})),a!==z&&(L(a),null===(n=document.querySelector('[data-catalog-target-id="'.concat(a,'"]')))||void 0===n||n.scrollIntoViewIfNeeded())),null!=g&&g.current){var i=null!=s?s:null==g||null===(e=g.current)||void 0===e?void 0:e.parentElement;if(i&&null!=g&&g.current){var c=i.getBoundingClientRect(),l=c.bottom,u=c.height,d=getComputedStyle(i),b=d.paddingTop,p=d.marginTop,h=g.current.getBoundingClientRect(),m=h.bottom,v=h.height;l-m<Math.min(0,u-(v+parseInt(b)+parseInt(p)))?g.current.style.visibility="hidden":g.current.style.visibility="visible"}}}),100);return Object(c.useEffect)((function(){return document.addEventListener("scroll",H),function(){document.removeEventListener("scroll",H)}}),[s,H]),r||q&&s?Object(i.c)(st,{catalogRef:g,catalogLength:q,inEditor:r,isCollapsed:w,contentRoot:s,contentRootLeft:S,shouldCollapse:b,className:y()(n,"Catalog","isCatalogV2",{isCollapsed:w}),pb:"20px","data-za-detail-view-name":"正文",children:[Object(i.b)(lt,{inEditor:r,isCollapsed:w,contentRootLeft:S,setShownCatalogModal:E,shouldCollapse:b,isCollapsedChange:C,onClose:l}),(S>=190||b||r)&&(q?Object(i.b)(ut,{catalogContainerRef:v,isShowScrollerArrow:M,catalog:t,isCollapsed:w,cursor:z,handleScroll:U,handleAction:F,inEditor:r,maskGradientColor:h}):Object(i.b)(ct,{})),Object(i.b)(rt,{shown:R,catalog:G,onClose:function(){return E(!1)}})]}):null},ft=n(1194),bt=n(1294),pt=n(63);function ht(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var mt=Object(f.e)({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:ft.a}),vt=function(e){var t=e.contentType,n=e.token,r=e.root,a=e.mcnLinkCardProps,o=e.isAuthor,i=e.urlOrigin,l=void 0===i?"":i,s=Object(c.useState)(null),u=ht(te.a,s,2),d=u[0],b=u[1],p=Object(c.useState)(!1),h=ht(te.a,p,2),m=h[0],v=h[1];return Object(c.useEffect)((function(){var e=r&&r.querySelector("*[data-draft-type=mcn-link-card]");["answer","article"].includes(t)&&e&&Object(f.g)("".concat(l,"/api/v4/mcn/v2/linkcards?content_type=").concat(t,"&token=").concat(n)).then((function(e){var t=e.data;t&&(b(t),v(!0))})).catch((function(){v(!0)}))}),[r]),m&&Object(pt.jsx)(bt.a,{children:Object(pt.jsx)(mt,Object.assign(Object.assign({},a),{},{originalData:d,root:r,isAuthor:o}))})},gt=n(1086),Ot=n(1316),jt=n(29),yt=n.n(jt),wt=n(926),Ct=n(5),xt=n(970),kt=n.n(xt);function St(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var At=Object(f.e)({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.id,n=e.onClick,r=Object(c.useRef)(!1),a=Object(c.useState)({}),o=St(te.a,a,2),i=o[0],l=o[1],s=Object(c.useState)(!1),u=St(te.a,s,2),d=u[0],b=u[1];return Object(c.useEffect)((function(){Object(f.g)("https://www.zhihu.com/api/v4/market/km_sku_card/".concat(t),{credentials:"same-origin"}).then((function(e){var n=Object(Ct.camelizeKeys)(e)||{},r=n.title,a=n.desc,o=n.cover,i=n.button,c=n.resourceId,s=n.resourceName,u=n.price,d=n.error,f={};!kt()(e)&&kt()(d)&&(f=yt()({},t,{id:t,skuId:c,source:2,productType:1,cardType:"cpsCommonCard",goods:{title:r,subtitle:a,price:{price:u},goodsImg:{imgUrl:o,imgShape:"rectangle",cornerText:s},goodsUrl:{url:null==i?void 0:i.url},btnText:"去查看"}})),l(f),b(!0)})).catch((function(){b(!0)}))}),[]),d&&!kt()(i)?Object(pt.jsx)(bt.a,{children:Object(pt.jsx)(ft.a,Object.assign(Object.assign({id:t,ref:function(e){e&&!e.classList.contains("GoodsRecommendCard-placeholder")&&!1===r.current&&(fe.a.setModule(e,{module:"Content"},{card:{content:{id:t}}}),Object(wt.onViewedOnce)(e,(function(){fe.a.trackCardShow(e,{id:7203})})),r.current=!0)},originalBlockText:"ZTextMkSKuLinkCard",originalData:i},{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1}),{},{onClick:function(e){fe.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),n&&n(e)}}))}):null}}),Tt=n(887),It=n(1576),Rt=n(39),Et=n(1036),Nt=["root","parentType","parentId"];function Bt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var zt=function(e){var t=e.root,n=e.parentType,r=e.parentId,l=Object(a.default)(e,Nt),s=Object(c.useState)(),u=Bt(o.a,s,2),d=u[0],f=u[1];Object(Et.a)({videoId:null==d?void 0:d.videoId,iframeRef:null==d?void 0:d.videoIframeRef});var b=Object(M.a)((function(e){var t="";return[It.a.zvideo,It.a.answer].includes(n)&&(t="?".concat(new URLSearchParams([["itemId",r],["itemType",n]]).toString())),"https://".concat(Rt.a.videoHost,"/video/").concat(e).concat(t)})),p=Object(M.a)((function(e){var t=e.videoId,n=e.videoIframeRef;t&&null!=n&&n.current&&f({videoId:t,videoIframeRef:n})}));return Object(i.b)(i.a,{children:Object(i.b)(Ot.b,Object.assign(Object.assign({onLinkCardPlayerLoaded:p,getVideoUrl:b,useZVideoLinkCard:!1},l),{},{root:t}))})},Lt=["onRef","htmlProcessors","linkCardInfo","zvideoLinkCardProps","adLinkCardProps","mcnLinkCardProps","eduCardProps","mkSkuLinkCardProps","html","sourceId","shouldShowCatalog","shouldCatalogCollapse","shouldFoldCatalog","referenceLinkProps","lazyLoadImageProps","useGifProps","useCatalogV2","isAuthor","maskGradientColor","isVideoAnswer"];function Pt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var _t=function(e){var t=e.onRef,n=e.htmlProcessors,l=void 0===n?[]:n,s=e.linkCardInfo,u=e.zvideoLinkCardProps,d=e.adLinkCardProps,b=e.mcnLinkCardProps,p=e.eduCardProps,h=e.mkSkuLinkCardProps,m=e.html,v=e.sourceId,g=e.shouldShowCatalog,O=e.shouldCatalogCollapse,j=e.shouldFoldCatalog,y=e.referenceLinkProps,C=e.lazyLoadImageProps,x=e.useGifProps,k=e.useCatalogV2,S=e.isAuthor,A=e.maskGradientColor,T=e.isVideoAnswer,R=void 0!==T&&T,E=Object(a.default)(e,Lt),N=d||{},L=N.parentType,P=N.parentId,_=Object(c.useState)(null),M=Pt(o.a,_,2),D=M[0],U=M[1],G=Object(w.a)(),q=I([].concat(Pt(r.a,l),[F(),Y,z.b,Je(k)]));Object(Ot.c)(D,u,s),V(D,y),Xe(D);var H=Object(c.useMemo)((function(){return Qe(m,v)}),[m,v]).catalog;return Object(i.c)(i.a,{children:[Object(z.c)(D),g&&j&&Object(i.b)(Fe,{root:D}),Object(i.b)(B,Object.assign(Object.assign({},d),{},{root:D})),Object(i.b)(At,Object.assign(Object.assign({},h),{},{root:D})),Object(i.b)(zt,Object.assign(Object.assign({parentId:P,parentType:L,isVideoAnswer:R},u),{},{root:D})),vt({root:D,mcnLinkCardProps:b,contentType:L,token:P,isAuthor:S}),Object(gt.c)({root:D,createLinkCardPortal:f.e,eduCardProps:p}),g&&k&&(null==H?void 0:H.length)>0&&Object(i.b)(dt,{catalog:H,inEditor:!1,scrollOffset:52,contentRoot:D,shouldCollapse:O,maskGradientColor:A}),Object(i.b)(f.c,Object.assign({ref:Object(Tt.a)(t,U),options:{lazyLoadImageOptions:C,useGifPortalOption:x},css:function(e){return function(e){return{".FileLinkCard":J(e),".FileLinkCard-icon":{flexShrink:0,height:"30px",width:"30px"},".FileLinkCard-info":{marginLeft:"12px"},".FileLinkCard-name":X(e),".FileLinkCard-meta":$(e),".FileLinkCard-source":{whiteSpace:"pre"}}}(e)},html:q(m,{sourceId:v,theme:G,shouldShowCatalog:g,shouldFoldCatalog:j,linkCardInfo:s})},E))]})},Mt=n(930);function Dt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ut=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),r=document.createElement("span");return e.parentNode.replaceChild(r,e),{target:r,data:{id:t,name:n}}},Ft=function(e){var t=Object(c.useState)(null),n=Dt(o.a,t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));if(t.length){var n=t.map(Ut).map((function(e,t){var n=e.data,r=e.target;return Object(ae.createPortal)(Object(i.c)(Mt.a,{user:n,children:["@",n.name]},t),r)}));a(n)}}}),[e]),r},Vt=n(1205);function Gt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var qt=function(e){var t=e.getAttribute("data-poster"),n="data:,"===t?"":t,r={title:e.getAttribute("data-name"),thumbnail:n,url:e.getAttribute("href"),src:e.getAttribute("data-src")};r=e.getAttribute("data-lens-id")?Object.assign(Object.assign({},r),{},{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign(Object.assign({},r),{},{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(r=Object.assign(Object.assign({},r),{},{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var a=document.createElement("div");return e.parentNode.replaceChild(a,e),{target:a,data:r}},Ht=function(e,t){var n=t.hideWatermark,r=Object(c.useState)(null),a=Gt(o.a,r,2),l=a[0],s=a[1];return Object(c.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));if(t.length){var r=t.map(qt).map((function(e,t){var r=e.data,a=e.target;return Object(ae.createPortal)(Object(i.b)(Vt.a,{data:r,hideWatermark:n},t),a)}));s(r)}}}),[e,n]),l},Wt=n(886);function Kt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Zt=n(435);function Qt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Yt=function(e,t){if(null==e||!e.length)return function(e){return e};return(t||{}).hasSorted?function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{val:0};if(!n)return n;if(e.length===r.val)return n;for(var a=n.length,o=0,i=0,c=e[r.val],l=c.mention,s=c.matchorder,u=s-1;i<=a;){if(-1===(i=n.indexOf(l,i)))return n;o+=1;var d=i+l.length;if(o-1===u){r.val++;var f=t(n.slice(0,i),r),b='<span data-search-entity="'.concat(r.val-1,'">').concat(l,"</span>"),p=t(n.slice(d),r);return f+b+p}i=d}return n}:function(t){return t?e.reduce((function(e,t,n){var r=t.matchorder,a=t.mention;return function(e,t,n,r){if(null==e||!e.length)return e;for(var a=e.length,o=0,i=0;i<=a;){if(-1===(i=e.indexOf(t,i)))return e;if((o+=1)-1===n)return e.slice(0,i)+r+e.slice(i+t.length);i+=t.length}return e}(e,a,r-1,'<span data-search-entity="'.concat(n,'">').concat(a,"</span>"))}),t):t}},Jt=function(e){var t=e.size,n=e.className;return Object(i.b)("svg",{width:t,height:t,viewBox:"0 0 10 10",className:n,children:Object(i.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.64422 2.0701C5.43934 2.02495 5.22835 2.00107 5.01435 2.00024L5.01881 1C6.77895 1.00679 8.38723 2.18375 8.8647 3.96569C8.96467 4.33879 9.00845 4.71371 9.00122 5.08146L8.00058 5.08592C8.00545 4.91135 7.99501 4.73455 7.96827 4.55722C7.92244 4.24814 7.82948 3.95442 7.69691 3.68362C7.48242 3.24345 7.16768 2.87255 6.78903 2.59189C6.45425 2.34299 6.06581 2.16222 5.64422 2.0701ZM1.13729 6.03624C0.659821 4.2543 1.46415 2.43088 2.98508 1.54493L3.48906 2.40894C3.17129 2.59405 2.89522 2.83372 2.67003 3.11208C2.36422 3.48898 2.14798 3.94151 2.05373 4.43727C1.99759 4.72965 1.98457 5.0335 2.0198 5.33994C2.06383 5.73147 2.18322 6.10019 2.36312 6.43126C2.40015 6.49969 2.43967 6.56631 2.48152 6.63103L1.61207 7.12786C1.40517 6.79796 1.24334 6.43202 1.13729 6.03624ZM2.90011 8.40484L3.39642 7.53631C3.69079 7.72299 4.0199 7.85981 4.37186 7.9349C4.70489 8.0066 5.05386 8.02217 5.40538 7.97391C5.73677 7.92924 6.051 7.83047 6.33889 7.68677C6.78065 7.46729 7.15162 7.14642 7.43027 6.76141C7.55152 6.59389 7.65528 6.41424 7.7398 6.22551L8.60733 6.73154C8.11978 7.74635 7.20905 8.55042 6.03627 8.86467C4.92852 9.16149 3.80474 8.96295 2.90011 8.40484ZM4.08193 5.92023C3.83814 5.67643 3.70117 5.34577 3.70117 5.00099C3.70117 4.65621 3.83814 4.32555 4.08193 4.08175C4.32573 3.83795 4.65639 3.70099 5.00117 3.70099C5.34595 3.70099 5.67661 3.83795 5.92041 4.08175C6.16421 4.32555 6.30117 4.65621 6.30117 5.00099C6.30117 5.34577 6.16421 5.67643 5.92041 5.92023C5.67661 6.16402 5.34595 6.30099 5.00117 6.30099C4.65639 6.30099 4.32573 6.16402 4.08193 5.92023Z",fill:"currentColor"})})},Xt=function(e){var t=e.size,n=e.className;return Object(i.b)("svg",{width:t,height:t,viewBox:"0 0 15 15",className:n,children:Object(i.b)("path",{d:"M10.89 9.477l3.06 3.059a1 1 0 0 1-1.414 1.414l-3.06-3.06a6 6 0 1 1 1.414-1.414zM6 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",fill:"currentColor"})})},$t=function(e){var t=e.word,n=e.sourceType,r=e.sourceId,a=e.link,o=void 0===a?{linkType:0,linkUrl:"",topicToken:""}:a,l=e.attachedInfoBytes,s=e.entityAB,u=e.hasKnowledgeTopic,d=e.onClick,f=Object(w.a)().colors,b=Object(h.b)(),m=b.Zhihu||b.ZhihuHybrid,v=0!==o.linkType,g=1===o.linkType,O=m&&(!v||g)&&"1"===s,j=Object(c.useMemo)((function(){return v?o.linkUrl:function(e,t,n){var r=new URLSearchParams({q:e,search_source:"Entity",hybrid_search_source:"Entity",hybrid_search_extra:JSON.stringify({sourceType:t,sourceId:n})});return"https://www.zhihu.com/search?".concat(r.toString())}(t,n,r)}),[o,t,n,r]),y=Object(M.a)((function(e){O&&(e.preventDefault(),function(e,t,n,r,a){var o=0===t.linkType?"/search/".concat(encodeURIComponent(e)):"/knowledge/".concat(t.topicToken),i=new URLSearchParams({sourceType:n,sourceId:r}),c="https://www.zhihu.com/appview/entity-word".concat(o,"?").concat(i.toString()),l=new URLSearchParams({url:c,show_header:"false",show_drag:"true",enable_close:"true",min_percent:"1",title:e,enable_drag:String(Boolean(a.iOS))});Object(p.a)("base/openURL").dispatch({url:"zhihu://popup_container?".concat(l.toString())})}(t,o,n,r,b)),d(e,o,j)}));if(!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=0===t.linkType,o=1===t.linkType;return e?"0"===r?a:!n||o:a}(m,o,u,s||"0"))return Object(i.b)(c.Fragment,{children:t});var C=v?Jt:Xt;return Object(i.c)(Zt.b,{as:m?"span":"a",shouldTrackShow:!0,zaText:t,zaBlock:v?"KnowledgeEntity":"SearchEntity",extra:{attachedInfoBytes:l},"data-za-not-track-link":!0,css:{color:f.GBL07A,textDecoration:"none",cursor:"pointer",":active":{padding:"3.5px 0",backgroundColor:f.GBK09A,borderRadius:"4px"}},href:j,target:"_blank",onClick:y,children:[t,Object(i.b)(C,{size:"10px",css:{position:"relative",verticalAlign:"top",top:"4px"}})]})},en=function(e,t){var n=t.type,r=t.sourceId,a=t.entityWords,o=void 0===a?[]:a,l=t.entityAB,s=t.onClick,u=void 0===s?T.a:s,d=Object(c.useState)(null),f=Qt(te.a,d,2),b=f[0],p=f[1],h=Object(M.a)(u);return Object(c.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll("span[data-search-entity]"));if(t.length){var a=!1,c=t.map((function(e){var t,n=e.getAttribute("data-search-entity"),r=o[Number(n)]||{},i=r.mention,c=r.link,l={word:i,link:c,attachedInfoBytes:r.attachedInfoBytes};1===(null==c?void 0:c.linkType)&&(a=!0);var s=document.createElement("span");return null===(t=e.parentNode)||void 0===t||t.replaceChild(s,e),{data:l,target:s}})).map((function(t,o){var c=t.data,s=t.target;return e.contains(s)?Object(ae.createPortal)(Object(i.b)($t,Object.assign({sourceType:n,sourceId:r,entityAB:l,hasKnowledgeTopic:a,onClick:h},c),o),s):null}));p(c)}}}),[e]),b},tn=n(21),nn=n(160),rn=n.n(nn),an=n(1759);function on(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var cn=function(e){var t=e.goodsCardId,r=e.handleClose,a=Object(tn.useSelector)((function(e){return e.currentUser})),o=Object(R.a)((function(){return n.e(65).then(n.bind(null,2998))})),c=Object(an.a)(),l=Object(M.a)((function(e){var t=e.id,n=e.sourceId,r=e.url,a=e.app_schema_ios,o=e.app_schema_android;c({id:t,source:n,url:r,appSchemaIos:a,appSchemaAndroid:o})}));return t?Object(i.b)(o,{showModal:Boolean(t),id:t,userId:a,clientId:rn.a.get("_zap"),onClose:r,onSelectCard:l}):null},ln=["className","ecommerce","html","shouldShowCatalog","sourceId","sourceType","isExpanded","entityWords","isVideoAnswer","hideWatermark"],sn=["isNovel"];function un(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var dn={},fn=function(e,t){var n=function(e){return e.split("/").reverse()[0]}(t),r=n.split("."),a=un(o.a,r,2),i=a[0],c=a[1],l=i.split("_"),s=un(o.a,l,2)[1],u="webp"===c||"gif"===c?c:"image",f=Object(d.e)({appName:"heifetz"})("".concat(u,".").concat(s,".unknown.RichText"));switch(e){case"loadstart":dn[n]=Date.now();break;case"load":if(dn[n]){var b="".concat(f,".success");d.b.increment({raw:"".concat(b,".count")}),d.b.timing(b,Date.now()-dn[n]),delete dn[n]}break;case"timeout":dn[n]&&(d.b.increment({raw:"".concat(f,".timeout.count")}),delete dn[n]);break;case"error":dn[n]&&(d.b.increment({raw:"".concat(f,".failure.count")}),delete dn[n])}},bn=function(e){return Object(i.b)(f.a,Object.assign(Object.assign({onLoadStateChange:fn},e),{},{useMp4:!0}))},pn=function(e){var t=e.root,r=e.ecommerce,a=e.sourceType,o=e.sourceId,c=e.entityWords,l=e.hideWatermark;return Object(i.c)(i.a,{children:[Ht(t,{hideWatermark:l}),Ft(t),Object(i.b)(v.a,{target:"ecommercePortal",replacement:null,children:Object(u.d)(t,{ecommerce:r,getComponent:function(){return Promise.resolve().then(n.bind(null,1575))}})}),en(t,{type:a,sourceId:o,entityWords:c})]})},hn=function(e){var t=e.className,n=e.ecommerce,l=e.html,u=e.shouldShowCatalog,d=e.sourceId,f=e.sourceType,b=e.isExpanded,p=void 0===b||b,h=e.entityWords,v=e.isVideoAnswer,g=e.hideWatermark,O=Object(a.default)(e,ln),j=Object(c.useState)(null),y=un(o.a,j,2),w=y[0],C=y[1],x=Object(c.useMemo)((function(){return l?s.compose.apply(void 0,un(r.a,[Yt(h)].filter(Boolean)))(l):""}),[l,h]);m(w),function(e){var t=Object(c.useState)(!1),n=Kt(o.a,t,2),r=n[0],a=n[1],i=Object(ie.l)().trackEvent,l=Object(M.a)(Object(Wt.a)((function(){document.getSelection().toString()&&i({eventType:"Click",elementLocation:{moduleId:"text_select",type:"Text"}})}),1e3)),s=Object(M.a)((function(){document.addEventListener("selectionchange",l)})),u=Object(M.a)((function(){document.getSelection().toString()&&(i({eventType:"Click",elementLocation:{moduleId:"text_copy",type:"Text",text:r?"快捷键复制":"右键复制"}}),a(!1))})),d=Object(M.a)((function(e){"c"!==e.key&&67!==e.keyCode||!e.ctrlKey&&!e.metaKey||a(!0)}));Object(c.useEffect)((function(){if(e)return e.addEventListener("selectstart",s),e.addEventListener("copy",u),document.addEventListener("keydown",d),function(){e.removeEventListener("selectstart",s),e.removeEventListener("copy",u),document.removeEventListener("keydown",d),document.removeEventListener("selectionchange",l)}}),[e,u,d,l,s])}(w);var k=function(){var e=Object(c.useState)(null),t=on(o.a,e,2),n=t[0],r=t[1];return[n,Object(M.a)((function(e){var t=e.currentTarget.dataset.mcnId;r(t)})),Object(M.a)((function(){return r(null)}))]}(),S=un(o.a,k,3),A=S[0],T=S[1],I=S[2];return Object(i.c)(i.a,{children:[Object(i.b)(_t,Object.assign(Object.assign({},O),{},{className:t,html:p?x:l,onRef:C,lazyLoadImageProps:{onLoadStateChange:fn,useWebP:!1},useGifProps:{Component:bn},adLinkCardProps:{parentId:d,parentType:f},mcnLinkCardProps:{onClick:T},mkSkuLinkCardProps:{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1},eduCardProps:{token:d,contentType:f},zvideoLinkCardProps:{enableInlinePlay:!0},shouldShowCatalog:u,sourceId:d,useCatalogV2:!0,isVideoAnswer:v})),Object(i.b)(pn,{root:w,ecommerce:n,sourceId:d,sourceType:f,entityWords:h,hideWatermark:g}),Object(i.b)(cn,{goodsCardId:A,handleClose:I})]})};t.a=function(e){var t=e.isNovel,n=Object(a.default)(e,sn);if(t){var r=n.className,o=n.html;return Object(i.b)(S,{className:r,html:o,lazyLoadImageProps:{onLoadStateChange:fn,useWebP:!1}})}return Object(i.b)(hn,Object.assign({},n))}},1114:function(e,t,n){"use strict";var r=n(35),a=n(15),o=n(16),i=n(18),c=n(19),l=n(9),s=n(1),u=n(3),d=n.n(u),f=n(0),b=n(13),p=n.n(b),h=n(20),m=n(33),v=n(1509),g=n(2386),O=n(25),j=n(51),y=n(153),w=n(95),C=n(215),x=n(32),k=n(79),S=n.n(k),A=n(65),T=(A.p,n(439));n(1736);function I(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var E=function(e){Object(i.a)(n,e);var t=R(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:e.props.isRecognized}},e.voteUpButtonRef=Object(f.createRef)(),e.voteDownButtonRef=Object(f.createRef)(),e.onVote=e.props.authRequired((function(t){e.props.onVote(t)}),x.ab.vote),e.voteUp=function(t){var n=1===e.props.voting?["UnUpvote","neutral"]:["Upvote","up"],a=I(r.a,n,2),o=a[0],i=a[1];e.vote(t,o,i),e.voteUpButtonRef.current.focus()},e._voteDown=function(t){var n=-1===e.props.voting?["UnDownvote","neutral"]:["Downvote","down"],a=I(r.a,n,2),o=a[0],i=a[1];e.vote(t,o,i),e.voteDownButtonRef.current.focus()},e.voteDown=function(t){e.shouldShowMenu()&&e.popover.open(),e._voteDown(t)},e.vote=function(t,n,r){var a=e.props,o=a.disableAuth,i=a.handleToggleGuide,c=a.onClick,l=a.type,s=a.zaIds,u=s.voteUp,d=s.voteDown,f=n.includes("Upvote")?u:d;"article"===l&&"down"===r&&O.a.trackEvent(e.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),O.a.trackEvent(n.includes("Upvote")?e.voteUpButtonRef.current:e.voteDownButtonRef.current,Object.assign({action:n,element:"Button"},f&&{id:f})),c?c(t,r):o?i(t,r):e.onVoteWithRecognize(n,r)},e.onVoteWithRecognize=function(t,n){var r=e.props.voting;!e.state.recognizeInfo.isRecognized||1!==r||"UnUpvote"!==t&&"Downvote"!==t?e.onVote(n):e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{showRecognizeModal:!0,action:t,voteType:n})})},e.handleConfirmCancelRecognize=function(){e.onVote(e.state.recognizeInfo.voteType),e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{isRecognized:!1,showRecognizeModal:!1})})},e.handleCloseCancelRecognizeModal=function(){return e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{showRecognizeModal:!1})})},e.handleTogglerClick=function(t){e.shouldShowMenu()||t.preventDefault(),e._voteDown(t)},e.renderVoteUpButton=function(){var t=e.props,n=t.isOwner,r=t.count,a=t.voting,o=t.disabled,i=t.hideDesc,c=1===a,l=c?"已赞同":"赞同",u=[l,Object(y.cnNiceNumber)(r)].join(" "),d=[!i&&l,0!==r&&Object(y.cnNiceNumber)(r).trim()].filter(Boolean).join(" ");return Object(s.c)(j.a,{as:m.c,zaText:c?"取消赞同":"赞同",zaType:"Button",zaAction:c?"UnUpvote":"Upvote",className:p()("VoteButton VoteButton--up",{"is-active":1===a}),disabled:n||o,onClick:e.voteUp,"aria-label":u,"aria-live":"polite",onRef:e.voteUpButtonRef,children:[Object(s.b)(v.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),d]})},e.renderVoteDownButton=function(){var t=e.props,n=t.voting,r=t.disabled,a=t.isMobile,o=-1===n,i=o?"已反对":"反对";return Object(s.b)(j.a,{as:m.c,zaText:o?"取消反对":"反对",zaType:"Button",zaAction:o?"UnDownvote":"Downvote",className:p()("VoteButton VoteButton--down",{"is-active":-1===n},{"VoteButton--mobileDown":a}),disabled:r,onClick:e._voteDown,"aria-label":i,"aria-live":"polite",onRef:e.voteDownButtonRef,children:Object(s.b)(g.a,{center:!0,size:10})})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.isOwner,t=this.state.recognizeInfo,n=t.showRecognizeModal,r="UnUpvote"===t.action;return Object(s.c)("span",{ref:this.voteButtonRef,children:[Object(s.b)(T.c,{input:"v",action:this.voteUp}),Object(s.b)(T.c,{input:"d",action:this.voteDown}),this.renderVoteUpButton(),!e&&this.renderVoteDownButton(),Object(s.b)(w.b,{title:"确定".concat(r?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal,children:n&&Object(s.c)("div",{children:[Object(s.c)("div",{children:[r?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"]}),Object(s.c)(w.a,{direction:"horizontal",children:[Object(s.b)(m.c,{onClick:this.handleCloseCancelRecognizeModal,children:r?"暂不取消":"暂不选择"}),Object(s.b)(m.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize,children:r?"取消赞同":"选择反对"})]})]})})]})}}]),n}(f.Component);E.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),isRecognized:d.a.bool},E.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}};var N;t.a=Object(h.compose)((function(e){return S()((function(t){return Object(s.b)(e,Object.assign(Object.assign({},t),{},{isMobile:Object(A.p)(N)}))}),e)}),C.a)(E)},1115:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(1),a=n(0),o=n(51),i=n(33),c=n(891),l=n(439),s=function(e){var t=e.className,n=e.onClick,s=e.label,u=e.onRef,d=e.disabled,f=e.showIcon,b=void 0===f||f;return Object(r.c)(a.Fragment,{children:[Object(r.b)(l.c,{input:"f",action:n}),Object(r.b)(o.a,{as:i.c,zaText:"收藏",zaType:"Button",zaBlock:"收藏",onRef:u,className:t,preset:"plain",onClick:n,icon:b?c.a:null,label:s,disabled:d})]})};s.defaultProps={label:"收藏"};var u=s},1120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var r=n(1455);Object.defineProperty(t,"TAG_RE_TEMPLATE",{enumerable:!0,get:function(){return r.TAG_RE_TEMPLATE}}),Object.defineProperty(t,"TAG_RE",{enumerable:!0,get:function(){return r.TAG_RE}}),Object.defineProperty(t,"parseAttrs",{enumerable:!0,get:function(){return r.parseAttrs}}),Object.defineProperty(t,"parseTagGroup",{enumerable:!0,get:function(){return r.parseTagGroup}}),Object.defineProperty(t,"parseTag",{enumerable:!0,get:function(){return r.parseTag}}),Object.defineProperty(t,"truncateHTML",{enumerable:!0,get:function(){return r.truncateHTML}}),Object.defineProperty(t,"stripHTML",{enumerable:!0,get:function(){return r.stripHTML}})},1139:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(r.useRef)({boundaryRef:t,callback:e});return Object(r.useEffect)((function(){n.current={boundaryRef:t,callback:e}})),Object(r.useEffect)((function(){var e=function(e){var t,r=n.current,a=r.boundaryRef,o=r.callback;null!==a&&null!=a&&null!==(t=a.current)&&void 0!==t&&t.contains(e.target)||o(e)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),null}},1144:function(e,t,n){"use strict";function r(e){var t,n,r,a;return Boolean(null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(r=n.contents)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.type)}function a(e){var t,n,a,o;return!r(e)&&Boolean(null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(a=n.contents)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.type)}function o(e){var t,n,r,a=null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(r=n.contents)||void 0===r?void 0:r[0];return a?"answer"===a.type?a.answer:"article"===a.type?a.article:null:null}function i(e){var t,n,r,a=null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(r=n.contents)||void 0===r?void 0:r[0];return a?"answer"===a.type?a.answer:"article"===a.type?a.article:null:null}function c(e,t){var n=e,r=t.contentAuthor;return r&&n.id!==(null==r?void 0:r.id)?r:n}function l(e){var t,n;return r(e)&&null!==(t=null===(n=o(e))||void 0===n?void 0:n.author)&&void 0!==t?t:null}n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}))},1145:function(e,t,n){"use strict";var r=n(37),a=n(1),o=n(33),i=n(1212),c=["onClick","text"],l=function(e){var t=e.onClick,n=e.text,l=Object(r.default)(e,c);return Object(a.c)(o.c,Object.assign(Object.assign({preset:"link",onClick:t,css:{fontSize:15}},l),{},{children:[Object(a.b)(i.a,{text:!0,center:!0})," ",n]}))};l.defaultProps={text:"修改"},t.a=l},1182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/;e.exports=t.default},1183:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(5),a=n(1184);function o(e){var t,n,o;return null!=e&&null!==(t=e.bizExt)&&void 0!==t&&t.creationRelationship?e.bizExt.creationRelationship:"string"==typeof(null==e||null===(n=e.creationRelationship)||void 0===n?void 0:n.renderJson)?Object(r.camelizeKeys)(null!==(o=Object(a.a)(e.creationRelationship.renderJson))&&void 0!==o?o:{}):e.creationRelationship}var i=o,c=o,l=o},1184:function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(e){return null}}n.d(t,"a",(function(){return r}))},1185:function(e,t,n){"use strict";var r=n(1),a=n(13),o=n.n(a);t.a=function(e){var t=e.className;return Object(r.b)("span",{className:o()("Bull",t),children:" · "})}},1186:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return b})),n.d(t,"i",(function(){return p}));var r=n(2),a=n(1184),o=n(32),i=function(e){return"FullScreenAnswerEditor_".concat(e)},c=function(){return Boolean(window.__FullScreenAnswerEditor&&!window.__FullScreenAnswerEditor.closed)},l=function(){return Boolean(window.__FullScreenAnswerEditor&&window.__FullScreenAnswerEditor.closed)},s=function(e,t){if(!e)return null;if(c())return window.__FullScreenAnswerEditor.focus(),window.__FullScreenAnswerEditor;var n=i(e),r=window.location,a=r.search,o=r.host,l=t?"//".concat(o,"/question/").concat(e,"/answer/").concat(t,"/edit").concat(a):"//".concat(o,"/question/").concat(e,"/write").concat(a);return window.__FullScreenAnswerEditor=window.open(l,n)},u=function(e){return e?Object.keys(e).reduce((function(t,n){var a=e[n];return"commercialReportInfo"===n?Object.assign(Object.assign({},t),{},{isReport:Boolean(null==a?void 0:a.isReport)}):Object.assign(Object.assign({},t),{},Object(r.a)({},n,a))}),{}):e},d=function(e){return e?{commentPermission:e.commentPermission}:e},f=function(e){return e?Object.keys(e).reduce((function(t,n){var a=e[n];return"canReward"===n?Object.assign(Object.assign({},t),{},{rewardTagline:a?o.p:""}):Object.assign(Object.assign({},t),{},Object(r.a)({},n,a))}),{}):e},b=function(e){return e?(e=f(e),Object.keys(e).reduce((function(t,n){var o=e[n];return"commercialReportInfo"===n?Object.assign(Object.assign({},t),{},{isReport:Boolean(null==o?void 0:o.isReport)}):"disclaimerType"===n?Object.assign(Object.assign({},t),{},{disclaimerType:o||"none",isDisclaimerChecked:Boolean(o&&"none"!==o)}):"thankInviter"===n?Object.assign(Object.assign({},t),{},{thankInviterInfo:Object(a.a)(o)}):"thankInviterStatus"===n?t:Object.assign(Object.assign({},t),{},Object(r.a)({},n,o))}),{})):e};function p(e,t){if(!e)return{thankInviterStatus:"close",thankInviter:""};var n=e.urlToken,r=e.name,a=e.id;return{thankInviterStatus:"open",thankInviter:"answer"===t?a:JSON.stringify({url_token:n,name:r,id:a})}}},1187:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return l}));var r=function(e){var t=e.title,n=e.id,r=e.topics,a=e.answerCount,o=e.commentCount,i=e.created,c=e.updatedTime,l=e.visitsCount,s=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/".concat(n),keywords:r.map((function(e){return e.name})).join(","),answerCount:a,commentCount:o,dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*c).toISOString(),"zhihu:visitsCount":l,"zhihu:followerCount":s}};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}var o={auto_notif:"auto_notif",header:"header",question_header_card:"question_header_card",force_launch_notif:"force_launch_notif",agree:"agree",disagree:"disagree",comment:"comment",star:"star",comment_list:"comment_list",comment_more:"comment_more",more_answers:"more_answers",bottom:"bottom",capsule:"capsule",follow:"follow",write_answer:"write_answer"},i={expand_answer:"force_launch_notif",expand_answer1:"auto_notif",expand_answer2:"auto_notif",up:"agree",down:"disagree",comment_answer:"comment",collect_answer:"star"},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClose,n=e.isEvaluate,r=e.isLocked,a=e.isSuggest;return t?"closed":a?"suggested":n?"evaluated":r?"locked":""},l=function(e){return"#draft"===e.hash||"#write"===e.hash||"write"in e.query}},1199:function(e,t,n){"use strict";var r=n(35),a=n(15),o=n(16),i=n(86),c=n(18),l=n(19),s=n(9),u=n(1),d=n(435),f=n(287),b=n(972),p=n(1723),h=n(899),m=n(13),v=n.n(m),g=n(3),O=n.n(g),j=n(0),y=n(21),w=n(49),C=n(59),x=n(20),k=n(25),S=n(489),A=n(433),T=n(33),I=n(1279),R=n(143),E=n(333),N=n(263),B=n.n(N);function z(e,t){var n=e.trackUrl,r=void 0===n?[]:n,a=e.id;if(0===r.length)return null;var o="other";t.Android?o="android":t.iOS&&(o="ios");var i=B()();return r.forEach((function(e){(new Image).src=e.replace("__OS__",o).replace("__ADPLATFORM__",o).replace("__REQUESTID__",i).replace("__SESSIONID__",i).replace("__ATOKEN__",a).replace("__PAGETYPE__","article")})),{os:o,pageId:a,sessionId:i,pageType:"article"}}var L=n(2),P=n(6),_=Object(P.a)("brand",["GET_URL"]),M=n(1757),D=n(1846),U=n(1340),F=n(1019),V=n(1115),G=n(1431),q=n(1844),H=n(1183),W=n(1345),K=n(215),Z=n(1549),Q=n(477),Y=n(65),J=n(988),X=n(1288),$=n(937),ee=n(1280),te=n(1289),ne=n(1273),re=n(965),ae=n(1114),oe=n(1831),ie=n(32),ce=n(377),le=n(1584),se=n(1342),ue=(n(1758),n(1367)),de=n(973),fe=n(940),be=n(929),pe=n(1038),he=n(470),me=n(964),ve=n(1425);function ge(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var je=function(e){return"plain"===e||"special-plain"===e},ye=je,we=function(e){return e.thumbnailExtraInfo&&"video"===e.thumbnailExtraInfo.type?{cover:e.thumbnail,hasVideo:!0}:{cover:e.imageUrl||e.thumbnail,hasVideo:!1}};function Ce(e){var t=Object(H.b)(e);return t?Object.assign(Object.assign({},e),{},{creationRelationship:t}):e}var xe=function(e){Object(c.a)(n,e);var t=Oe(n);function n(){var e,r,o,c,l,s,d;Object(a.a)(this,n);for(var b=arguments.length,p=new Array(b),h=0;h<b;h++)p[h]=arguments[h];return(e=t.call.apply(t,[this].concat(p))).state={commentsShown:!1,commentsAutoFocus:!0,favlistsShown:!1,commentPattern:"fixed",positionStatus:null,guideShown:!1,contentExpanded:!1,hasFetchedLabels:!1,shownCatalogModal:!1},e.disableAuth=(r=e.props,o=r.router,c=(o=void 0===o?{}:o).location,l=(c=void 0===c?{}:c).pathname,s=r.isMobile,d=r.currentUser,s&&!d&&!l.startsWith("/topic")),e.handleCommentsShown=function(t,n){e.props.shouldOia?e.createOpenInAppHandler("comment_article")(t):e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleFavButtonClick=function(t){var n=e.props,r=n.zaInfos.favlists;n.shouldOia?e.createOpenInAppHandler("comment_article")(t):(k.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},r&&{id:r})),e.disableAuth?e.handleToggleGuide():e.handleFavlistsShown())},e.handleFavlistsShown=e.props.authRequired((function(){return e.setState({favlistsShown:!0})}),ie.ab.favlists),e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.toggleCatalogModal=function(){e.setState({shownCatalogModal:!e.state.shownCatalogModal})},e.handleVote=function(t){var n=e.props,r=n.article.id;(0,n.updateArticleVote)(r,t)},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;k.a.trackEvent(Object(i.a)(e),Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.loadArticleConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,r=t.article,a=t.loadArticleConcernedVoters,o=t.currentUser;!n&&o&&a(r.id)},e.handleToggleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.trackUserAction,a=void 0===r||r,o=e.props,i=o.onToggleExpand,c=o.getTrackUrl,l=o.article,s=o.ua,u=o.trackPromotionClick;if(i&&i(t),t&&(e.loadArticleConcernedVoters(),a)){var d=l.trackUrl?Promise.resolve():c(l.id);d.then((function(){return z(e.props.article,s)})),u&&u()}e.setState({contentExpanded:t})},e.renderPrefix=function(){var t=e.props.article,n=t.labelInfo,r=t.hermesLabel,a=e.state.contentExpanded;return!n&&!r||a?null:Object(u.b)(ee.a,{labelInfo:n||r})},e.createOpenInAppHandler=function(t){var n=e.props.article.id;return function(e){e.preventDefault(),ie.E||Object(f.e)(Object(ce.a)({type:"article",id:n}),{utm_content:t})}},e.handleLike=function(t){return!!e.props.shouldOia&&(e.createOpenInAppHandler("like_article")(t),!0)},e}return Object(o.a)(n,[{key:"renderLabels",value:function(){if(!this.state.contentExpanded)return null;var e=this.props,t=e.article,n=e.useNewLabels,r=t.annotationDetail;return Object(u.b)(te.a,{useOldLabels:!n,annotationProps:r&&{annotationDetail:r},item:t})}},{key:"renderArticleExtraInfo",value:function(){var e=this.props,t=e.actor,n=e.action,r=e.article,a=r.voteupCount,o=r.id,i=r.type,c=e.concernedUpvoters,l=void 0===c?[]:c,s=t&&t.urlToken;return a?Object(u.b)("div",{className:"ArticleItem-extraInfo",children:Object(u.b)(oe.a,{id:o,type:i,voteupCount:a,upvotedFollowees:null==l?void 0:l.filter((function(e){return s!==e.urlToken})),too:"voted"===n})},"articleExtraInfo"):null}},{key:"renderMeta",value:function(){var e=function(e){var t=e.title,n=e.id,r=e.created,a=e.updated,o=e.commentCount,i=e.imageUrl,c=e.thumbnail;return{headline:t,url:"".concat(ie.m,"/p/").concat(n),datePublished:new Date(1e3*r).toISOString(),dateModified:new Date(1e3*a).toISOString(),commentCount:o,image:i||c}}(this.props.article);return Object.keys(e).map((function(t){return Object(u.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderSuggestEdit",value:function(){var e=this.props.article,t=e.isNormal,n=void 0===t||t,r=e.suggestEdit,a=(r=void 0===r?{}:r).title,o=r.status,i=r.reason;return o&&!n?Object(u.c)("div",{className:"AnswerItem-statusContent",children:[Object(u.b)("div",{className:"AnswerItem-statusReason",children:i}),Object(u.c)("div",{className:"AnswerItem-statusDescription",children:["作者修改内容通过后，文章会重新显示恢复正常 ",Object(u.b)("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink",children:a})]})]}):null}},{key:"render",value:function(){var e,t,n=this,a=this.props,o=a.article,i=a.article,c=i.id,l=i.title,s=i.author,f=i.excerpt,b=i.content,m=i.voteupCount,g=i.voting,O=i.type,j=i.created,y=i.updated,w=i.imageUrl,x=i.commentCount,k=i.adminClosedComment,S=i.annotationDetail,A=i.vessayInfo,N=i.creationRelationship,B=i.ipInfo,z=a.preset,L=a.lastreadTouchable,P=a.itemProp,_=void 0===P?"article":P,H=a.ua,K=a.lessExcerpt,Z=a.formatContent,Q=a.zaInfos,Y=Q.expand,J=Q.title,ee=Q.voteUp,te=Q.voteDown,oe=Q.toggleComment,le=Q.share,Oe=Q.report,Ce=Q.options,xe=Q.getCommentAction,ke=a.renderOptions,Se=a.isSticky,Ae=a.handleToggleSticky,Te=a.trackPromotionClick,Ie=a.renderActionButtons,Re=a.className,Ee=a.isMobile,Ne=a.ecommerce,Be=a.useVessayV2,ze=a.showHeightLight,Le=void 0!==ze&&ze,Pe=a.truncateDisabled,_e=void 0!==Pe&&Pe,Me=a.currentUser,De=a.blockStrategies,Ue=Object(se.b)([Object(se.a)(De)],Ie),Fe=this.state,Ve=Fe.positionStatus,Ge=Fe.favlistsShown,qe=Fe.commentsShown,He=Fe.commentsAutoFocus,We=Fe.commentPattern,Ke=Fe.contentExpanded,Ze=Fe.shownCatalogModal,Qe="".concat(ie.m,"/p/").concat(c),Ye=Me&&Me.urlToken===s.urlToken,Je=this.renderSuggestEdit(),Xe="function"==typeof Ae,$e=!function(e){return"special-plain"===e}(z)&&Object(u.b)($.a,Object.assign(Object.assign({},ye(z)&&{preset:"plain"}),{},{author:s,userLinkV2:!0,className:"ArticleItem-authorInfo"}),"authorInfo"),et=this.renderArticleExtraInfo(),tt=this.renderLabels(),nt=null==N||null===(e=N.coCreation)||void 0===e?void 0:e.refBy,rt=null==N||null===(t=N.reference)||void 0===t?void 0:t.refBy,at=Ke&&(nt||rt)&&Object(u.b)(C.Box,{my:"16px",children:Object(u.b)(F.CoCreationLinkCard,{type:"article",coCreationRefBy:nt,referenceRefBy:rt})}),ot=je(z)?[[$e,tt,at],et]:[[$e,tt,at,et],null],it=ge(r.a,ot,2),ct=it[0],lt=it[1],st=!Je||Ye,ut=Z?Z(b||f,o):b||f,dt=!Ee&&Ke&&Object(U.a)(o,"article"),ft=Boolean(null==A?void 0:A.enableVideoTranslate);return Object(u.c)(be.e,{className:v()("ArticleItem",Re),onRef:function(e){n.contentItem=e},"data-zop":JSON.stringify({authorName:s.name,itemId:c,title:l,type:"article"}),data:o,link:Qe,title:Object(u.c)(u.a,{children:[Xe&&Se&&Object(u.b)(ve.a,{}),Object(u.b)(d.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(u.b)("a",Object.assign(Object.assign({href:Qe,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-element_name":"Title"},J&&{"data-za-detail-view-id":J}),{},{onClick:Te,children:Le?Object(u.b)("span",{dangerouslySetInnerHTML:{__html:l},className:"ArticleItem-highlight"}):l}))})]}),meta:ct,lastreadTouchable:L,itemProp:_,itemType:"http://schema.org/SocialMediaPosting",itemScope:!0,children:[this.renderMeta(),st?Object(u.b)(me.b,Object.assign(Object.assign(Object.assign({truncateDisabled:_e,className:v()({"ArticleItem-highlight":Le}),itemProp:"articleBody",data:o,excerpt:Z?Z(f,o):f,html:ut,ecommerce:Ne,onToggleExpend:this.handleToggleExpand,prefix:this.renderPrefix(),before:Object(u.c)("div",{children:[lt,w&&Object(u.b)(I.a,{className:"ArticleItem-image",thumbnail:Object(R.imgUrl)(w,"60w"),url:w,alt:l})]}),after:Object(u.b)(me.a,{href:Qe,created:j,updated:y,ipInfo:B})},K?{limit:74}:{}),{},{onPositionStatusChange:this.handlePositionStatusChange},we(o)),{},{zaIds:{expand:Y},children:Ue({componentList:[{name:"vote",component:!E.b.includes(c)&&(Ee?Object(u.b)(ne.a,{id:c,type:O,liked:Boolean(g),count:m,disabled:Ye,onClick:this.handleLike,handleToggleGuide:this.handleToggleGuide,disableAuth:this.disableAuth},"vote"):Object(u.b)(ae.a,{type:O,count:m,onVote:this.handleVote,voting:g,isOwner:Ye,handleToggleGuide:this.handleToggleGuide,zaIds:{voteUp:ee,voteDown:te}},"vote"))},{name:"comment",component:Object(u.b)("div",{css:E.b.includes(c)?{marginLeft:-24}:{},children:Object(u.b)(de.a,{onClick:this.handleCommentsShown,commentsShown:qe,commentClosed:k,count:x,positionStatus:Ve,zaInfos:{toggleComment:oe,getCommentAction:xe}},"comment")},"comment")},{name:"catalog",component:dt&&Object(u.b)(M.a,{html:ut,sourceId:o.id,onClick:this.toggleCatalogModal},"catalog")},{name:"share",component:Object(u.b)(re.a,{id:c,type:"article",url:Qe,title:l,authorName:s&&s.name,positionStatus:Ve,zaShareId:le},"share")},{name:"favlist",component:(!Me||!Me.isOrg)&&Object(u.b)(V.a,{onRef:function(e){return n.favButtonRef=e},onClick:this.handleFavButtonClick,label:Ee?"":"收藏"},"favlist")},{name:"sticky",component:!Ee&&Xe&&Ye&&Object(W.a)(Me)&&Object(u.b)(T.c,{preset:"plain",onClick:Ae,icon:Se?p.b:h.b,label:Se?"取消置顶":"置顶"},"sticky")},{name:"report",component:!Ye&&!Ee&&Me&&Object(u.b)(he.a,{id:c,type:O,zaReportId:Oe},"report")},{name:"vessay",component:!Ee&&Ye&&ft&&Object(u.b)(q.a,{type:"article",id:c,useVessayV2:Be,isAuthor:Ye},"vessay")},{name:"options",component:!Ee&&(null==ke?void 0:ke((function(){return n.contentItem}),Ce))},{name:"annotation",component:!Ke&&Object(u.b)(X.a,{annotationDetail:S},"annotation")}]})})):this.renderSuggestEdit(),st&&Object(u.b)(ue.a,{content:b,type:"article",urlToken:String(c)}),this.disableAuth&&this.state.guideShown&&Object(u.b)(G.a,{redirectUrl:Qe,urlScheme:Object(ce.a)({type:"article",id:c}),buttons:[H.Wechat?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],onClose:this.handleToggleGuide}),Object(u.b)(fe.a,{parent:o,commentPattern:We,shown:qe,autoFocus:He,onClose:this.handleCommentsHide}),Object(u.b)(pe.a,{id:c,type:"article",shown:Ge,onClose:this.handleFavlistHide,zaEnabled:!0}),dt&&Object(u.b)(D.a,{shown:Ze,html:ut,sourceId:o.id,onClose:this.toggleCatalogModal,created:j,updated:y,author:s,zaContent:{type:"Answer",token:String(o.id)}})]})}}]),n}(j.Component);xe.propTypes={preset:O.a.string,lessExperpt:O.a.bool,formatContent:O.a.func,renderOptions:O.a.func,zaInfos:O.a.object,trackPromotionClick:O.a.func,renderActionButtons:O.a.func},xe.defaultProps={preset:"primary",zaInfos:{},renderActionButtons:le.b};t.a=Object(x.compose)(Object(J.a)((function(e){var t=e.article;return{content:{type:"Post",token:String(t.id)}}})),Object(A.b)((function(e){var t=e.article,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=(a=void 0===a?{}:a).cardShow;return Object.assign(Object.assign({module:"PostItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Post",token:t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:1e3*t.created,parent_token:t.column&&t.column.id,author_member_hash_id:t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}}},o&&{view:{id:o}}),{},{trackCardShow:r})})),w.withRouter,K.a,Object(b.d)({dataPath:"article"}),b.c,Object(y.connect)((function(e,t){var n=t.article;return{article:Ce(n),ua:e.env.userAgent,ecommerce:Object(S.c)(e,{type:"article",urlToken:t.article.id}),shouldOia:Object(Y.i)(e),isMobile:Object(Y.d)(e),concernedUpvoters:Object(Q.a)(e,{id:n.id}),useVessayV2:Object(Y.a)(e,Z.b)===Z.a}}),{updateArticleVote:Q.g,getTrackUrl:function(e){return{API:{types:_.GET_URL,endpoint:"/brand/track",method:"GET",fetchOptions:{credentials:"include",failsafe:!0,timeout:100},query:{target_url:"https://zhuanlan.zhihu.com/p/".concat(e)}},FAILSAFE:!0,UPDATE:{success:function(t){return{articles:Object(L.a)({},e,{trackUrl:t.data||[]})}}}}},loadArticleConcernedVoters:Q.d}),ee.c)(xe)},1227:function(e,t,n){"use strict";var r=n(0),a=n(682),o="element",i="text",c="empty",l="fragment",s=function(e,t){return function e(n){var a,s=n.node;return n.type=(a=s,r.isValidElement(a)?o:function(e){return"string"==typeof e||"number"==typeof e}(a)?i:function(e){return null==e||"boolean"==typeof e}(a)?c:Array.isArray(a)?l:void 0),n.type===o?n.children=r.Children.map(s.props.children,(function(t){return e({node:t,parent:n})})):n.type===l&&(n.children=r.Children.map(s,(function(t){return e({node:t,parent:n})}))),t(n),n}({node:e,parent:null})},u=function e(t,n){return[t].concat(null==(r=n(t))?[]:function(t){return e(t,n)}(r));var r},d=function(e){var t=!1;return e.reduce((function(e,n){if(e&&n&&a(String(e.node),String(n.node))){var r=(c=n,l=u(e,(function(e){return e.parent})),s=u(c,(function(e){return e.parent})),d=l.findIndex((function(e){return s.includes(e)})),[l[d],l[d-1]]);i=r[1],(o=r[0]).children.splice(o.children.indexOf(i)+1,0,{node:" "}),t=!0}var o,i,c,l,s,d;return n})),t},f=function(e){if(!e)return null;var t=[],n=s(e,(function(e){e.type===i&&""!==e.node&&t.push(e)}));return t.length&&d(t)?function e(t){return Array.isArray(t.children)?t.type===l?r.Children.map(t.children.map(e),(function(e){return e})):r.createElement(t.node.type,t.node.props,r.Children.map(t.children.map(e),(function(e){return e}))):t.node}(n):e},b=function(e){var t=e.component,n=e.children;return r.createElement(t,{children:f(n)})};b.defaultProps={component:r.Fragment||"span"},t.CJKSpace=b},1251:function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,"a",(function(){return r}))},1252:function(e,t,n){"use strict";n.d(t,"a",(function(){return ve})),n.d(t,"b",(function(){return Se})),n.d(t,"c",(function(){return it})),n.d(t,"d",(function(){return at}));var r,a,o,i,c,l,s,u=n(103),d=n.n(u),f=n(30),b=n.n(f),p=n(29),h=n.n(p),m=n(24),v=n.n(m),g=n(447),O=n.n(g),j=n(26),y=n.n(j),w=n(28),C=n.n(w),x=n(17),k=n.n(x),S=n(23),A=n.n(S),T=n(27),I=n.n(T),R=n(40),E=n.n(R),N=n(123),B=n.n(N),z=n(0),L=n(3),P=n.n(L),_=n(51),M=n(476),D=n(48),U=n(1),F=n(667),V=n(424),G=n(448),q=n(59),H=n(874),W=n(1509),K=n(2386),Z=n(153),Q=n(170),Y=n(8),J=n(1540),X=n.n(J),$=n(105),ee=n(72),te=n.n(ee),ne=n(13),re=n.n(ne),ae=["newDarkColor","status","votedUpCount","onVoteUpClick","onVoteDownClick","onCancelClick"],oe=["disabled","onRef","children"],ie=["text","center"],ce=["count","className"],le=["chosenColor","fontSize"],se=["iconOrder","disabled","children","onChange"];function ue(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}var fe=!1,be=!1,pe=function(){var e=B()(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(be){e.next=3;break}return e.next=3,be=!0,D.a.ready().catch((function(){fe=!0}));case 3:if(!fe){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,D.a.dispatch("account/showLoginDialog",{next:t}).catch((function(e){return e}));case 7:if("object"!=typeof(n=e.sent)||"ERR_AUTH_ALREADYLOGIN"!==n.name&&"ERR_ACOUNT_NOTGUEST"!==n.name){e.next=11;break}return fe=!0,e.abrupt("return",fe);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(e){return function(){var t=B()(E.a.mark((function t(n,r){var a,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(n,r);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),400===t.t0.status&&18e4===t.t0.code&&D.a.supportsAction("base/unLockAccount").then((function(e){return e&&D.a.dispatch("base/unLockAccount")})),t.t0.toastMsg=(null===(a=t.t0.payload)||void 0===a||null===(o=a.error)||void 0===o?void 0:o.message)||t.t0.statusMessage,t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()},me=Object(z.createContext)({loginCheck:function(){},fetcher:function(){}}),ve=function(e){var t=e.loginCheck,n=e.loginCallbackUrl,r=e.contentType,a=e.contentId,o=e.actionType,i=e.zaContentType,c=e.children;if(!n&&!pe)throw new Error("loginCallbackUrl 或 loginCheck 必传其中一个, 不提供无法完成登录后页面回跳");var l=Object(M.b)(),s=Object(z.useMemo)((function(){return{loginCheck:t||function(){return pe(n)},fetcher:he(l),contentType:r,contentId:a,actionType:o,zaContentType:i}}),[t,l,n,r,a,o,i]);return Object(U.b)(me.Provider,{value:s,children:c})};function ge(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.call(this,t.apply(this,r))}}))}ve.propTypes={loginCheck:P.a.func,loginCallbackUrl:P.a.string,contentType:P.a.string,contentId:P.a.oneOfType([P.a.number,P.a.string]),actionType:P.a.string,zaContentType:P.a.string.isRequired};var Oe=function(){function e(t,n,r,a){A()(this,e),this.fetcher=a,this.contentType=t,this.contentId="".concat(n),this.actionType=r,this.path="https://www.zhihu.com/api/v4/zreaction"}return I()(e,[{key:"getParams",value:function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.content_type){case"articles":return Object.assign(Object.assign({},e),{},{action_value:"red_heart"===e.action_value?"like":e.action_value});default:return e}}(Object.assign({content_type:this.contentType,content_id:this.contentId,action_type:this.actionType,action_value:e},t))}}]),e}(),je=function(e){y()(n,e);var t=de(n);function n(e,r,a){return A()(this,n),t.call(this,e,r,"vote",a)}return I()(n,[{key:"getStatus",value:function(){return this.fetcher("".concat(this.path,"/count"),{query:this.getParams("up")})}},{key:"voteUp",value:function(){return this.fetcher(this.path,{method:"POST",body:this.getParams("up")})}},{key:"voteDown",value:function(){return this.fetcher(this.path,{method:"POST",body:this.getParams("down")})}},{key:"cancelUp",value:function(){return this.fetcher(this.path,{method:"DELETE",query:this.getParams("up")})}},{key:"cancelDown",value:function(){return this.fetcher(this.path,{method:"DELETE",query:this.getParams("down")})}}]),n}(Oe),ye=function(e){return B()(E.a.mark((function t(){var n,r,a,o,i=arguments;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,n=i.length,r=new Array(n),a=0;a<n;a++)r[a]=i[a];return t.next=4,e.apply(this,r);case 4:return(o=t.sent)&&(console.log("successToast",o),D.a.dispatch("ui/showToast",{text:o})),t.abrupt("return",o);case 9:t.prev=9,t.t0=t.catch(0),console.log("errorToast",t.t0&&t.t0.toastMsg||"服务忙，请稍后再试"),D.a.dispatch("ui/showToast",{icon:"fail",text:t.t0&&t.t0.toastMsg||"服务忙，请稍后再试"});case 13:case"end":return t.stop()}}),t,this,[[0,9]])})))},we=function(e){return B()(E.a.mark((function t(){var n,r,a,o,i=arguments;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.context){t.next=2;break}throw new Error("this.context 不存在, 是否忘记包装 <ToolBarProvider /> ?");case 2:return n=this.context.loginCheck||this.loginCheck,t.next=5,n.call(this);case 5:if(!t.sent){t.next=10;break}for(r=i.length,a=new Array(r),o=0;o<r;o++)a[o]=i[o];return t.next=9,e.apply(this,a);case 9:return t.abrupt("return",t.sent);case 10:return t.abrupt("return");case 11:case"end":return t.stop()}}),t,this)})))},Ce=function(e,t,n){return function(r){return B()(E.a.mark((function a(){var o,i,c,l,s=arguments;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(o=null,a.prev=1,this.state&&(o=Object.assign({},this.state),Array.isArray(n)&&0!==n.length&&n.forEach((function(e){delete o[e]}))),i=s.length,c=new Array(i),l=0;l<i;l++)c[l]=s[l];return a.next=6,r.apply(this,c);case 6:return a.abrupt("return",a.sent);case 9:if(a.prev=9,a.t0=a.catch(1),o&&this.setState(o),e&&e.call(this,a.t0,o),t){a.next=15;break}throw a.t0;case 15:case"end":return a.stop()}}),a,this,[[1,9]])})))}},xe=function(e){return B()(E.a.mark((function t(){var n,r,a,o,i,c,l=arguments;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props,r=n.disabled,a=n.disabledMessage,!r){t.next=4;break}return D.a.dispatch("ui/showToast",{text:a}),t.abrupt("return");case 4:for(o=l.length,i=new Array(o),c=0;c<o;c++)i[c]=l[c];return t.next=7,e.apply(this,i);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})))},ke=function(){var e=B()(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.supportsAction("iOS/hapticFeedback");case 2:if(!e.sent){e.next=4;break}D.a.dispatch("iOS/hapticFeedback");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=Object.freeze({NEUTRAL:Symbol("neutral"),VOTED_UP:Symbol("votedUp"),VOTED_DOWN:Symbol("votedDown"),VOTING_UP:Symbol("votingUp"),VOTING_DOWN:Symbol("votingDown"),CANCELING_UP:Symbol("cancelingUp"),CANCELING_DOWN:Symbol("cancelingDown")}),Ae=Se.NEUTRAL,Te=Se.VOTED_UP,Ie=Se.VOTED_DOWN,Re=Object.freeze({NEUTRAL:Ae,VOTED_UP:Te,VOTED_DOWN:Ie}),Ee=Se.VOTING_UP,Ne=Se.VOTING_DOWN,Be=Se.CANCELING_UP,ze=Se.CANCELING_DOWN;Object.freeze({VOTING_UP:Ee,VOTING_DOWN:Ne,CANCELING_UP:Be,CANCELING_DOWN:ze});var Le={type:"tween",duration:.2,ease:[0,0,.58,1]},Pe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(z.useRef)(e);return Object(z.useEffect)((function(){t.current=!1}),[]),t.current};function _e(e,t,n,r){var a=Object(F.a)(),o=a.colors,i=o.GBK99B,c=o.GBL01A,l=Pe(),s=e?n?106:95:n?85:44,u=n||r&&a.isDarkMode?i:c;return[{initial:{width:l&&t?s:0,opacity:t?1:0},animate:{width:s,opacity:1},exit:{width:0,opacity:0},transition:Le},{initial:!1,animate:{color:u,width:s},transition:Le}]}var Me=Object(z.forwardRef)((function(e,t){return Object(U.b)(q.Flex,Object.assign(Object.assign({role:"button",tabIndex:0},e),{},{ref:t,bg:"transparent",overflow:"hidden",height:"36px",fontWeight:"bold",fontSize:"12px",css:{position:"relative",userSelect:"none","&:active":{opacity:"0.5 !important"}}}))})),De=Object(G.a)(Me),Ue=Object(z.forwardRef)((function(e,t){return Object(U.b)(q.Flex,Object.assign(Object.assign({},e),{},{ref:t,flexDirection:"row",alignItems:"center",justifyContent:"center",overflow:"hidden",width:"100%",height:"100%",css:{position:"absolute",top:0,left:0}}))})),Fe=Object(G.a)(Ue),Ve=Object(Y.h)(r||(r=O()(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),Ge=Object(Y.h)(a||(a=O()(["\n  0% {\n    stroke-dasharray: 1, 95;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 85, 95;\n    stroke-dashoffset: -25;\n  }\n  100% {\n    stroke-dasharray: 85, 95;\n    stroke-dashoffset: -93;\n  }\n"]))),qe=function(){return Object(U.b)("svg",{width:15,height:15,viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",css:Object(Y.f)(o||(o=O()(["\n        fill: transparent;\n        stroke: currentColor;\n        stroke-width: 5;\n        stroke-dasharray: 85, 95;\n        stroke-dashoffset: -25;\n        animation: "," 2s ease 0.5s infinite,\n          "," 2s linear infinite;\n      "])),Ge,Ve),children:Object(U.b)("circle",{cx:"20",cy:"20",r:"15"})})},He=function(){return Object(U.c)("span",{css:{display:"inline-flex",alignItems:"center"},children:["​",Object(U.b)("svg",{viewBox:"0 0 35 35",width:15,height:15,css:Object(Y.f)(i||(i=O()(["\n          fill: currentColor;\n          animation: "," 1s steps(12) infinite;\n        "])),Ve),children:Object(U.c)("g",{fillRule:"evenodd",children:[Object(U.b)("path",{d:"M17.5 9c-.825 0-1.5-.675-1.5-1.5v-6c0-.825.675-1.5 1.5-1.5S19 .675 19 1.5v6c0 .825-.675 1.5-1.5 1.5",opacity:".65"}),Object(U.b)("path",{d:"M21.75 10.139a1.504 1.504 0 0 1-.549-2.05l3-5.195a1.504 1.504 0 0 1 2.049-.55c.715.413.962 1.335.549 2.05l-3 5.196a1.504 1.504 0 0 1-2.049.549",opacity:".75"}),Object(U.b)("path",{d:"M24.861 13.25a1.504 1.504 0 0 1 .55-2.049l5.195-3a1.504 1.504 0 0 1 2.05.549 1.504 1.504 0 0 1-.55 2.049l-5.196 3a1.504 1.504 0 0 1-2.049-.549",opacity:".85"}),Object(U.b)("path",{d:"M26 17.5c0-.825.675-1.5 1.5-1.5h6c.825 0 1.5.675 1.5 1.5s-.675 1.5-1.5 1.5h-6c-.825 0-1.5-.675-1.5-1.5",opacity:".9"}),Object(U.b)("path",{d:"M24.861 21.75a1.504 1.504 0 0 1 2.05-.549l5.195 3c.715.412.962 1.334.55 2.049a1.504 1.504 0 0 1-2.05.549l-5.196-3a1.504 1.504 0 0 1-.549-2.049",opacity:".2"}),Object(U.b)("path",{d:"M21.75 24.861a1.504 1.504 0 0 1 2.049.55l3 5.195a1.504 1.504 0 0 1-.549 2.05 1.504 1.504 0 0 1-2.049-.55l-3-5.196a1.504 1.504 0 0 1 .549-2.049",opacity:".25"}),Object(U.b)("path",{d:"M17.5 26c.825 0 1.5.675 1.5 1.5v6c0 .825-.675 1.5-1.5 1.5s-1.5-.675-1.5-1.5v-6c0-.825.675-1.5 1.5-1.5",opacity:".3"}),Object(U.b)("path",{d:"M13.25 24.861c.714.413.961 1.335.549 2.05l-3 5.195a1.504 1.504 0 0 1-2.049.55 1.504 1.504 0 0 1-.549-2.05l3-5.196a1.504 1.504 0 0 1 2.049-.549",opacity:".35"}),Object(U.b)("path",{d:"M10.139 21.75a1.504 1.504 0 0 1-.55 2.049l-5.195 3a1.504 1.504 0 0 1-2.05-.549 1.504 1.504 0 0 1 .55-2.049l5.196-3a1.504 1.504 0 0 1 2.049.549",opacity:".4"}),Object(U.b)("path",{d:"M9 17.5c0 .825-.675 1.5-1.5 1.5h-6C.675 19 0 18.325 0 17.5S.675 16 1.5 16h6c.825 0 1.5.675 1.5 1.5",opacity:".45"}),Object(U.b)("path",{d:"M10.139 13.25a1.504 1.504 0 0 1-2.05.549l-5.195-3a1.504 1.504 0 0 1-.55-2.049 1.504 1.504 0 0 1 2.05-.549l5.196 3c.714.412.961 1.335.549 2.049",opacity:".5"}),Object(U.b)("path",{d:"M13.25 10.139a1.504 1.504 0 0 1-2.049-.55l-3-5.195a1.504 1.504 0 0 1 .549-2.05 1.504 1.504 0 0 1 2.049.55l3 5.196a1.504 1.504 0 0 1-.549 2.049",opacity:".55"})]})})]})},We=function(){return Object(Q.b)().Android?Object(U.b)(qe,{}):Object(U.b)(He,{})},Ke=Object(z.forwardRef)((function(e,t){var n=e.newDarkColor,r=e.show,a=e.voted,o=e.loading,i=e.votedUpCount,c=e.onClick,l=_e(!0,r,a,n),s=ue(v.a,l,2),u=s[0],d=s[1],f=Object(F.a)(),b=i>0?"，总赞同数 ".concat(Object(Z.cnNiceNumber)(i)):"";return Object(U.b)(H.a,{children:r&&Object(U.b)(De,Object.assign(Object.assign({"aria-label":"".concat(a?"已赞同":"赞同").concat(b),ref:t},u),{},{onClick:o?null:c,children:Object(U.b)(Fe,Object.assign(Object.assign({},d),{},{children:o?Object(U.b)(We,{css:{marginLeft:a?0:5}}):Object(U.c)(U.a,{children:[Object(U.b)(W.a,{css:{width:14,height:14,marginRight:6},center:!0}),Object(U.c)(q.Text,{flexShrink:0,children:[a&&f&&n?"已赞同 ":"赞同 ",i>0&&Object(Z.cnNiceNumber)(i)]})]})}))}))})}));Ke.displayName="VoteUp";var Ze=Object(z.forwardRef)((function(e,t){var n=e.newDarkColor,r=e.show,a=e.voted,o=e.loading,i=e.onClick,c=_e(!1,r,a,n),l=ue(v.a,c,2),s=l[0],u=l[1];return Object(U.b)(H.a,{children:r&&Object(U.b)(De,Object.assign(Object.assign({"aria-label":"已反对",ref:t},s),{},{onClick:o?null:i,children:Object(U.b)(Fe,Object.assign(Object.assign({},u),{},{children:o?Object(U.b)(We,{}):Object(U.c)(U.a,{children:[Object(U.b)(K.a,{css:{width:14,height:14,marginRight:6},style:{marginRight:a?6:0},center:!0}),Object(U.b)(q.Text,{flexShrink:0,children:Boolean(a)&&"已反对"})]})}))}))})}));Ze.displayName="VoteDown";var Qe=(c={},h()(c,Se.VOTING_UP,[1,1,0,1,0,0]),h()(c,Se.VOTED_UP,[1,0,1,0,0,0]),h()(c,Se.VOTED_DOWN,[0,0,0,1,0,1]),h()(c,Se.NEUTRAL,[1,0,0,1,0,0]),c),Ye=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.current=e.current.map((function(e,t){return-1===n[t]?e:n[t]}))},Je=function(e){var t=Object(z.useRef)(null),n=Object(z.useRef)(null);return t.current?e!==t.current&&function(e,t){switch(t){case Se.VOTED_UP:return void Ye(e,1,0,1,0,-1,-1);case Se.VOTING_UP:return void Ye(e,1,1,0,1,-1,-1);case Se.CANCELING_UP:return void Ye(e,1,1,1,0,-1,-1);case Se.VOTED_DOWN:return void Ye(e,0,-1,-1,1,0,1);case Se.VOTING_DOWN:return void Ye(e,1,-1,-1,1,1,0);case Se.CANCELING_DOWN:return void Ye(e,0,-1,-1,1,1,1);case Se.NEUTRAL:default:Ye(e,1,0,0,1,0,0)}}(n,e):n.current=Qe[e],t.current=e,n.current},Xe=Object(z.forwardRef)((function(e,t){var n=e.newDarkColor,r=e.status,a=e.votedUpCount,o=e.onVoteUpClick,i=e.onVoteDownClick,c=e.onCancelClick,l=b()(e,ae),s=Object(F.a)(),u=s.colors,d=u.GBL01A,f=u.GBL07A,p=Je(r),h=ue(v.a,p,6),m=h[0],g=h[1],O=h[2],j=h[3],y=h[4],w=h[5],C=m&&j;return Object(U.c)(G.a.div,Object.assign(Object.assign({ref:t,css:{overflow:"hidden",position:"relative",display:"inline-flex",flexDirection:"row",alignItems:"center",height:36,borderRadius:18},initial:!1,animate:{backgroundColor:!C||n&&s.isDarkMode?d:Object(V.a)(d).alpha(.08)},transition:Le},l),{},{children:[Object(U.b)(_.a,{as:Ke,zaType:"Button",zaAction:O?"UnUpvote":"Upvote",newDarkColor:n,show:m,voted:O,votedUpCount:a,loading:g,onClick:g?null:O?c:o}),Boolean(C)&&Object(U.b)("div",{css:{background:f,height:18,width:1,opacity:.2}}),Object(U.b)(_.a,{as:Ze,zaType:"Button",zaAction:O?"UnDownvote":"Downvote",newDarkColor:n,show:j,voted:w,loading:y,onClick:y?null:w?c:i})]}))}));function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xe.propTypes={newDarkColor:P.a.bool,status:P.a.oneOf(Object.values(Se)).isRequired,votedUpCount:P.a.number,onVoteUpClick:P.a.func,onVoteDownClick:P.a.func,onCancelClick:P.a.func},Xe.displayName="VoteButtonBase";var et=function(e){y()(i,e);var t,n,r,a,o=de(i);function i(e){var t,n=e.defaultStatus,r=e.defaultVotedUpCount;A()(this,i),t=o.call(this),$e(d()(t),"onError",(function(e){t.props.onChange("error",t.state.votedUpCount,e)})),t.state={status:n||Se.VOTING_UP,votedUpCount:n?r:0},t.componentDidMount=ye(t.componentDidMount).bind(d()(t));var a,c=ge(xe,ye,we,Ce(t.onError)),l=ge((a=!1,function(e){return B()(E.a.mark((function t(){var n,r,o,i,c=arguments;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.context){t.next=2;break}throw new Error("this.context 不存在, 是否忘记包装 <ToolBarProvider /> ?");case 2:for(a||ke(),n=c.length,r=new Array(n),o=0;o<n;o++)r[o]=c[o];return t.next=6,e.apply(this,r);case 6:return i=t.sent,a&&ke(),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t,this)})))}),c);return t.handleVoteUp=l(t.handleVoteUp).bind(d()(t)),t.handleVoteDown=c(t.handleVoteDown).bind(d()(t)),t.handleCancel=c(t.handleCancel).bind(d()(t)),t}return I()(i,[{key:"componentDidMount",value:(a=B()(E.a.mark((function e(){var t,n,r,a,o,i,c,l,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fetcher=new je((null===(t=this.context)||void 0===t?void 0:t.contentType)||this.props.contentType,(null===(n=this.context)||void 0===n?void 0:n.contentId)||this.props.contentId,null===(r=this.context)||void 0===r?void 0:r.fetcher),this.state.status!==Se.VOTING_UP){e.next=21;break}return e.prev=2,e.next=5,this.fetcher.getStatus();case 5:a=e.sent,o=a.isVotedUp,i=a.isVotedDown,c=a.votedUpCount,l=void 0===c?0:c,s=null,s=o?Se.VOTED_UP:i?Se.VOTED_DOWN:Se.NEUTRAL,this.setState({status:s,votedUpCount:l}),e.next=21;break;case 15:throw e.prev=15,e.t0=e.catch(2),this.setState({status:Se.NEUTRAL,votedUpCount:0}),this.onError(e.t0),delete e.t0.toastMsg,e.t0;case 21:case"end":return e.stop()}}),e,this,[[2,15]])}))),function(){return a.apply(this,arguments)})},{key:"handleVoteUp",value:(r=B()(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({status:Se.VOTING_UP}),e.next=3,this.fetcher.voteUp();case 3:return this.setState((function(e){var n=e.votedUpCount+1;return t.props.onChange("voteUp",n),{status:Se.VOTED_UP,votedUpCount:n}})),e.abrupt("return","已赞同");case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"handleVoteDown",value:(n=B()(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({status:Se.VOTING_DOWN}),e.next=3,this.fetcher.voteDown();case 3:return this.props.onChange("voteDown",this.state.votedUpCount),this.setState({status:Se.VOTED_DOWN}),e.abrupt("return","已反对");case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handleCancel",value:(t=B()(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.status,n=this.props.onChange,t!==Se.VOTED_UP){e.next=8;break}return this.setState({status:Se.CANCELING_UP}),e.next=6,this.fetcher.cancelUp();case 6:return this.setState((function(e){var t=e.votedUpCount-1;return n("unVoteUp",t),{status:Se.NEUTRAL,votedUpCount:t}})),e.abrupt("return","已取消");case 8:if(t!==Se.VOTED_DOWN){e.next=15;break}return n("unVoteDown",this.state.votedUpCount),this.setState({status:Se.CANCELING_DOWN}),e.next=13,this.fetcher.cancelDown();case 13:return this.setState({status:Se.NEUTRAL}),e.abrupt("return","已取消");case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.status,n=e.votedUpCount,r=this.props.contentId,a=this.context,o=a.contentId,i=a.zaContentType;return Object(U.b)(_.b,{block:"ZReactionVoteButton",content:{id:"".concat(o||r),type:i},children:Object(U.b)(Xe,{status:t,votedUpCount:n,onVoteUpClick:this.handleVoteUp,onVoteDownClick:this.handleVoteDown,onCancelClick:this.handleCancel})})}}]),i}(z.Component);$e(et,"contextType",me),et.propTypes={defaultVotedUpCount:P.a.number,defaultStatus:P.a.oneOf(Object.values(Re)),contentType:P.a.string,contentId:P.a.string,disabled:P.a.bool,disabledMessage:P.a.string,onChange:P.a.func},et.defaultProps={onChange:function(){}};var tt=function(e){var t,n=ue(v.a,e,2),r=n[0],a=n[1];return{voteUpCount:r,status:a,condition:(t=a,t===Se.VOTED_UP?1:t===Se.VOTED_DOWN?-1:0)}},nt=function(e,t,n){var r=Object(z.useRef)(!0),a=Object(z.useRef)(tt([e,t])),o=Object(z.useReducer)((function(e,t){return a.current=function(e,t){var n=e.condition,r=e.voteUpCount,a=1===n,o=-1===n;switch(t.type){case"set":return Object.assign(Object.assign({},e),t.payload);case"reset":return tt(t.payload);case"votingUp":return Object.assign(Object.assign({},e),{},{status:Se.VOTING_UP,condition:o?-1:0});case"votedUp":return{status:Se.VOTED_UP,condition:1,voteUpCount:r+1};case"votingDown":return Object.assign(Object.assign({},e),{},{status:Se.VOTING_DOWN,condition:a?1:0});case"votedDown":return{status:Se.VOTED_DOWN,condition:-1,voteUpCount:a?r-1:r};case"canceling":return a?Object.assign(Object.assign({},e),{},{status:Se.CANCELING_UP}):o?Object.assign(Object.assign({},e),{},{status:Se.CANCELING_DOWN}):e;case"canceled":return a?{status:Se.NEUTRAL,condition:0,voteUpCount:e.voteUpCount-1}:o?Object.assign(Object.assign({},e),{},{status:Se.NEUTRAL,condition:0}):e;default:return e}}(e,t),a.current}),[e,t],(function(){return a.current=tt.apply(void 0,arguments),a.current})),i=ue(v.a,o,2),c=i[0],l=i[1],s=Object($.a)((function(e,t){return l({type:e,payload:t})})),u=Object($.a)((function(){return a.current}));return Object(z.useEffect)((function(){r.current?r.current=!1:s("reset",[e,t])}),[s,e,t]),[c,s,u,function(e){return Object($.a)(B()(E.a.mark((function t(){var r,a=arguments;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.assign({},c),t.prev=1,t.next=4,e.apply(void 0,a);case 4:t.next=11;break;case 6:throw t.prev=6,t.t0=t.catch(1),s("set",r),n("error",u().voteUpCount,t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,6]])}))))}]},rt={reactionFirst:!0},at=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X.a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rt,a=r.reactionFirst,o=Object(z.useContext)(me),i=nt(e,t,n),c=ue(v.a,i,4),l=c[0],s=l.voteUpCount,u=l.status,d=l.condition,f=c[1],b=c[2],p=c[3],h=Object(z.useMemo)((function(){return new je(o.contentType,o.contentId,o.fetcher)}),[o]),m=p(B()(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:return f(a?"votedUp":"votingUp"),e.next=5,h.voteUp();case 5:a||f("votedUp"),n("voteUp",b().voteUpCount);case 7:case"end":return e.stop()}}),e)})))),g=p(B()(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:return f(a?"votedDown":"votingDown"),e.next=5,h.voteDown();case 5:a||f("votedDown"),n("voteDown",b().voteUpCount);case 7:case"end":return e.stop()}}),e)})))),O=p(B()(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:if(t=u===Re.VOTED_UP,f(a?"canceled":"canceling"),!t){e.next=9;break}return e.next=7,h.cancelUp();case 7:e.next=11;break;case 9:return e.next=11,h.cancelDown();case 11:a||f("canceled"),n(t?"unVoteUp":"unVoteDown",b().voteUpCount);case 13:case"end":return e.stop()}}),e)}))));return{voteUpCount:s,status:u,voteUp:m,voteDown:g,cancel:O,isVotedUp:1===d,isVotedDown:-1===d,isNeutral:0===d}},ot=function(e){y()(n,e);var t=de(n);function n(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"emojis",o=arguments.length>3?arguments[3]:void 0;return A()(this,n),t.call(this,e,r,a,o)}return I()(n,[{key:"chosen",value:function(e){return this.fetcher(this.path,{method:"POST",body:this.getParams(e)})}},{key:"unchosen",value:function(e){return this.fetcher(this.path,{method:"DELETE",query:this.getParams(e)})}}]),n}(Oe),it=function(e){var t=e.currentIsLiked,n=e.currentLikedCount,r=e.onChange,a=void 0===r?X.a:r,o=Object(z.useContext)(me),i=Object(z.useState)(t),c=ue(v.a,i,2),l=c[0],s=c[1],u=Object(z.useState)(n||0),d=ue(v.a,u,2),f=d[0],b=d[1],p=Object(z.useMemo)((function(){return new ot(o.contentType,o.contentId,"like",o.fetcher)}),[o]);return{like:Object($.a)(B()(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:return s(!0),b(f+1),e.prev=4,e.next=7,p.chosen("like");case 7:a("like",f),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),s(!1),b(f-1);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))),unLike:Object($.a)(B()(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.loginCheck()){e.next=2;break}return e.abrupt("return");case 2:return s(!1),b(f-1),e.prev=4,e.next=7,p.unchosen("like");case 7:a("unlike",f),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),s(!0),b(f+1);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))),isLiked:l,count:f}},ct=function(e){return"//pic1.zhimg.com/v2-".concat(e,".png")},lt={red_heart:ct("3170e81c93aa76c576269af8e8a3e1f5"),cry_face:ct("6a33de7424ceafa6d086d9f832e36096"),hug:ct("7ca1782e2233623e752957471b568346"),onlooker:ct("e642ad48be2eb54121ac2dacf3b30d72"),lemon:ct("1aa9a01f31b63bd616b9b34aac0eb737"),doge:ct("57c51b6093cd2cfcf9432da7389c8ffb"),tears_face:ct("7238f26b4e7fc6567a98f1fec600b451"),thinking_face:ct("5d3f5d64e3ea9e022ef8580eeed7c3cc"),trolling_face:ct("d653b16e616083ca3d147b0db06172ff"),pleading_face:ct("9b92a403966de6b93bc2ca961512da23"),rolling_eyes_face:ct("0069b69ea0022451cb82c5702bd3d029")};Object.keys(lt).forEach((function(e){lt[e.toUpperCase()]=lt[e]}));var st=Object(z.createContext)({}),ut=function(e){var t=e.name,n=e.count,r=e.totalCount,a=e.actionList,o=e.children,i=Object(z.useMemo)((function(){return{name:t,count:n,totalCount:r,actionList:a}}),[t,n,r,a]);return Object(U.b)(st.Provider,{value:i,children:o})};function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=function(e){y()(r,e);var t,n=de(r);function r(e){var t;A()(this,r),t=n.call(this),dt(d()(t),"onRef",(function(e){t.domRef=e,t.props.onRef(e)})),dt(d()(t),"addCheckBeforeClick",(function(e){if(e.checkBeforeClick){var n=t.handleClick;t.handleClick=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];t.props.checkBeforeClick?t.props.checkBeforeClick((function(){n.apply(d()(t),r)})):n.apply(d()(t),r)}}})),dt(d()(t),"customShowToast",(function(e){return B()(E.a.mark((function t(){var n,r,a,o,i=arguments;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,n=i.length,r=new Array(n),a=0;a<n;a++)r[a]=i[a];return t.next=4,e.apply(this,r);case 4:(o=t.sent)&&this.props.onShowToast&&this.props.onShowToast(o),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.props.onShowToast&&this.props.onShowToast(t.t0&&t.t0.toastMsg||"服务忙，请稍后再试");case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))})),dt(d()(t),"getTotalCount",(function(e){return e&&0!==e.length?e.reduce((function(e,t){return e+=t.count}),0):0})),dt(d()(t),"formatActionList",(function(e,n){return e&&0!==e.length?e.map((function(e,r){return t.actionListIndexMap[e.name]=r,Object.assign(Object.assign({},e),{},{chosen:e.name===n})})):[]})),dt(d()(t),"changeActionList",(function(e,t,n){return e.map((function(e){var r=e.name,a=e.chosen,o=e.count;a&&(o-=1);var i=r===t;return{name:r,chosen:i,count:i?n:o}}))})),dt(d()(t),"doChange",(function(e){t.setState((function(n){var r=n.name,a=n.actionList,o=0;if(e){var i=e===r?0:1;o=a[t.actionListIndexMap[e]].count+i}var c=t.changeActionList(a,e,o);return{name:e,count:o,actionList:c,totalCount:t.getTotalCount(c)}}))})),dt(d()(t),"closePopover",(function(){t.setState({showPopover:!1})})),dt(d()(t),"onError",(function(e){return t.props.onChange("error",Object.assign({},t.state),e)}));var a=e.defaultName,o=e.defaultCount,i=e.defaultActionList;t.actionListIndexMap={},t.state={name:a,count:o||0,actionList:t.formatActionList(i,a)||[],totalCount:t.getTotalCount(i)};var c=ge(e.onShowToast?t.customShowToast:ye,we,Ce(t.onError,!1));return t.handleClick=c(t.handleClick).bind(d()(t)),t.addCheckBeforeClick(e),t}return I()(r,[{key:"componentDidMount",value:function(){var e=this.props.toolBar,t=e.contentType,n=e.contentId,r=e.actionType,a=e.fetcher;this.fetcher=new ot(t,n,r,a)}},{key:"loginCheck",value:function(){return this.props.toolBar.loginCheck()}},{key:"doFetch",value:function(e){return e?this.fetcher.chosen(e):this.fetcher.unchosen(null)}},{key:"afterChange",value:function(e){this.props.onChange(e?"chosen":"unchosen",Object.assign({},this.state))}},{key:"handleClick",value:(t=B()(E.a.mark((function e(){var t,n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.disabled){e.next=2;break}return e.abrupt("return");case 2:return t=this.state,n=t.name,r=t.actionList,a=n?null:r[0].name,this.doChange(a,!1),a&&ke(),e.next=8,this.doFetch(a);case 8:this.afterChange(a);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this.props,n=t.disabled,r=(t.onRef,t.children),a=b()(t,oe),o=this.state,i=o.name,c=o.count,l=o.totalCount,s=o.actionList;return Object(U.b)(ut,{name:i,count:c,totalCount:l,actionList:s,children:Object(U.b)(_.b,{block:"ZReactionReactionButton",children:Object(U.b)(_.a,Object.assign(Object.assign({as:q.Box,zaType:"Button",zaAction:i?"UnLike":"Like",zaText:i||(null===(e=s[0])||void 0===e?void 0:e.name),ref:this.onRef,css:{position:"relative",display:"flex","&:active":{opacity:.5}},style:{opacity:n?.5:1}},a),{},{role:"button",tabIndex:0,"aria-label":"".concat(i?"已喜欢":"喜欢").concat(l>0?"，共被喜欢".concat(Object(Z.cnNiceNumber)(l),"次"):""),onClick:this.handleClick,children:r}))})})}}]),r}(z.Component),bt=function(e){var t=Object(z.useContext)(me);return Object(U.b)(ft,Object.assign({toolBar:t},e))};bt.propTypes={defaultName:P.a.oneOf(Object.keys(lt)),defaultCount:P.a.number,defaultActionList:P.a.arrayOf(P.a.shape({name:P.a.oneOfType([P.a.number,P.a.string]),count:P.a.number})),disabled:P.a.bool,onRef:P.a.func,onChange:P.a.func,onShowToast:P.a.func,checkBeforeClick:P.a.func},bt.defaultProps={onRef:te.a,onChange:te.a};var pt=Object(z.forwardRef)((function(e,t){var n=e.size,r=e.text,a=e.center,o=b()(e,ie);r&&(n="1.2em");var i=Object(U.b)("svg",Object.assign(Object.assign({ref:t},o),n&&{width:n,height:n}));return a?Object(U.c)("span",{ref:t,style:pt.strutStyle,children:["​",i]}):i}));pt.defaultProps={fill:"currentColor"},pt.strutStyle={display:"inline-flex",alignItems:"center"};var ht=Object(Y.h)(l||(l=O()(["\n  0% { opacity: 0; height: 225%; transform: translateY(100%); }\n  46% { opacity: 1; height: 100%; transform: translateY(0); }\n  100% { opacity: 0 }\n"]))),mt=Object(Y.h)(s||(s=O()(["\n  0% { opacity: 0; transform: scale(1) translateY(50%); }\n  38% { transform: scale(.83, 1) translateY(-8.8%); }\n  54% { opacity: 1; transform: scale(.94, 1) translateY(-14.7%); }\n  62% { transform: scale(1) translateY(-11.7%); }\n  75% { transform: scale(1.11, .94) translateY(20%); }\n  100% { transform: scale(1) translateY(0); }\n"]))),vt=function(e){var t=e.freeze,n=e.size,r=e.left,a=e.right,o=Object(F.a)().colors.GRD01A,i=Math.round(.16*n);return Object(U.b)("div",{css:{position:"absolute",width:i,height:i,top:r||a?"-18%":"-28%",left:r?"2%":a?"auto":"42%",right:a?"2%":"auto",transform:r?"rotate(-25deg)":a?"rotate(-335deg)":"none",transformOrigin:"50% ".concat(.08*n,"px")},children:Object(U.b)("div",{css:{background:o,height:"100%",minHeight:"100%",borderRadius:.08*n,opacity:0,animation:t?null:"".concat(ht," .5s linear forwards")}})})},gt=Object(z.forwardRef)((function(e,t){var n=e.className,r=e.size,a=e.noAnimation,o=Object(F.a)().colors.GRD01A,i=Object(z.useRef)(a).current;return Object(U.c)("div",{ref:t,className:re()("HeartIcon",n),css:{position:"absolute",width:r,height:r},children:[Object(U.b)(vt,{freeze:i,size:r,left:!0}),Object(U.b)(vt,{freeze:i,size:r}),Object(U.b)(vt,{freeze:i,size:r,right:!0}),Object(U.b)(pt,{size:r,viewBox:"0 0 24 24",css:{position:"absolute",top:0,left:0,fill:o,stroke:o,strokeWidth:"1.5px",animation:i?null:"".concat(mt," .5s linear forwards")},children:Object(U.b)("path",{d:"M21.3871 10.8644C21.7339 6.89688 18.9681 4.06581 15.9842 4.06581C14.4071 4.06581 12.8344 4.94922 11.9967 6.05139C11.2104 4.96015 9.59294 4.06582 8.01579 4.06582C5.03186 4.06582 2.26571 6.89693 2.61294 10.8644C2.99689 15.2513 9.96356 21.0153 11.9917 21.0153C14.0197 21.0153 21.0083 15.1977 21.3871 10.8644Z",strokeLinecap:"round",strokeLinejoin:"round"})})]})})),Ot=Object(z.forwardRef)((function(e,t){var n=e.className;return Object(U.b)(pt,{ref:t,className:re()("OutLineIcon",n),viewBox:"0 0 24 24",css:{position:"absolute",top:0,left:0,fill:"none",stroke:"currentColor",strokeWidth:"1.5px"},children:Object(U.b)("path",{d:"M21.3871 10.8644C21.7339 6.89688 18.9681 4.06581 15.9842 4.06581C14.4071 4.06581 12.8344 4.94922 11.9967 6.05139C11.2104 4.96015 9.59294 4.06582 8.01579 4.06582C5.03186 4.06582 2.26571 6.89693 2.61294 10.8644C2.99689 15.2513 9.96356 21.0153 11.9917 21.0153C14.0197 21.0153 21.0083 15.1977 21.3871 10.8644Z",strokeLinecap:"round",strokeLinejoin:"round"})})}));Object(G.a)(gt),Object(G.a)(Ot);P.a.string,P.a.number;var jt=function(e){var t=e.count,n=e.className,r=b()(e,ce);return Object(U.b)(q.Text,Object.assign(Object.assign({className:re()("ReactionCount",n)},r),{},{children:t?Object(Z.cnNiceNumber)(t):"喜欢"}))};(function(e){var t=e.chosenColor,n=e.fontSize,r=b()(e,le),a=Object(F.a)().colors.GBK03A,o=function(){var e=Object(z.useContext)(st),t=e.name,n=e.count,r=e.totalCount,a=t===e.actionList[0].name,o=!(t&&!a);return{count:o?r:n,chosen:Boolean(t),isHeart:a,isTotalCount:o}}(),i=o.count,c=o.chosen&&t||a;return Object(U.b)(jt,Object.assign({css:{color:c,fontSize:n},count:i},r))}).propTypes={chosenColor:P.a.string};var yt=Object(z.createContext)({});P.a.func,P.a.string,P.a.string.isRequired,P.a.string.isRequired,P.a.object.isRequired;var wt=function(e,t,n){var r=Object(z.useContext)(yt),a=r.getData,o=r.fetcher,i=r.loginCheck,c=o(e),l=a(e),s=Object(z.useState)(!1),u=ue(v.a,s,2),d=u[0],f=u[1],b=Object(z.useState)(l.count||0),p=ue(v.a,b,2),h=p[0],m=p[1],g=function(e){var t=Object(z.useState)((function(){return e.options?Object.keys(e.options).reduce((function(t,n){return t[n]=Object.assign({},e.options[n]),e.reactedOption&&(t[n].selected=!0),t}),{}):null})),n=ue(v.a,t,2),r=n[0],a=n[1];return{options:r,setOptions:a,selectOption:function(e){var t=Object.keys(r).reduce((function(t,n){var a=Object.assign({count:0},r[n]);return a.selected&&(a.selected=!1,a.count--),n===e&&(a.selected=!0,a.count++),t.totalCount+=a.count,a.loading=!1,t.data[n]=a,t}),{data:{},totalCount:0});return a(t.data),t},setOptionLoading:function(e){var t=Object.keys(r).reduce((function(t,n){var a=Object.assign({count:0},r[n]);return a.selected||n===e?a.loading=!0:a.loading=!1,t[n]=a,t}),{});a(t)}}}(l),O=g.options,j=g.setOptions,y=g.selectOption,w=g.setOptionLoading,C=Boolean(O),x=Object(z.useState)(C?l.reactedOption:l.reacted),k=ue(v.a,x,2),S=k[0],A=k[1],T=function(){f(!1),m(h),A(S),j(O)},I=function(e){f(!0),C&&w(e)},R=function(){var e=B()(E.a.mark((function e(r){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i()){e.next=2;break}return e.abrupt("return");case 2:if(a=function(){f(!1);var e=C?y(r):{data:null,totalCount:S?h:h+1};m(e.totalCount);var t=!C||r;A(t),n(r,{totalCount:e.totalCount,options:e.data,selected:t})},e.prev=3,t?a():I(r),e.t0=!S,!e.t0){e.next=9;break}return e.next=9,c.select(r);case 9:!t&&a(),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(3),T(),n("error",{totalCount:h,selected:S,options:O},e.t1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),N=Object($.a)(B()(E.a.mark((function e(){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i()){e.next=2;break}return e.abrupt("return");case 2:if(r=function(){f(!1);var e=C?y():{data:null,totalCount:S?h-1:h};m(e.totalCount);var t=!!C&&null;A(t),n("cancel",{canceled:S,totalCount:e.totalCount,options:e.data,selected:t})},e.prev=3,t?r():I(),e.t0=S,!e.t0){e.next=9;break}return e.next=9,c.cancel(S);case 9:!t&&r(),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(3),T(),n("error",{totalCount:h,selected:S,options:O},e.t1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])}))));return{totalCount:h,loading:d,selected:S,options:O,select:R,cancel:N}};P.a.bool,P.a.func;var Ct=["RED_HEART","CRY_FACE","HUG","ONLOOKER"],xt=function(e,t){return e.map((function(e){var n=t[e]||{},r=n.count;return{name:e,chosen:n.selected,count:r}}))};Object(z.forwardRef)((function(e,t){var n,r,a=e.iconOrder,o=void 0===a?Ct:a,i=e.disabled,c=e.children,l=e.onChange,s=void 0===l?te.a:l,u=b()(e,se),d=Object(z.useRef)(null),f=Object(z.useRef)(null),p=wt("EMOJI",!0,(function(e,t,n){s(e,Object.assign(Object.assign({},t),{},{actionList:xt(o,t.options)}),n)})),h=p.options,m=p.selected,v=p.totalCount,g=p.select,O=p.cancel;f.current=o;var j=m,y=(null===(n=h[m])||void 0===n?void 0:n.count)||0,w=function(e,t){return Object(z.useMemo)((function(){return xt(e,t)}),[t])}(o,h),C=Object(z.useCallback)((function(e){"function"==typeof t?null==t||t(e):t&&(t.current=e),d.current=e}),[]),x=Object($.a)((function(){i||(!m&&ke(),m?O():g(w[0].name))}));return Object(U.b)(ut,{name:m,count:y,totalCount:v,actionList:w,children:Object(U.b)(_.a,Object.assign(Object.assign({as:q.Box,zaType:"Button",zaAction:j?"UnLike":"Like",zaText:j||(null===(r=w[0])||void 0===r?void 0:r.name),ref:C,css:{position:"relative",display:"flex","&:active":{opacity:.5}}},u),{},{role:"button",tabIndex:0,"aria-label":"".concat(j?"已喜欢":"喜欢").concat(v>0?"，共被喜欢".concat(Object(Z.cnNiceNumber)(v),"次"):""),onClick:x,children:c}))})})).propTypes={iconOrder:P.a.arrayOf(P.a.string),disabled:P.a.bool,onChange:P.a.func}},1253:function(e,t,n){"use strict";t.a=function(e){return e.componentList.filter(Boolean).filter((function(e){var t=e.component;return Boolean(t)})).map((function(e){return e.component}))}},1254:function(e,t,n){"use strict";var r=n(35),a=n(1),o=n(0),i=n(937),c=n(1019);function l(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var s=function(e){return"plain"===e||"special-plain"===e},u=s,d=function(e){return"special-plain"===e};t.a=function(e,t,n){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=Object(o.useMemo)((function(){var t;if(Object(c.isCoCreateRelation)(f)){var r=!d(e);t=Object(c.renderDualAuthor)(e,n,f,r)}else t=!d(e)&&Object(a.b)(i.a,Object.assign(Object.assign({},u(e)&&{preset:"plain"}),{},{author:n,userLinkV2:!0}),"authorInfo");return s(e)?[t,null]:[[t,null],null]}),[f,e,n]),p=l(r.a,b,2),h=p[0],m=p[1];return[h,m]}},1255:function(e,t,n){},1256:function(e,t,n){"use strict";(function(t){function n(e){a.length||(r(),!0),a[a.length]=e}e.exports=n;var r,a=[],o=0;function i(){for(;o<a.length;){var e=o;if(o+=1,a[e].call(),o>1024){for(var t=0,n=a.length-o;t<n;t++)a[t]=a[t+o];a.length-=o,o=0}}a.length=0,o=0,!1}var c,l,s,u=void 0!==t?t:self,d=u.MutationObserver||u.WebKitMutationObserver;function f(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof d?(c=1,l=new d(i),s=document.createTextNode(""),l.observe(s,{characterData:!0}),r=function(){c=-c,s.data=c}):r=f(i),n.requestFlush=r,n.makeRequestCallFromTimer=f}).call(this,n(133))},1257:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1258);n(1031),n(1032);var a=r.makeExports(!1),o=a.StyleSheet,i=a.StyleSheetServer,c=a.StyleSheetTestUtils,l=a.css,s=a.minify,u=a.flushToStyleTag,d=a.injectAndGetClassName,f=a.defaultSelectorHandlers,b=a.reset,p=a.resetInjectedStyle;t.StyleSheet=o,t.StyleSheetServer=i,t.StyleSheetTestUtils=c,t.css=l,t.minify=s,t.flushToStyleTag=u,t.injectAndGetClassName=d,t.defaultSelectorHandlers=f,t.reset=b,t.resetInjectedStyle=p},1258:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=r(n(1031)),o=r(n(1032));function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=/([A-Z])/g,d=function(e){return"-".concat(e.toLowerCase())},f={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var b=["Webkit","ms","Moz","O"];Object.keys(f).forEach((function(e){b.forEach((function(t){f[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=f[e]}))}));var p=function(e,t){return"number"==typeof t?f[e]?""+t:t+"px":""+t},h=function(e,t){return v(p(e,t))},m=function(e,t){return a(e).toString(36)},v=function(e){return"!"===e[e.length-10]&&" !important"===e.slice(-11)?e:"".concat(e," !important")},g="undefined"!=typeof Map,O=function(){function e(){this.elements={},this.keyOrder=[]}var t=e.prototype;return t.forEach=function(e){for(var t=0;t<this.keyOrder.length;t++)e(this.elements[this.keyOrder[t]],this.keyOrder[t])},t.set=function(t,n,r){if(this.elements.hasOwnProperty(t)){if(r){var a=this.keyOrder.indexOf(t);this.keyOrder.splice(a,1),this.keyOrder.push(t)}}else this.keyOrder.push(t);if(null!=n){if(g&&n instanceof Map||n instanceof e){var o=this.elements.hasOwnProperty(t)?this.elements[t]:new e;return n.forEach((function(e,t){o.set(t,e,r)})),void(this.elements[t]=o)}if(Array.isArray(n)||"object"!==i(n))this.elements[t]=n;else{for(var c=this.elements.hasOwnProperty(t)?this.elements[t]:new e,l=Object.keys(n),s=0;s<l.length;s+=1)c.set(l[s],n[l[s]],r);this.elements[t]=c}}else this.elements[t]=n},t.get=function(e){return this.elements[e]},t.has=function(e){return this.elements.hasOwnProperty(e)},t.addStyleType=function(t){var n=this;if(g&&t instanceof Map||t instanceof e)t.forEach((function(e,t){n.set(t,e,!0)}));else for(var r=Object.keys(t),a=0;a<r.length;a++)this.set(r[a],t[r[a]],!0)},e}();function j(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e,t){return e(t={exports:{}},t.exports),t.exports}var w=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}));j(w);var C=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t)){for(var a={},o=e[t],i=(0,r.default)(t),c=Object.keys(n),l=0;l<c.length;l++){var s=c[l];if(s===t)for(var u=0;u<o.length;u++)a[o[u]+i]=n[t];a[s]=n[s]}return a}return n};var n,r=(n=w)&&n.__esModule?n:{default:n}}));j(C);var x=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,a){for(var o=0,i=e.length;o<i;++o){var c=e[o](t,n,r,a);if(c)return c}}}));j(x);var k=y((function(e,t){function n(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Array.isArray(t))for(var r=0,a=t.length;r<a;++r)n(e,t[r]);else n(e,t)}}));j(k);var S=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Object&&!Array.isArray(e)}}));j(S);var A=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prefixMap,i=e.plugins;return function e(c){for(var l in c){var s=c[l];if((0,o.default)(s))c[l]=e(s);else if(Array.isArray(s)){for(var u=[],d=0,f=s.length;d<f;++d){var b=(0,r.default)(i,l,s[d],c,t);(0,a.default)(u,b||s[d])}u.length>0&&(c[l]=u)}else{var p=(0,r.default)(i,l,s,c,t);p&&(c[l]=p),c=(0,n.default)(t,l,c)}}return c}};var n=i(C),r=i(x),a=i(k),o=i(S);function i(e){return e&&e.__esModule?e:{default:e}}}))),T=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&"text"===t)return["-webkit-text","text"]}}))),I=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&n.test(e)};var n=/-webkit-|-moz-|-ms-/;e.exports=t.default}));j(I);var R=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("calc(")>-1)return a.map((function(e){return t.replace(/calc\(/g,e+"calc(")}))};var n,r=(n=I)&&n.__esModule?n:{default:n};var a=["-webkit-","-moz-",""]}))),E=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("cross-fade(")>-1)return a.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var n,r=(n=I)&&n.__esModule?n:{default:n};var a=["-webkit-",""]}))),N=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&r.hasOwnProperty(t))return n.map((function(e){return e+t}))};var n=["-webkit-","-moz-",""],r={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0}}))),B=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("filter(")>-1)return a.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var n,r=(n=I)&&n.__esModule?n:{default:n};var a=["-webkit-",""]}))),z=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&n.hasOwnProperty(t))return n[t]};var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]}}))),L=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){Object.prototype.hasOwnProperty.call(r,e)&&(i[r[e]]=n[t]||t);if("flex"===e){if(Object.prototype.hasOwnProperty.call(a,t))return void(i.msFlex=a[t]);if(o.test(t))return void(i.msFlex=t+" 1 0%");var c=t.split(/\s/);switch(c.length){case 1:return void(i.msFlex="1 1 "+t);case 2:return void(o.test(c[1])?i.msFlex=c[0]+" "+c[1]+" 0%":i.msFlex=c[0]+" 1 "+c[1]);default:i.msFlex=t}}};var n={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},r={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"},a={auto:"1 1 auto",inherit:"inherit",initial:"0 1 auto",none:"0 0 auto",unset:"unset"},o=/^\d+(\.\d+)?$/}))),P=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){"flexDirection"===e&&"string"==typeof t&&(t.indexOf("column")>-1?a.WebkitBoxOrient="vertical":a.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?a.WebkitBoxDirection="reverse":a.WebkitBoxDirection="normal");r.hasOwnProperty(e)&&(a[r[e]]=n[t]||t)};var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"}}))),_=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&o.test(t))return a.map((function(e){return t.replace(o,(function(t){return e+t}))}))};var n,r=(n=I)&&n.__esModule?n:{default:n};var a=["-webkit-","-moz-",""],o=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi}))),M=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function r(e){return"number"==typeof e&&!isNaN(e)}t.default=function(e,t,n){if("display"===e&&t in o)return o[t];if(e in i){(0,i[e])(t,n)}};var a=["center","end","start","stretch"],o={"inline-grid":["-ms-inline-grid","inline-grid"],grid:["-ms-grid","grid"]},i={alignSelf:function(e,t){a.indexOf(e)>-1&&(t.msGridRowAlign=e)},gridColumn:function(e,t){if(r(e))t.msGridColumn=e;else{var a=e.split("/").map((function(e){return+e})),o=n(a,2),c=o[0],l=o[1];i.gridColumnStart(c,t),i.gridColumnEnd(l,t)}},gridColumnEnd:function(e,t){var n=t.msGridColumn;r(e)&&r(n)&&(t.msGridColumnSpan=e-n)},gridColumnStart:function(e,t){r(e)&&(t.msGridColumn=e)},gridRow:function(e,t){if(r(e))t.msGridRow=e;else{var a=e.split("/").map((function(e){return+e})),o=n(a,2),c=o[0],l=o[1];i.gridRowStart(c,t),i.gridRowEnd(l,t)}},gridRowEnd:function(e,t){var n=t.msGridRow;r(e)&&r(n)&&(t.msGridRowSpan=e-n)},gridRowStart:function(e,t){r(e)&&(t.msGridRow=e)},gridTemplateColumns:function(e,t){t.msGridColumns=e},gridTemplateRows:function(e,t){t.msGridRows=e},justifySelf:function(e,t){a.indexOf(e)>-1&&(t.msGridColumnAlign=e)}}}))),D=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.default)(t)&&t.indexOf("image-set(")>-1)return a.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var n,r=(n=I)&&n.__esModule?n:{default:n};var a=["-webkit-",""]}))),U=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(Object.prototype.hasOwnProperty.call(n,e))for(var a=n[e],o=0,i=a.length;o<i;++o)r[a[o]]=t};var n={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]}}))),F=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]}}))),V=j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(r.hasOwnProperty(e)&&a.hasOwnProperty(t))return n.map((function(e){return e+t}))};var n=["-webkit-","-moz-",""],r={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},a={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0}}))),G=/[A-Z]/g,q=/^ms-/,H={};function W(e){return"-"+e.toLowerCase()}var K,Z=(K=Object.freeze({default:function(e){if(H.hasOwnProperty(e))return H[e];var t=e.replace(G,W);return H[e]=q.test(t)?"-"+t:t}}))&&K.default||K,Q=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e)};var n,r=(n=Z)&&n.__esModule?n:{default:n};e.exports=t.default}));j(Q);var Y=["Webkit"],J=["Moz"],X=["ms"],$=["Webkit","Moz"],ee=["Webkit","ms"],te=["Webkit","Moz","ms"],ne=A({plugins:[T,R,E,N,B,z,L,P,_,M,D,U,F,V,j(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o,l){if("string"==typeof t&&i.hasOwnProperty(e)){var s=function(e,t){if((0,r.default)(e))return e;for(var a=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,i=a.length;o<i;++o){var l=a[o],s=[l];for(var u in t){var d=(0,n.default)(u);if(l.indexOf(d)>-1&&"order"!==d)for(var f=t[u],b=0,p=f.length;b<p;++b)s.unshift(l.replace(d,c[f[b]]+d))}a[o]=s.join(",")}return a.join(",")}(t,l),u=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return u;var d=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?d:(o["Webkit"+(0,a.default)(e)]=u,o["Moz"+(0,a.default)(e)]=d,s)}};var n=o(Q),r=o(I),a=o(w);function o(e){return e&&e.__esModule?e:{default:e}}var i={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},c={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"}})))],prefixMap:{transform:ee,transformOrigin:ee,transformOriginX:ee,transformOriginY:ee,backfaceVisibility:Y,perspective:Y,perspectiveOrigin:Y,transformStyle:Y,transformOriginZ:Y,animation:Y,animationDelay:Y,animationDirection:Y,animationFillMode:Y,animationDuration:Y,animationIterationCount:Y,animationName:Y,animationPlayState:Y,animationTimingFunction:Y,appearance:$,userSelect:te,fontKerning:Y,textEmphasisPosition:Y,textEmphasis:Y,textEmphasisStyle:Y,textEmphasisColor:Y,boxDecorationBreak:Y,clipPath:Y,maskImage:Y,maskMode:Y,maskRepeat:Y,maskPosition:Y,maskClip:Y,maskOrigin:Y,maskSize:Y,maskComposite:Y,mask:Y,maskBorderSource:Y,maskBorderMode:Y,maskBorderSlice:Y,maskBorderWidth:Y,maskBorderOutset:Y,maskBorderRepeat:Y,maskBorder:Y,maskType:Y,textDecorationStyle:$,textDecorationSkip:$,textDecorationLine:$,textDecorationColor:$,filter:Y,fontFeatureSettings:$,breakAfter:te,breakBefore:te,breakInside:te,columnCount:$,columnFill:$,columnGap:$,columnRule:$,columnRuleColor:$,columnRuleStyle:$,columnRuleWidth:$,columns:$,columnSpan:$,columnWidth:$,writingMode:ee,flex:ee,flexBasis:Y,flexDirection:ee,flexGrow:Y,flexFlow:ee,flexShrink:Y,flexWrap:ee,alignContent:Y,alignItems:Y,alignSelf:Y,justifyContent:Y,order:Y,transitionDelay:Y,transitionDuration:Y,transitionProperty:Y,transitionTimingFunction:Y,backdropFilter:Y,scrollSnapType:ee,scrollSnapPointsX:ee,scrollSnapPointsY:ee,scrollSnapDestination:ee,scrollSnapCoordinate:ee,shapeImageThreshold:Y,shapeImageMargin:Y,shapeImageOutside:Y,hyphens:te,flowInto:ee,flowFrom:ee,regionFragment:ee,textOrientation:Y,boxSizing:J,textAlignLast:J,tabSize:J,wrapFlow:X,wrapThrough:X,wrapMargin:X,touchAction:X,textSizeAdjust:ee,borderImage:Y,borderImageOutset:Y,borderImageRepeat:Y,borderImageSlice:Y,borderImageSource:Y,borderImageWidth:Y}}),re=[function(e,t,n){return":"!==e[0]?null:n(t+e)},function(e,t,n){if("@"!==e[0])return null;var r=n(t);return["".concat(e,"{").concat(r.join(""),"}")]}],ae=function e(t,n,r,a,o){for(var i=new O,c=0;c<n.length;c++)i.addStyleType(n[c]);var l=new O,u=[];i.forEach((function(n,i){r.some((function(c){var l=c(i,t,(function(t){return e(t,[n],r,a,o)}));if(null!=l)return Array.isArray(l)?u.push.apply(u,s(l)):(console.warn("WARNING: Selector handlers should return an array of rules.Returning a string containing multiple rules is deprecated.",c),u.push("@media all {".concat(l,"}"))),!0}))||l.set(i,n,!0)}));var d=ce(t,l,a,o,r);return d&&u.unshift(d),u},oe=function(e,t,n){return"".concat((r=e,a=r.replace(u,d),"m"===a[0]&&"s"===a[1]&&"-"===a[2]?"-".concat(a):a),":").concat(n(e,t),";");var r,a},ie=function(e,t){return e[t]=!0,e},ce=function(e,t,n,r,a){!function(e,t,n){if(t)for(var r=Object.keys(t),a=0;a<r.length;a++){var o=r[a];e.has(o)&&e.set(o,t[o](e.get(o),n),!1)}}(t,n,a);var o=Object.keys(t.elements).reduce(ie,Object.create(null)),i=ne(t.elements),c=Object.keys(i);if(c.length!==t.keyOrder.length)for(var l=0;l<c.length;l++)if(!o[c[l]]){var s=void 0;if((s="W"===c[l][0]?c[l][6].toLowerCase()+c[l].slice(7):"o"===c[l][1]?c[l][3].toLowerCase()+c[l].slice(4):c[l][2].toLowerCase()+c[l].slice(3))&&o[s]){var u=t.keyOrder.indexOf(s);t.keyOrder.splice(u,0,c[l])}else t.keyOrder.unshift(c[l])}for(var d=!1===r?p:h,f=[],b=0;b<t.keyOrder.length;b++){var m=t.keyOrder[b],v=i[m];if(Array.isArray(v))for(var g=0;g<v.length;g++)f.push(oe(m,v[g],d));else f.push(oe(m,v,d))}return f.length?"".concat(e,"{").concat(f.join(""),"}"):""},le=null,se={fontFamily:function e(t){if(Array.isArray(t)){var n={};return t.forEach((function(t){n[e(t)]=!0})),Object.keys(n).join(",")}return"object"===i(t)?(pe(t.src,"@font-face",[t],!1),'"'.concat(t.fontFamily,'"')):t},animationName:function e(t,n){if(Array.isArray(t))return t.map((function(t){return e(t,n)})).join(",");if("object"===i(t)){var r="keyframe_".concat((o=t,m(JSON.stringify(o)))),a="@keyframes ".concat(r,"{");return t instanceof O?t.forEach((function(e,t){a+=ae(t,[e],n,se,!1).join("")})):Object.keys(t).forEach((function(e){a+=ae(e,[t[e]],n,se,!1).join("")})),be(r,[a+="}"]),r}return t;var o}},ue={},de=[],fe=!1,be=function(e,t){var n;if(!ue[e]){if(!fe){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");fe=!0,o(ge)}(n=de).push.apply(n,s(t)),ue[e]=!0}},pe=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!ue[e]){var o=ae(t,n,a,se,r);be(e,o)}},he=function(){de=[],ue={},fe=!1,le=null},me=function(e){delete ue[e]},ve=function(){fe=!1;var e=de;return de=[],e},ge=function(){var e=ve();e.length>0&&function(e){if(null==le&&null==(le=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(le=document.createElement("style")).type="text/css",le.setAttribute("data-aphrodite",""),t.appendChild(le)}var n=le.styleSheet||le.sheet;if(n.insertRule){var r=n.cssRules.length;e.forEach((function(e){try{n.insertRule(e,r),r+=1}catch(e){}}))}else le.innerText=(le.innerText||"")+e.join("")}(e)},Oe=function(e){e.forEach((function(e){ue[e]=!0}))},je=function(e,t,n){var r,a=[],o=[],i=function e(t,n,r,a){for(var o=0;o<t.length;o+=1)if(t[o])if(Array.isArray(t[o]))a+=e(t[o],n,r,a);else{if(!("_definition"in(i=t[o])&&"_name"in i&&"_len"in i))throw new Error("Invalid Style Definition: Styles should be defined using the StyleSheet.create method.");n.push(t[o]._name),r.push(t[o]._definition),a+=t[o]._len}var i;return a}(t,a,o,0);return 0===a.length?"":(r=1===a.length?"_".concat(a[0]):"_".concat(m(a.join())).concat((i%36).toString(36)),pe(r,".".concat(r),o,e,n),r)},ye=function(e,t){return"".concat(t,"_").concat(m(e))},we=m,Ce={create:function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r+=1){var a=n[r],o=e[a],i=JSON.stringify(o);t[a]={_len:i.length,_name:we(i,a),_definition:o}}return t},rehydrate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Oe(e)}},xe="undefined"!=typeof window?null:{renderStatic:function(e){return he(),function(){if(fe)throw new Error("Cannot buffer while already buffering");fe=!0}(),{html:e(),css:{content:ve().join(""),renderedClassNames:Object.keys(ue)}}}};t.makeExports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re;return{StyleSheet:l({},Ce,{extend:function(r){var a=r.map((function(e){return e.selectorHandler})).filter((function(e){return e}));return e(t,n.concat(a))}}),StyleSheetServer:xe,StyleSheetTestUtils:null,minify:function(e){we=e?m:ye},css:function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return je(t,r,n)},flushToStyleTag:ge,injectAndGetClassName:je,defaultSelectorHandlers:re,reset:he,resetInjectedStyle:me}}},1259:function(e,t,n){var r;!function(a,o,i){"use strict";function c(e){var t=null;if("VIDEO"===e.tagName)t=e;else{var n=e.getElementsByTagName("video");n[0]&&(t=n[0])}return t}function l(e){var t=c(e);if(t&&t.webkitEnterFullscreen){try{t.readyState<t.HAVE_METADATA?(t.addEventListener("loadedmetadata",(function e(){t.removeEventListener("loadedmetadata",e,!1),t.webkitEnterFullscreen(),p=!!t.getAttribute("controls")}),!1),t.load()):(t.webkitEnterFullscreen(),p=!!t.getAttribute("controls")),b=t}catch(t){return j("not_supported",e)}return!0}return j(void 0===f.request?"not_supported":"not_enabled",e)}function s(){y.element||(O(),u())}function u(){i&&"webkitfullscreenchange"===f.change&&window.removeEventListener("resize",s,!1)}var d=/i(Pad|Phone|Pod)/.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/^.*OS (\d+)_(\d+).*$/,"$1.$2"),10)>=7,f=function(){var e=o.createElement("video"),t={request:["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],exit:["exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"],element:["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],change:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],error:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]},n={};for(var r in t)for(var a=0,i=t[r].length;i>a;a++)if(t[r][a]in e||t[r][a]in o||"on"+t[r][a].toLowerCase()in o){n[r]=t[r][a];break}return n}(),b=null,p=null,h=function(){},m=[],v=!1;navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Chrome")>-1&&(v=parseInt(navigator.userAgent.replace(/^.*Chrome\/(\d+).*$/,"$1"),10)||!0);var g=function(e){var t=m[m.length-1];t&&(e!==t.element&&e!==b||!t.hasEntered)&&("VIDEO"===e.tagName&&(b=e),1===m.length&&y.onenter(y.element),t.enter.call(t.element,e||t.element),t.hasEntered=!0)},O=function(){!b||p||d||(b.setAttribute("controls","controls"),b.removeAttribute("controls")),b=null,p=null;var e=m.pop();e&&(e.exit.call(e.element),y.element||(m.forEach((function(e){e.exit.call(e.element)})),m=[],y.onexit()))},j=function(e,t){if(m.length>0){var n=m.pop();t=t||n.element,n.error.call(t,e),y.onerror(t,e)}},y={request:function(e,t,n,r){if(e=e||o.body,m.push({element:e,enter:t||h,exit:n||h,error:r||h}),void 0!==f.request)if(i&&!1===o[f.enabled])l(e);else if(!1!==v&&32>v)l(e);else{if(i&&void 0===f.enabled)return f.enabled="webkitFullscreenEnabled",e[f.request](),void setTimeout((function(){o[f.element]?o[f.enabled]=!0:(o[f.enabled]=!1,l(e))}),250);try{e[f.request](),setTimeout((function(){o[f.element]||j(i?"not_enabled":"not_allowed",e)}),100)}catch(t){j("not_enabled",e)}}else l(e)},exit:function(){u(),o[f.exit]()},toggle:function(e,t,n,r){y.element?y.exit():y.request(e,t,n,r)},videoEnabled:function(e){if(y.enabled)return!0;var t=c(e=e||o.body);return!(!t||void 0===t.webkitSupportsFullscreen)&&(t.readyState<t.HAVE_METADATA?"maybe":t.webkitSupportsFullscreen)},onenter:h,onexit:h,onchange:h,onerror:h};try{Object.defineProperties(y,{element:{enumerable:!0,get:function(){return b&&b.webkitDisplayingFullscreen?b:o[f.element]||null}},enabled:{enumerable:!0,get:function(){return"webkitCancelFullScreen"===f.exit&&!i||!(!1!==v&&32>v)&&(o[f.enabled]||!1)}}}),f.change&&o.addEventListener(f.change,(function(e){if(y.onchange(y.element),y.element){var t=m[m.length-2];t&&t.element===y.element?O():(g(y.element),i&&"webkitfullscreenchange"===f.change&&window.addEventListener("resize",s,!1))}else O()}),!1),o.addEventListener("webkitbeginfullscreen",(function(e){var t=!0;if(m.length>0)for(var n=0,r=m.length;r>n;n++){if(c(m[n].element)===e.srcElement){t=!1;break}}t&&m.push({element:e.srcElement,enter:h,exit:h,error:h}),y.onchange(e.srcElement),g(e.srcElement)}),!0),o.addEventListener("webkitendfullscreen",(function(e){y.onchange(e.srcElement),O(e.srcElement)}),!0),f.error&&o.addEventListener(f.error,(function(e){j("not_allowed")}),!1)}catch(e){y.element=null,y.enabled=!1}void 0===(r=function(){return y}.call(t,n,t,e))||(e.exports=r)}(0,document,self!==top)},1270:function(e,t,n){"use strict";n.d(t,"a",(function(){return we}));var r=n(4),a=n(35),o=n(1),i=n(972),c=n(869),l=n(888),s=n(105),u=n(911),d=n(13),f=n.n(d),b=n(72),p=n.n(b),h=n(0),m=n.n(h),v=n(21),g=n(59),O=n(25),j=n(51),y=n(33),w=n(134),C=n(95),x=n(480),k=n(1253),S=n(1342),A=n(973),T=n(929),I=n(1115),R=n(1038),E=n(470),N=n(965),B=n(1114),z=n(1838),L=n(1577),P=n(1240),_=n(41),M=n(65),D=n(460),U=n(451),F=n(37),V=n(2396),G=n(917),q=function(e){var t,n,r,a,i=e.startTime,c=e.endTime,l=e.target,s=e.status,u=e.abnormalReason,d=Math.floor(i/1e3),f=Math.floor(c/1e3),b=l.parentObject,p=b.id,h=b.title,m=l.object.id,v=null;return 0===s?(t="已保存草稿",n="GBK06A",v=Object(o.b)(G.a,{}),r="GBK06A"):1===s?(t="发布中...",n="GBK06A",r="GBK06A"):2===s?"审核中"===u?(t="审核中",n="GBL05A",v=Object(o.b)(G.a,{}),r="GBK06A"):(t="已投稿",n="GBL01A",v=Object(o.b)(G.a,{}),r="GBK03A"):3===s&&(t="发布失败",n="GRD03A",v=Object(o.b)(G.a,{}),r="GBK06A",a=!0),{status:s,statusText:t,statusColor:n,StatusIcon:v,titleColor:r,hasAbnormalInfo:a,startTime:d,endTime:f,questionId:p,title:h,answerId:m,abnormalReason:u}},H=["status","questionId","answerId","children"],W=["item"],K=function(e){var t=e.status,n=e.questionId,r=e.answerId,a=e.children,i=Object(F.default)(e,H);return 2===t?Object(o.b)(g.Link,Object.assign(Object.assign({target:"_blank",href:"https://www.zhihu.com/question/".concat(n,"/answer/").concat(r),css:{display:"block",cursor:"pointer"}},i),{},{children:a})):Object(o.b)(g.Box,Object.assign(Object.assign({},i),{},{children:a}))},Z={"已保存草稿":"已保存草稿","发布失败":"发布失败","已投稿":"投稿成功","审核中":"审核中","发布中...":"发布中..."},Q={"已保存草稿":"继续编辑","发布失败":"修改草稿","已投稿":"已投稿","审核中":"查看投稿","发布中...":""},Y=function(e){var t=e.item,n=Object(F.default)(e,W),r=q(t),a=r.status,i=r.statusText,c=r.statusColor,l=r.StatusIcon,s=r.titleColor,u=r.hasAbnormalInfo,d=r.questionId,f=r.title,b=r.answerId,p=r.abnormalReason;return Object(o.c)(K,Object.assign(Object.assign({py:"20px",css:function(e){return Object.assign(Object.assign({},0===a&&{cursor:"pointer"}),Object(V.a)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},status:a,questionId:d,answerId:b},n),{},{children:[Object(o.c)(g.Flex,{color:c,alignItems:"center",mb:"8px",fontSize:"12px",children:[Object(o.b)(g.Text,{children:Z[i]}),Object(o.b)(g.Text,{ml:"auto",fontWeight:"bold",css:function(e){return{color:e.colors.GBL01A}},children:Q[i]}),i===Z.发布失败?null:l]}),Object(o.b)(g.Text,{color:s,fontSize:"14px",children:f}),u&&Object(o.b)(g.Text,{p:"8px",mt:"8px",color:"GBK03A",fontSize:"14px",css:function(e){return{borderRadius:2,backgroundColor:e.colorMod(e.colors.GRD03A).alpha(.08)}},children:p})]}))},J=n(52),X=Object.assign;var $=function(e){return m.a.createElement(J.a,X({width:"14",height:"16",fill:"none",viewBox:"0 0 14 16"},e),m.a.createElement("path",{fill:"#8590A6",d:"M1 2.666c0-.736.597-1.333 1.334-1.333h9.333c.736 0 1.334.597 1.334 1.333v10.667c0 .736-.598 1.333-1.334 1.333h-1.666a.333.333 0 01-.334-.333v-4A2.333 2.333 0 007.334 8h-6A.333.333 0 011 7.667v-5zm2.667 0a.667.667 0 100 1.334h6.667a.667.667 0 100-1.333H3.667zM3 6c0-.368.299-.667.667-.667H9a.667.667 0 010 1.334H3.667A.667.667 0 013 6zm-2 4.334a1 1 0 011-1h5.333a1 1 0 011 1v3.333a1 1 0 01-1 1H2a1 1 0 01-1-1v-3.333zm5.167 1.377a.333.333 0 010 .578l-2 1.154a.333.333 0 01-.5-.288v-2.31c0-.256.277-.417.5-.288l2 1.154z",fillRule:"evenodd",clipRule:"evenodd"}))},ee=["label","onClick"];function te(e,t){var n=e.label,r=e.onClick,a=Object(F.default)(e,ee);return Object(o.b)(j.a,{zaText:!0,zaType:"Button",zaBlock:"VideoContributeButton",className:"ContentItem-action",children:Object(o.b)(y.c,Object.assign({ref:t,preset:"plain",onClick:r,icon:$,label:n},a))})}var ne=Object(h.forwardRef)(te),re=n(871),ae=n(215),oe=["isLiked","onClick","showIcon","authRequired","currentUser","isLogin"],ie=Object(ae.a)((function(e){var t=e.isLiked,n=e.onClick,r=e.showIcon,a=void 0===r||r,i=e.authRequired,c=(e.currentUser,e.isLogin,Object(F.default)(e,oe)),l=Object(s.a)((function(e){var r=!t,a=r?"Like":"UnLike";O.a.trackEvent(e.target,{id:7448,action:a}),i((function(){return n(r)}))()}));return Object(o.b)(y.c,Object.assign({preset:"plain",onClick:l,icon:a?re.a:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},c))})),ce=n(40),le=n.n(ce),se=n(68),ue=n(906),de=n(217),fe=n(1083),be=n(1019),pe=["onClick"],he=Object(h.forwardRef)((function(e,t){var n=e.onClick,r=Object(F.default)(e,pe);return Object(o.b)(y.c,Object.assign({ref:t,preset:"plain",onClick:n,icon:ue.a,label:"设置"},r))})),me=function(e){var t,n,r=e.className,a=e.zvideo,i=e.onEdit,c=e.onToggleVisibility,l=e.onRemove,s=e.onChangeCommentPermission,u=e.togglerProps,d=Object(v.useDispatch)(),b=a.id,p=a.commentPermission,m=a.isVisible,O=a.creationRelationship,j=null==O||null===(t=O.coCreation)||void 0===t||null===(n=t.bizInfo)||void 0===n?void 0:n.canCancelPermission,y=Object(h.useCallback)(function(){var e=Object(se.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="视频删除后将不可恢复",e.next=3,d(Object(U.j)(b)).then((function(e){var t=e.payload.message;t&&(n=t)}));case 3:de.a.confirm(Object(o.b)(g.Text,{textAlign:"center",children:n}),{title:"确定删除视频",text:{ok:"删除视频"}}).then((function(){l(t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,b,l]),C=Object(o.c)(o.a,{children:[Object(o.b)(w.b,{onClick:i,children:"编辑视频"}),Object(o.b)(w.b,{onClick:c,children:"在视频列表内".concat(m?"隐藏":"显示")}),Object(o.b)(w.a,{}),Object(o.b)(fe.c,{current:p,target:a,onChange:s}),Object(o.b)(w.a,{}),Object(o.b)(w.b,{onClick:y,children:"删除"})]});return Object(o.b)(w.c,{arrowed:Boolean(j),className:f()("ZVideoSettingMenu",r),itemClassName:"ZVideoSettingMenu-item",toggler:Object(o.b)(he,Object.assign({},u)),reversed:!0,children:j?Object(o.b)(w.b,{children:Object(o.b)(be.CancelCoCreation,{contentType:"zvideo",contentId:b})}):C})},ve=n(1144),ge=n(124);function Oe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var je={up:1,neutral:0,down:-1};function ye(e){var t,d=Object(v.useDispatch)(),b=e.className,m=e.zvideo,k=e.author,F=e.commentsShown,V=void 0!==F&&F,G=e.onCommentButtonClick,q=void 0===G?p.a:G,H=e.renderOptions,W=e.renderActionButtons,K=e.enableContribute,Z=void 0!==K&&K,Q=m.id,J=m.title,X=m.description,$=m.voting,ee=m.voteCount,te=m.voteupCount,re=m.commentCount,ae=m.isLiked,oe=m.isFavorited,ce=m.contribute,le=m.video,se=m.video,ue=(se=void 0===se?{}:se).duration,de=void 0===ue?0:ue,fe=function(e){var t=Object(ve.c)(e),n="string"==typeof t?t:null==t?void 0:t.urlToken,r=Object(v.useSelector)((function(e){return Object(ge.e)(e,{urlToken:n})}));return e?null!=r?r:t:null}(m.creationRelationship),be=Object(_.p)(fe),pe=Object(_.p)(k)&&!be,he=pe||be,ye=Object(M.p)(),we=Object(h.useMemo)((function(){return parseInt(1e3*de)}),[de]),Ce=Object(h.useMemo)((function(){return{id:Q,video:le}}),[Q,le]),xe=Object(c.a)((function(){return n.e(85).then(n.bind(null,3019))})),ke=Object(D.p)(Q),Se=Object(h.useState)(!1),Ae=Oe(a.a,Se,2),Te=Ae[0],Ie=Ae[1],Re=Object(D.o)(Q).answer,Ee=(Re=void 0===Re?{}:Re).canContribute,Ne=void 0!==Ee&&Ee,Be=Boolean((null==ce||null===(t=ce.contributeList)||void 0===t?void 0:t.length)||(null==ce?void 0:ce.totals)),ze=Z&&!ye&&pe&&Be,Le=Z&&!ye&&pe&&Ne&&!Be,Pe=Object(P.a)("zvideo_toolbar:should_hide_contribution_tooltip"),_e=Oe(a.a,Pe,2),Me=_e[0],De=_e[1],Ue=Object(h.useRef)();Object(l.a)((function(){return De(!0)}),!Me&&Le?5e3:null);var Fe=Object(h.useCallback)((function(){Ie(!0),d(Object(D.h)(Q,"edit"))}),[Q,d]),Ve=Object(h.useCallback)((function(){return d(Object(D.g)({zvideoId:Q,target:"answer",duration:we}))}),[d,Q,we]),Ge=Object(h.useCallback)((function(e){return d(Object(U.z)(Q,je[e]))}),[Q,d]),qe=Object(h.useCallback)((function(e){d(Object(U.k)(Q,e))}),[d,Q]),He=Object(h.useState)(!1),We=Oe(a.a,He,2),Ke=We[0],Ze=We[1],Qe=Object(h.useCallback)((function(e){Ze(!0),O.a.trackEvent(e.target,{id:8213,action:"Collect",is_intent:!oe})}),[oe]),Ye=Object(h.useCallback)((function(){Ze(!1)}),[]),Je=Object(h.useCallback)((function(e,t){d(Object(U.b)(Q,t))}),[Q,d]),Xe=Object(h.useCallback)((function(){d(Object(U.x)(Q))}),[Q,d]),$e=Object(h.useCallback)((function(){d(Object(U.v)(Q)).then((function(){var e="https://www.zhihu.com/people/".concat(k.urlToken,"/zvideos");window.location.href=e}))}),[Q,k,d]),et=Object(h.useState)(null),tt=Oe(a.a,et,2),nt=tt[0],rt=tt[1],at=Object(h.useState)(!1),ot=Oe(a.a,at,2),it=ot[0],ct=ot[1],lt=Object(h.useState)(!1),st=Oe(a.a,lt,2),ut=st[0],dt=st[1];Object(h.useEffect)((function(){it&&!nt&&d(Object(U.g)(Q)).then((function(e){var t=e.payload;rt(t)}))}),[Q,it,nt,d]),Object(h.useEffect)((function(){pe&&!ye&&Z&&Ve()}),[pe,Ve,ye,Z]);var ft=Object(h.useCallback)((function(e){d(Object(U.t)(Q,e)).then((function(){d(Object(D.k)(Q)),e.clubId&&d(Object(U.w)(Q,e.clubId));var t="https://www.zhihu.com/zvideo/".concat(Q);window.location.href=t}))}),[Q,d]),bt=Object(h.useState)(!1),pt=Oe(a.a,bt,2),ht=pt[0],mt=pt[1],vt=Object(i.b)().blockStrategies,gt=Object(S.b)([Object(S.a)(vt)],W),Ot=gt({componentList:[{name:"favlist",component:Object(o.b)(I.a,{onClick:Qe,label:"收藏",showIcon:!ye},"favlist")},{name:"like",component:Object(o.b)(ie,{isLiked:ae,onClick:qe,showIcon:!ye},"like")},{name:"report",component:!he&&Object(o.b)(E.a,{id:Q,type:"zvideo",onModalShown:mt},"report")}]}).filter(Boolean),jt=Object(h.useCallback)((function(){rt(null),ct(!1),d(Object(U.s)(Q))}),[d,Q]),yt=Object(s.a)((function(e){Fe(),d(Object(D.l)(e.id)),dt(!1)})),wt=Object(s.a)((function(e){Ve(),d(Object(U.s)(e)),Ie(!1)})),Ct=Y,xt=z.a;return Object(o.c)(o.a,{children:[Object(o.b)("div",{css:{marginBottom:"14px"},children:Object(o.c)(T.a,{className:f()("ZVideoToolbar",b),children:[gt({componentList:[{name:"vote",component:Object(o.b)(B.a,{type:"zvideo",count:te||ee,voting:$,onVote:Ge,isOwner:pe,zaIds:{voteUp:6599,voteDown:6600}},"vote")},{name:"comment",component:Object(o.b)(A.a,{onClick:q,commentsShown:V,count:re,positionStatus:"normal"},"comment")},{name:"share",component:Object(o.b)(N.a,{id:Q,type:"zvideo",url:"https://www.zhihu.com/zvideo/".concat(Q),title:J,authorName:k.name,positionStatus:"normal"},"share")}]}),ye?Object(o.c)(w.c,{preventCloseOnTarget:!0,globalClose:!ht,menuContainerClassName:"ZVideoToolbar-menuContainer",toggler:Object(o.b)(y.c,{preset:"plain",icon:u.a,"aria-label":"更多"}),children:[Ot.map((function(e){return Object(o.b)(w.b,{className:"ZVideoToolbar-menuItem",children:e},e.key)})),!he&&H()]}):[].concat(Oe(r.a,Ot),Oe(r.a,he?[]:H())),ze&&Object(o.b)(ne,{label:"全部投稿",onClick:function(){d(Object(D.h)(Q)),dt(!0)}}),Le&&Object(o.c)(o.a,{children:[Object(o.b)(ne,{ref:Ue,label:"添加投稿",onClick:Fe}),Object(o.b)(x.a,{placement:"top",isOpen:!Me,target:Ue.current,children:"投稿到问题，让更多人看到你的视频"})]}),he&&Object(o.b)(me,Object.assign({zvideo:m,onEdit:function(){return ct(!0)},onToggleVisibility:Xe,onChangeCommentPermission:Je,onRemove:$e},ye&&{togglerProps:{label:null}}))]})}),pe&&Object(o.b)(C.b,{className:"ZVideoToolbar-videoFormModal",title:"编辑视频",size:"fullPage",onClose:jt,css:{width:"734px",".Modal-inner":{"::-webkit-scrollbar":{display:"none"}},".Modal-title":{marginLeft:32}},children:it&&nt&&Object(o.b)(L.a,{defaultVideo:nt,onSubmit:ft,onRemove:jt})}),Object(o.b)(R.a,{id:Q,type:"zvideo",shown:Ke,onClose:Ye,zaEnabled:!0}),Z&&!ye&&pe&&Object(o.c)(o.a,{children:[Object(o.b)(C.b,{title:Object(o.c)(g.Flex,{px:"24px",justifyContent:"space-between",children:[Object(o.b)(g.Text,{fontSize:"24px",color:"GBK02A",children:"全部视频回答投稿"}),Ne&&Object(o.b)("button",{css:function(e){return{width:90,height:34,border:"none",borderRadius:3,fontSize:14,fontWeight:"normal",color:e.colors.GBL01A,backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.08)}},onClick:function(){Fe(),dt(!1)},children:"添加投稿"})]}),css:function(e){return{width:536,height:554,backgroundColor:e.colors.GBK99A,".Modal-title":{marginTop:24},".Modal-inner::-webkit-scrollbar":{display:"none"}}},onClose:function(){return dt(!1)},children:ut&&ke.map((function(e){return Object(o.b)(Ct,Object.assign({item:e},0===e.status&&{onClick:function(){yt(e)}}),e.id)}))}),Boolean(xe)&&Object(o.b)(j.b,{block:"Contribution",children:Object(o.b)(xt,{show:Te,defaultVideo:Ce,title:J,description:X,duration:we,onClose:function(){wt(Q)},shouldPublish:!0})})]})]})}ye.defaultProps={renderOptions:function(){return[null]},renderActionButtons:k.a};var we=ye},1273:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(20),b=n(21),p=n(13),h=n.n(p),m=n(33),v=n(871),g=n(1734),O=n(25),j=n(153),y=n(449),w=n(215),C=n(2),x=n(6),k=Object(x.a)("live",["UPDATE_LIKED","UPDATE_COURSE_LIKED"]);var S=Object(x.a)("ebook",["FOLLOW","UNFOLLOW"]);var A=n(477),T=n(1735),I=n(483),R=n(32);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var N={ebook:"updateEBookVoters",live:"updateLiveLiked",live_course:"updateLiveCourseLiked",article:"updateArticleLike",promotion:"updatePromotionLike",pin:"updatePinsLike"},B=function(e){Object(o.a)(n,e);var t=E(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleToggleVote=e.props.authRequired((function(t){var n=e.props,r=n.liked,a=n.type,o=n.id,i=!r;O.a.trackEvent(t.target,{action:i?"Upvote":"UnUpvote",element:"Button"});var c=N[a];e.props[c](o,i)}),R.ab.vote),e.handleClick=function(t){var n=e.props,r=n.disableAuth,a=n.handleToggleGuide,o=n.onClick;o&&o(t)||(r?a(t):e.handleToggleVote(t))},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.liked,n=e.count,r=e.className,a=e.icon,o=void 0===a?"like":a,i=e.disabled;return Object(l.c)(m.c,{className:h()("LikeButton",{"is-active":t},r),onClick:this.handleClick,disabled:i,"aria-live":"polite",children:["thank"===o?Object(l.b)(v.a,{center:!0}):Object(l.b)(g.a,{center:!0})," ",Object(j.cnNiceNumber)(n).trim()]})}}]),n}(d.Component);B.propTypes={type:u.a.oneOf(y.a).isRequired,id:u.a.oneOfType([u.a.number,u.a.string]).isRequired,icon:u.a.string,liked:u.a.bool,count:u.a.number};t.a=Object(f.compose)(w.a,Object(b.connect)(null,{updateEBookVoters:function(e){return function(t,n){var r=n().entities.ebooks[e],a=!(r.relationship||{}).voting;return t({API:{types:S.FOLLOW,method:a?"POST":"DELETE",endpoint:"v3/books/".concat(e,"/voters")},UPDATE:{request:{ebooks:Object(C.a)({},e,{relationship:Object.assign(Object.assign({},r.relationship),{},{voting:a}),voteupCount:r.voteupCount+(a?1:-1)})},failure:{ebooks:Object(C.a)({},e,r)}}})}},updateLiveLiked:function(e){return function(t,n){var r=n().entities.lives[e],a=!r.isLiked;return t({API:{types:k.UPDATE_LIKED,endpoint:"v3/lives/".concat(e,"/like"),method:a?"POST":"DELETE"},UPDATE:{request:{lives:Object(C.a)({},e,{isLiked:a,likedNum:r.likedNum+(a?1:-1)})},failure:{lives:Object(C.a)({},e,r)}}})}},updateLiveCourseLiked:function(e){return function(t,n){var r=n().entities.liveCourses[e],a=!r.isLiked;return t({API:{types:k.UPDATE_COURSE_LIKED,endpoint:"v3/lives/course/".concat(e,"/like"),method:a?"POST":"DELETE"},UPDATE:{request:{liveCourses:Object(C.a)({},e,{isLiked:a,likedNum:r.likedNum+(a?1:-1)})},failure:{liveCourses:Object(C.a)({},e,r)}}})}},updateArticleLike:A.f,updatePromotionLike:T.a,updatePinsLike:I.h}))(B)},1274:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return m}));var r=n(1539),a=n(1),o=n(1252),i=n(105),c=n(1114),l=function(e){var t=e.defaultVoteUpCount,n=e.defaultStatus,r=e.onChange,l=e.disabled,s=Object(o.d)(t||0,n,r),u=s.voteUpCount,d=s.isVotedUp,f=s.isVotedDown,b=s.voteUp,p=s.voteDown,h=s.cancel,m=Object(i.a)((function(e){switch(e){case"up":return b();case"down":return p();case"neutral":default:return h()}}));return Object(a.b)(c.a,{count:u,voting:d?1:f?-1:0,onVote:m,isOwner:l})},s=n(37),u=n(871),d=n(33),f=n(215),b=["isLiked","onClick","showIcon","authRequired","currentUser","isLogin"],p=Object(f.a)((function(e){var t=e.isLiked,n=e.onClick,r=e.showIcon,o=void 0===r||r,c=e.authRequired,l=(e.currentUser,e.isLogin,Object(s.default)(e,b)),f=Object(i.a)((function(){return c((function(){return n(!t)}))()}));return Object(a.b)(d.c,Object.assign({preset:"plain",onClick:f,icon:o?u.b:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},l))})),h=["currentIsLiked","onClick"],m=function(e){var t=e.currentIsLiked,n=e.onClick,r=Object(s.default)(e,h),i=Object(o.c)({currentIsLiked:t}),c=i.isLiked,l=i.like,u=i.unLike;return Object(a.b)(p,Object.assign(Object.assign({},r),{},{isLiked:c,onClick:function(e){e?l():u(),null==n||n(e)}}))}},1279:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n(30),a=n.n(r),o=n(23),i=n.n(o),c=n(27),l=n.n(c),s=n(26),u=n.n(s),d=n(28),f=n.n(d),b=n(17),p=n.n(b),h=n(47),m=n.n(h),v=n(0),g=n(50),O=n(13),j=n.n(O),y=n(1339),w=n.n(y),C=n(71),x=n.n(C),k=n(8),S=["className","url","alt","threshold","thumbnail"];function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}function T(e,t,n){var r=new Image;return r.addEventListener("load",t),r.onerror=n,r.src=e,r}var I=function(e){u()(n,e);var t=A(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={thumbnailLoaded:!1,loaded:!1,vagued:!0,computedWidth:e.props.width,computedHeight:e.props.height},e.wrapperNode=null,e.hasLoaded=!1,e.loadThumbnail=function(){var t=e.props,n=t.onLoadImageFail,r=t.onLoadImageTimeout;e.thumbnail=T(e.props.thumbnail,e.handleThumbnailLoaded,(function(){n&&n({type:"thumbnail",url:e.props.thumbnail})})),r&&setTimeout((function(){e.thumbnail&&!e.thumbnail.complete&&r({type:"thumbnail",url:e.props.thumbnail})}),3e3)},e.loadImage=function(){var t=e.props,n=t.onLoadImageFail,r=t.onLoadImageTimeout;e.image=T(e.props.url,e.handleImageLoaded,(function(){n&&n({type:"image",url:e.props.url})})),r&&setTimeout((function(){e.image&&!e.image.complete&&r({type:"image",url:e.props.url})}),3e3)},e.handleObserve=function(t){t&&e.hasLoaded||t&&(e.hasLoaded=!0,e.loadThumbnail(),e.loadImage())},e.handleThumbnailLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"thumbnail",url:e.props.thumbnail});var n=e.state,r=n.computedWidth;if(!n.computedHeight){var a=e.thumbnail,o=a.naturalWidth,i=a.naturalHeight*(Number(r)/o);e.setState({computeHeight:i})}e.setState({thumbnailLoaded:!0})},e.handleImageLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"image",url:e.props.url}),e.setState({loaded:!0}),e.timeout=window.setTimeout((function(){return e.setState({vagued:!1})}),500)},e}return l()(n,[{key:"componentDidMount",value:function(){if(this.wrapperNode){var e=Object(g.findDOMNode)(this.wrapperNode),t=this.state,n=t.computedWidth,r=t.computedHeight;this.setState({computeWidth:n||e.offsetWidth,computeHeight:r||e.offsetHeight})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.thumbnail&&this.thumbnail.removeEventListener("load",this.handleThumbnailLoaded),this.image&&this.image.removeEventListener("load",this.handleImageLoaded)}},{key:"render",value:function(){var e=this,t=x()(this.props,["onLoadImageFail","onLoadImageTimeout","onLoadImageSuccess"]),n=t.className,r=t.url,o=t.alt,i=t.threshold,c=t.thumbnail,l=a()(t,S),s=this.state,u=s.thumbnailLoaded,d=s.loaded,f=s.vagued,b=s.computedWidth,p=s.computedHeight;if(!f)return Object(k.g)("img",m()({className:n,width:b,src:r,alt:o},l));var h=w.a;return Object(k.g)(h,{rootMargin:"".concat(i,"px 0px ").concat(i,"px 0px"),onChange:this.handleObserve,className:j()("VagueImage",n),ref:function(t){e.wrapperNode=t},style:Object.assign(Object.assign({},b&&{width:"".concat(b,"px")}),p&&{height:"".concat(p,"px")}),"data-src":r},Object(k.g)("div",{className:j()("VagueImage-mask",{"is-active":!d}),style:u?{backgroundImage:"url(".concat(c,")")}:{}}),d&&Object(k.g)("img",{className:"VagueImage-innerLarge",src:r,alt:o}))}}]),n}(v.Component);I.defaultProps={threshold:200};var R=I},1280:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return y}));var r=n(1586),a=n(2),o=n(37),i=n(1),c=n(21),l=n(71),s=n.n(l),u=n(79),d=n.n(u),f=n(512),b=["showLabelInfo","showLabels"],p=["answer","article","post","item"],h=function(e){return e.itemType||p.find((function(t){return e[t]}))},m=function(e){return d()(Object(c.connect)((function(e,t){return{useNewLabels:Object(f.f)(e,t[h(t)])}}))((function(t){var n=t.showLabelInfo,r=void 0===n||n,c=t.showLabels,l=void 0===c||c,u=Object(o.default)(t,b),d=h(u),f=u,p=[];return l||p.push("isLabeled"),r||(p.push("labelInfo"),p.push("hermesLabel")),d&&p.length>0&&(f=Object.assign(Object.assign({},f),{},Object(a.a)({},d,s()(u[d],p)))),Object(i.b)(e,Object.assign({},f))})),e)},v=n(0),g=Object(v.createContext)({showLabelInfo:!0,showLabels:!0}),O=g.Provider,j=g.Consumer,y=function(e){return function(t){var n=Object(i.b)(j,{children:function(n){return Object(i.b)(e,Object.assign(Object.assign({},t),{},{showLabelProps:n}))}});return d()(n,e)}}},1288:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1);function a(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,a=t.reasonDescription;return Object(r.b)("span",{className:"AnnotationTag",children:32300===n?"该内容已被标记":a})}},1289:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n(21),i=n(869),c=n(512),l=function(){return Object(r.b)("div",{className:"LabelContainer-loading"})};t.a=function(e){var t=e.useOldLabels,s=e.item,u=e.abnormalDetailProps,d=e.collapseReasonProps,f=e.showDeleteButton,b=e.inviter,p=s.type,h=s.id,m=s.isLabeled,v=Object(o.useDispatch)(),g=Object(o.useSelector)((function(e){return t||u||d?{}:f?{thankInviterInfo:b}:Object(c.c)(e,s)})),O=Object(i.a)((function(){return n.e(68).then(n.bind(null,3013))}));return Object(a.useEffect)((function(){m&&!g&&p&&h&&v(Object(c.e)(p,h))}),[v,p,h,m,g]),O?Object(r.b)(O,Object.assign({data:g},e)):m&&!t?Object(r.b)(l,{}):null}},1291:function(e,t,n){"use strict";var r=n(1),a=n(13),o=n.n(a),i=n(1510);t.a=function(e){var t=e.className;return Object(r.c)("div",{className:o()("Reviewing",t),children:[Object(r.c)("div",{className:"Reviewing-top",children:[Object(r.b)(i.a,{size:16}),Object(r.b)("span",{className:"Reviewing-tip",children:"内容审核中"})]}),Object(r.b)("div",{className:"Reviewing-text",children:"内容将在审核通过后自动发布"})]})}},1293:function(e,t,n){"use strict";var r,a=n(4),o=n(1),i=n(0),c=n(972),l=n(424),s=n(1253),u=n(1342),d=n(929);!function(e){e.Vote="vote",e.Comment="comment",e.Like="like",e.Favlist="favlist",e.Collect="collect",e.Thank="thank",e.Share="share",e.Unknown="unknown"}(r||(r={}));var f=r;function b(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var p=function(e){return{componentList:e.componentList.map((function(e,t){var n=e.name,r=e.component;return Object(i.isValidElement)(r)?{name:n,component:Object(i.cloneElement)(r,{key:r.key||n===f.Unknown?n+t:n})}:{name:n,component:r}}))}};t.a=function(e){var t=e.className,n=e.renderChildren,r=e.compatibleRenderActionButtons,i=e.middlewares,h=void 0===i?[]:i,m=Object(c.b)().blockStrategies,v=Object(u.b)([Object(u.a)(m),p].concat(b(a.a,h)),r||s.a);return Object(o.b)(d.a,{className:t,css:function(e){return{display:"flex",alignItems:"center",padding:"10px 16px",margin:"0 -16px -10px",color:e.colors.GBK04A,background:e.colors.GBK99A,clear:"both","&.is-fixed":{margin:0,boxShadow:"0 -1px 3px ".concat(Object(l.a)(e.colors.GBK02A).alpha(.1))},"& > *":{flexShrink:0},"& > .AnnotationTag":{whiteSpace:"nowrap"}}},children:v({componentList:(null==n?void 0:n(f))||[]})})}},1339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(1534);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,r;c(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={inView:!1},r.node=null,r.handleNode=function(e){r.node&&(0,i.unobserve)(r.node),r.node=e,r.observeNode(),r.props.innerRef&&r.props.innerRef(e)},r.handleChange=function(e){r.setState({inView:e}),r.props.onChange&&r.props.onChange(e)},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,i.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,i.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,i.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,a=e.rootId;(0,i.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r},a)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,a=e.tag,i=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),c=this.state.inView;return o.createElement(a,r({},i,{ref:this.handleNode}),"function"==typeof n?n(c):null,"function"==typeof t?t(c):t)}}]),t}(o.Component);s.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=s},1340:function(e,t,n){"use strict";t.a=function(e,t){return!!e&&(!!(t=t||e.type)&&(("answer"===t||"post"===t||"article"===t)&&(null===(n=e.settings)||void 0===n||null===(r=n.tableOfContents)||void 0===r?void 0:r.enabled)));var n,r}},1341:function(e,t,n){"use strict";var r=n(37),a=n(15),o=n(16),i=n(18),c=n(19),l=n(9),s=n(1),u=n(3),d=n.n(u),f=n(0),b=n(20),p=n(13),h=n.n(p),m=n(21),v=n(172),g=n(71),O=n.n(g),j=n(435),y=n(1493),w=n(65),C=n(32),x=["isMobile","column","avatar","avatarProps","noHoverCard","style","className","children"];function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var S=function(e){Object(i.a)(n,e);var t=k(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,a=t.column,o=a.title,i=a.imageUrl,c=a.id,l=t.avatar,u=t.avatarProps,d=t.noHoverCard,f=t.style,b=t.className,p=t.children,m=Object(r.default)(t,x),g=void 0===d?n:d;return e=l?Object(s.b)(v.a,Object.assign({url:i,alt:o},u)):p||o,g||(e=Object(s.b)(y.a,{toggler:e,id:c})),n&&C.E?e:Object(s.b)(j.a,{zaAction:"OpenUrl",zaEventType:"Click",zaType:"Text",children:Object(s.b)("a",Object.assign(Object.assign({style:f,className:h()("ColumnLink",b),href:"".concat(C.H,"/column/").concat(c)},O()(m,["dispatch"])),{},{children:e}))})}}]),n}(f.Component);S.propTypes={column:d.a.object.isRequired,avatar:d.a.bool,avatarProps:d.a.object,noHoverCard:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},S.defaultProps={avatar:!1},t.a=Object(b.compose)(Object(m.connect)((function(e){return{isMobile:Object(w.d)(e,{includeTablet:!0})}})))(S)},1342:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(4),a=n(1253);function o(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var i=new Map([["vote","isBlockingVote"],["comment","isBlockingComment"],["like","isBlockingLike"],["favlist","isBlockingCollect"],["collect","isBlockingCollect"],["thank","isBlockingLike"],["share","isBlockingShare"]]);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var c=e.length>0?e.reduce((function(e,t){return[t.apply(void 0,o(r.a,e))]}),[].concat(a)):[].concat(a);return t.apply(void 0,o(r.a,c))}}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return{componentList:t.componentList.map((function(t){var n=t.name,r=t.component;return i.has(n)&&e[i.get(n)]?{name:n,component:null}:{name:n,component:r}}))}}}},1343:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1252),a={"-1":r.b.VOTED_DOWN,0:r.b.NEUTRAL,1:r.b.VOTED_UP,2:r.b.VOTED_DOWN},o=function(e){return a[e]||r.b.NEUTRAL}},1344:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(59),b=n(156),p=n(153),h=n(1510),m=n(929),v=n(973),g=n(940),O=n(924),j=n(965),y=n(930),w=n(433);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var x=function(e){Object(o.a)(n,e);var t=C(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.favlist,a=t.favlist,o=a.id,i=a.type,c=a.title,s=a.updatedTime,u=a.answerCount,d=a.followerCount,w=a.isFollowing,C=a.isPublic,x=a.creator,k=void 0===x?{}:x,S=a.commentCount,A=t.status,T=t.action,I=t.lastreadTouchable,R=t.zaInfos,E=R.follow,N=R.options,B=t.renderOptions,z=this.state,L=z.commentsShown,P=z.commentsAutoFocus,_=z.commentPattern,M="/collection/".concat(o),D=Object(l.b)("a",{href:M,target:"_blank",rel:"noopener noreferrer",children:c});if(n===m.c.plain)return Object(l.b)(m.e,{data:r,link:M,title:D});var U={id:o,type:i};return n===m.c.default?Object(l.b)(m.e,{data:r,link:M,title:Object(l.c)(f.Flex,{alignItems:"center",children:[D,!C&&Object(l.b)(f.Text,{color:"GBL05A",ml:".3em",children:Object(l.b)(h.a,{center:!0,size:18})})]}),meta:A||Object(l.c)(m.d,{children:["".concat(Object(b.toDateString)(s)," 更新"),"".concat(Object(p.formatNumber)(u)," 条内容"),"".concat(Object(p.formatNumber)(d)," 人关注")]}),extra:T}):Object(l.c)(m.e,{data:r,link:M,onRef:function(t){e.contentItem=t},title:D,lastreadTouchable:I,children:[Object(l.c)(m.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"关注数："}),Object(p.formatNumber)(d)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"最后更新于："}),Object(b.toDateString)(s)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"作者："}),Object(l.b)(y.a,{user:k})]})]},"favlist-item-cells"),Object(l.c)(m.a,{children:[Object(l.b)(O.a,Object.assign(Object.assign({},U),{},{isFollowing:w,zaId:E})),Object(l.b)(v.a,{onClick:this.handleCommentsShown,commentsShown:L,count:S}),Object(l.b)(j.a,Object.assign(Object.assign({},U),{},{title:c,authorName:k&&k.name})),B&&B((function(){return e.contentItem}),N)]},"favlist-item-actions"),Object(l.b)(g.a,{parent:r,commentPattern:_,shown:L,autoFocus:P,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);x.propTypes={preset:u.a.oneOf(Object.values(m.c)),zaInfos:u.a.shape({follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},x.defaultProps={preset:m.c.default,zaInfos:{}},t.a=Object(w.b)((function(e){var t=e.favlist,n=e.trackCardShow,r=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:r}}))(x)},1345:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(436);function a(e){var t,n=e.isOrg,a=e.badgeV2,o=e.badge;if(!n)return!1;var i=Object(r.e)(a||o);return Boolean(null===(t=i.identity)||void 0===t?void 0:t.length)}},1347:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("calc(")>-1)return i.map((function(e){return t.replace(/calc\(/g,e+"calc(")}))};var r,a=n(1182),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-","-moz-",""];e.exports=t.default},1348:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("cross-fade(")>-1)return i.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var r,a=n(1182),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-",""];e.exports=t.default},1349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&a.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],a={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},1350:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("filter(")>-1)return i.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var r,a=n(1182),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-",""];e.exports=t.default},1351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&r.hasOwnProperty(t))return r[t]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},1352:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){a.hasOwnProperty(e)&&(n[a[e]]=r[t]||t)};var r={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},a={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"};e.exports=t.default},1353:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"flexDirection"===e&&"string"==typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");a.hasOwnProperty(e)&&(n[a[e]]=r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple",flex:"box","inline-flex":"inline-box"},a={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"};e.exports=t.default},1354:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&c.test(t))return i.map((function(e){return t.replace(c,(function(t){return e+t}))}))};var r,a=n(1182),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-","-moz-",""],c=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;e.exports=t.default},1355:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("image-set(")>-1)return i.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var r,a=n(1182),o=(r=a)&&r.__esModule?r:{default:r};var i=["-webkit-",""];e.exports=t.default},1356:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]},e.exports=t.default},1357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(a.hasOwnProperty(e)&&o.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],a={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},o={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},1358:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){if("string"==typeof t&&c.hasOwnProperty(e)){var s=function(e,t){if((0,a.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,i=n.length;o<i;++o){var c=n[o],s=[c];for(var u in t){var d=(0,r.default)(u);if(c.indexOf(d)>-1&&"order"!==d)for(var f=t[u],b=0,p=f.length;b<p;++b)s.unshift(c.replace(d,l[f[b]]+d))}n[o]=s.join(",")}return n.join(",")}(t,i),u=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return u;var d=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?d:(n["Webkit"+(0,o.default)(e)]=u,n["Moz"+(0,o.default)(e)]=d,s)}};var r=i(n(2403)),a=i(n(1182)),o=i(n(1744));function i(e){return e&&e.__esModule?e:{default:e}}var c={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},l={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},1359:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prefixMap,n=e.plugins;return function e(c){for(var l in c){var s=c[l];if((0,i.default)(s))c[l]=e(s);else if(Array.isArray(s)){for(var u=[],d=0,f=s.length;d<f;++d){var b=(0,a.default)(n,l,s[d],c,t);(0,o.default)(u,b||s[d])}u.length>0&&(c[l]=u)}else{var p=(0,a.default)(n,l,s,c,t);p&&(c[l]=p),c=(0,r.default)(t,l,c)}}return c}};var r=c(n(2405)),a=c(n(2406)),o=c(n(2407)),i=c(n(2408));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},1361:function(e,t,n){"use strict";t.a=null},1362:function(e,t,n){"use strict";var r=n(1),a=n(1019);t.a=function(e){var t=e.expanded,n=e.isVideoCoverFullSize;return e.renderFlag?Object(r.b)(a.CoCreationLabel,{mb:t||n?"8px":"4px"}):null}},1363:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=["MEMBER_ANSWER_QUESTION","MEMBER_PUBLISH_EBOOK","MEMBER_CREATE_ARTICLE","MEMBER_ASK_QUESTION","MEMBER_CREATE_PIN","MEMBER_PUBLISH_LIVE_COURSE"],a=function(e){return r.includes(e.verb)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.author.name;return n?"".concat(n,"：").concat(e):e}},1364:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=n(0),o=n.n(a),i=n(59),c=n(259),l=n(51),s={textAnswer:"textAnswer",videoAnswer:"videoAnswer"},u=[{key:s.textAnswer,name:"图文回答"},{key:s.videoAnswer,name:"视频回答"}];function d(e,t){var n=e.activeTabKey,a=e.onChange;return Object(r.b)(c.b,{children:u.map((function(e){var o=e.key,u=e.name;return Object(r.b)(l.a,{as:c.a,zaType:"Button",zaText:!0,css:{padding:"0 10px",":first-of-type":{paddingLeft:20}},children:Object(r.b)(i.Text,{ref:o===s.videoAnswer?t:null,onClick:function(){return a(o)},css:function(e){return Object.assign({color:e.colors.GBK03A,cursor:"pointer"},n===o&&{fontWeight:"bold",borderBottom:"4px solid ".concat(e.colors.GBL01A)})},children:u})},o)}))})}t.b=o.a.forwardRef(d)},1365:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return b}));var r=n(35),a=n(1),o=n(79),i=n.n(o),c=n(0),l=n(263),s=n.n(l);function u(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var d=Object(c.createContext)(null),f=function(){return Object(c.useContext)(d)},b=function(e){return i()((function(t){var n=f();return Object(a.b)(e,Object.assign({traceId:n},t))}),e)};t.a=function(e){var t=e.children,n=Object(c.useState)((function(){return s()()})),o=u(r.a,n,1)[0];return Object(a.b)(d.Provider,{value:o,children:t})}},1366:function(e,t,n){"use strict";n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return A})),n.d(t,"a",(function(){return I}));var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(72),u=n.n(s),d=n(0),f=n(79),b=n.n(f),p=n(43),h=n.n(p),m=n(46),v=n(380),g=n.n(v),O=n(468),j=n(541);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var w={success:"success",fail:"fail",request:"request"},C="EDITABLE_STATSC";function x(){var e=h.a.get(C);e&&(e.forEach((function(e){m.b.increment(e)})),h.a.delete(C))}var k={get pageName(){return"UnknownPage"},reportRequest:u.a,reportSuccess:u.a,reportFail:u.a,recordError:function(e){return e},wrapAutoRecord:function(e){return e}},S=Object(d.createContext)(k),A=function(e){return b()((function(t){var n=Object(d.useContext)(S);return Object(l.b)(e,Object.assign({reporter:n},t))}),e)},T=function(e){Object(o.a)(n,e);var t=y(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this.props,r=n.reporter,a=n.name;throw r&&r.reportFail(a,e,{extra:{errorInfo:t}},!0),e}},{key:"render",value:function(){return this.props.children}}]),n}(d.Component),I=A(T);t.c=function(e,t){var n=function(t,n){m.b.increment("".concat(e,".").concat(t,".").concat(n,".count"))},r=function(e){return n(e,w.request)},a=function(e){return n(e,w.success)},o=function(n,r,a,o){if(r instanceof Error&&!Object(O.c)(r.message)){var i=function(e){var t=e.name;return"ResponseError"===t?"".concat(t,"_").concat(e.status||0):t||"Unknown"}(r);m.b.increment([e,n,w.fail,i,"count"].join(".")),function(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n instanceof Error&&(null===(r=window.Raven)||void 0===r||r.captureException(n,Object.assign({tags:{scope:"".concat(e,":").concat(t)}},a)))}(n,r,a),!o&&Object(j.c)({type:"EditorActionError-"+n,appName:"heifetz",spanName:e,currentUser:(null==t?void 0:t())||"Unknown",release:"4713-8b5bdf33",error:{name:i,message:r.message,payload:r.payload||"Unknown",stack:r.stack}})}},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.intent,c=void 0===i||i,l=n.success,s=void 0===l||l;return function(){try{c&&r(e);var n=function(){return s?a(e):void 0},i=t.apply(void 0,arguments);return g()(i)?i.then((function(e){return n(),e}),(function(t){throw o(e,t),t})):(n(),i)}catch(t){throw o(e,t),t}}};return{get pageName(){return e},reportRequest:r,reportSuccess:a,reportFail:o,wrapAutoRecord:i,recordError:function(e,t){return i(e,t,{success:!1})},stash:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length){var a=h.a.get(C)||[];a.push("".concat(e,".").concat(n.join("."),".count")),h.a.set(C,a)}}}}},1367:function(e,t,n){"use strict";var r=n(0),a=n(3),o=n.n(a),i=n(21),c=n(489);function l(e){var t=e.content,n=e.type,a=e.urlToken,o=Object(i.useDispatch)(),l=Object(r.useCallback)((function(){o(Object(c.a)({content:t,type:n,urlToken:a}))}),[o,t,n,a]),s=Object(i.useSelector)((function(e){return Object(c.c)(e,{type:n,urlToken:a})}));return Object(r.useEffect)((function(){s||l()}),[s,l]),null}l.propTypes={content:o.a.string.isRequired,type:o.a.oneOf(["answer","article"]).isRequired,urlToken:o.a.string.isRequired},t.a=l},1416:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ne}));var r=n(2),a=n(15),o=n(16),i=n(18),c=n(19),l=n(9),s=n(1),u=n(3),d=n.n(u),f=n(20),b=n(0),p=n(21),h=n(13),m=n.n(h),v=n(25),g=n(2103),O=n(1723),j=n(899),y=n(1488),w=n(33),C=n(23),x=n.n(C),k=n(27),S=n.n(k),A=n(26),T=n.n(A),I=n(28),R=n.n(I),E=n(17),N=n.n(E),B=n(143),z=n(962),L=n(1295),P=n(917),_=n(432),M=n(385),D=n(94),U=n.n(D),F=n(175),V=n(8);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N()(e);if(t){var a=N()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}var q={top:10,left:20},H={top:0,left:0};function W(){var e,t=U()(navigator.userAgent).Mobile?H:q,n=t.top,r=t.left,a=window,o=a.innerWidth,i={left:0,top:0,width:o,height:a.innerHeight},c={x:(e=i).left+e.width/2,y:e.top+e.height/2},l=2*(96+r),s=o,u=0;return o<1e3+l?s=o-l:(s=1e3,u=(o-(1e3+l))/2),{x:c.x,y:c.y,imgContainerWidth:s,imgContainerHeight:i.height-2*n,left:u,top:n}}var K=function(e){T()(n,e);var t=G(n);function n(e){var r;return x()(this,n),(r=t.call(this,e)).getBoundingClientRect=function(e,t){var n=t.width,r=t.height,a={top:0,left:0,width:0,height:0},o=1;return e.width>e.height?(a.height=r,o=r/e.height,a.width=e.width*o,a.left="-".concat((a.width-n)/2)):e.width<e.height?(a.width=n,o=n/e.width,a.height=e.height*o,a.top="-".concat((a.height-r)/2)):(a.width=n,a.height=r),a},r.getParentNode=function(){for(var e,t=r.props.img.parentNode;t&&"BODY"!==t.nodeName;){if(t.classList.contains("Image-Wrapper-Preview"))return e=t;t=t.parentNode}return e},r.getChildImgNode=function(e){if(e){var t=e.childNodes,n=r.state.index,a=n;return{img:(n>=t.length?t[a=t.length-1]:t[a]).querySelector(".Image-Preview"),index:a}}},r.setImageElAttr=function(){var e=r.state,t=e.width,n=e.transition,a=r.props.images,o=r.getParentNode(),i=r.getChildImgNode(o);if(i&&i.img){var c=i.img.getBoundingClientRect(),l=r.getBoundingClientRect(a[i.index],{width:c.width,height:c.height}),s=r.imgEl.getBoundingClientRect(),u=r.containerClientRect,d=u.left,f=u.top,b={x:s.left+s.width/2-d-l.width/2,y:s.top+s.height/2-f-l.height/2},p=t/l.width;"transition"!==n?(r.setState({transition:""},(function(){r.setState({rect:c,transition:"",width:l.width,height:l.height,translate:b,scale:p,transform:"translate(".concat(b.x,"px ,").concat(b.y,"px) scale(").concat(p,")")})})),setTimeout((function(){r.setState({transition:"transition",translate:null,scale:null,transform:"translate(".concat(c.left-d,"px,").concat(c.top-f,"px)"),opacity:-1})}),20)):r.setState({translate:null,scale:null,opacity:-1,transform:"translate(".concat(c.left-d,"px,").concat(c.top-f,"px)")})}},r.getImageSize=function(e){var t=r.containerClientRect,n=t.imgContainerWidth,a=t.imgContainerHeight,o=e.width,i=e.height,c=!1,l=1;return(e.width>n||e.height>a)&&(e.width>n&&(l=n/e.width,o=e.width*l,i=l*e.height),i>a&&(i*=l=a/i,o*=l),c=!0),r.setState({cursorZoomIn:c}),{width:o,height:i}},r.handleResizeCallback=function(){r.containerClientRect=W();var e=r.state.index,t=r.props.images;r.setState(Object.assign({transition:"fixed",transform:""},r.getImageSize(t[e])))},r.handleClick=function(e){var t=r.state.cursorZoomIn,n=e.target;n&&n.classList&&n.classList.contains("ImageGallery-Img")&&t&&r.setState({previewImage:n}),(n.classList.contains("ImageGallery")||n.classList.contains("ImageGallery-Inner"))&&r.setImageElAttr()},r.handleTransEnd=function(){var e=r.state,t=e.translate,n=e.scale,a=r.props.onClose;t&&n||a()},r.handlePreviewImageClose=function(){r.setState({previewImage:null},(function(){M.hide()}))},r.handleKeyUpCallback=function(e){39===e.keyCode?r.handleCutImage(1):37===e.keyCode&&r.handleCutImage(-1)},r.handleCutImage=function(e){var t=r.state.index+e,n=r.props.images;t<n.length&&t>=0&&r.setState(Object.assign({index:t,transition:"fixed",transform:""},r.getImageSize(n[t])))},r.state={transEnded:!1,translate:null,scale:null,url:null,index:e.index||0,width:0,height:0,rect:null,transition:"transition",previewImage:null,transform:"",cursorZoomIn:!1,opacity:1},r.containerClientRect=W(),r}return S()(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.data,n=e.img.getBoundingClientRect();M.hide();var r=this.containerClientRect,a=r.left,o=r.top,i=this.getBoundingClientRect(t,{width:n.width,height:n.height}),c={left:n.left-a+Number(i.left),top:n.top-o+Number(i.top)};this.setState({rect:i,width:i.width,height:i.height,transform:"translate(".concat(c.left,"px, ").concat(c.top,"px)")})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState(Object.assign({},e.computeTransition(e.props.index)))}),20),window.addEventListener("keyup",this.handleKeyUpCallback),window.addEventListener("resize",this.handleResizeCallback)}},{key:"componentWillUnmount",value:function(){M.show(),window.removeEventListener("keyup",this.handleKeyUpCallback),window.removeEventListener("resize",this.handleResizeCallback)}},{key:"computeTransition",value:function(e){var t=this.props.images[e],n=this.containerClientRect,r=n.x,a=n.y,o=n.left,i=n.top,c=this.getImageSize(t).width;if(this.imgEl){var l=this.imgEl.getBoundingClientRect(),s=c/l.width,u={x:r-l.width/2-o,y:a-l.height/2-i};return{translate:u,scale:s,transform:"translate(".concat(u.x,"px ,").concat(u.y,"px) scale(").concat(s,")")}}}},{key:"render",value:function(){var e=this,t=this.props.images,n=this.state,r=n.translate,a=n.index,o=n.width,i=n.height,c=n.transition,l=n.previewImage,s=n.transform,u=n.cursorZoomIn,d=n.opacity,f=this.containerClientRect,b=f.left,p=f.top,h=f.imgContainerWidth,v=f.imgContainerHeight,g=(U()(navigator.userAgent).Mobile?H:q).left,O=t[a];return Object(V.g)(F.a,null,Object(V.g)("div",{className:m()("ImageGallery",{"is-active":r}),onClick:this.handleClick},Object(V.g)("div",{className:"ImageGallery-Content",style:{width:"".concat(h+2*(96+g),"px"),height:"".concat(v,"px"),left:"".concat(b,"px"),top:"".concat(p,"px")}},!l&&t.length>1&&Object(V.g)("a",{className:m()("ImageGallery-arrow-left",{"ImageGallery-arrow-disabled":0===a}),style:{left:"".concat(g,"px")},onClick:function(){return e.handleCutImage(-1)}},Object(V.g)(L.a,{fill:"#fff",size:42})),Object(V.g)("div",{className:"ImageGallery-Inner",ref:function(t){e.scrollNode=t}},Object(V.g)("img",{ref:function(t){e.imgEl=t},src:Object(B.imgUrl)(O.url,"r"),className:m()("ImageGallery-Img",{"ImageGallery-transition":"transition"===c,"ImageGallery-fixed":"fixed"===c,"ImageGallery-CursorZoomIn":u}),style:{width:o,height:i,transform:s,opacity:d},onTransitionEnd:this.handleTransEnd,alt:"preview","data-rawwidth":O.width,"data-rawheight":O.height,"data-thumbnail":O.thumbnail,"data-original":Object(B.imgUrl)(O.url,"r"),"data-actualsrc":Object(B.imgUrl)(O.url,"b")})),!l&&t.length>1&&Object(V.g)("a",{className:m()("ImageGallery-arrow-right",{"ImageGallery-arrow-disabled":a>=t.length-1}),onClick:function(){return e.handleCutImage(1)},style:{right:"".concat(g,"px")}},Object(V.g)(P.a,{fill:"#fff",size:42}))),!l&&Object(V.g)("a",{className:"ImageGallery-close",onClick:this.setImageElAttr},Object(V.g)(_.a,{fill:"#fff"})),l&&Object(V.g)(z.a,{img:l,onClose:this.handlePreviewImageClose})))}}]),n}(b.Component);K.propTypes={img:d.a.object.isRequired,data:d.a.object.isRequired,onClose:d.a.func.isRequired};var Z=K,Q=n(1279);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N()(e);if(t){var a=N()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}var J=function(e){T()(n,e);var t=Y(n);function n(e){var r;return x()(this,n),(r=t.call(this,e)).setImageAttr=function(){var e=r.state,t=e.width,n=e.height;if(!t||!n){var a=r.divEl.getBoundingClientRect();t=t||a.width,n=n||a.width,r.setState({width:t,height:n})}var o=r.getBoundingClientRect({width:t,height:n});r.setState({imageWidth:o.width,imageHeight:o.height,imageTop:o.top,imageLeft:o.left})},r.getBoundingClientRect=function(e){var t=e.width,n=e.height,a=r.props.data,o={top:0,let:0,width:0,height:0},i=1;return a.width>a.height?(o.height=n,i=n/a.height,o.width=a.width*i,o.left="-".concat((o.width-t)/2)):(o.width=t,i=t/a.width,o.height=a.height*i,o.top="-".concat((o.height-n)/2)),o},r.handlePreviewImageOpen=function(e){var t=r.props.onPreviewImageOpen;e.persist(),t&&t(e)||r.setState({previewImage:r.imgWrapper.querySelector("img")})},r.handlePreviewImageClose=function(){r.setState({previewImage:null})},r.state={width:e.width||0,height:e.height||0,imageWidth:0,imageHeight:0,imageTop:0,imageLeft:0,previewImage:null},r}return S()(n,[{key:"componentDidMount",value:function(){this.setImageAttr()}},{key:"render",value:function(){var e=this,t=this.state,n=t.width,r=t.height,a=t.previewImage,o=t.imageWidth,i=t.imageHeight,c=t.imageTop,l=t.imageLeft,s=this.props,u=s.data,d=s.images,f=s.index,b=s.surplus,p=s.previewType,h=void 0===p?1:p,v=s.data.isGif,g=s.vague,O=s.previewTransitionType,j=void 0===O?0:O;return Object(V.g)("div",{onClick:this.handlePreviewImageOpen,className:"Thumbnail-Wrapper",ref:function(t){e.divEl=t},style:{width:n?"".concat(n,"px"):"",height:r?"".concat(r,"px"):""}},Object(V.g)("span",{ref:function(t){e.imgWrapper=t},className:m()({"Image-PreviewVague":g})},g?Object(V.g)(Q.a,{className:"Image-Preview",url:v?Object(B.imgUrl)(u.thumbnail,"xl"):Object(B.imgUrl)(u.url,"xl"),width:n,height:r,alt:"cover",thumbnail:v?Object(B.imgUrl)(u.thumbnail,"xl"):Object(B.imgUrl)(u.url,"xl"),"data-rawwidth":u.width,"data-rawheight":u.height,"data-thumbnail":u.thumbnail,"data-original":Object(B.imgUrl)(u.url,"r"),"data-actualsrc":Object(B.imgUrl)(u.url,"b")}):Object(V.g)("img",{className:"Image-Preview",src:v?u.thumbnail:Object(B.imgUrl)(u.url,"r"),width:o,height:i,style:{top:"".concat(c,"px"),left:"".concat(l,"px")},alt:"preview","data-rawwidth":u.width,"data-rawheight":u.height,"data-thumbnail":u.thumbnail,"data-original":Object(B.imgUrl)(u.url,"r"),"data-actualsrc":Object(B.imgUrl)(u.url,"b")})),b>0&&Object(V.g)("em",{className:"Thumbnail-Surplus-Sign"},"+".concat(b)),v&&Object(V.g)("em",{className:"Thumbnail-Gif-Sign"},"GIF"),a&&(1===h?Object(V.g)(Z,{img:a,data:u,index:f,images:d,onClose:this.handlePreviewImageClose}):Object(V.g)(z.a,{img:a,isOriginalUrl:!g,transitionType:j,data:u,onClose:this.handlePreviewImageClose})))}}]),n}(b.Component);J.propTypes={width:d.a.number,height:d.a.number,index:d.a.number,surplus:d.a.number,data:d.a.object,images:d.a.array,onPreviewImageOpen:d.a.func};var X=n(972),$=n(1026),ee=n(988),te=n(215),ne=n(483),re=n(924),ae=n(937),oe=n(965),ie=n(1425),ce=n(1038),le=n(1115),se=n(65),ue=n(929),de=n(964),fe=n(470),be=n(973),pe=n(940),he=n(2947),me=n(153),ve=n(449),ge=n(32);n(1736);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var je={pin:"updatePinsReaction"},ye=function(e){Object(i.a)(n,e);var t=Oe(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleToggleVote=e.props.authRequired((function(t){var n=e.props,r=n.reactioned,a=n.type,o=n.id,i=n.onReaction,c=!r;v.a.trackEvent(t.target,{action:c?"Upvote":"UnUpvote",element:"Button"});var l=je[a];i?i(o):e.props[l](o,c)}),ge.ab.vote),e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.reactioned,n=e.count,r=e.className,a=e.disabled;return Object(s.c)(w.c,{className:m()("VoteButton","ReactionButton",{"is-active":t},r),onClick:this.handleToggleVote,disabled:a,children:[Object(s.b)(he.a,{size:20,center:!0})," ",Object(me.formatNumber)(n)]})}}]),n}(b.Component);ye.propTypes={type:d.a.oneOf(ve.a).isRequired,id:d.a.oneOfType([d.a.number,d.a.string]).isRequired,icon:d.a.string,reactioned:d.a.bool,count:d.a.number};var we=Object(f.compose)(te.a,Object(p.connect)(null,{updatePinsReaction:ne.i}))(ye),Ce=n(1001),xe=n(1205),ke=n(433),Se=n(1345),Ae=n(1421),Te=n(59),Ie=function(e){var t=e.qualityLabel,n=null==t?void 0:t[0];return n?Object(s.b)(Te.Box,{marginY:16,children:Object(s.b)(Ae.k,{theme:n.theme.toUpperCase(),text:n.text,iconName:null==n?void 0:n.icon,detail:n.detail})}):null};function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var Ee=function(e){Object(i.a)(n,e);var t=Re(n);function n(e){var o;Object(a.a)(this,n),(o=t.call(this)).openDeleteModal=function(){o.setState({deleteModalShown:!0})},o.closeDeleteModal=function(){o.setState({deleteModalShown:!1})},o.handleFavlistsShown=function(){v.a.trackEvent(o.favButtonRef,{action:"Collect",element:"Button",is_intent:!0}),o.props.authRequired((function(){return o.setState({favlistsShown:!0})}),ge.ab.favlists)()},o.handleFavlistHide=function(){o.setState({favlistsShown:!1})},o.handlePositionStatusChange=function(e){o.setState({positionStatus:e})},o.handleDeletePin=function(){var e=o.props,t=e.pin.id,n=e.deletePin;return(0,e.authRequired)(n(t),ge.ab.deletePin)},o.handleCommentsShown=function(e,t){o.setState(t)},o.handleCommentsHide=function(){o.setState({commentsShown:!1})},o.renderQuoteContents=function(e,t){var n=e.content;return Object(s.b)("blockquote",{className:"PinItem-3lineBlockquote",children:n},t)},o.renderLinkContents=function(e,t,n){var a=e.url,o=e.title,i=e.card,c='<a href="'+a+'" data-draft-type="link-card" ></a>';return"text"===n?Object(s.c)("a",{className:m()("link-text",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o}),href:a,target:"_blank",rel:"noopener noreferrer",children:[Object(s.b)(g.b,{stroke:"#BBC1CC",text:!0,center:!0})," ",o||a]},t):Object(s.b)($.c,{html:c,linkCardInfo:Object(r.a)({},"".concat(a),i)})},o.renderVideoContents=function(e,t){var n=e.videoId||e.id,r={title:"",thumbnail:e.thumbnail||e.coverInfo&&e.coverInfo.thumbnail,isLens:!0,id:n,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(n)};return Object(s.b)(xe.a,{isAppView:o.isAppView,data:r},t)},o.renderOriginPinContents=function(e){if(!e)return null;var t=e.regulateInfo,n=e.isDeleted,r=e.deletedReason,a=e.content,i=e.author;if(null!=t&&t.isRegulating)return Object(s.b)("div",{className:m()("PinItem-RichText","PinItem-content-originpin"),children:t.reason});if(n)return Object(s.b)("div",{className:m()("PinItem-RichText","PinItem-content-originpin"),children:r});if(a&&a[0]){var c=o.props.noCollapsed,l=o.state.originPinExpanded,u=a.find((function(e){return"text"===e.type}));return Object(s.c)("div",{className:m()("PinItem-RichText","PinItem-content-originpin"),children:[Object(s.c)("div",{children:[i.name,"："]}),u&&Object(s.b)(de.b,{html:u.content,noCollapsed:c,expanded:l}),o.renderPinContents(a)]})}return null},o.renderPinContents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.filter((function(e){return e.url&&"image"===e.type})),r=[];return Object(s.c)("div",{className:m()("RichText","ztext","PinItem-remainContentRichText"),children:[e.map((function(e,a){var i=e.type;return"quote"===i?o.renderQuoteContents(e,a):"link"===i?o.renderLinkContents(e,a,t):"video"===i?o.renderVideoContents(e,a):("image"===i&&r.length<4&&e.url&&r.push(Object(s.b)(J,{data:e,vague:!0,index:r.length,images:n,surplus:n.length>4&&3===r.length?n.length-4:0},a)),null)})),r.length>0&&Object(s.b)("div",{className:"Image-Wrapper-Preview",children:r})]})},o.renderRemainContents=function(){var e=o.props.pin,t=e.id,n=e.created,r=e.updated,a=e.originPin,i=e.content,c=e.ipInfo,l="//".concat(ge.r,"/pin/").concat(t);return Object(s.c)("div",{children:[o.renderPinContents(i),o.renderOriginPinContents(a),Object(s.b)(de.a,{href:l,created:n,updated:r,ipInfo:c})]})};var i=e.pin,c=e.noCollapsed,l=e.showCommentButton;return o.contentHTML=o.getContentHTML(i),o.state={expanded:c,originPinExpanded:c,commentPattern:l?"fixed":"bottom",commentsShown:!l,commentsAutoFocus:l,deleteModalShown:!1,favlistsShown:!1},o}return Object(o.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.contentHTML=this.getContentHTML(e.pin)}},{key:"getContentHTML",value:function(e){var t;if(null==e||null===(t=e.content)||void 0===t||!t[0])return"";var n=e.content,r="";return"text"===n[0].type&&(r=n[0].content),r}},{key:"render",value:function(){var e=this,t=this.props,n=t.pin,r=t.pin,a=r.id,o=r.author,i=r.virtuals,c=(i=void 0===i?{}:i).reactionType,l=r.commentCount,u=r.reactionCount,d=r.adminClosedComment,f=r.qualityLabel,b=t.preset,p=t.lastreadTouchable,h=t.isSticky,v=t.handleToggleSticky,g=t.noCollapsed,C=t.showFollowAuthorButton,x=t.showCommentButton,k=t.commentInputPosition,S=t.isMobile,A=t.renderOptions,T=t.currentUser,I=t.blockStrategies,R=(I=void 0===I?{}:I).isBlockingCollect,E=I.isBlockingShare,N=I.isBlockingComment,B=this.state,z=B.positionStatus,L=B.expanded,P=B.deleteModalShown,_=B.favlistsShown,M=B.commentsShown,D=B.commentsAutoFocus,U=B.commentPattern,F=T&&T.urlToken===o.urlToken,V="plain"===b,G="like"===c,q="function"==typeof v,H="//".concat(ge.r,"/pin/").concat(a);return Object(s.c)(ue.e,{data:n,link:H,"data-zop":JSON.stringify({itemId:a,type:"pin"}),meta:V||Object(s.b)("div",{children:Object(s.c)("div",{className:"PinItem-author",children:[Object(s.b)(ae.a,{author:o,className:"PinItem-authorInfo",userLinkV2:!0},"authorInfo"),C&&!F&&T&&Object(s.b)(re.a,{className:"PinItem-followButton",preset:"primary",type:o.type,id:o.urlToken,gender:o.gender,isFollowing:o.isFollowing,onClick:this.handleFollowButtonClick})]})}),className:m()("PinItem",{"PinItem-withLabel":Boolean(null==f?void 0:f[0])}),lastreadTouchable:p,children:[Object(s.b)(Ie,{qualityLabel:f}),Object(s.c)(de.b,{prefix:q&&h&&Object(s.b)(ie.a,{}),alwaysShowPrefix:!0,data:n,html:this.contentHTML,excerpt:this.contentHTML,noCollapsed:g,expanded:L,onPositionStatusChange:this.handlePositionStatusChange,renderCanExpandExtra:this.renderRemainContents,children:[Object(s.b)(we,{reactioned:Boolean(G),count:u,id:a,type:"pin"}),!N&&x&&Object(s.b)(be.a,{onClick:this.handleCommentsShown,commentsShown:M,commentClosed:d,count:l,positionStatus:z}),!E&&Object(s.b)(oe.a,{id:a,type:"pin",authorName:o&&o.name,href:H,positionStatus:z}),!R&&(!T||!T.isOrg)&&Object(s.b)(le.a,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:S?"":"收藏"}),!F&&Object(s.b)(fe.a,{type:"pin",id:a}),!S&&q&&F&&Object(Se.a)(T)&&Object(s.b)(w.c,{preset:"plain",onClick:v,icon:h?O.b:j.b,label:h?"取消置顶":"置顶"}),F&&Object(s.b)(w.c,{preset:"plain",onClick:this.openDeleteModal,icon:y.b,label:"删除"}),A()]}),F&&Object(s.b)(Ce.a,{title:"你确定要删除自己的想法吗？",shown:P,onCancel:this.closeDeleteModal,onSubmit:this.handleDeletePin}),Object(s.b)(pe.a,{parent:n,commentPattern:U,commentInputPosition:k,shown:M,showPackupButton:x,autoFocus:D,onClose:this.handleCommentsHide}),Object(s.b)(ce.a,{id:a,type:"pin",shown:_,onClose:this.handleFavlistHide,zaEnabled:!0})]})}}]),n}(b.Component);Ee.propTypes={noCollapsed:d.a.bool,showFollowAuthorButton:d.a.bool,showCommentButton:d.a.bool,commentInputPosition:d.a.oneOf(["top","bottom"])},Ee.defaultProps={noCollapsed:!1,showFollowAuthorButton:!1,showCommentButton:!0,commentInputPosition:"bottom",renderOptions:function(){return[null]}};var Ne=Object(f.compose)(Object(ee.a)((function(e){var t=e.pin;return{content:{type:"Pin",id:String(t.id)}}})),Object(ke.b)((function(e){var t=e.pin,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=(a=void 0===a?{}:a).cardShow;return Object.assign(Object.assign({module:"PinItem",card:{content:{type:"Pin",id:String(t.id),author_member_hash_id:t&&t.author.id}}},o&&{view:{id:o}}),{},{trackCardShow:r})})),te.a,Object(X.d)({dataPath:"pin"}),X.c,Object(p.connect)((function(e,t){var n=t.pin;return Object.assign(Object.assign({},"string"==typeof(null==n?void 0:n.author)&&{pin:Object.assign({},n,{author:e.entities.users[n.author]})}),{},{isMobile:Object(se.d)(e)})}),{deletePin:ne.c}))(Ee)},1421:function(e,t,n){"use strict";n.d(t,"a",(function(){return Te})),n.d(t,"b",(function(){return Ne})),n.d(t,"c",(function(){return Re})),n.d(t,"d",(function(){return ce})),n.d(t,"e",(function(){return le})),n.d(t,"f",(function(){return ue})),n.d(t,"g",(function(){return Ae})),n.d(t,"h",(function(){return ze})),n.d(t,"i",(function(){return ke})),n.d(t,"j",(function(){return Ce})),n.d(t,"k",(function(){return Pe})),n.d(t,"l",(function(){return ie}));var r=n(24),a=n.n(r),o=n(30),i=n.n(o),c=n(1),l=n(432),s=n(1454),u=n(1123),d=n(917),f=n(2948),b=n(2949),p=n(0),h=n.n(p),m=n(12),v=Object.assign;function g(e){return h.a.createElement(m.a,v(v({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BlueBook24","data-old-api":"BlueBook"},e),{className:"Zi Zi--BlueBook"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M15.333 19.333l-2.764 2.765a.333.333 0 01-.569-.236v-2.529h3.333zm0-13.333c.737 0 1.334.597 1.334 1.333V16A2.667 2.667 0 0114 18.666H7.333A1.333 1.333 0 016 17.334v-10C6 6.597 6.597 6 7.333 6h8zm.394-1.987a2.933 2.933 0 012.93 2.79l.004.143v8.838c0 .693-.53 1.262-1.205 1.327l-.129.006V6.946a1.6 1.6 0 00-1.49-1.596l-.11-.004H7.333c0-.736.597-1.333 1.334-1.333h7.06z",fillRule:"evenodd",clipRule:"evenodd"}))}var O=n(2950),j=n(893),y=n(2951),w=n(2952),C=n(898),x=n(2953),k=n(2954),S=n(2955),A=n(2278),T=n(2956),I=n(1118),R=n(1226),E=n(435),N=n(59),B=n(51),z=n(170),L=n(667),P=n(143),_=n(25),M=n(105),D=n(926),U=Object.assign;var F=Object.assign;var V=n(2277),G=Object.assign;var q=n(918),H=n(13),W=n.n(H),K=n(3),Z=n.n(K),Q=["zaBlock","color","iconUrl","icon","name","subText","linkText","link","expandable","isExpanded","showDeleteButton","onDelete","onClick","style","className"],Y=["inviter"],J=["data"],X=["data"],$=["children","placement","onClick","onPopoverClosed","zaBlock"],ee=["text","center"],te=["answerCollapsed","answerAbnormal","commercial","business","thanksForInviting","positive","bluebook","annotation","disclaimer","adPromotion","campaign","limit"];function ne(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var re={GOLDEN:{bg:"GYL02A",color:"GYL02A"},BLUE:{bg:"GBL07A",color:"GBL07A"},PURPLE:{bg:"GRD07A",color:"GRD07A"},GREY:{bg:"GBK10A",color:"GBK06A",bgNoAlpha:!0}},ae=function(e){var t=e.bg,n=e.bgNoAlpha,r=Object(L.a)(),a=r.colors,o=r.colorMod,i=a[t],c=a[e.color];return{bg:n?i:o(i).alpha(.08),color:c}},oe=Object(p.forwardRef)((function(e,t){var n=e.zaBlock,r=e.color,a=void 0===r?re.BLUE:r,o=e.iconUrl,f=e.icon,b=e.name,p=e.subText,h=e.linkText,m=e.link,v=e.expandable,g=e.isExpanded,O=e.showDeleteButton,j=e.onDelete,y=e.onClick,w=e.style,C=e.className,x=i()(e,Q),k=Object(z.b)().Mobile,S=Object(L.a)().fontWeights,A=ae(a),T=A.bg,I=A.color,R=m&&!v?E.b:n?B.f:"div",_=null,M=null;O?M=l.a:v?_=g?s.a:u.a:m&&(_=d.a);var D={zaText:!0,zaBlock:n,shouldTrackShow:!0,zaType:"Text"};return Object(c.c)(R,Object.assign(Object.assign(Object.assign(Object.assign({ref:t,className:C,css:{flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"flex-start",background:T,padding:"0 8px",height:k?28:30,borderRadius:k?14:15,textDecoration:"none",fontSize:k?13:14,lineHeight:k?"16px":"18px",color:I,overflow:"hidden"}},m&&{href:m}),n&&D),{},{style:Object.assign({cursor:_?"pointer":"default"},w),onClick:y},x),{},{children:[o?Object(c.b)("img",{src:Object(P.imgUrl)(o,"m"),height:k?16:19,width:k?16:19,alt:"",css:{flex:"0 0 auto"}}):Boolean(f)&&f&&Object(c.b)(f,{fill:I,size:k?17:20,css:{flex:"0 0 auto"},viewBox:"0 0 24 24"}),Object(c.b)(N.Flex,{overflow:"hidden",flex:"0 0 auto",mx:"4px",children:Object(c.b)(N.Text,{flexShrink:0,fontWeight:S.bold,mt:k?"1px":0,children:b})}),Boolean(p||h)&&Object(c.b)(N.Text,{flex:"0 0 auto",display:"flex",alignItems:"center",mt:k?"1px":0,mr:"4px",children:p||h}),Boolean(M)&&Object(c.b)(M,{fill:I,size:18,onClick:j,css:{flex:"0 0 auto",cursor:"pointer"}}),Boolean(_)&&Object(c.b)(_,{fill:I,size:k?23:26,css:{margin:"0 -4px",flex:"0 0 auto"}})]}))}));oe.displayName="Label";var ie=function(e){var t=e.inviter,n=i()(e,Y),r=t.name,a=t.urlToken,o=Object(c.c)(c.a,{children:["谢邀",Object(c.b)(E.b,{"data-za-detail-view-id":8126,href:"https://www.zhihu.com/people/".concat(a),css:{marginLeft:4,textDecoration:"none",color:"inherit"},zaBlock:"ThanksForInvitingClick",children:"@".concat(r)})]});return Object(c.b)(oe,Object.assign(Object.assign({icon:f.a,name:o},n),{},{zaBlock:"ThanksForInvitingLabel"}))};var ce=function(e){var t=e.data,n=i()(e,J),r=t.url,a=t.title;return Object(c.b)(oe,Object.assign(Object.assign({},n),{},{name:"知乎蓝宝书收录",icon:g,subText:a,link:r,zaBlock:"BlueBookLabel"}))};function le(e){var t=e.data,n=i()(e,X),r=t.name,a=t.iconUrl,o=t.linkText,l=t.link;return Object(c.b)(oe,Object.assign(Object.assign({},n),{},{color:re.PURPLE,name:r,subText:o,iconUrl:a,icon:O.a,link:l,zaBlock:"CampaignLabel"}))}var se={answer:"品牌特邀",article:"特邀文章"};function ue(e){var t=e.data,n=e.type,r=void 0===n?"answer":n,a=Boolean(null==t?void 0:t.subText),o=t.name,i=void 0===o?"谢邀":o,l=t.iconUrl;return Object(c.b)(oe,{iconUrl:l,icon:b.a,name:a?i:se[r],subText:(null==t?void 0:t.subText)||"本文由品牌邀请撰写",zaBlock:"CommercialLabel"})}var de=["relevant","editor_recommendation","answered_by_related","answered_by_official","answered_for_refute","zhizhi_plan_rumour_deny","zhizhi_plan_recommend","zhizhi_plan_edu_recommend","zhizhi_plan_baby_recommend","zhizhi_plan_acg_recommend","zhizhi_plan_outing_recommend","zhizhi_plan","zhizhi_reward","online_roundtable","roundtable","topic","special","raise_hand","weekly","daily","professional"],fe={online_roundtable:j.a,relevant:y.a,editor_recommendation:w.a,answered_by_related:y.a,answered_by_official:y.a,answered_for_refute:function(e){return h.a.createElement(m.a,U(U({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"SearchCircleFill24","data-old-api":"Circlesearch24"},e),{className:"ZDI ZDI--Circlesearch24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm-.778-7.617c1.79 0 3.222-1.438 3.222-3.192C14.444 9.438 13.011 8 11.222 8S8 9.438 8 11.191c0 1.754 1.433 3.192 3.222 3.192zm0 1.5c.947 0 1.83-.277 2.569-.754l1.9 1.901a.75.75 0 001.062-1.06l-1.845-1.845a4.652 4.652 0 001.036-2.934c0-2.59-2.114-4.691-4.722-4.691C8.614 6.5 6.5 8.6 6.5 11.191c0 2.591 2.114 4.692 4.722 4.692z",fillRule:"evenodd",clipRule:"evenodd"}))},roundtable:j.a,special:C.a,topic:function(e){return h.a.createElement(m.a,F(F({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ChatBubbleHashFill24","data-old-api":"ChatBubbleHashFill24"},e),{className:"ZDI ZDI--ChatBubbleHashFill24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M13.373 10.856l-.588 2.068h-2.02l.59-2.068h2.018z"}),h.a.createElement("path",{d:"M21.25 12a9.25 9.25 0 10-17.08 4.926l-.8 2.588a1 1 0 001.25 1.25l2.643-.817A9.25 9.25 0 0021.25 12zm-9.764-4.678a.841.841 0 01.578 1.04l-.23.812h2.018l.362-1.273a.841.841 0 011.618.46l-.23.813h.42a.841.841 0 110 1.682h-.9l-.588 2.068h.952a.841.841 0 110 1.682h-1.431l-.425 1.493a.841.841 0 01-1.618-.46l.294-1.033h-2.02l-.424 1.493a.841.841 0 01-1.618-.46l.294-1.033H7.98a.841.841 0 110-1.682h1.036l.588-2.068H8.517a.841.841 0 110-1.682h1.567l.362-1.273a.841.841 0 011.04-.579z",fillRule:"evenodd",clipRule:"evenodd"}))},raise_hand:C.a,weekly:x.a,daily:k.a,professional:S.a,zhizhi_plan_recommend:A.a,zhizhi_plan_edu_recommend:A.a,zhizhi_plan_baby_recommend:A.a,zhizhi_plan_acg_recommend:A.a,zhizhi_plan_outing_recommend:A.a,zhizhi_plan_rumour_deny:T.a,zhizhi_plan:A.a,zhizhi_reward:V.a},be={online_roundtable:"圆桌收录",relevant:"亲自答",editor_recommendation:"编辑推荐",answered_by_related:"相关方答",answered_by_official:"官方回应",answered_for_refute:"知友辟谣",roundtable:"圆桌收录",topic:"话题收录",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",professional:"专业",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划",zhizhi_plan_baby_recommend:"致知计划",zhizhi_plan_acg_recommend:"致知计划",zhizhi_plan_outing_recommend:"致知计划",zhizhi_plan_rumour_deny:"专业辟谣",zhizhi_plan:"致知计划",zhizhi_reward:"致知计划",science_seeking_truth_recommend:"科学求真"},pe=Object.assign(Object.assign({},be),{},{weekly:"知乎周刊收录",daily:"知乎日报收录"}),he={relevant:"此回答由问题相关方亲自撰写",professional:"已有 {} 人赠与了专业徽章",answered_by_related:"本回答由问题相关方撰写",answered_by_official:"本回答由国家官方权威机构撰写",answered_for_refute:"本回答由专业知友对内容辟谣"},me={online_roundtable:"圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",answered_by_related:"相关方答",answered_by_official:"官方回应",answered_for_refute:"知友辟谣",roundtable:"圆桌",topic:"话题收录",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",professional:"内容专业",zhizhi_plan:"致知计划",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划之教育季",zhizhi_plan_baby_recommend:"致知计划之母婴季",zhizhi_plan_acg_recommend:"致知计划之动漫游戏季",zhizhi_plan_outing_recommend:"致知计划之未来出行季",zhizhi_plan_rumour_deny:"辟谣标识",zhizhi_reward:"致知计划"},ve=Object(p.forwardRef)((function(e,t){var n=e.children,r=e.placement,o=void 0===r?"bottom":r,l=e.onClick,s=e.onPopoverClosed,u=e.zaBlock,d=i()(e,$),f=Object(L.a)(),b=Object(p.useRef)(),h=Object(p.useState)(!1),m=ne(a.a,h,2),v=m[0],g=m[1],O=Object(p.useRef)(),j=Object(z.b)().Mobile,y=Boolean(n),w=Object(M.a)((function(e){var n,r;b.current=(r=e,(n=t)?("function"==typeof n?n(r):n.current=r,r):r)})),C=Object(M.a)((function(e){l&&l(e),y&&g(!v)})),x=Object(M.a)((function(){O.current&&clearTimeout(O.current),y&&!v&&g(!0)})),k=Object(M.a)((function(){O.current=setTimeout((function(){g(!1)}),100)}));return Object(c.c)(c.a,{children:[Object(c.b)(oe,Object.assign(Object.assign({},d),{},{ref:w,expandable:y,isExpanded:v,onClick:C,zaBlock:u},!j&&{onMouseOver:x,onMouseLeave:k})),y&&Object(c.b)(q.a,{isOpen:v,arrowed:!0,globalClose:!0,listenResize:!0,target:b.current,placement:o,boundary:{padding:16},customStyle:{borderRadius:"8px",boxShadow:"0 -3px 10px 0 rgba(0, 0, 0, 0.1)",backgroundColor:f.colors.GBK99C},onClose:k,onAfterLeave:s,children:Object(c.b)("div",{onMouseOver:x,onMouseLeave:k,children:n})})]})}));ve.displayName="ExpandableLabel";var ge=function(e){return{icon:fe[e],title:pe[e],shortTitle:be[e],description:he[e],zaName:me[e]}},Oe=function(e,t){return e.includedInfos?e.includedInfos.find((function(e){return e.type===t})):null},je=function(e){var t=e.data,n=e.onLinkClick,r=t.type,a=t.icon,o=t.title,i=t.description,l=t.zaName,s=t.link,u=Object(z.b)().Mobile,d=Object(L.a)(),f=Object(p.useRef)(null),b=Object(M.a)((function(e){_.a.trackEvent(f.current,{id:3771,name:"多个"},{button:{text:l}}),s&&n&&n(e,s,r)}));return Object(c.b)(oe,Object.assign(Object.assign({ref:f,color:re.GOLDEN,icon:a,name:o},s&&{zaText:!0,shouldTrackShow:!0,zaBlock:r}),{},{subText:i,link:s,onClick:b,css:{height:u?34:36,borderRadius:0,background:"none","&:hover":{background:s?d.colors.GBK10A:"none"}}}))},ye=function(e){var t=e.data,n=e.onLinkClick,r=Object(z.b)().Mobile;return Object(c.b)(N.Box,{py:"8px",maxWidth:r?"calc(100vw - 34px)":"400px",children:t.map((function(e){return Object(c.b)(je,{data:e,onLinkClick:n},e.type)}))})},we=function(e){return Object(p.useMemo)((function(){var t=[];if(de.forEach((function(n){var r=function(e,t){switch(t){case"online_roundtable":return e.onlineRoundtable?Object.assign(Object.assign({},ge(t)),{},{description:e.onlineRoundtable.name,link:"https://www.zhihu.com/roundtable/".concat(e.onlineRoundtable.urlToken)}):null;case"relevant":return e.relevantInfo&&e.relevantInfo.isRelevant?ge(t):null;case"answered_by_related":return Oe(e,"answered_by_related")?ge(t):null;case"answered_by_official":return Oe(e,"answered_by_official")?ge(t):null;case"answered_for_refute":return Oe(e,"answered_for_refute")?ge(t):null;case"professional":return e.recognitionInfo&&e.recognitionInfo.recognizedCount?Object.assign(Object.assign({},ge(t)),{},{description:he[t].replace("{}",String(e.recognitionInfo.recognizedCount)),link:"#!",members:e.recognitionInfo.latestRecognizers}):null;case"zhizhi_plan":var n=e.includedInfos?e.includedInfos.find((function(e){return e.commonType===t&&!de.includes(e.type)})):null;return n?{icon:fe[n.type]||fe[t],title:n.name||pe[n.type]||pe[t],shortTitle:n.name||be[n.type]||be[t],description:n.title,link:n.url,zaName:me[n.type]||n.type}:null;case"zhizhi_reward":var r=e.includedInfos?e.includedInfos.find((function(e){return e.type===t})):null;return r?{icon:fe[r.type]||fe[t],title:r.name||pe[r.type]||pe[t],shortTitle:r.name||be[r.type]||be[t],description:r.title,link:r.url,zaName:r.name||me[r.type]}:null;case"special":case"raise_hand":var a=Oe(e,t);if(!a)return null;var o=ge(t);return Object.assign(Object.assign({},o),{},{title:a.subtitle||o.title,shortTitle:a.subtitle||o.shortTitle,description:a.title,link:a.url});default:var i=Oe(e,t);return i?Object.assign(Object.assign({},ge(t)),{},{description:i.title,link:i.url}):null}}(e,n);r&&t.push(Object.assign({type:n},r))})),!t.length)return null;var n=t.length>1&&"online_roundtable"!==t[0].type,r=t[0];return n&&(r.meta="relevant"===r.type?"及 ".concat(t.length-1," 项收录"):"等 ".concat(t.length," 项收录")),{items:t,label:r,expandable:n}}),[e])},Ce=function(e){var t=e.placement,n=void 0===t?"bottom":t,r=e.data,a=e.onExpand,o=e.onLinkClick,i=e.className,l=we(r),s=Object(p.useRef)(null),u=Object(p.useRef)(!1);if(!l)return null;var d=l.label,f=l.items,b=l.expandable,h=d.type,m=d.icon,v=d.title,g=d.shortTitle,O=d.meta,j=d.description,y=d.link,w=d.zaName,C=Boolean(y&&!b),x=C?ve:B.f;Object(p.useLayoutEffect)((function(){_.a.setModule(s.current,{module:"Content",module_name:w}),Object(D.onViewedOnce)(s.current,(function(){_.a.trackCardShow(s.current,{id:3769,name:b?"多个":"一个"})}))}),[b,w]);var k=Object(M.a)((function(){u.current=!1})),S=Object(M.a)((function(e){b&&!u.current&&(u.current=!u.current,a&&a(l)),!b&&C&&(_.a.trackEvent(s.current,{id:3771,name:"一个"},{button:{text:w}}),o&&o(e,y,h))})),A={as:ve,zaType:"Block"};return C?A={zaText:!0,zaBlock:h,shouldTrackShow:!0}:b&&(A=Object.assign(Object.assign({},A),{},{zaText:!0,onPopoverClosed:k})),Object(c.b)(x,Object.assign(Object.assign({},A),{},{ref:s,color:re.GOLDEN,icon:m,name:O&&g||v,subText:O||j,link:y,placement:n,onClick:S,className:i,children:b&&Object(c.b)(ye,{data:f,onLinkClick:o})}))},xe=Object(p.forwardRef)((function(e,t){var n=e.size,r=e.text,a=e.center,o=i()(e,ee);r&&(n="1.2em");var l=Object(c.b)("svg",Object.assign(Object.assign({ref:t},o),n&&{width:n,height:n}));return a?Object(c.c)("span",{ref:t,style:xe.strutStyle,children:["​",l]}):l}));xe.defaultProps={fill:"currentColor"},xe.strutStyle={display:"inline-flex",alignItems:"center"};Object(p.forwardRef)((function(e,t){var n=e.className;return Object(c.b)(xe,{ref:t,className:W()("OutLineIcon",n),viewBox:"0 0 13 12",css:{width:"20px",height:"12px"},children:Object(c.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.94376 0.628357C5.76292 0.430375 5.5428 0.27225 5.29746 0.164062C5.05211 0.055875 4.7869 0 4.51876 0C4.25062 0 3.98542 0.055875 3.74007 0.164062C3.49472 0.27225 3.2746 0.430375 3.09376 0.628357L0.593761 3.31836C0.211465 3.74412 0 4.29615 0 4.86836C0 5.44057 0.211465 5.99259 0.593761 6.41836L5.09376 11.3484C5.26923 11.5465 5.48475 11.7052 5.72609 11.8138C5.96743 11.9225 6.22909 11.9786 6.49376 11.9786C6.75843 11.9786 7.02009 11.9225 7.26143 11.8138C7.50277 11.7052 7.7183 11.5465 7.89376 11.3484L7.97376 11.2584L7.92376 11.3184L12.3538 6.48836C12.7403 6.05872 12.9541 5.50126 12.9541 4.92336C12.9541 4.34545 12.7403 3.78799 12.3538 3.35836L10.3538 1.12836C10.1736 0.925716 9.95262 0.763523 9.70528 0.652456C9.45795 0.541388 9.18989 0.483965 8.91876 0.483965C8.64763 0.483965 8.37958 0.541388 8.13224 0.652456C7.8849 0.763523 7.66389 0.925716 7.48376 1.12836L6.91376 1.74836L5.94376 0.628357ZM6.41376 4.47836C6.60901 4.69897 6.87106 4.84966 7.15995 4.90743C7.44883 4.96521 7.74868 4.9269 8.01376 4.79836C8.45713 5.73475 8.61577 6.78072 8.47 7.80646C8.32422 8.8322 7.88045 9.79256 7.19376 10.5684C7.10839 10.6644 7.00365 10.7412 6.88645 10.7938C6.76925 10.8464 6.64223 10.8736 6.51376 10.8736C6.38529 10.8736 6.25828 10.8464 6.14107 10.7938C6.02387 10.7412 5.91914 10.6644 5.83376 10.5684L1.31376 5.62836C1.1261 5.41772 1.02241 5.14546 1.02241 4.86336C1.02241 4.58125 1.1261 4.30899 1.31376 4.09836L3.77376 1.41836C3.86718 1.32002 3.97963 1.24172 4.10427 1.18821C4.2289 1.1347 4.36312 1.10711 4.49876 1.10711C4.6344 1.10711 4.76862 1.1347 4.89326 1.18821C5.01789 1.24172 5.13034 1.32002 5.22376 1.41836L6.22376 2.51836C6.04365 2.82303 5.96499 3.17706 5.99914 3.52934C6.03329 3.88162 6.17848 4.21395 6.41376 4.47836Z",fill:"currentColor"})})}));var ke=function(){return Object(c.b)(oe,{color:re.GOLDEN,icon:y.a,name:"亲自答",subText:"此回答由问题相关方亲自撰写",zaBlock:"LegacyPositiveLabel"})},Se=function(e){var t=e.color,n=void 0===t?re.GREY:t,r=e.icon,a=e.name,o=e.subText,i=e.moreLink,l=e.renderMoreIcon,s=e.description,u=e.hideName,d=Object(z.b)().Mobile,f=ae(n).color,b=null;return b=i&&l?Object(c.c)(c.a,{children:[o,Object(c.b)(E.b,{href:i,css:{marginLeft:o?4:0,textDecoration:"none",color:"inherit"},children:l})]}):o,Object(c.c)(N.Box,{py:"8px",maxWidth:d?"calc(100vw - 34px)":"400px",children:[!u&&Object(c.b)(oe,{color:n,icon:r,name:a,subText:b,css:{height:d?32:36,borderRadius:0,background:"none"}}),Boolean(s)&&Object(c.b)(N.Text,{lineHeight:d?"16px":"18px",fontSize:d?"13px":"14px",color:f,mx:"12px",mb:"8px",mt:u?"8px":0,children:s})]})},Ae=function(e){var t=e.disclaimerInfo,n=t.excerpt,r=t.description,a=t.subDescription,o=n?"创作声明":r,i=n&&"内容".concat(n);return Object(c.b)(ve,{name:o,subText:i,zaBlock:"DisclaimerLabel",children:Object(c.b)(Se,{color:re.BLUE,name:o,subText:i,description:a})})},Te=function(e){var t=e.annotationDetail;if(!t)return null;var n=t.detail,r=t.member,a=t.reasonDescription||"该内容已被标记",o="strong"===t.type?I.a:void 0,i=r?"".concat(r.name,"："):"";return Object(c.b)(ve,{color:re.GREY,icon:o,name:a,zaBlock:"Annotation",children:Object(c.b)(Se,{icon:o,name:a,description:(n||i)&&Object(c.b)("span",{dangerouslySetInnerHTML:{__html:"".concat(i).concat(n||"未填写原因")}})})})},Ie=function(e){var t=e.fill,n=Object(L.a)().colors.GBL05A;return Object(c.b)(R.a,{fill:t||n,size:18,css:{verticalAlign:"bottom"}})},Re=function(e){var t=e.collapseReason;return Object(c.b)(ve,{color:re.GREY,name:"该回答已被折叠",zaBlock:"AnswerCollapsed",children:Object(c.b)(Se,{name:"该回答已被折叠",renderMoreIcon:Object(c.b)(Ie,{}),moreLink:"/question/20120168/answer/35704072",description:"折叠原因：".concat(t)})})},Ee={color:"inherit",textDecoration:"underline"},Ne=function(e){var t=e.abnormalDetail,n=void 0===t?{description:"回答建议修改",reason:""}:t,r=n.description,a=n.reasonId,o=n.reason,i=a&&[10015,30005].includes(a)?Object(c.c)(c.a,{children:["不规范转载",Object(c.b)(E.b,{zaBlock:"AnswerCollapsedClick-Nonstandard",href:"https://www.zhihu.com/question/20258015",css:Ee,onClick:function(e){return e.stopPropagation()},children:o})]}):o,l=10027===a?Object(c.c)(c.a,{children:["作者修改内容或举证后，回答会重新展示。如果一周内未得到有效修改，回答会自动折叠。",Object(c.b)("br",{}),"知乎严格按照公开的流程处理各类投诉，不收任何费用也不与任何中介机构合作。",Object(c.b)(E.b,{zaBlock:"AnswerCollapsedClick",href:"https://www.zhihu.com/term/zhihu-terms#sec-report",css:Ee,children:"投诉流程"})]}):"作者修改内容通过后，回答会重新显示。如果一周内未得到有效修改，回答会自动折叠。";return Object(c.b)(ve,{color:re.GREY,name:r,subText:i,zaBlock:"AnswerCollapsedLabel",children:Object(c.b)(Se,{name:r,renderMoreIcon:Object(c.b)(Ie,{}),moreLink:"https://www.zhihu.com/question/24752645",description:l})})},Be=function(e){var t=e.answerCollapsed,n=e.answerAbnormal,r=e.commercial,a=e.business,o=e.thanksForInviting,l=e.positive,s=e.bluebook,u=e.annotation,d=e.disclaimer,f=e.adPromotion,b=e.campaign,p=e.limit,h=void 0===p?2:p,m=i()(e,te);if(!(t||n||r||a||o||l||s||u||d||f||b))return null;var v=[t||n,r||o||f||s||a,l,u||d,b].filter(Boolean).slice(0,h);return Object(c.b)(N.Flex,Object.assign(Object.assign({flexDirection:"row",flexWrap:"wrap",pt:"8px",css:{"& > div, & > a":{marginRight:"8px",marginBottom:"8px"}}},m),{},{children:v.map((function(e,t){return Object(c.b)("div",{children:e},t)}))}))};Be.propTypes={answerCollapsed:Z.a.node,answerAbnormal:Z.a.node,commercial:Z.a.node,business:Z.a.node,thanksForInviting:Z.a.node,bluebook:Z.a.node,positive:Z.a.node,annotation:Z.a.node,disclaimer:Z.a.node,adPromotion:Z.a.node,campaign:Z.a.node};var ze=Object(p.memo)(Be),Le={zhicon_icon_24_chat_bubble_idea_fill:function(e){return h.a.createElement(m.a,G(G({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ChatBubbleIdeaFill24","data-old-api":"ChatBubbleIdeaFill24"},e),{className:"ZDI ZDI--ChatBubbleIdeaFill24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M2.5 12a9.5 9.5 0 1117.603 4.961l.767 2.479a1.25 1.25 0 01-1.564 1.563l-2.538-.785A9.5 9.5 0 012.5 12zm11.676 1.324a1.403 1.403 0 001.842-.439 1.36 1.36 0 00-.297-1.839 1.405 1.405 0 00-1.889.148c-.11.118-.196.252-.258.396l-1.05-1.165a2.895 2.895 0 012.105-1.166 2.905 2.905 0 012.015.605 2.86 2.86 0 01.619 3.858 2.893 2.893 0 01-1.728 1.198 2.909 2.909 0 01-2.832-.876l-.003-.004-2.518-2.831a1.409 1.409 0 00-1.367-.42 1.393 1.393 0 00-.833.576 1.361 1.361 0 00.297 1.838 1.406 1.406 0 001.889-.147 1.37 1.37 0 00.258-.396l1.041 1.176a2.9 2.9 0 01-2.097 1.155 2.905 2.905 0 01-2.014-.605 2.86 2.86 0 01-.619-3.858A2.893 2.893 0 018.465 9.33a2.909 2.909 0 012.832.876l.003.004 2.518 2.83c.102.113.223.21.358.284z",fillRule:"evenodd",clipRule:"evenodd"}))}},Pe=function(e){var t=e.theme,n=e.text,r=e.iconName,a=e.detail,o={color:re[t],icon:r?Le[r]:void 0,name:n,css:{display:"inline-flex"}};return a?Object(c.b)(ve,Object.assign(Object.assign({},o),{},{children:Object(c.b)(Se,{color:re[t],description:a,hideName:!0,name:n})})):Object(c.b)(oe,Object.assign({},o))}},1423:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n.n(d),b=n(20),p=n(2944),h=n(12),m=Object.assign;function v(e){return f.a.createElement(h.a,m(m({width:"24",height:"25",viewBox:"0 0 24 25","data-new-api":"TextFill24","data-old-api":"Answer"},e),{className:"Zi Zi--Answer"+(e.className?" ".concat(e.className):"")}),f.a.createElement("path",{d:"M3.5 5.487c0-.69.56-1.25 1.25-1.25h14.5a1.25 1.25 0 110 2.5H4.75c-.69 0-1.25-.56-1.25-1.25zm0 7c0-.69.56-1.25 1.25-1.25h14.5a1.25 1.25 0 110 2.5H4.75c-.69 0-1.25-.56-1.25-1.25zm1.25 5.75a1.25 1.25 0 100 2.5h7.5a1.25 1.25 0 000-2.5h-7.5z"}))}var g=n(156),O=n(153),j=n(13),y=n.n(j),w=n(1118);function C(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var r=t.detail,a=t.member,o=t.reasonDescription,i=t.type,c=a?"".concat(a.name,"："):"";return Object(l.c)("section",{className:y()("Annotation-mark",n),children:[Object(l.c)("header",{className:"Annotation-header",children:["strong"===i&&Object(l.b)(w.a,{size:16,center:!0,text:!0,className:"Annotation-alert"}),Object(l.b)("h1",{className:"Annotation-markTitle",children:o||"该内容已被标记"})]}),(r||c)&&Object(l.b)("div",{className:"Annotation-markSummary",dangerouslySetInnerHTML:{__html:"".concat(c).concat(r||"未填写原因")}})]})}C.propTypes={annotationDetail:u.a.shape({reason:u.a.number.isRequired,reasonDescription:u.a.string,type:u.a.oneOf(["strong","weak"]).isRequired,detail:u.a.string,member:u.a.shape({name:u.a.string.isRequired}),showOuter:u.a.bool}).isRequired};var x=n(435),k=n(972),S=n(1288),A=n(988),T=n(929),I=n(964),R=n(965),E=n(154),N=n(973),B=n(940),z=n(924),L=n(433);n(1760);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var _={placeholders:{img:" [图片] "}},M=function(e){Object(o.a)(n,e);var t=P(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={collapsed:!0,commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleOpenComment=function(t){var n=t.target.parentNode.className.includes("is-fixed")?"fixed":"bottom",r=e.state.modalShown,a=!("bottom"===n&&r);e.setState({modalShown:a,commentPattern:n})},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handlePackupButton=function(){e.setState({modalShown:!1}),e.CommentsButtonEl.scrollIntoView({block:"start",behavior:"smooth"}),window.scrollTo(0,window.pageYOffset-window.screen.height/2)},e.handleContentToggleExpand=function(t){e.setState({collapsed:!t})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.question,a=t.question,o=a.id,i=a.title,c=a.type,s=a.created,u=a.answerCount,d=a.followerCount,f=a.isMuted,b=a.questionType,h=a.detail,m=a.commentCount,j=a.adminClosedComment,y=a.relationship,w=void 0===y?{}:y,k=a.annotationDetail,A=t.action,L=(t.isConcise,t.isAnonymousFollowing),P=t.lastreadTouchable,M=t.zaInfos,D=M.title,U=M.expand,F=M.follow,V=M.options,G=t.renderOptions,q=t.blockStrategies,H=(q=void 0===q?{}:q).isBlockingFollowQuestion,W=q.isBlockingComment,K=q.isBlockingShare,Z=this.state,Q=Z.commentsShown,Y=Z.commentsAutoFocus,J=Z.commentPattern,X=Z.collapsed,$={id:o,type:c},ee="/question/".concat(o);return Object(l.c)(T.e,{data:r,link:ee,lastreadTouchable:P,onRef:function(t){e.contentItem=t},title:Object(l.c)("div",{className:"QuestionItem-title",children:[Object(l.b)(x.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(l.b)("a",Object.assign(Object.assign({href:ee,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-name":"Title"},D&&{"data-za-detail-view-id":D}),{},{children:i}))}),L&&Object(l.b)(p.a,{className:"QuestionItem-icon"}),"commercial"===b&&f&&Object(l.b)("span",{className:"QuestionItem-muteStatus",children:"待推广"})]}),children:[!X&&k&&Object(l.b)(C,{annotationDetail:k}),n===T.c.default&&Object(l.c)(T.d,{children:[Object(g.toDateTimeString)(s),"".concat(Object(O.formatNumber)(u)," 个回答"),"".concat(Object(O.formatNumber)(d)," 个关注")]}),n===T.c.interactive&&Object(l.c)(I.b,{data:r,html:h||"",excerpt:r.excerpt,limit:60,limitWithImage:60,truncateHTMLOptions:_,onToggleExpend:this.handleContentToggleExpand,zaIds:{expand:U},children:[!H&&(A||Object(l.b)(z.a,Object.assign(Object.assign({},$),{},{isFollowing:(w&&{}.hasOwnProperty.call(w,"isFollowing")?w:r).isFollowing,zaId:F}))),[!W&&Object(l.b)(N.a,{onClick:this.handleCommentsShown,commentsShown:Q,commentClosed:j,count:m},"comment"),!K&&Object(l.b)(R.a,Object.assign(Object.assign({},$),{},{title:i,href:ee}),"share"),Boolean(u)&&Object(l.c)(E.a,{preset:"plain",to:ee,target:"_blank",children:[Object(l.b)(v,{style:{marginRight:"4px"},center:!0,text:!0}),Object(O.formatNumber)(u)," 个回答"]},"linkbutton"),G&&G((function(){return e.contentItem}),V),X&&k&&Object(l.b)(S.a,{annotationDetail:k})]]}),Object(l.b)(B.a,{parent:r,commentPattern:J,shown:Q,autoFocus:Y,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);M.propTypes={preset:u.a.oneOf(Object.keys(T.c)).isRequired,isAnonymousFollowing:u.a.bool,contentShown:u.a.bool,zaInfos:u.a.shape({title:u.a.number,expand:u.a.number,follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},M.defaultProps={preset:T.c.default,zaInfos:{}};t.a=Object(b.compose)(Object(A.a)((function(e){var t=e.question;return{content:{type:"Question",token:String(t.id)}}})),Object(L.b)((function(e){var t=e.question,n=e.trackCardShow,r=void 0===n||n;return{module:"QuestionItem",card:{content:{type:"Question",token:String(t.id),item_num:t.answerCount,comment_num:t.commentCount,follower_num:t.followerCount,publish_timestamp:1e3*t.created}},trackCardShow:r}})),Object(k.d)({dataPath:"question"}),k.c)(M)},1425:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(13),o=n.n(a);function i(e){var t=e.className;return Object(r.b)("span",{className:o()("ActivityItem-StickyMark",t),children:"置顶"})}},1428:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(0),u=n(20),d=n(21),f=n(3),b=n.n(f),p=n(33),h=n(95),m=n(91),v=n(911),g=n(219),O=n(156),j=n(153),y=n(433),w=n(32),C=n(988),x=n(173),k=n(155),S=n(929),A=n(1341),T=n(924),I=n(965);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var E=function(e){Object(o.a)(n,e);var t=R(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showQuit:!1},e.onClose=function(){e.setState({showQuit:!1})},e.handleQuitButton=function(){e.setState({showQuit:!0})},e.handleQuitColumn=function(t,n){e.props.fetchQuitColumn(t,n),e.setState({showQuit:!1})},e}return Object(a.a)(n,[{key:"renderStatus",value:function(){var e=this.props,t=e.column,n=t.itemsCount,r=t.voteupCount,a=e.isProfile,o=e.urlToken===(e.currentUser||{}).urlToken;return Object(l.c)(S.d,{children:["".concat(Object(j.formatNumber)(n)," 篇内容"),"".concat(Object(j.formatNumber)(r)," 赞同"),a&&o&&this.renderProfileContent()]})}},{key:"renderMeta",value:function(){var e=this.props,t=e.preset,n=e.column.intro;return Object(l.b)("div",{className:"ColumnItem-meta",children:Object(l.c)(l.a,{children:[n,t===S.c.default&&this.renderStatus()]})})}},{key:"renderProfileContent",value:function(){var e=this,t=this.props,n=t.column,r=n.id,a=n.author,o=t.contributions,i=this.state.showQuit,c=a.urlToken===o.urlToken;return Object(l.c)(l.a,{children:[Object(l.b)(g.a,{toggler:Object(l.b)(p.c,{preset:"plain",icon:v.a}),placement:"top",className:"ColumnItem-more",arrowed:!0,children:c?Object(l.b)(p.c,{component:"a",preset:"plain",href:"".concat(w.H,"/column/").concat(r),className:"ColumnItem-botton",children:"管理专栏"}):Object(l.b)(p.c,{preset:"plain",className:"ColumnItem-botton",onClick:this.handleQuitButton,children:"退出专栏"})}),Object(l.b)(m.b,{onClose:this.onClose,title:"确定退出该专栏吗？",children:i&&Object(l.b)("div",{className:"ColumnAuthorsList-modal",children:Object(l.c)(h.a,{direction:"horizontal",children:[Object(l.b)(p.c,{onClick:function(){return e.onClose},children:"取消"}),Object(l.b)(p.c,{className:"ColumnPosts-confirmButton",onClick:function(){return e.handleQuitColumn(o.urlToken,r)},color:"blue",preset:"primary",children:"确定"})]})})})]})}},{key:"renderInteractiveContent",value:function(){var e=this,t=this.props,n=t.column,r=n.id,a=n.type,o=n.articlesCount,i=n.followers,c=n.lastArticle,s=n.isFollowing,u=n.author,d=n.title,f=t.zaInfos,b=f.follow,p=f.options,h=t.renderOptions,m={id:r,type:a},v=(c||{}).updated;return Object(l.c)(l.a,{children:[Object(l.c)(S.b,{className:"ContentItem-counts",children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"文章："}),Object(j.formatNumber)(o)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"最后更新于："}),Object(O.toRelativeString)(v)||"暂未更新"]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"关注者："}),i]})]}),Object(l.c)(S.a,{children:[Object(l.b)(T.a,Object.assign(Object.assign({},m),{},{isFollowing:s,zaId:b})),Object(l.b)(I.a,Object.assign(Object.assign({},m),{},{title:d,authorName:u&&u.name,href:"".concat(w.H,"/column/").concat(r)})),h&&h((function(){return e.contentItem}),p)]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.column,a=t.lastreadTouchable,o=Object(l.b)(A.a,{column:r,target:"_blank"});return Object(l.b)(S.e,{className:"ColumnItem",data:r,link:"".concat(w.H,"/column/").concat(r.id),onRef:function(t){return e.contentItem=t},title:o,meta:this.renderMeta(),lastreadTouchable:a,children:n===S.c.interactive&&this.renderInteractiveContent()})}}]),n}(s.Component);E.propTypes={preset:b.a.oneOf(Object.values(S.c)),isProfile:b.a.bool,zaInfos:b.a.shape({follow:b.a.number,options:b.a.number}),renderOptions:b.a.func},E.defaultProps={preset:S.c.default,isProfile:!1,zaInfos:{}};t.a=Object(u.compose)(Object(C.a)((function(e){var t=e.column;return{content:{type:"Column",token:String(t.id)}}})),Object(y.b)((function(e){var t=e.column,n=e.trackCardShow,r=void 0===n||n;return{module:"ColumnItem",card:{content:{type:"Column",token:t.id,item_num:t.articlesCount,follower_num:t.followers,publish_timestamp:1e3*t.updated,author_member_hash_id:(t.author||{}).id}},trackCardShow:r}})),x.a,Object(d.connect)(null,{fetchQuitColumn:k.e}))(E)},1429:function(e,t,n){"use strict";var r=n(24),a=n.n(r),o=n(0),i=n(118),c=n.n(i),l="function"==typeof ResizeObserver?function(e,t){var n=new ResizeObserver((function(e){return t(e[0].contentRect)}));return n.observe(e),function(){n.disconnect()}}:function(e,t){var n,r=function(){var r=e.getBoundingClientRect();!(n&&["left","top","width","height"].every((function(e){return n[e]===r[e]})))&&(n=r,t(r))},a=new(window.MutationObserver||window.WebKitMutationObserver)(c()(r,100));return a.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),r(),function(){a.disconnect()}};function s(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(o.useState)(e),n=s(a.a,t,2),r=n[0],i=n[1],c=Object(o.useState)(null),u=s(a.a,c,2),d=u[0],f=u[1];return Object(o.useEffect)((function(){if(d)return l(d,i)}),[d]),[f,r]}},1433:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(961),b=n(153),p=n(434),h=n(1154),m=n(1028);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=v(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,a=e.voteupCount,o=e.onLoad,i=e.text,c=e.isRewardList,s=e.notice,u=e.type,d=e.currentUser,v={getContainer:function(e){return e}};return Object(l.c)("div",{className:"VoterList",children:[Object(l.b)(h.a,{header:"".concat(Object(b.formatNumber)(a)," 人").concat(i||"赞同了")}),c&&s&&Object(l.b)("div",{className:"VoterList-description",children:Object(l.b)("p",{children:s})}),Object(l.b)(p.b,Object.assign(Object.assign({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:o,placeholder:Object(l.b)(p.a,{className:"List-item",withAvatar:!0})},v),{},{children:r&&r.map((function(e,t){return Object(l.b)(f.a,{children:Object(l.b)(m.a,{currentUser:d,user:e,isRewardList:c,meta:null,type:u,userLinkV2:!0})},"".concat(t,".").concat(e.urlToken))}))}))]})}}]),n}(d.Component);g.propTypes={isFetching:u.a.bool.isRequired,isDrained:u.a.bool.isRequired,items:u.a.array.isRequired,voteupCount:u.a.number.isRequired,text:u.a.string.isRequired,onLoad:u.a.func.isRequired,isRewardList:u.a.bool,type:u.a.string,currentUser:u.a.object};t.a=g},1436:function(e,t){(function(t){e.exports=t}).call(this,{})},1455:function(e,t,n){"use strict";var r=n(24);function a(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.getBlockType=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var o=["img","br"],i=/([\w|-]+)(?:="([^"]*)")?/;function c(e){var t={};if((e=e.trim()).length)for(var n,o=new RegExp(i.source,"g");n=o.exec(e);){var c=n.slice(1),l=a(r,c,2),s=l[0],u=l[1];t[s]=u}return t}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a(r,e,5),i=n[0],l=n[1],s=n[2],u=n[3],d=n[4],f="open";"/"===l?f="close":(o.includes(s)||"/"===d)&&(f="self-close");var b=t.parseAttrs?c(u):u;return{tagHTML:i,tagName:s,tagType:f,attrs:b}}function s(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t}function u(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"sup":return{type:"replace-self",content:""};case"invisible":return{type:"hide"};default:return null}}function d(e){return!!(e.h1||e.h2||e.h3||e.h4||e.h5||e.h6||e.blockquote||e.pre||e.img||e.sup||e["video-box"]||e["link-card"])||(e.br||0)+(e.p||0)+(e.li||0)>1}t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=c,t.parseTagGroup=l,t.parseTag=function(e,n){var r=t.TAG_RE.exec(e);if(r)return l(r,n)},t.getBlockType=s,t.truncateHTML=function(e){for(var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.endsWith,c=void 0===i?"…":i,f=a.placeholders,b=void 0===f?{}:f,p=[],h=[],m=[],v={},g={},O=new RegExp(t.TAG_RE.source,"g"),j=0,y=0,w=0,C=0,x=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.push(e),t||(j+=e.length),y+=e.length};n=O.exec(e);){var k=l(n,{parseAttrs:!0}),S=k.tagHTML,A=k.tagType,T=k.tagName,I="close"===A&&o.includes(T)?"invalid":s("close"!==A?k:h[h.length-1]),R=b[I]?{type:"replace",content:b[I]}:u(I);"close"!==A&&(v[I]=(v[I]||0)+1);var E=e.slice(y,n.index),N=E.length;if(j+N>=r&&0===w&&0===C){for(x(E.slice(0,r-j));m.length;){var B=m.pop();p.push("</".concat(B.tagName,">"))}break}0===w&&x(E,0!==C),"invalid"!==I&&("open"===A?h.push(k):"close"===A&&h.pop(),R?("replace"===R.type&&(0===w&&"close"!==A&&p.push(R.content),"open"===A?w++:"close"===A&&w--),0===w&&"replace-self"===R.type&&p.push(R.content),0===w&&"hide"===R.type&&("open"===A?C++:"close"===A&&C--,p.push(S))):0===w&&(p.push(S),"open"===A?m.push(k):"close"===A&&m.pop())),"video-box"!==I||g.type||"string"==typeof k.attrs||(g.type="video",g.url=k.attrs["data-poster"],g.id=k.attrs["data-lens-id"]),y=O.lastIndex}if(j<r){var z=e.slice(y).slice(0,r-j);x(z)}var L=j>r||j===r&&y<e.length||d(v);return{isTruncated:L,thumbnailInfo:g,content:"".concat(p.join("").trim().replace(/\s{2,}/g," ")).concat(L?c:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},1493:function(e,t,n){"use strict";var r=n(37),a=n(15),o=n(16),i=n(18),c=n(19),l=n(9),s=n(1),u=n(0),d=n(21),f=n(1035),b=n(1105),p=n(2161),h=n(156),m=n(25),v=n(154),g=n(32),O=n(378),j=["toggler","column","id","isLoading","onRef"];function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var w=function(e){Object(i.a)(n,e);var t=y(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).load=function(){var t=e.props,n=t.dispatch,r=t.id;n(Object(O.b)(r))},e.track=function(){var t,n=e.props.column;e.hoverCardElement&&n&&(m.a.setModule(e.hoverCardElement,{module:"ColumnItem"},{card:{content:{type:"Column",token:n.id,item_num:n.articlesCount,follower_num:n.followers,publish_timestamp:1e3*n.updated,author_member_hash_id:null===(t=n.author)||void 0===t?void 0:t.id}}}),m.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,a=t.column,o=t.id,i=t.isLoading,c=t.onRef,l=Object(r.default)(t,j),u=a||{},d=u.title,m=u.intro,O=u.itemsCount,y=u.voteupCount,w=u.lastArticle,C=u.articlesCount,x=u.followers,k=w||{},S=k.title,A=k.created,T="".concat(g.H,"/column/").concat(o);return Object(s.c)(b.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(b.a,{title:Object(s.b)("a",{target:"_black",href:T,children:d})}),m,w&&Object(s.c)("div",{children:[Object(s.b)(p.a,{text:!0,center:!0})," 最后更新",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),S,Object(s.c)("span",{children:["（",Object(h.toRelativeString)(A),"）"]})]}),Object(s.b)("div",{children:Object(s.c)(f.a,{children:[Object(s.b)(f.a.Item,{tag:v.a,preset:"plain",a:!0,to:T,name:O>=0?"内容":"文章",value:null!=O?O:C}),Object(s.b)(f.a.Item,{tag:v.a,preset:"plain",a:!0,to:T,name:y>=0?"赞同":"关注",value:null!=y?y:x})]})})]}))}}]),n}(u.Component);t.a=Object(d.connect)((function(e,t){var n=t.id,r=e.entities.columns,a=e.loading.local;return{column:r[n],isLoading:Boolean(a["column/".concat(n)])}}))(w)},1534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=o,t.unobserve=i,t.destroy=c;var r=new Map,a=new Map;function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},o=arguments[3],i=n.root,c=n.rootMargin,s=n.threshold||0;if(e&&t){var u=c?s.toString()+"_"+c:""+s.toString();i&&(u=o?o+"_"+u:null);var d=u?a.get(u):null;d||(d=new IntersectionObserver(l,n),u&&a.set(u,d));var f={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return r.set(e,f),d.observe(e),f}}function i(e){if(e){var t=r.get(e);if(t){var n=t.observerId,o=t.observer,i=n?a.get(n):o;i&&i.unobserve(e);var c=!1;n&&r.forEach((function(t,r){t&&t.observerId===n&&r!==e&&(c=!0)})),i&&!c&&(i.disconnect(),a.delete(n)),r.delete(e)}}}function c(){a.forEach((function(e){e.disconnect()})),a.clear(),r.clear()}function l(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio,a=e.target,o=r.get(a);if(o&&n>=0){var i=o.options,c=!1;Array.isArray(i.threshold)?c=i.threshold.some((function(e){return o.visible?n>e:n>=e})):void 0!==i.threshold&&(c=o.visible?n>i.threshold:n>=i.threshold),void 0!==t&&(c=c&&t),o.callback&&o.callback(c)}}))}t.default={observe:o,unobserve:i,destroy:c}},1537:function(e,t,n){var r=n(675),a=n(225),o=n(381),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var l=null==n?0:o(n);return l<0&&(l=i(c+l,0)),r(e,a(t,3),l)}},1538:function(e,t,n){"use strict";function r(e){return e?"¥".concat(e/100):"免费"}n.d(t,"a",(function(){return r}))},1539:function(e,t,n){"use strict";var r=n(1),a=n(289),o=n(1252),i=n(215);t.a=Object(i.a)((function(e){var t=e.hide,n=e.stickyBottom,i=e.stickyContainer,c=e.contentType,l=e.contentId,s=e.zaContentType,u=e.children,d=e.onPositionStatusChange,f=e.authRequired,b=e.useProvider;if(t)return null;var p=void 0===b||b?Object(r.b)(o.a,{loginCheck:f([function(){return!0},function(){return!1}]),contentType:c,contentId:l,zaContentType:s,children:u}):u;return n?Object(r.b)(a.a,{bottom:!0,container:i,onPositionStatusChange:d,children:p}):p}))},1543:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(59),o=n(869);function i(e){var t=Object(o.a)((function(){return n.e(70).then(n.bind(null,2806))}));return Object(r.b)(a.Box,Object.assign(Object.assign({my:"14px",css:{minHeight:20}},e),{},{children:t?Object(r.b)(t,{width:"70px",height:"20px",css:{display:"block"}}):null}))}},1544:function(e,t,n){e.exports=n(1257)},1545:function(e,t,n){e.exports=n(1259)},1546:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,a="~";function o(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function c(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new i(n,r||e,o),l=a?a+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],c]:e._events[l].push(c):(e._events[l]=c,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(a=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=a?a+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,i=new Array(o);r<o;r++)i[r]=n[r].fn;return i},s.prototype.listenerCount=function(e){var t=a?a+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,r,o,i){var c=a?a+e:e;if(!this._events[c])return!1;var l,s,u=this._events[c],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,i),!0}for(s=1,l=new Array(d-1);s<d;s++)l[s-1]=arguments[s];u.fn.apply(u.context,l)}else{var f,b=u.length;for(s=0;s<b;s++)switch(u[s].once&&this.removeListener(e,u[s].fn,void 0,!0),d){case 1:u[s].fn.call(u[s].context);break;case 2:u[s].fn.call(u[s].context,t);break;case 3:u[s].fn.call(u[s].context,t,n);break;case 4:u[s].fn.call(u[s].context,t,n,r);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[s].fn.apply(u[s].context,l)}}return!0},s.prototype.on=function(e,t,n){return c(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return c(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,r){var o=a?a+e:e;if(!this._events[o])return this;if(!t)return l(this,o),this;var i=this._events[o];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||l(this,o);else{for(var c=0,s=[],u=i.length;c<u;c++)(i[c].fn!==t||r&&!i[c].once||n&&i[c].context!==n)&&s.push(i[c]);s.length?this._events[o]=1===s.length?s[0]:s:l(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&l(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=a,s.EventEmitter=s,e.exports=s},1547:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return i})),function(e){e.LOG="log",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(r||(r={}));var a={log:function(e){for(var t,n=console[e]?e:"log",r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];(t=console)[n].apply(t,["[griffith]"].concat(a))},debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[r.DEBUG].concat(t))},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[r.INFO].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[r.WARN].concat(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[r.ERROR].concat(t))}};var o,i=(o="undefined"!=typeof navigator?navigator.userAgent:"",{isIE:/MSIE|Trident/i.test(o),isMobile:/iPhone|iPad|iPod|Android/i.test(o),isAndroid:/(android)/i.test(o),isSafari:/^((?!chrome|android).)*safari/i.test(o)});function c(){var e=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r}function l(){var e=document.createElement("video");return Boolean(e.canPlayType("application/vnd.apple.mpegURL"))}},1549:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(39);function a(e,t,n){return"//".concat(r.a.wwwHost,"/vessay").concat(n?"/v2":"","/editor?type=").concat(e,"&id=").concat(t)}var o="vessay_v2_sdk",i="2"},1550:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(118),a=n.n(r);function o(e,t,n){var r=!1,o=a()((function(){r=!1,e.apply(void 0,arguments)}),t,n);return Object.assign((function(){r=!0,o.apply(void 0,arguments)}),{cancel:o.cancel,flush:o.flush,pending:function(){return r}})}},1574:function(e,t,n){"use strict";var r=n(35),a=n(216),o=n(15),i=n(16),c=n(86),l=n(18),s=n(19),u=n(9),d=n(1),f=n(2958),b=n(220),p=n.n(b),h=n(13),m=n.n(h),v=n(2280),g=n(2957),O=n(3),j=n.n(O),y=n(0),w=n.n(y),C=n(21),x=n(49),k=n(59),S=n(20),A=n(25),T=n(51),I=n(1033),R=n(91),E=n(433),N=n(217),B=n(33),z=n(297),L=n(289),P=n(43),_=n.n(P),M=n(156);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var U=function(e,t){var n=t?e.replace(/<.+?>/g,""):e;return Array.from(n).length},F=function(e,t,n){var r=U(e,n);if(0===r)return{ok:!1,message:null};var a=r-t;return a>0?{ok:!1,message:"已超过 ".concat(a," 个字")}:a>=-10?{ok:!0,message:"还可以输入 ".concat(-a," 个字")}:{ok:!0,message:null}};(function(e){Object(l.a)(n,e);var t=D(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).check="title"===e.props.type?function(e){return F(e,100)}:function(e){return F(e,1e5,!0)},e.state=e.check(e.props.content),e.compareState=function(t){var n=t.ok,r=t.message;return e.state.message!==r||e.state.ok!==n},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.onStatusChange(this.state.ok)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.onStatusChange,r=t.content;if(e.content!==r){var a=this.check(e.content);this.compareState(a)&&(n(a.ok),this.setState(a))}}},{key:"shouldComponentUpdate",value:function(e,t){return this.compareState(t)}},{key:"render",value:function(){var e=this.state,t=e.ok,n=e.message,r=m()("WriteIndex-LengthStatus",{"WriteIndex-LengthStatus-warning":!t});return n&&Object(d.b)("div",{className:r,children:n})}}]),n}(y.Component)).propTypes={content:j.a.string,type:j.a.oneOf(["content","title"]).isRequired,onStatusChange:j.a.func.isRequired};var V=n(1364),G=n(921),q=n(545),H=n(191),W=n(12),K=Object.assign;function Z(e){return w.a.createElement(W.a,K(K({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"InfoCircle24","data-old-api":"InfoCircle24"},e),{className:"ZDI ZDI--InfoCircle24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm1.11-14.79a1.11 1.11 0 11-2.22 0 1.11 1.11 0 012.22 0zm-1.31 4.208a.07.07 0 01.02-.006h.007c.006.002.016.005.026.013.01.009.015.018.017.023l.002.008c0 .003 0 .009-.003.019l-1.152 4.507c-.312 1.224.941 2.264 2.132 1.77 0 0 1.09-.557 1.461-.848.371-.291.46-.478.334-.765-.168-.388-.542-.513-.928-.352l-1.457.604a.067.067 0 01-.018.006.03.03 0 01-.009 0 .058.058 0 01-.025-.014.057.057 0 01-.018-.022.046.046 0 01-.002-.008c0-.003 0-.009.003-.019l1.152-4.507c.313-1.224-.849-2.388-2.131-1.77l-1.457.605c-.387.16-.594.534-.405.97.18.415.598.31 1.081.187l.077-.019 1.294-.382z",fillRule:"evenodd",clipRule:"evenodd"}))}function Q(e){var t=e.getSentences,n={},r=new Set,a=!1,o=!1,i=!1,c=null;return{initialize:function(e){Object.assign(n,e),function(e,t){var n=e.store,r=e.getSentences;Promise.resolve(null==r?void 0:r()).then((function(e){if(null!=e&&e.length){var r=n.getEditorState(),a=r.getCurrentContent(),o=a.getBlockMap();e.filter((function(e){var t;return(null==e||null===(t=e.position)||void 0===t?void 0:t.start)&&e.position.end})).forEach((function(e){var i=e.position,c=i.start,l=c.paragraphId,s=c.offset,u=i.end,d=u.paragraphId,f=u.offset,b=null,p=null,h=f,m=o.skipUntil((function(e){var t,n=null===(t=e.getData())||void 0===t?void 0:t.get("pid"),r=e.getKey();return n===l&&(b=r,!0)})).takeUntil((function(e){var t;if(p)return!0;var n=null===(t=e.getData())||void 0===t?void 0:t.get("pid"),r=e.getKey();return n===d&&(p=r,h=Math.min(e.getLength(),f)),!1}));if(b&&p){var v=G.SelectionState.createEmpty(b).merge({anchorOffset:s,focusKey:p,focusOffset:h});a=G.Modifier.applyInlineStyle(a,v,"INTERACT"),r=G.EditorState.set(r,{currentContent:a}),n.setEditorState(r),t(m)}else console.error("句子互动：无法找到对应的互动句子，startPid：".concat(l,"，startKey：").concat(b,"，endPid：").concat(d,"，endKey：").concat(p))}))}}))}({store:n,getSentences:t},(function(e){null!=e&&e.size&&e.forEach((function(e){var t=e.getKey();r.add(t)}))}))},customStyleMap:{INTERACT:{borderBottom:"1px dashed #BFBFBF"}},onChange:function(e){if(!r.size)return e;if(o)return e;var t=!1,n=e.getCurrentContent(),l=e.getSelection(),s=l.getHasFocus()&&i;if(i=l.getHasFocus(),s){var u=n.getBlockMap(),f=l.getStartKey(),b=l.getEndKey(),p=!1;u.skipUntil((function(e){return e.getKey()===f})).takeUntil((function(e){return!!p||(e.getKey()===b&&(p=!0),!1)})).toArray().forEach((function(e,n){t||e.findStyleRanges((function(e){return e.hasStyle("INTERACT")}),(function(r,a){t=n>0||l.hasEdgeWithin(e.getKey(),0,a)}))}))}return t!==a&&(!function(){var e;if(a)return null===(e=c)||void 0===e||e(),void(c=null);Object(q.a)((function(e){return c=e,Object(d.b)(H.a,{css:{top:"126px"},delay:36e5,notification:{text:Object(d.c)(k.Text,{css:{display:"flex",alignItems:"center"},children:[Object(d.b)(Z,{size:18,css:{marginRight:"8px"}}),"修改有互动的句子时，app 端对应的句子互动划线将不再外显"]}),key:"notificationInteractTexts",timeStamp:(new Date).getDate()},actions:Object(d.b)(B.c,{preset:B.b.Link,color:B.a.Blue,onClick:function(){e(),o=!0},children:"知道了"})})}))}(),a=t),e}}}var Y=n(46),J=n(541),X=n(79),$=n.n(X);function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var te=function(e){Object(l.a)(n,e);var t=ee(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidCatch",value:function(e,t){var n,r,a,o=null!==(n=Object(Y.c)())&&void 0!==n?n:"Unknown",i=null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"Unknown",c=null!==(a=this.props.currentUser)&&void 0!==a?a:"Unknown";throw Object(J.a)(e,{logger:"EditorErrorReport",fingerprint:["editor-fail"],extra:{passWhitelistUrlsTest:!0,pageName:o,currentUser:c}}),Object(J.c)({type:"EditorRenderError",appName:"heifetz",spanName:o,currentUser:c,release:"4713-8b5bdf33",error:{name:i,message:e.message,stack:e.stack,componentStack:t.componentStack}}),e}},{key:"render",value:function(){return this.props.children}}]),n}(y.Component),ne=Object(C.connect)((function(e){return{currentUser:e.currentUser}}))(te),re=n(1508),ae=n(219),oe=function(){return Object(d.b)(T.b,{block:"MarkdownTips",children:Object(d.c)(k.Text,{color:"GBL05A",ml:"24px",fontSize:14,children:[Object(d.b)(T.f,{zaType:"Popup",zaText:"Markdown 识别中"}),"Markdown 语法识别中",Object(d.b)(ae.a,{arrowed:!0,toggleEvent:"hover",toggler:Object(d.b)(B.c,{icon:re.c,preset:"plain",css:{marginLeft:5}}),children:Object(d.c)(k.Box,{height:64,width:253,px:14,py:12,fontSize:14,css:function(e){return{color:e.colors.GBK02A}},children:[Object(d.b)(T.f,{zaType:"Popup",zaText:"Markdown 识别中 - 气泡"}),"可在「工具栏」-「更多」中关闭此模式，支持语法请参考「帮助文档」"," "]})})]})})},ie=n(868),ce=n(376),le=n.n(ce),se=n(432);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var de=Object(y.createContext)({updateFormData:function(){},formData:{}}),fe=function(e){var t=function(t){Object(l.a)(r,t);var n=ue(r);function r(){var e;Object(o.a)(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).state={},e.answerFormDataProps={updateFormData:function(t){return e.setState(t)},getFormData:function(){return e.state}},e}return Object(i.a)(r,[{key:"render",value:function(){return Object(d.b)(de.Provider,{value:Object.assign({},this.answerFormDataProps),children:Object(d.b)(e,Object.assign(Object.assign({},this.props),this.answerFormDataProps))})}}]),r}(y.Component);return $()(t,e)},be=n(31),pe=n(52),he=Object.assign;var me=function(e){return w.a.createElement(pe.a,he({width:"20",height:"20",fill:"#06F",viewBox:"0 0 20 20"},e),w.a.createElement("path",{d:"M4.635 4.884l-1.133.647 4.944 8.65 1.132-.647-4.943-8.65z"}),w.a.createElement("path",{d:"M18.342 3.003L5.524 4.429l5.093 8.991a1.534 1.534 0 01.14 1.153 1.488 1.488 0 01-1.25 1.102 1.448 1.448 0 01-1.096-.31 1.501 1.501 0 01-.377-.45l-4.975-8.79L2 6.76l5.042 8.882c.23.405.558.742.952.98a2.623 2.623 0 002.612.056 2.69 2.69 0 00.99-.938l7.306-11.792a.622.622 0 00-.233-.883.588.588 0 00-.327-.062zm-8.056 4.902a1.175 1.175 0 01-.665-.203 1.214 1.214 0 01-.442-.546 1.245 1.245 0 01.256-1.331 1.17 1.17 0 011.301-.267 1.2 1.2 0 01.536.45 1.24 1.24 0 01-.146 1.538 1.18 1.18 0 01-.84.36zm3.82-.114a.756.756 0 01-.424-.14.781.781 0 01-.278-.357.802.802 0 01.181-.853.762.762 0 01.841-.154c.14.063.257.166.34.297a.798.798 0 01.12.44.795.795 0 01-.23.556.761.761 0 01-.55.222v-.011z"}))},ve=n(37),ge=n(72),Oe=n.n(ge),je=(n(2379),n(1454)),ye=n(1123),we=n(105),Ce=n(667),xe=n(262),ke=n(157),Se=n(983),Ae=["isBottom"],Te=["className"],Ie=["checked","onChange","text","id","disabled","shouldTrackClick","zaTextPrefix","zaText"];function Re(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ee=function(e){var t=e.required,n=e.name,r=e.title,a=e.helper,o=e.props,i=Object(Ce.a)();return Object(d.c)(k.Flex,Object.assign(Object.assign({as:"label",color:"GBK03A",mr:"3px",css:[{lineHeight:"38px",fontSize:"15px",fontWeight:"400",width:"110px"},!t&&{paddingLeft:"10px"}]},o),{},{children:[t&&Object(d.b)(k.Text,{"aria-label":"必填",color:"GRD03A",mt:"2px",mr:"4px",children:"*"}),n,a&&Object(d.b)(T.a,{as:"button",zaType:"Button",zaText:"提示信息-".concat(n),css:function(e){return{color:e.colors.GBL05A}},onClick:function(){N.a.alert(Object(d.c)("div",{css:{paddingTop:"16px",h2:{paddingBottom:"20px",fontWeight:"bold",fontSize:"24px",textAlign:"center"},p:{textAlign:"left",fontSize:"15px",textIndent:"30px"},a:{textDecoration:"underline",color:i.colors.primary}},children:[Object(d.b)("h2",{children:r||n}),a]}),{text:{ok:"我知道了"}}).then(Oe.a,Oe.a)},children:Object(d.b)(re.a,{css:{marginLeft:"4px"},center:!0,size:18})})]}))},Ne=function(e){var t=e.isBottom,n=Object(ve.default)(e,Ae);return Object(d.b)(T.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:!0,css:function(e){return{cursor:"pointer",display:"flex",alignItems:"center",color:e.colors.GBL05A}}},n),{},{children:t?Object(d.c)(d.a,{children:[Object(d.b)(k.Text,{mr:"4px",fontSize:"14px",children:"回到顶部"}),Object(d.b)(je.a,{text:!0,fontSize:"16px"})]}):Object(d.c)(d.a,{children:[Object(d.b)(k.Text,{mr:"4px",fontSize:"14px",children:"发布设置"}),Object(d.b)(ye.a,{text:!0,fontSize:"16px"})]})}))},Be=function(e){var t=e.className,n=Object(ve.default)(e,Te);return Object(d.b)(k.Flex,Object.assign({className:t,height:"52px",css:function(e){return{justifyContent:"center",borderTop:"1px solid ".concat(e.colors.GBK09A),background:e.colors.GBK99C,WebkitFontSmoothing:"subpixel-antialiased"}}},n))},ze=function(e){var t=e.children,n=e.hideScrollButton,a=e.isAnswer,o=Object(ie.a)(!1),i=Re(r.a,o,2),c=i[0],l=i[1];return Object(y.useEffect)((function(){var e=function(){var e=document.documentElement;e.scrollTop+e.clientHeight>=e.scrollHeight-5?l.on():l.off()};return document.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[l]),Object(d.c)(d.a,{children:[Object(d.b)(k.Box,{height:"52px",css:{visibility:"hidden"}}),Object(d.b)(Be,{css:{position:"fixed",left:0,right:0,bottom:0,zIndex:1},children:Object(d.c)(k.Flex,{height:"52px",alignItems:"center",mx:"auto",css:{width:a?"654px":"800px"},children:[!n&&Object(d.b)(Ne,{onClick:function(){Object(xe.scrollTo)(window,{top:c?0:document.body.scrollHeight,behavior:"smooth"})},isBottom:c}),t]})})]})},Le=function(e){var t=e.children,n=e.hideScrollButton,r=e.getContaner;return Object(d.b)(L.a,{bottom:!0,getStyle:function(){return{width:"1000px",bottom:0,maxWidth:"100vw"}},container:r,children:function(e){var a=!e.isFixed;return Object(d.b)(Be,{children:Object(d.c)(k.Flex,{width:"100%",height:"52px",alignItems:"center",mx:"auto",px:"20px",children:[!n&&Object(d.b)(Ne,{onClick:function(){if(a)Object(xe.scrollTo)(window,{top:0,behavior:"smooth"});else{var e=null==r?void 0:r();if(e){var t=e.getBoundingClientRect().bottom+52;Object(xe.scrollBy)(window,{top:t-document.documentElement.clientHeight,behavior:"smooth"})}}},isBottom:a}),t]})})}})};function Pe(e){var t=e.checked,n=e.onChange,r=e.text,a=e.id,o=e.disabled,i=e.shouldTrackClick,c=e.zaTextPrefix,l=e.zaText,s=Object(ve.default)(e,Ie),u=Object(T.l)().trackEvent;return Object(d.c)(k.Flex,Object.assign(Object.assign({flex:1,alignItems:"center",as:"label",htmlFor:a,css:{flex:"0 0 auto",marginRight:"20px",cursor:"pointer"}},s),{},{children:[Object(d.b)(Se.a,{id:a,size:20,checked:t,onChange:Object(we.a)((function(){i&&u({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:l||(c?"".concat(c,"-").concat(r):r)}}),n.apply(void 0,arguments)})),disabled:o}),Object(d.b)(k.Text,{ml:"4px",fontSize:"14px",color:"GBL05A",children:r})]}))}var _e=function(e){return Object(d.b)(ke.b,Object.assign({css:{".Select-button":{width:"270px",height:"38px"},".Select-arrow":{marginLeft:"auto"}}},e))},Me=function(e){return Object(d.b)(ke.a,Object.assign({css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}}},e))},De=n(95),Ue=n(927),Fe={INVITED_TASK:"品牌任务",EVALUATE_TASK:"众测任务"},Ve="CHEESE",Ge="COMMERCIAL_VIP",qe="FE_INIT",He="BINDING",We="UNBIND";function Ke(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ze=function(e){var t=(null==e?void 0:e.bindTaskDTO)||{},n=t.taskType,r=t.taskId,a=t.taskName;return[Fe[n],r,a].join("  ").trim()},Qe=function(e){var t=e.visible,n=e.onClose,a=e.onConfirm,o=e.value,i=e.taskList,c=void 0===i?[]:i,l=Object(y.useState)(o),s=Ke(r.a,l,2),u=s[0],f=s[1];return Object(y.useEffect)((function(){var e,n;t&&(null==o||null===(e=o.bindTaskDTO)||void 0===e?void 0:e.taskId)!==(null==u||null===(n=u.bindTaskDTO)||void 0===n?void 0:n.taskId)&&f(o)}),[t]),Object(d.b)(De.b,{title:"选择芝士任务",size:"large",onClose:n,children:t&&Object(d.c)(k.Box,{children:[Object(d.b)(k.Box,{color:"GBK02A",maxHeight:"50vh",mr:"-24px",pr:"24px",overflowY:"auto",children:null!=c&&c.length?c.map((function(e){var t;return Object(d.c)(k.Flex,{flex:1,py:"12px",justifyContent:"space-between",alignItems:"center",css:function(e){var t=e.colors;return{cursor:"pointer",borderBottom:"1px solid ".concat(t.GBK09A)}},as:"label",children:[Object(d.b)(k.Text,{fontSize:"14px",children:Ze(e)}),Object(d.b)(Se.a,{checked:(null==u||null===(t=u.bindTaskDTO)||void 0===t?void 0:t.taskId)===e.bindTaskDTO.taskId,onChange:function(){f(e)}})]},e.bindTaskDTO.taskId)})):Object(d.b)(Ue.a.EI1,{image:"default",content:"没有可绑定的任务"})}),Object(d.c)(k.Flex,{mt:"32px",justifyContent:"center",children:[Object(d.b)(B.c,{preset:"outline",color:"grey",css:{width:"168px",marginRight:"16px"},onClick:n,children:"取消"}),Object(d.b)(B.c,{preset:"primary",color:"blue",css:{width:"168px"},disabled:!u,onClick:function(){a(u)},children:"确认"})]})]})})};function Ye(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Je=function(e){var t=e.value,n=e.onChange,a=e.taskList,o=e.disabled,i=void 0!==o&&o,c=e.onOpen,l=void 0===c?function(){return!0}:c,s=Object(ie.a)(!1),u=Ye(r.a,s,2),f=u[0],b=u[1],p=Object(T.l)().trackEvent;Object(y.useEffect)((function(){i&&f&&b.off()}),[i,f,b]);var h=Ze(t),m=function(){p({eventType:"Click",elementLocation:{type:"Text",text:h||"选择绑定芝士任务",block:{blockText:"PublishSettingZhiTaskBind"}}}),b.on()};return Object(d.c)(k.Flex,{flex:1,alignItems:"center",children:[Object(d.c)(T.f,{zaType:"Text",zaText:!0,view:{elementLocation:{block:{blockText:"PublishSettingZhiTaskBind"}}},as:k.Flex,p:"3px 0",alignItems:"center",fontSize:"14px",color:"GBL05A",css:function(e){var n=e.colors;return Object.assign({cursor:i?"not-allowed":"pointer",opacity:i?.5:1},t?{padding:"3px 14px",background:"rgba(0, 102, 255, .1)",borderRadius:"15px",color:n.GBL01A}:{})},onClick:function(){if(!i){var e=l();le()(null==e?void 0:e.then)?e.then(m):!1!==e&&m()}},children:[Object(d.b)(me,{css:function(e){var n=e.colors;return{fill:t?n.GBL01A:n.GBL05A,flexShrink:0}}}),Object(d.b)(k.Text,{mx:"4px",title:h||"",css:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:h||"选择绑定芝士任务"}),t&&!i&&Object(d.b)(se.a,{size:"14px",css:{flexShrink:0},onClick:function(e){e.stopPropagation(),null==n||n(null)}})]}),Object(d.b)(Qe,{visible:f,value:t,taskList:a,onClose:b.off,onConfirm:function(e){null==n||n(e),b.off()}})]})},Xe=function(e){return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"芝士任务",title:"芝士任务绑定",helper:Object(d.b)("p",{children:"如该内容为芝士任务投稿内容，需在此处进行对应任务的绑定操作，请在发布前认真检查绑定关系，内容发布后关系即刻生效。"})}),Object(d.b)(Je,Object.assign({},e))]})},$e=function(e){var t=e.taskList,n=e.commercialZhitaskBindInfo,a=e.onChange,o=Object(y.useState)(null),i=Ye(r.a,o,2),c=i[0],l=i[1],s=Boolean(n),u=function(e){a(e),l(e)};return Object(y.useEffect)((function(){(null==n?void 0:n.bindStatus)===He&&u(n)}),[s]),Object(d.b)(Xe,{taskList:t,disabled:(null==c?void 0:c.bindStatus)===He,value:c,onChange:function(e){return u(e)}})},et=function(e){var t=e.taskList,n=e.isAnonymous,r=Object(C.useDispatch)(),a=Object(y.useContext)(de),o=a.updateFormData,i=(0,a.getFormData)().commercialZhitaskBindInfo,c=Object(y.useCallback)((function(e){o({commercialZhitaskBindInfo:e})}),[o]);Object(y.useEffect)((function(){(null==i?void 0:i.bindStatus)===We&&c(null)}),[i,c]);return Object(d.b)(Xe,{taskList:t,disabled:(null==i?void 0:i.bindStatus)===He,value:i,onChange:c,onOpen:function(){if(n)return r(Object(be.h)("已经启用匿名的内容不能进行芝士任务绑定","red")),!1}})},tt=n(1365),nt=n(883),rt=n(451),at=function(e){var t=e.dataTransfer;return t.items?Array.from(t.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})):Array.from(t.files)},ot=n(1005),it=function(e){var t=e.className,n=e.showRuleDesc,r=void 0!==n&&n,a=Object(Ce.a)().colors;return Object(d.c)(k.Box,{className:t,css:{fontSize:14,lineHeight:"22px",color:a.GBL05A,textAlign:"center",a:{textDecoration:"underline"}},children:[r&&Object(d.c)(k.Flex,{marginTop:34,fontSize:10,width:688,justifyContent:"center",children:[Object(d.c)(k.Box,{css:{width:"134px"},children:[Object(d.b)(k.Text,{css:{color:a.GBK04A,fontWeight:500,marginBottom:6},fontSize:13,children:"视频大小"}),Object(d.b)(k.Text,{fontSize:12,lineHeight:1.4,css:{color:a.GBK06A},children:"时长和大小均不限"}),Object(d.b)(k.Text,{fontSize:12,lineHeight:1.4,css:{color:a.GBK06A},children:"推荐上传大小为 5G 以内"})]}),Object(d.c)(k.Box,{css:{width:"340px",position:"relative",margin:"0 40px","&::after,&::before":{content:'""',position:"absolute",width:1,height:20,verticalAlign:"middle",top:"50%",transform:"translate(0,-50%)",backgroundColor:a.GBK09A},"&::after":{left:0},"&::before":{right:0}},children:[Object(d.b)(k.Text,{css:{color:a.GBK04A,fontWeight:500,marginBottom:6},fontSize:13,children:"视频分辨率"}),Object(d.b)(k.Text,{fontSize:12,lineHeight:1.4,css:{color:a.GBK06A},children:"最大支持 1080P"}),Object(d.b)(k.Text,{fontSize:12,lineHeight:1.4,css:{color:a.GBK06A},children:"分辨率超过 1920 *1080，会被压缩为 1920 *1080"})]}),Object(d.c)(k.Box,{css:{width:"134px"},children:[Object(d.b)(k.Text,{css:{color:a.GBK04A,fontWeight:500,marginBottom:6},fontSize:13,children:"视频格式"}),Object(d.b)(k.Text,{fontSize:12,lineHeight:1.4,css:{color:a.GBK06A},children:"支持常用视频格式"}),Object(d.b)(k.Text,{fontSize:12,lineHeight:1.4,css:{color:a.GBK06A},children:"推荐使用 mp4"})]})]}),Object(d.c)(k.Text,{marginTop:35,color:a.GBL05A,fontSize:12,children:["上传视频，即代表您已同意"," ",Object(d.b)("a",{href:"https://www.zhihu.com/question/20118966",target:"_blank",rel:"noopener noreferrer",css:{color:a.GBL07A},children:"知乎视频使用规范"})," ","与"," ",Object(d.b)("a",{href:"https://www.zhihu.com/term/video",target:"_blank",rel:"noopener noreferrer",css:{color:a.GBL07A},children:"《知乎视频用户协议》"})]})]})},ct=Object(y.memo)(it),lt=n(434),st=n(158),ut=n(957),dt=n(1011);function ft(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function bt(e){var t=e.item,n=e.onCheck,a=Object(y.useState)(!1),o=ft(r.a,a,2),i=o[0],c=o[1],l=t.id,s=t.title,u=t.description,f=t.imageUrl,b=t.publishedAt,p=t.video,h=null==p?void 0:p.duration;return Object(d.c)(k.Flex,{p:"20px 24px",justifyContent:"space-between",alignItems:"center",children:[Object(d.c)(k.Flex,{flex:1,children:[Object(d.c)(k.Box,{width:112,height:70,flexShrink:0,marginRight:"16px",css:{position:"relative",borderRadius:3,overflow:"hidden"},children:[Object(d.b)(k.Image,{width:"100%",height:"100%",src:f,alt:"",css:{objectFit:"cover"}}),Object(d.b)(k.Text,{fontSize:12,lineHeight:"14px",color:"GBK99A",css:{position:"absolute",bottom:4,right:7,textShadow:"0 0 5px rgba(0,0,0,0.5)"},children:Object(ot.b)(h)})]}),Object(d.c)(k.Flex,{flexDirection:"column",justifyContent:"center",flex:1,children:[Object(d.b)(k.Text,{fontSize:14,fontWeight:500,lineHeight:"20px",color:"GBK03A",css:[Object(dt.a)(1)],children:s}),Object(d.b)(k.Text,{mt:"6px",fontSize:14,lineHeight:"20px",color:"GBK04A",css:[Object(dt.a)(1)],children:u}),Object(d.b)(k.Text,{mt:"8px",fontSize:13,lineHeight:"16px",color:"GBK06A",children:Object(M.toRelativeString)(b)})]})]}),Object(d.b)(ut.a,{css:{marginLeft:16,flexShrink:0},checked:i,onChange:function(e){c(e.currentTarget.checked),n(l)}})]})}function pt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ht(e){var t,n=e.onClose,a=e.onSubmit,o=Object(y.useState)([]),i=pt(r.a,o,2),c=i[0],l=i[1],s=Object(C.useSelector)((function(e){return e.zvideos.insertable}))||{},u=s.isLoading,f=s.data,b=s.paging,p=Object(C.useDispatch)(),h=Object(y.useCallback)((function(){p(Object(rt.n)())}),[p]),m=Object(y.useCallback)((function(e){c.includes(e)?l(c.filter((function(t){return t!==e}))):l(c.concat([e]))}),[c]);return Object(d.c)(k.Box,{height:688,children:[Object(d.b)(k.Box,{m:"40px auto",fontSize:24,fontWeight:500,lineHeight:"30px",color:"GBK02A",textAlign:"center",children:"选择已发布的视频"}),Object(d.b)(lt.b,{css:{marginBottom:100},onLoad:h,isLoading:null!=u&&u,isDrained:null!==(t=null==b?void 0:b.isEnd)&&void 0!==t&&t,getContainer:function(e){return e.parentElement.parentElement.parentElement},children:f.map((function(e,t){return Object(d.b)(st.a,{children:Object(d.b)(bt,{item:e,onCheck:m})},t)}))}),Object(d.c)(k.Flex,{bg:"GBK99A",p:"32px 25px",width:"100%",height:100,justifyContent:"center",css:{position:"absolute",left:0,right:0,bottom:0},children:[Object(d.b)(B.c,{css:{flex:1},onClick:n,children:"返回"}),Object(d.b)(B.c,{disabled:0===c.length,css:{flex:1,marginLeft:18},preset:"primary",color:"blue",onClick:function(){a(c),n()},children:"添加"})]})]})}var mt=n(32);var vt=function(e){var t=e.className,n=e.text,r=e.onFiles,a=e.zaClickId,o=e.zaBlockText,i=e.multiple,c=void 0===i||i,l=e.disabled,s=e.preset,u=e.size,f=e.icon,b=e.handleMouseEnter,p=e.handleMouseLeave,h=Object(y.useRef)(null);return Object(d.c)(d.a,{children:[Object(d.b)(T.a,{zaText:!0,zaType:"Button",as:k.Box,zaBlock:o,zaAction:"Upload",css:{display:"spread"===u?"block":"inline-block"},onMouseEnter:b,onMouseLeave:p,children:Object(d.b)(B.c,{className:m()("VideoUploadButton",t),preset:s||"primary",size:u||"spread",color:"blue",disabled:l,icon:f,onClick:function(e){a&&A.a.trackEvent(e.target,{id:a,action:"Upload"}),h.current.click()},children:n})}),Object(d.b)("input",{type:"file",className:"VideoUploadButton-fileInput",ref:h,onChange:function(){r(h.current.files,"Add"),h.current.value=null},accept:mt.a.VIDEO.join(","),multiple:c})]})};function gt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ot=function(e){var t=e.show,n=e.onZVideoSubmit,a=e.onVideoSubmit,o=e.onClose,i=(Object(C.useSelector)((function(e){return e.zvideos.insertable}))||{}).data,c=Object(y.useState)(!1),l=gt(r.a,c,2),s=l[0],u=l[1],f=Object(y.useState)(!1),b=gt(r.a,f,2),p=b[0],h=b[1],m=Object(C.useDispatch)(),v=Object(we.a)((function(e){var t=Object(ot.a)(e),n=t.message,r=t.abortUpload,o=t.validFiles;n&&(m(Object(be.h)(n,r?"red":"white")),r)||a({value:o[0]})}));return t?Object(d.c)(De.b,{css:{width:688},onClose:o,children:[p&&Object(d.b)(ht,{onSubmit:n,onClose:function(){h(!1)}}),!p&&Object(d.c)(d.a,{children:[Object(d.b)(k.Text,{fontSize:"24px",color:"GBK02A",lineHeight:"34px",fontWeight:500,m:"40px 0 30px",textAlign:"center",children:"导入视频"}),Object(d.c)(k.Flex,{flexDirection:"column",alignItems:"center",width:"440px",height:"300px",margin:"0 auto 45px",css:function(e){return Object.assign({border:"2px dashed ".concat(e.colors.GBK09A),borderRadius:4},s&&{borderColor:e.colors.GBL05A,"*":{pointerEvents:"none"}})},onDragOver:function(e){return e.preventDefault()},onDragEnter:function(){return u(!0)},onDragLeave:function(){return u(!1)},onDrop:function(e){e.preventDefault(),v(at(e))},children:[Object(d.b)(nt.a,{size:90,css:function(e){return{color:s?e.colors.GBL05A:e.colors.GBK09A,marginTop:66}}}),Object(d.b)(k.Text,{color:"GBK03A",fontSize:"20px",lineHeight:"28px",fontWeight:"500",mt:"16px",children:"拖放要导入的视频文件"}),Object(d.c)(k.Box,{mt:"20px",children:[Object(d.b)(vt,{text:"导入视频",multiple:!1,css:{width:142},zaBlockText:"UploadVideoFile",onFiles:v}),Object(d.b)(B.c,{preset:"secondary",color:"blue",css:{width:142,marginLeft:12,padding:"0 14px",whiteSpace:"nowrap"},onClick:function(e){A.a.trackEvent(e.target,{id:8622,action:"Click"},{button:{text:"选择已发布的视频"}}),(null==i?void 0:i.length)>0?h(!0):m(Object(rt.n)()).then((function(e){e.payload.data.length?h(!0):m(Object(be.h)("还没有发布过视频"))}))},children:"选择已发布的视频"})]})]}),Object(d.b)(ct,{})]})]}):null},jt={1:49,2:50,r:82,t:84,e:69};var yt=n(468),wt=n(538),Ct=n(1184),xt=n(1179),kt=n(215),St=n(502),At=n(1550);function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var It=function(e){Object(l.a)(n,e);var t=Tt(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleHide=function(){_.a.set("AnswerOrg::know",!0),e.props.onClose()},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(d.b)(R.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n,children:t&&Object(d.c)("div",{children:[Object(d.c)("ul",{className:"AnswerModal-list",children:[Object(d.b)("li",{children:"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"}),Object(d.b)("li",{children:"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"}),Object(d.b)("li",{children:"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。"})]}),Object(d.b)("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank",children:"了解更多"}),Object(d.c)(R.a,{direction:"horizontal",children:[Object(d.b)(B.c,{onClick:this.handleHide,children:"不再显示"}),Object(d.b)(B.c,{color:"blue",preset:"primary",onClick:n,children:"知道了"})]})]})})}}],[{key:"getKnown",value:function(){return _.a.get("AnswerOrg::know")}}]),n}(y.Component),Rt=n(92),Et=n(619),Nt=n(41),Bt=n(65),zt=n(6),Lt=Object(zt.a)("interactText",["GET_INTERACT_TEXT"]);var Pt=n(512),_t=n(638),Mt=n(132),Dt=n(529),Ut=n(460),Ft=function(e){var t=e.shown,n=e.onClose;return Object(d.b)(De.b,{onClose:n,title:"该问题暂时只支持客户端进行回答",children:t&&Object(d.b)("div",{className:"SlideshowEditBlockModal",children:Object(d.b)(B.c,{preset:B.b.Primary,color:B.a.Blue,onClick:n,children:"知道了"})})})};Ft.propTypes={shown:j.a.bool.isRequired,onClose:j.a.func.isRequired};var Vt=Ft,Gt=n(1001),qt=n(107),Ht=n(974),Wt=Object.assign;function Kt(e){return w.a.createElement(W.a,Wt(Wt({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Folder24","data-old-api":"Folder"},e),{className:"Zi Zi--Folder"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M4.415 5.632a.915.915 0 00-.915.915v10.52c0 .505.41.914.915.914h14.153c.505 0 .915-.41.915-.915V9.045a.915.915 0 00-.915-.915H12.14a2.415 2.415 0 01-1.853-.866L9.198 5.96a.915.915 0 00-.702-.328h-4.08zM2 6.547a2.415 2.415 0 012.415-2.415h4.081c.716 0 1.394.318 1.853.866l1.09 1.304a.915.915 0 00.701.328h6.428a2.415 2.415 0 012.415 2.415v8.021a2.415 2.415 0 01-2.415 2.415H4.415A2.415 2.415 0 012 17.066V6.547z",fillRule:"evenodd",clipRule:"evenodd"}),w.a.createElement("path",{d:"M5.25 11.5a.75.75 0 01.75-.75h10a.75.75 0 010 1.5H6a.75.75 0 01-.75-.75z",fillRule:"evenodd",clipRule:"evenodd"}))}var Zt=n(1223);var Qt=function(e){var t=e.shown,n=e.onClose,r=e.onSubmit,a=Object(y.useCallback)((function(e){var t=e.type,a=e.payload;"browser/closeCurrentPage"!==t?"editor/submitAttachment"!==t||r(a.files):n()}),[r,n]);return Object(d.b)(De.b,{className:"BaiduFileSelector",size:"large",onClose:n,children:t&&Object(d.b)("div",{className:"BaiduFileSelector-content",children:Object(d.b)(I.a,{className:"BaiduFileSelector-iframe",src:"https://www.zhihu.com/appview/editor/attachment/baidu",onMessage:a})})})};function Yt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Jt=Object(y.forwardRef)((function(e,t){var n=Object(y.useState)(!1),a=Yt(r.a,n,2),o=a[0],i=a[1];return Object(y.useImperativeHandle)(t,(function(){return{setBaiduFileSelectorShown:i}}),[]),Object(d.b)(Qt,{shown:o,onClose:function(){return i(!1)},onSubmit:function(t){i(!1),e.onSubmit(t)}})})),Xt=function(){var e={},t=function(t){e.getEditorRef().props.handleCommand("insert-file-link-card:".concat(JSON.stringify(t)))},n=function(){return Object(Zt.a)(e.getEditorState()).filter((function(e){return"file-link-card"===e.getType()}))},r=function(){n().size>=10?N.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)};return e.containerRef=Object(y.createRef)(),{initialize:function(t){Object.assign(e,t)},components:Object(d.b)(Jt,{handleSubmit:t,ref:e.containerRef,onSubmit:t}),handleCommand:function(e){return"insert-file-from-baidu-wangpan"===e?(r(),"handled"):"not-handled"},toolbar:{section:qt.a.CUSTOM_MAIN,label:"上传附件",icon:Kt,toolType:z.e.ENTITY,onClick:function(){n().size>=10?N.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)},priority:2},toolbarV2:{section:Ht.a.BUSINESS_MEDIA,label:"上传附件",text:"网盘",icon:Kt,toolType:z.e.ENTITY,onClick:function(){r()},priority:2}}},$t=n(2161),en=n(637),tn=n(1814),nn=n(442),rn=n(1103),an=Object.assign;var on=function(e){return w.a.createElement(pe.a,an({width:"150",height:"120",viewBox:"0 0 150 120"},e),w.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0144 93V30.997A5.996 5.996 0 0150.002 25h48.996A5.996 5.996 0 01105 30.998V93a2 2 0 01-.396 1.2l-4.112-2.66z"}),w.a.createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 01-.999.999H56a.993.993 0 01-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 110 3h-35.99A1.499 1.499 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 110 3h-24.99A1.499 1.499 0 0155 75.5z"}))};function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var ln={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},sn=function(e){Object(l.a)(n,e);var t=cn(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).formatDate=function(e){return tn.a("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"yyyy-MM-dd HH:mm")},e.handleDraftClick=function(e){e.preventDefault()},e}return Object(i.a)(n,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,r=e.draftId,a=e.draftType,o=t.isFetching,i=t.data;return Object(d.c)("div",{className:"DraftHistory-main",children:[o&&Object(d.b)(nn.a,{className:"DraftHistory-loading"}),!o&&i&&Object(d.c)(y.Fragment,{children:[i.draft.title&&Object(d.b)("div",{className:"DraftHistory-draftTitle",children:i.draft.title}),Object(d.b)(rn.a,{className:"DraftHistory-draft",html:i.draft.content,onClick:this.handleDraftClick,sourceType:a,sourceId:r}),Object(d.c)("div",{className:"DraftHistory-actions",children:[Object(d.c)("div",{className:"DraftHistory-meta",children:[this.formatDate(i)," ",ln[i.versionType]]}),Object(d.b)(B.c,{className:"DraftHistory-revert",disabled:"current"===i.versionType,onClick:function(){return n(i)},children:"恢复此版本"})]})]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,r=t.currentVersion,a=t.currentDraft,o=t.getHistory,i=t.onSelect;return n?n.isFetching&&!n.items?Object(d.b)("div",{className:"DraftHistory",children:Object(d.b)(nn.a,{className:"DraftHistory-loading"})}):Object(d.c)("div",{className:"DraftHistory",children:[Object(d.c)("div",{className:"DraftHistory-side",children:[Object(d.b)("div",{className:"DraftHistory-title",children:"历史版本"}),Object(d.b)(lt.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:o,children:Object(d.b)("div",{children:n.items&&n.items.map((function(t,n){return Object(d.c)("a",{href:"#",className:m()("DraftHistory-version",{"DraftHistory-version--selected":r&&t.versionType===r.versionType&&t.id===r.id}),onClick:function(e){e.preventDefault(),i(t)},children:[Object(d.b)("div",{className:"DraftHistory-versionDate",children:e.formatDate(t)}),Object(d.b)("div",{className:"DraftHistory-versionType",children:ln[t.versionType]})]},n)}))})})]}),n.items&&!n.items.length&&Object(d.b)("div",{className:"DraftHistory-main",children:Object(d.c)("div",{className:"DraftHistory-empty",children:[Object(d.b)(on,{className:"DraftHistory-emptyIcon"}),Object(d.b)("div",{className:"DraftHistory-emptyText",children:"还没有历史版本"})]})}),a&&this.renderCurrentDraft()]}):null}}]),n}(y.Component);sn.propTypes={history:j.a.object,currentVersion:j.a.object,currentDraft:j.a.object,onSelect:j.a.func,onRevert:j.a.func};var un=sn;function dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var fn=function(e){Object(l.a)(n,e);var t=dn(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={currentVersion:null},e.getHistory=function(){var t=e.props,n=t.type,r=t.id;(0,t.getHistory)(n,r)},e.handleSelect=function(t){e.setState({currentVersion:t})},e.handleRevert=function(t){var n=e.props,r=n.revert,a=n.onReverted;r(t.versionType,t.id).then((function(){a&&a(t)}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.drafts,a=n.getDraft,o=this.state.currentVersion,i=t.currentVersion;!o||i&&i.versionType===o.versionType&&i.id===o.id||r["".concat(o.versionType,"_").concat(o.id)]||a(o.versionType,o.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,r=e.draftId,a=e.draftType,o=this.state.currentVersion;return Object(d.b)(un,{history:t,currentVersion:o,currentDraft:o?n["".concat(o.versionType,"_").concat(o.id)]:null,draftId:r,draftType:a,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),n}(y.Component);fn.propTypes={type:j.a.string.isRequired,id:j.a.number.isRequired,onReverted:j.a.func};var bn=Object(C.connect)((function(e,t){var n=t.type,r=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(r)],drafts:e.draftHistory.drafts}}),{getHistory:en.c,getDraft:en.b,revert:en.e,reset:en.d})(fn);function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var hn=function(e){Object(l.a)(n,e);var t=pn(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleReverted=function(t){var n=e.props,r=n.onClose,a=n.onReverted;a&&a(t),r&&r(),A.a.trackEvent(null,{id:5016,action:"Click"})},e.handleClose=function(){var t=e.props.onClose;t&&t(),A.a.trackEvent(null,{id:5015,action:"Click"})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,r=e.id,a=e.draftId,o=e.draftType;return Object(d.b)(De.b,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose,children:t&&Object(d.b)(bn,{type:n,id:r,draftId:a,draftType:o,onReverted:this.handleReverted})})}}]),n}(y.Component);hn.propTypes={shown:j.a.bool.isRequired,onClose:j.a.func,type:j.a.string.isRequired,id:j.a.number.isRequired,onReverted:j.a.func},hn.defaultProps={shown:!0};var mn=hn;function vn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var gn=Object(y.forwardRef)((function(e,t){var n,a,o=e.type,i=e.id,c=e.getId,l=e.handleReverted,s=e.draftId,u=e.draftType,f=e.getDraftId,b=Object(y.useState)(!1),p=vn(r.a,b,2),h=p[0],m=p[1],v=Object(we.a)((function(){return m(!0)})),g=Object(we.a)((function(){return m(!1)}));return Object(y.useImperativeHandle)(t,(function(){return{handleOpen:v,handleClose:g}}),[v,g]),Object(d.b)(mn,{shown:h,onClose:function(){return m(!1)},type:o,id:null!==(n=null==c?void 0:c())&&void 0!==n?n:i,draftId:null!==(a=null==f?void 0:f())&&void 0!==a?a:s,draftType:u,onReverted:l})})),On=function(e){var t=e.type,n=e.id,r=e.syncDraft,a=e.getId,o=e.getDraftId,i=e.draftId,c=e.draftType,l=e.shouldShowToolbarButton,s=void 0===l?function(){return!0}:l,u={};u.draftModalRef=Object(y.createRef)(null);return{initialize:function(e){Object.assign(u,e)},handleCommand:function(e){return"toggle-draft-history-modal"===e?(u.draftModalRef.current.handleOpen(),"handled"):"not-handled"},components:[Object(d.b)(gn,{type:t,id:n,getId:a,draftId:i,getDraftId:o,draftType:c,ref:u.draftModalRef,handleReverted:function(e){u.getEditorRef().props.resetWithValue(e.draft.content)}},"draft_history_modal")],toolbar:{section:"menu",label:"历史版本",icon:$t.a,onClick:function(){r.flush(),u.draftModalRef.current.handleOpen(),A.a.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},shouldShow:s}}},jn=n(885),yn=n(869),wn=n(2901),Cn=n(2902),xn=n(2904),kn=n(2905),Sn=n(2906),An=n(2907),Tn=n(2908),In=n(2900),Rn=n(2918),En=n(2919),Nn=Object.assign;function Bn(e){return w.a.createElement(W.a,Nn(Nn({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Eraser24","data-old-api":"Eraser24"},e),{className:"ZDI ZDI--Eraser24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M6.956 17.185c.435.365.985.565 1.552.565h5.245c.572 0 1.114-.253 1.482-.69l.213-.255 4.715-5.62a2.415 2.415 0 00-.298-3.401l-5.11-4.288a2.415 2.415 0 00-3.402.298l-6.858 8.174a2.415 2.415 0 00.298 3.402l2.122 1.78.041.035zm1.552-.935a.915.915 0 01-.588-.214l-.041-.034-2.122-1.781a.915.915 0 01-.113-1.29l6.859-8.173a.915.915 0 011.289-.113l5.11 4.288a.915.915 0 01.112 1.289l-4.715 5.619-.213.254a.434.434 0 01-.333.155H8.508zM17 21.75a.75.75 0 100-1.5H5a.75.75 0 000 1.5h12z",fillRule:"evenodd",clipRule:"evenodd"}))}var zn=n(2103),Ln=n(2910),Pn=n(2921),_n=n(2917),Mn=n(2935),Dn=n(2922),Un=n(170),Fn=[{icon:wn.b,label:"粗体",shortcut:"⌘+B",shortcutWin:"Ctrl+B"},{icon:Cn.b,label:"斜体",shortcut:"⌘+I",shortcutWin:"Ctrl+I"},{icon:xn.b,label:"一级标题",shortcut:"⌘+⌥+1",shortcutWin:"Ctrl+Alt+1"},{icon:kn.b,label:"二级标题",shortcut:"⌘+⌥+2",shortcutWin:"Ctrl+Alt+2"},{icon:Sn.b,label:"有序列表",shortcut:"⌘+⇧+L",shortcutWin:"Ctrl+Shift+L"},{icon:An.b,label:"无序列表",shortcut:"⌘+L",shortcutWin:"Ctrl+L"},{icon:Tn.a,label:"引用块",shortcut:"⌘+⇧+U",shortcutWin:"Ctrl+Shift+U"},{icon:In.b,label:"代码块",shortcut:"⌘+⌥+C",shortcutWin:"Ctrl+Alt+C"},{icon:Rn.b,label:"撤销",shortcut:"⌘+Z",shortcutWin:"Ctrl+Z"},{icon:En.b,label:"重做",shortcut:"⌘+Y",shortcutWin:"Ctrl+Y"},{icon:Bn,label:"清除格式",shortcut:"⌘+\\",shortcutWin:"Ctrl+\\"},{label:"插入链接",icon:zn.c,shortcut:"⌘+K",shortcutWin:"Ctrl+K"},{icon:Ln.c,label:"目录",shortcut:"⌘+⌥+J",shortcutWin:"Ctrl+Alt+J"},{icon:Pn.b,label:"插入注释",shortcut:"⌘+⌥+R",shortcutWin:"Ctrl+Alt+R"},{icon:_n.b,label:"插入分割线",shortcut:"⌘+⌥+S",shortcutWin:"Ctrl+Alt+S"},{label:"插入表格",icon:Mn.b,shortcut:"⌘+⌥+T",shortcutWin:"Ctrl+Alt+T"},{label:"插入公式",icon:Dn.b,shortcut:"⌘+⌥+E",shortcutWin:"Ctrl+Alt+E"}],Vn=function(e){var t=e.name,n=e.isFirst;return Object(d.c)(d.a,{children:[!n&&Object(d.b)(k.Text,{color:"GBK06A",fontSize:"12px",mx:"4px",children:"+"}),Object(d.b)(k.Flex,{px:"4px",css:function(e){return[{minWidth:"24px",borderRadius:"2px",height:"24px",lineHeight:"26px",background:e.colors.GBK10C,textAlign:"center",color:e.colors.GBK05A,fontSize:"14px",alignItems:"center",justifyContent:"center"},n&&{marginLeft:"auto"}]},children:t})]})},Gn=function(e){var t=e.label,n=e.Icon,r=e.shortcut;return Object(d.c)(k.Flex,{alignItems:"center",css:{"&+&":{marginTop:"20px"}},children:[Object(d.b)(n,{size:20,css:function(e){return{color:e.colors.GBK03A}}}),Object(d.b)(k.Text,{ml:"8px",color:"GBK03A",fontSize:"14px",children:t}),r.split("+").map((function(e,t){return Object(d.b)(Vn,{name:e,isFirst:!t},t)}))]})};var qn=Object.assign;var Hn=Object.assign;var Wn=n(2916),Kn=Object.assign;var Zn=function(){var e=Object(C.useSelector)((function(e){return Object(Nt.b)(e)})).isOrg,t=Object(C.useSelector)((function(e){return e.switches})).isCreator,n="https://www.zhihu.com";if("undefined"!=typeof window){var r=window.location,a=r.hostname,o=r.origin,i=[".zpres.zhihu.dev",".zpres.zhihu.com"].some((function(e){return a.endsWith(e)})),c=o.replace(/\D+/g,"");i&&c&&(n="https://heifetz--box-".concat(c,"--www-zhihu-com.zpres.zhihu.").concat(a.slice(-3)))}return{jumpUrl:"".concat(n,e||!t?"/knowledge-plan/editor-setting":"/creator/editor-setting")}},Qn=[{icon:xn.c,label:"一级标题",shortcut:"#+空格"},{icon:kn.c,label:"二级标题",shortcut:"##+空格"},{icon:Sn.c,label:"有序列表",shortcut:"1+.+空格"},{icon:An.c,label:"无序列表",shortcut:"*+空格"},{icon:wn.b,label:"粗体",shortcut:"**文字**"},{icon:Cn.c,label:"斜体",shortcut:"*文字*"},{icon:function(e){return w.a.createElement(W.a,qn(qn({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ItalicBold24","data-old-api":"ItalicBold24"},e),{className:"ZDI ZDI--ItalicBold24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M10.25 2.75a.75.75 0 00-.728.568l-4.25 17A.75.75 0 006 21.25h8a4.75 4.75 0 002.381-8.86A5.25 5.25 0 0013.5 2.75h-3.25zm3.25 9a3.75 3.75 0 100-7.5h-2.664l-1.875 7.5H13.5zm-4.914 1.5l-1.625 6.5H14a3.25 3.25 0 000-6.5H8.586z",fillRule:"evenodd",clipRule:"evenodd"}))},label:"倾斜加粗",shortcut:"***文字***"},{icon:function(e){return w.a.createElement(W.a,Hn(Hn({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"InlineCode24","data-old-api":"InlineCode24"},e),{className:"ZDI ZDI--InlineCode24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M4 4.25a.75.75 0 000 1.5h16a.75.75 0 000-1.5H4zm7.242 12.184a.75.75 0 01-.597-.877l1.419-7.447a.75.75 0 011.473.28l-1.418 7.447a.75.75 0 01-.877.597zm-2.099-7.71a.75.75 0 010 1.06l-2.082 2.083 2.082 2.083a.75.75 0 11-1.06 1.06L5.47 12.397a.75.75 0 010-1.06l2.613-2.613a.75.75 0 011.06 0zm5.714 1.191a.75.75 0 011.06-1.06l2.613 2.612a.75.75 0 010 1.061l-2.613 2.613a.75.75 0 11-1.06-1.06l2.082-2.083-2.082-2.083zM3.25 19a.75.75 0 01.75-.75h16a.75.75 0 010 1.5H4a.75.75 0 01-.75-.75z"}))},label:"行内代码",shortcut:"`文字`"},{icon:In.b,label:"代码块",shortcut:"```+回车"},{icon:Tn.c,label:"引用块",shortcut:">+空格"},{icon:_n.b,label:"分割线",shortcut:"---+回车"},{icon:Wn.b,label:"插入图片",shortcut:"![描述](链接)+空格"},{icon:function(e){return w.a.createElement(W.a,Kn(Kn({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Latex24","data-old-api":"Latex24"},e),{className:"ZDI ZDI--Latex24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M16.647 7.726l-.88-2.281-.879 2.281h1.759zm.578 1.5l.557 1.445a.75.75 0 101.4-.54l-2.248-5.83c-.412-1.068-1.921-1.068-2.333 0l-2.248 5.83a.75.75 0 101.4.54l.557-1.445h2.915zM5.518 3.6a.75.75 0 01.75.75v5.302h3.959a.75.75 0 010 1.5h-4.21c-.69 0-1.25-.56-1.25-1.25V4.35a.75.75 0 01.75-.75zm12.324 9.623a.75.75 0 10-1.158.954l2.1 2.548-2.1 2.549a.75.75 0 101.158.954l1.914-2.323 1.914 2.323a.75.75 0 101.158-.954l-2.1-2.549 2.1-2.548a.75.75 0 00-1.157-.954l-1.915 2.323-1.914-2.323zm-9.086.977c0-.69.56-1.25 1.25-1.25h4.21a.75.75 0 010 1.5h-3.96v1.525h3.406a.75.75 0 010 1.5h-3.405v1.526h3.959a.75.75 0 010 1.5h-4.21c-.69 0-1.25-.56-1.25-1.25V14.2zM1.75 12.95a.75.75 0 000 1.5h1.743v5.301a.75.75 0 001.5 0v-5.3h1.743a.75.75 0 000-1.5H1.75z",fillRule:"evenodd",clipRule:"evenodd"}))},label:"LaTeX 语法",shortcut:"$$文字$$+空格"},{icon:zn.c,label:"插入链接",shortcut:"[标题](链接)+空格"}];var Yn=[{tabName:"目录",describe:["选中工具栏的目录功能后，在编辑器中添加标题，左侧自动识别标题生成目录；",Object(d.c)(d.a,{children:[Object(d.b)(k.Text,{my:"8px",children:"若不想添加此标题至目录中，可将鼠标悬浮在目录区域的对应标题上，点击「删除」按钮即可移除；"}),Object(d.b)(k.Image,{my:"8px",src:"https://pic1.zhimg.com/v2-3173fb93f4c628ebc8245a2ae2ecea1d.png?source=6a64a727"}),Object(d.b)(k.Text,{my:"8px",children:"若想重新添加标题至目录中，可以在正文中选中此标题，并在目录区域找到对应标题，点击「固定」按钮即可重新添加。"}),Object(d.b)(k.Image,{my:"8px",src:"https://pic2.zhimg.com/v2-1cabcd37bc16361cf95f172fc3ef86f0.png?source=6a64a727"})]})]},{tabName:"代码",describe:["点击工具栏中的代码块图标后，编辑器内生成代码卡片，右上方选择语法，可在代码块中展示语法高亮。"]},{tabName:"公式",describe:["点击工具栏中的公式图标后，在公式编辑器输入 LaTeX 语法，下方为预览区。",Object(d.c)(d.a,{children:["您可在",Object(d.b)(k.Link,{css:function(e){return{color:e.colors.GBL01A}},target:"_blank",href:"https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference",children:"LaTeX基础教程"}),"中参考更多语法"]})]},{tabName:"注释",describe:["点击工具栏中的注释图标，在注释编辑弹框中输入注释文本及链接后，文本对应的注释会出现在文末。"]},{tabName:"历史版本",describe:["点击工具栏中的历史版本后，可在自动保存的草稿版本中查看历史草稿，点击恢复此版本可还原历史草稿。"]},{tabName:"文档导入",describe:["点击工具栏中的文档图标，导入 .docx/.md 文档后，编辑器会自动解析内容并展示在编辑器中。若粘贴图片失败，建议使用文档导入功能。"]}],Jn=function(e){var t=e.name,n=e.describe,r=e.isFirst;return Object(d.c)(k.Box,{css:function(e){return{color:e.colors.GBK03A,paddingTop:r?"0":"20px"}},fontSize:14,fontWeight:400,children:[Object(d.b)(k.Text,{css:function(e){return{color:e.colors.GBK02A}},mb:"8px",fontWeight:500,children:t}),n.map((function(e){return"string"==typeof e?Object(d.b)(k.Text,{lineHeight:"20px",children:e}):Object(d.b)(d.a,{children:e})}))]})};var Xn=["active"];function $n(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var er=[{name:"快捷键",component:function(e){var t=e.activeTabName,n=Object(Un.b)().isAppleDevice;return Object(d.b)(T.f,{zaType:"Text",zaText:t,as:k.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:Fn.map((function(e,t){var r=e.label,a=e.icon,o=e.shortcut,i=e.shortcutWin;return Object(d.b)(Gn,{label:r,Icon:a,shortcut:n?o:i},t)}))})}},{name:"Markdown",component:function(e){var t=e.activeTabName,n=Zn().jumpUrl;return Object(d.c)(T.f,{zaType:"Text",zaText:t,as:k.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:[Object(d.c)(k.Box,{fontSize:12,css:function(e){return{color:e.colors.GBK06A,margin:"-10px 0 20px 0"}},children:[Object(d.b)(k.Text,{children:"在工具栏-更多中设置为 Markdown 模式后，才会自动识别后续输入内容，转化为对应格式；"}),Object(d.c)(k.Text,{children:["如你希望每篇内容均为此格式，可在",Object(d.b)(k.Link,{css:{cursor:"pointer",textDecoration:"underline",margin:"0 5px"},onClick:function(){return window.open(n)},children:"默认设置"}),"中修改默认编辑器偏好"]})]}),Qn.map((function(e,t){var n=e.label,r=e.icon,a=e.shortcut;return Object(d.b)(Gn,{label:n,Icon:r,shortcut:a},t)}))]})}},{name:"功能说明",component:function(e){var t=e.activeTabName;return Object(d.b)(T.f,{zaType:"Text",zaText:t,as:k.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:Yn.map((function(e,t){var n=e.tabName,r=e.describe;return Object(d.b)(Jn,{name:n,describe:r,isFirst:!t},t)}))})}}],tr=function(e){var t=e.children,n=e.className;return Object(d.b)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},nr=function(e){var t=e.active,n=Object(ve.default)(e,Xn);return Object(d.b)(T.a,Object.assign({zaType:"Button",zaText:!0,as:"button",css:function(e){return[{display:"inline-block",width:"88px",borderRadius:"999px",height:"26px",lineHeight:"26px",background:t?e.colorMod(e.colors.primary).alpha(.1):e.colors.GBK10C,textAlign:"center",cursor:"pointer",color:t?e.colors.primary:e.colors.GBK06A,fontSize:"13px",marginRight:"7px",marginBottom:"14px"},t&&{fontWeight:"500"}]}},n))};function rr(e){var t=e.className,a=e.onClose,o=e.getInitialOffset,i=e.getShouldHide,c=Object(y.useState)(0),l=$n(r.a,c,2),s=l[0],u=l[1],f=er[s].component,b=Object(yn.a)((function(){return Promise.all([n.e(21),n.e(29),n.e(35)]).then(n.bind(null,3016))}));return b?Object(d.b)(T.b,{block:"EditorHelpDoc",children:Object(d.c)(b,{className:t,getInitialOffset:o,getShouldHide:i,children:[Object(d.b)(T.f,{zaType:"Popup",zaText:"帮助文档"}),Object(d.c)(k.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"52px",alignItems:"center"},children:[Object(d.b)(tr,{css:{fontSize:"18px",lineHeight:"24px"},children:"帮助文档"}),Object(d.b)(k.Text,{color:"GBK06A",fontSize:"12px",lineHeight:"17px",fontWeight:"400",ml:"8px",mt:"4px",children:"支持拖拽和调整高度"}),Object(d.b)(T.a,{zaType:"Button",zaAction:"Unknown",zaText:"关闭帮助文档",as:jn.a,css:{marginLeft:"auto",padding:"16px",cursor:"pointer"},onClick:a})]}),Object(d.c)(k.Box,{ml:"16px",mr:"9px",pt:"14px",children:[er.map((function(e,t){return Object(d.b)(nr,{active:s===t,onClick:function(){s!==t&&u(t)},children:e.name},t)})),Object(d.b)(k.Box,{mr:"7px",sx:{height:"2px",borderBottom:"1px solid",borderColor:"GBK09A",alignItems:"center"}})]}),Object(d.b)(k.Box,{px:"16px",css:{height:"calc(100% - 112px)",overflow:"auto"},children:f&&Object(d.b)(f,{activeTabName:er[s].name})})]})}):null}function ar(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var or=Object(y.forwardRef)((function(e,t){var n=e.getInitialOffset,a=e.getShouldHide,o=e.forceUpdate,i=Object(ie.a)(!1),c=ar(r.a,i,2),l=c[0],s=c[1];return Object(y.useImperativeHandle)(t,(function(){return{toggle:s.toggle,getShown:function(){return l}}}),[s,l]),l&&Object(d.b)(rr,{onClose:function(){s.toggle(),o&&requestAnimationFrame((function(){o()}))},getInitialOffset:n,getShouldHide:a})})),ir=function(e){var t=e.getInitialOffset,n=e.getShouldHide,r=e.forceUpdate,a={};return a.helpDocRef=Object(y.createRef)(null),{initialize:function(e){Object.assign(a,e)},handleCommand:function(e){return"toggle-help-document"===e?(a.helpDocRef.current.toggle(),r&&requestAnimationFrame((function(){r()})),"handled"):"not-handled"},queryCommandState:function(e){var t;if("toggle-help-document"===e)return Boolean(null===(t=a.helpDocRef.current)||void 0===t?void 0:t.getShown())},components:[Object(d.b)(or,{getInitialOffset:t,getShouldHide:n,ref:a.helpDocRef,forceUpdate:r},"EditorHelpDocContainer")]}},cr=function(e){var t=e.onToggle;return{handleCommand:function(e){return"toggle-markdown-enabled"===e?(t(),"handled"):"not-handled"}}},lr=n(1013),sr=n(2),ur={LOCAL:{type:"local",name:"上传图片"},EMOTICON:{type:"emoticon",name:"表情包"},PUBLIC:{type:"public",name:"网络素材"},PRIVATE:{type:"private",name:"个人素材"},LATEST:{type:"latest",name:"最近使用"}},dr=Object.values(ur),fr=Object.keys(ur).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(sr.a)({},t,ur[t].type))}),{}),br=(Object.keys(ur).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(sr.a)({},ur[t].type,ur[t].name))}),{}),{ALL:{type:"all",name:"全部"},STATIC:{type:"static",name:"普通图片"},DYNAMIC:{type:"dynamic",name:"动图"}}),pr=Object.values(br),hr=(Object.keys(br).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(sr.a)({},t,br[t].type))}),{}),Object.keys(br).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(sr.a)({},br[t].type,br[t].name))}),{}),["active"]),mr=function(e){var t=e.active,n=Object(ve.default)(e,hr);return Object(d.b)(T.a,Object.assign({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",color:"GBK03A",shouldTrackShow:!0,css:function(e){return[{marginRight:"20px",lineHeight:"50px",fontSize:"15px",cursor:"pointer"},t&&{position:"relative",fontWeight:"bold","::after":{position:"absolute",left:"0",bottom:"0",content:"''",display:"block",width:"100%",height:"4px",backgroundColor:e.colors.GBL01A,flexShrink:"0"}}]}},n))},vr=function(e){var t=e.tabType,n=e.tabChange;return Object(d.c)(k.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return{height:"50px",padding:"0 20px",boxShadow:"inset 0px -0.5px 0px ".concat(e.colors.GBK09A)}},children:[Object(d.b)(k.Flex,{children:dr.map((function(e){return Object(d.b)(mr,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))}),Object(d.b)("div",{className:"MaterialLibrary-SearchInputContainer"})]})};vr.propTypes={tabType:j.a.string,tabChange:j.a.func};var gr=vr,Or=n(174),jr=n(224),yr=n(443),wr=["active"],Cr=function(e){return Object(d.b)(k.Flex,Object.assign({justifyContent:"space-between",css:{padding:"10px 20px 10px 8px"}},e))},xr=function(e){return Object(d.b)("div",Object.assign(Object.assign({css:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},e),{},{children:"加载中..."}))},kr=function(e){return Object(d.b)(T.a,Object.assign({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",css:{marginRight:"10px",padding:"7px 15px",fontSize:"14px",borderRadius:"3px","&:last-child":{marginRight:0}}},e))},Sr=function(e){var t=e.active,n=Object(ve.default)(e,wr);return Object(d.b)(kr,Object.assign({css:function(e){return[{background:e.colorMod(e.colors.GBL01A).alpha(.3),color:e.colors.GBK99A},t&&{background:e.colors.GBL01A}]}},n))},Ar=function(e){return Object(d.b)(kr,Object.assign({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GBK03A}}},e))},Tr=function(e){return Object(d.b)(kr,Object.assign({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GRD03A}}},e))},Ir=function(e){return Object(d.b)("svg",Object.assign(Object.assign({},e),{},{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(d.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 0C11.4477 0 11 0.447716 11 1V11H1C0.447715 11 0 11.4477 0 12C0 12.5523 0.447716 13 1 13H11V23C11 23.5523 11.4477 24 12 24C12.5523 24 13 23.5523 13 23V13H23C23.5523 13 24 12.5523 24 12C24 11.4477 23.5523 11 23 11H13V1C13 0.447715 12.5523 0 12 0Z",fill:"#999999"})}))},Rr=function(e){return null!=e&&e.length?e.sort((function(e,t){return(null==e?void 0:e.checkedIndex)-(null==t?void 0:t.checkedIndex)})):[]},Er=["checked","onChange"],Nr=function(e){var t=e.checked,n=e.onChange,r=Object(ve.default)(e,Er);return Object(d.c)(k.Flex,Object.assign(Object.assign({alignItems:"center",css:function(e){return{fontSize:"13px",color:e.colors.GBL04A}}},r),{},{children:[Object(d.b)(ut.a,{type:"checkbox",checked:t,onChange:function(e){n(e.target.checked)},size:15,style:{marginRight:"5px",marginTop:"1px"}}),"本页全选"]}))},Br=n(901),zr=n(50),Lr=n(144),Pr=["onSearch"];function _r(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Mr=function(e){var t=e.onSearch,n=Object(ve.default)(e,Pr),a=Object(y.useState)(""),o=_r(r.a,a,2),i=o[0],c=o[1],l=Object(y.useState)(null),s=_r(r.a,l,2),u=s[0],f=s[1];return Object(y.useEffect)((function(){f(document.querySelector(".MaterialLibrary-SearchInputContainer"))}),[]),u&&Object(zr.createPortal)(Object(d.b)(Lr.a,Object.assign({className:"materials_library_public_search",onChange:function(e){return c(e.target.value)},value:i,after:Object(d.b)(Br.a,{text:!0,onClick:function(){t(i)}}),onKeyUp:function(e){13===e.keyCode&&t(i)},css:function(e){return{width:"198px",height:"28px",lineHeight:"28px",fontSize:"12px",color:e.colors.GBL05A,backgroundColor:e.colors.GBK99A,border:"1px solid",borderColor:e.colors.GBK08A}}},n)),u)},Dr=["children"],Ur=function(e){return Object(d.b)("i",Object.assign({css:{marginLeft:"14px",width:"96px"}},e))},Fr=function(e){var t=e.children,n=Object(ve.default)(e,Dr);return Object(d.c)(lt.b,Object.assign(Object.assign({css:{display:"flex",flex:1,overflow:"auto",flexWrap:"wrap",justifyContent:"space-between",alignContent:"flex-start",height:"100%",marginLeft:"-5px",padding:"0 20px 0"}},n),{},{children:[t,Object(d.b)(Ur,{}),Object(d.b)(Ur,{}),Object(d.b)(Ur,{}),Object(d.b)(Ur,{}),Object(d.b)(Ur,{}),Object(d.b)(Ur,{})]}))},Vr=Object(y.createContext)({}),Gr=function(){return Object(y.useContext)(Vr)},qr=function(e){var t=e.onClose,n=e.sourceType,r=e.sourceId,a=e.insertImage,o=e.setTabType,i=e.initLocalList,c=e.setInitLocalList,l=e.children;return Object(d.b)(Vr.Provider,{value:Object(y.useMemo)((function(){return{onClose:t,sourceType:n,sourceId:r,insertImage:a,setTabType:o,initLocalList:i,setInitLocalList:c}}),[t,n,r,a,o,i,c]),children:l})},Hr=n(143),Wr=n(1678),Kr=n(1202),Zr=n(872);function Qr(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Yr=function(){return new Promise(requestAnimationFrame)},Jr=function(e,t,n){e({eventType:"Click",action:"Unknown",elementLocation:{type:t,text:n}})},Xr=function(){return Object(d.b)(k.Box,{color:"GBK02A",width:"96px",css:function(e){return{position:"absolute",left:"4px",bottom:"4px",width:"48px",height:"16px",lineHeight:"16px",textAlign:"center",fontSize:"12px",background:e.colors.GBL05A,color:e.colors.GBK99A,borderRadius:"2px",zIndex:1}},children:"已删除"})},$r=function(e){return Object(d.b)(T.a,Object.assign({as:k.Flex,zaType:"Button",zaAction:"Unknown",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",css:{borderRadius:"2px",position:"absolute",lineHeight:"24px"}},e))},ea=function(e){var t=e.data,n=e.chooseImage,a=e.deleted,o=e.deleteSingleImage,i=e.imageUrl,c=e.poster,l=e.isPrivate,s=void 0!==l&&l,u=Object(T.l)().trackEvent,f=Object(Kr.a)(),b=Object(Hr.imgUrl)(i||(null==t?void 0:t.origin),"100w"),p=function(e){var t=Object(T.l)().trackEvent,n=Object(y.useState)(null),a=Qr(r.a,n,2),o=a[0],i=a[1],c="error"===o,l="ready"===o,s=function(n){n.stopPropagation(),"loading"!==o&&(i("loading"),Jr(t,"Button","加载 gif"),Promise.all([Object(Hr.loadImage)(e),Yr().then(Yr)]).then((function(){i("ready")})).catch((function(){i("error")})))};return{isGifReady:l,gifIcon:"loading"===o||l?Object(d.b)(Wr.b,{className:"MaterialLibrary-GifIcon",onClick:s}):c?Object(d.b)(Wr.c,{className:"MaterialLibrary-GifIcon",onClick:s}):Object(d.b)(Wr.a,{className:"MaterialLibrary-GifIcon",onClick:s})}}(b),h=p.isGifReady,m=p.gifIcon,v=h?b:Object(Hr.imgUrl)(c||(null==t?void 0:t.thumbnail),"100w"),g="dynamic"===t.subtype?v:b;return Object(d.c)(k.Box,{color:"GBK02A",width:s?"96px":"105px",css:[{display:"inline-block",marginBottom:"10px",marginLeft:s?"14px":"5px",verticalAlign:"top",".MaterialLibrary-GifIcon":{position:"absolute",width:"46px",height:"46px",marginLeft:"-23px",marginTop:"-23px",top:"50%",left:"50%",transition:"0.3s ease-out",transitionProperty:"transform, opacity",transform:"scale(1)",transformOrigin:"center",opacity:"1"}},h&&{".MaterialLibrary-GifIcon":{transform:"scale(0.3)",opacity:"0",width:0,height:0,margin:0}}],children:[Object(d.c)(k.Box,{width:s?"96px":"105px",height:s?"96px":"105px",css:function(e){return{borderRadius:"2px",cursor:"pointer",position:"relative",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.08),"&:hover > .MaterialLibrary-imgListItemHover":{display:"flex",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.3)}}},onClick:function(){a||(n(t),Jr(u,"Image","".concat(null!=t&&t.checked?"取消选中图片":"选中图片")))},children:[Object(d.b)(k.Image,{src:g,loading:"lazy",size:"100%",css:Object.assign({position:"absolute",left:0,right:0,objectFit:"cover",borderRadius:"inherit",opacity:a?"0.3":"1"},f)}),Object(d.b)(k.Box,{sx:{color:"GBK99A",border:"2px solid",borderColor:"GBL01A"},css:function(e){return Object.assign({display:null!=t&&t.checked?"flex":"none",position:"absolute",top:"0",left:"0",right:"0",width:"100%",height:"100%",borderRadius:"inherit"},(null==t?void 0:t.checked)&&{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.3)})},className:"MaterialLibrary-imgListItemHover",children:a?Object(d.b)($r,{zaText:"删除图片",title:"删除",css:function(e){return{bottom:"2px",right:"2px",backgroundColor:e.colors.GBL01A}},onClick:function(e){e.stopPropagation(),o(t)},children:Object(d.b)(Zr.a,{fill:"currentColor",size:18})}):Object(d.b)($r,{zaType:"Image",zaText:"选中图片",title:"选中图片",onClick:function(e){e.stopPropagation(),n(t)},css:function(e){return{top:"6px",right:"6px",border:"2px solid ".concat(null!=t&&t.checked?e.colors.GBL01A:e.colors.GBK99A),borderRadius:"50%"}}})}),(null==t?void 0:t.checked)&&Object(d.b)($r,{zaType:"Image",zaText:"取消选中图片",title:"取消选中图片",onClick:function(e){e.stopPropagation(),n(t)},css:function(e){return{top:"8px",right:"8px",fontSize:"14px",textAlign:"center",backgroundColor:e.colors.GBL01A,color:e.colors.GBK99A,borderRadius:"50%"}},children:null==t?void 0:t.checkedIndex}),"dynamic"===t.subtype&&m,a&&Object(d.b)(Xr,{})]}),Object(d.b)(k.Box,{mt:"4px",fontSize:"10px",lineHeight:"20px",css:Object.assign(Object.assign({},Object(dt.a)(1)),{},{wordBreak:"break-all"}),title:"文件名称",children:null==t?void 0:t.name})]})};ea.propTypes={data:j.a.string,chooseImage:j.a.func,getLatestList:j.a.func};var ta=ea,na=n(4),ra=n(5);function aa(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var oa=function(e){var t=e.itemKey,n=Object(jr.b)(),a=Object(T.l)().trackEvent,o=Gr(),i=o.sourceId,c=o.sourceType,l=o.insertImage,s=o.onClose,u=Object(y.useState)([]),d=aa(r.a,u,2),f=d[0],b=d[1],p=Object(y.useState)(!0),h=aa(r.a,p,2),m=h[0],v=h[1],g=Object(y.useState)(!1),O=aa(r.a,g,2),j=O[0],w=O[1],C=Object(y.useState)(!1),x=aa(r.a,C,2),k=x[0],S=x[1],A=Object(y.useState)(!1),I=aa(r.a,A,2),R=I[0],E=I[1],B=Object(y.useState)("all"),z=aa(r.a,B,2),L=z[0],P=z[1],_=Object(y.useState)(null),M=aa(r.a,_,2),D=M[0],U=M[1],F=f.length&&f.every((function(e){return e.checked})),V=function(){v(!0),E(!1),S(!1),U(null),b([]),w(!1)},G=Object(we.a)((function(e,t){var n;(v(!1),t)?E(!0):N.a.alert((null==e?void 0:e.message)||(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧!")})),q=Object(we.a)((function(e){var t,n=Object(ra.camelizeKeys)(e.payload||{});v(!1),S(null==n||null===(t=n.paging)||void 0===t?void 0:t.isEnd),U(null==n?void 0:n.paging),b((function(e){return e.concat((null==n?void 0:n.data)||[])}))})),H=Object(we.a)((function(e){b((function(n){var r,a=aa(na.a,n),o=a.find((function(n){return e[t]===n[t]})),i=(null==a||null===(r=a.map((function(e){return null==e?void 0:e.checkedIndex})).sort((function(e,t){return t-e})))||void 0===r?void 0:r[0])||0;return o&&(o.checked=!o.checked,o.checked?o.checkedIndex=i+1:(a.forEach((function(e){(null==e?void 0:e.checkedIndex)>o.checkedIndex&&e.checkedIndex--})),delete o.checkedIndex)),a}))})),W=Object(we.a)((function(e){l(e.map((function(e){return e.origin}))),n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"POST",body:{source_type:c,source_id:String(i),material_type:"image",material_ids:e.map((function(e){return e.materialId}))}}),s()}));return{materialList:f,setMaterialList:b,paging:D,isLoading:m,setIsLoading:v,hasInited:j,setHasInited:w,isDrained:k,setIsDrained:S,isPageError:R,setIsPageError:E,subTypeCatch:L,setSubTypeCatch:P,selectAllChecked:F,toggleSelectAll:function(e){e&&a({action:"Unknown",eventType:"Click",elementLocation:{type:"Button",text:"本页全选"}}),b((function(t){return t.map((function(t,n){return Object.assign(Object.assign({},t),{},{checked:e,checkedIndex:e?n+1:void 0})}))}))},reset:V,handleSubTypeChange:function(e){j&&e!==L&&(P(e),V())},handleResponseErrorData:G,handleResponseData:q,chooseImage:H,insertImages:W}},ia=["dataList","insertImages"],ca=["keywordCatch"];function la(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var sa=function(e){var t=e.isPageError,n=e.keywordCatch,r=e.reset;return t?Object(d.b)(Ue.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:r}):Object(d.b)(Ue.a.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},ua=function(e){var t=e.dataList,n=e.insertImages,r=Object(ve.default)(e,ia),a=(t||[]).filter((function(e){return!0===e.checked}));return Object(d.b)(k.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:"flex-end"},r),{},{children:Object(d.b)(Sr,{active:a.length>0,onClick:function(){n(Rr(a))},css:{margin:0},zaText:"插入图片；图片数：".concat(a.length||0),children:"插入图片"})}))},da=function(e){var t=e.keywordCatch,n=Object(ve.default)(e,ca),r=Object(jr.b)(),a=Gr(),o=a.insertImage,i=a.onClose,c=oa({itemKey:"id"}),l=c.materialList,s=c.paging,u=c.isLoading,f=c.setIsLoading,b=c.hasInited,p=c.setHasInited,h=c.isDrained,m=c.isPageError,v=c.setIsPageError,g=c.selectAllChecked,O=c.toggleSelectAll,j=c.reset,w=c.handleResponseErrorData,C=c.handleResponseData,x=c.chooseImage,S=!l.length,A=Object(we.a)((function(){return f(!0),v(!1),r((null==s?void 0:s.next)||Object(yr.a)("".concat(location.origin,"/api/v4/materials/pc_editor/search"),{offset:null==l?void 0:l.length,limit:24,keyword:t||"表情包"}))})),T=Object(we.a)((function(){return A().then(C).catch((function(e){w(e.payload)}))})),I=Object(we.a)((function(e){o(e.map((function(e){return e.origin}))),i()}));Object(y.useEffect)((function(){b||A().then(C).catch((function(e){w(e.payload,!0)})).finally((function(){p(!0)}))}),[b,p,A,C,w]);var R=S?!u&&Object(d.b)(sa,{isPageError:m,keywordCatch:t,reset:j}):Object(d.c)(d.a,{children:[Object(d.b)(Fr,{getContainer:function(e){return e},onLoad:T,isLoading:u,isDrained:h,children:l.map((function(e,t){return Object(d.b)(ta,{data:e,insertImages:I,chooseImage:x},String([e.id,t]))}))}),Object(d.b)(ua,{dataList:l,insertImages:I})]});return Object(d.c)(k.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},n),{},{children:[Object(d.c)(Cr,{children:[Object(d.b)("div",{className:"MaterialLibrary-SearchTipsContainer",children:t&&!S&&!u&&!m&&Object(d.c)(k.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})}),Object(d.b)(Nr,{checked:g,onChange:O})]}),b?R:Object(d.b)(xr,{})]}))},fa=function(e){var t=Object(Or.default)({},e),n=Object(y.useState)(""),a=la(r.a,n,2),o=a[0],i=a[1];return Object(d.c)(d.a,{children:[Object(d.b)(Mr,{placeholder:"搜索表情包",onSearch:i}),Object(d.b)(da,Object.assign({keywordCatch:o},t),o)]})},ba=["active"],pa=function(e){var t=e.active,n=Object(ve.default)(e,ba);return Object(d.b)("button",Object.assign({color:"GBK03A",css:[{padding:"0 12px",fontSize:"12px",cursor:"pointer"},t&&{fontWeight:"bold"}]},n))},ha=function(e){var t=e.tabType,n=e.tabChange;return Object(d.b)(k.Flex,{children:pr.map((function(e){return Object(d.b)(pa,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))})};ha.propTypes={tabType:j.a.string,tabChange:j.a.func};function ma(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var va=function(e){var t=Object(jr.b)(),n=Object(y.useState)({}),a=ma(r.a,n,2),o=a[0],i=a[1],c=Object(y.useState)(!1),l=ma(r.a,c,2),s=l[0],u=l[1],d=Object(y.useState)(""),f=ma(r.a,d,2),b=f[0],p=f[1],h=Object(y.useState)(!1),m=ma(r.a,h,2),v=m[0],g=m[1],O=Object(we.a)((function(){g(!1),i({}),u(!1)})),j=Object(we.a)((function(){return t("".concat(location.origin,"/api/v4/materials/pc_editor/folders?type=").concat(e,"&material_type=image")).then((function(e){var t,n=Object(ra.camelizeKeys)((null===(t=e.payload)||void 0===t?void 0:t.data)||{});return i(n),n}))}));return Object(y.useEffect)((function(){s||j().then((function(e){var t,n,r=null==e||null===(t=e.child)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;p(r)})).catch((function(){g(!0)})).finally((function(){u(!0)}))}),[s,j]),{hasInited:s,isPageError:v,setIsPageError:g,reset:O,folders:o,getFoldersList:j,activeFolderId:b,setActiveFolderId:p}},ga=["dataList","insertImages"];function Oa(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ja=function(e){var t=e.isPageError,n=e.keywordCatch,r=e.reset;return t?Object(d.b)(Ue.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:r}):Object(d.b)(Ue.a.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},ya=function(e){var t=e.dataList,n=e.insertImages,r=Object(ve.default)(e,ga),a=(t||[]).filter((function(e){return!0===e.checked}));return Object(d.b)(k.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:"flex-end"},r),{},{children:Object(d.b)(Sr,{active:a.length>0,onClick:function(){n(Rr(a))},zaText:"插入图片；图片数：".concat(a.length||0),children:"插入图片"})}))},wa=function(e){var t=e.keywordCatch,n=e.activeFolderId,r=Gr(),a=r.sourceId,o=r.sourceType,i=Object(jr.b)(),c=oa({itemKey:"uniqueId"}),l=c.materialList,s=c.paging,u=c.isLoading,f=c.setIsLoading,b=c.hasInited,p=c.setHasInited,h=c.isDrained,m=c.isPageError,v=c.setIsPageError,g=c.subTypeCatch,O=(c.handleSubTypeChange,c.selectAllChecked),j=c.toggleSelectAll,w=c.reset,C=c.handleResponseErrorData,x=c.handleResponseData,S=c.chooseImage,A=c.insertImages,T=!l.length,I=Object(we.a)((function(){return f(!0),v(!1),i((null==s?void 0:s.next)||Object(yr.a)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/search"),{offset:null==l?void 0:l.length,limit:24,keyword:t,source_type:o,source_id:a,sub_type:g}))})),R=Object(we.a)((function(){return I().then(x).catch((function(e){C(e.payload)}))}));Object(y.useEffect)((function(){!b&&n&&I().then(x).catch((function(e){C(e.payload,!0)})).finally((function(){p(!0)}))}),[b,n,p,I,x,C]);var E=T?!u&&Object(d.b)(ja,{isPageError:m,keywordCatch:t,reset:w}):Object(d.c)(d.a,{children:[Object(d.b)(Fr,{getContainer:function(e){return e},onLoad:R,isLoading:u,isDrained:h,children:l.map((function(e,t){return Object(d.b)(ta,{data:e,insertImages:A,chooseImage:S},String([e.uniqueId,t]))}))}),Object(d.b)(ya,{dataList:l,insertImages:A})]});return Object(d.c)(d.a,{children:[Object(d.c)(Cr,{children:[Object(d.c)("div",{className:"MaterialLibrary-SearchTipsContainer",children:[!1,t&&!T&&!u&&!m&&Object(d.c)(k.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})]}),Object(d.b)(Nr,{checked:O,onChange:j})]}),b?E:Object(d.b)(xr,{})]})},Ca=function(e){var t=Object(Or.default)({},e),n=Object(y.useState)(""),a=Oa(r.a,n,2),o=a[0],i=a[1],c=va(fr.PUBLIC),l=c.hasInited,s=c.reset,u=c.isPageError,f=c.activeFolderId,b=u?Object(d.b)(ja,{isPageError:!0,reset:s}):Object(d.b)(wa,Object.assign({keywordCatch:o,activeFolderId:f},t),o);return Object(d.c)(d.a,{children:[Object(d.b)(Mr,{placeholder:"搜索网络素材库",onSearch:i}),Object(d.b)(k.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:l?b:Object(d.b)(xr,{css:{marginTop:42}})}))]})},xa=n(1014),ka=n(295),Sa=n(312),Aa=n(2412),Ta=function(e){var t=e.handleUploadImage,n=e.content,r=e.style,a=void 0===r?{}:r,o=e.isLocal,i=Object(y.useRef)();return Object(d.c)(d.a,{children:[Object(d.b)("input",{css:{display:"none"},ref:i,type:"file",onChange:function(e){t(e),o&&(i.current.value=null)},accept:"image/*",multiple:!0}),Object(d.b)(T.a,{zaType:"Button",zaText:"本地上传图片",as:k.Flex,role:"button",width:"92px",height:"32px",lineHeight:"32px",fontSize:"12px",color:"GBL05A",alignItems:"center",justifyContent:"center",ml:"19px",mb:"6px",onClick:function(){return i.current.click()},css:function(e){return Object.assign({verticalAlign:"top",display:"inline-flex",cursor:"pointer",borderRadius:"2px",backgroundColor:e.colorMod(e.colors.GBL05A).alpha(.08)},a)},children:n||Object(d.c)(d.a,{children:[Object(d.b)(Aa.b,{}),Object(d.b)(k.Text,{ml:"3px",mt:"2px",children:"本地上传"})]})})]})},Ia=["handleUploadImage"],Ra=function(e){var t=e.handleUploadImage,n=Object(ve.default)(e,Ia);return Object(d.b)(k.Flex,Object.assign(Object.assign({},n),{},{height:"100%",alignItems:"center",justifyContent:"center",children:Object(d.c)(k.Box,{textAlign:"center",children:[Object(d.b)(Ta,{handleUploadImage:t,style:{width:"104px",height:"104px",border:"1px dashed #d3d3d3",margin:0,background:"transparent",borderRadius:"8px","&:hover":{background:"rgba(246, 246, 246, 0.3)"}},content:Object(d.b)(Ir,{})}),Object(d.b)(k.Text,{color:"GBK02A",fontSize:"14px",fontWeight:"500",mt:"10px",children:"上传图片"}),Object(d.b)(k.Text,{color:"GBK06A",fontSize:"12px",mt:"4px",children:"支持 JPG、JPEG、PNG 等格式"})]})}))},Ea=n(2106),Na=Object.assign;function Ba(e){return w.a.createElement(W.a,Na(Na({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"FolderPlus24","data-old-api":"Folderplus24"},e),{className:"ZDI ZDI--Folderplus24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M4.415 5.632a.915.915 0 00-.915.915v10.52c0 .505.41.914.915.914h8.413a.75.75 0 010 1.5H4.415A2.415 2.415 0 012 17.066V6.547a2.415 2.415 0 012.415-2.415h4.081c.715 0 1.394.318 1.853.866l1.09 1.304a.915.915 0 00.701.328h6.428a2.415 2.415 0 012.415 2.415v1.954a.75.75 0 01-1.5 0V9.045a.915.915 0 00-.915-.915H12.14a2.415 2.415 0 01-1.853-.866L9.198 5.96a.915.915 0 00-.702-.328h-4.08z",fillRule:"evenodd",clipRule:"evenodd"}),w.a.createElement("path",{d:"M16.3 16.039a.75.75 0 000 1.5h2.1v2.1a.75.75 0 001.5 0v-2.1H22a.75.75 0 100-1.5h-2.1v-2.1a.75.75 0 00-1.5 0v2.1h-2.1z"}))}function za(e){return w.a.createElement(W.a,Na(Na({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"FolderPlus24","data-old-api":"FolderPlus"},e),{className:"Zi Zi--FolderPlus"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M4.415 5.632a.915.915 0 00-.915.915v10.52c0 .505.41.914.915.914h8.413a.75.75 0 010 1.5H4.415A2.415 2.415 0 012 17.066V6.547a2.415 2.415 0 012.415-2.415h4.081c.715 0 1.394.318 1.853.866l1.09 1.304a.915.915 0 00.701.328h6.428a2.415 2.415 0 012.415 2.415v1.954a.75.75 0 01-1.5 0V9.045a.915.915 0 00-.915-.915H12.14a2.415 2.415 0 01-1.853-.866L9.198 5.96a.915.915 0 00-.702-.328h-4.08z",fillRule:"evenodd",clipRule:"evenodd"}),w.a.createElement("path",{d:"M16.3 16.039a.75.75 0 000 1.5h2.1v2.1a.75.75 0 001.5 0v-2.1H22a.75.75 0 100-1.5h-2.1v-2.1a.75.75 0 00-1.5 0v2.1h-2.1z"}))}function La(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Pa=function(e){var t=e.type,n=e.className,a=e.inputShowName,o=void 0===a?"":a,i=e.resetInput,c=e.folderId,l=e.getFoldersList,s=Object(jr.b)(),u=Object(y.useRef)(),f=Object(y.useState)(o),b=La(r.a,f,2),p=b[0],h=b[1];return Object(d.b)("input",{ref:u,type:"text",className:m()("MaterialLibrary-input-module",n),placeholder:"请输入文件名称",autoFocus:"autofocus",onChange:function(e){var t=e.target.value;h(t)},value:p,onBlur:function(){i&&i(""),"add"!==t&&p&&s("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(c),{method:"PUT",body:{name:p}}).then((function(){var e;null===(e=u.current)||void 0===e||e.blur(),l&&l()})).catch((function(e){var t,n,r;N.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧!")}))},onKeyUp:function(e){var t;13===e.keyCode&&(null===(t=u.current)||void 0===t||t.blur())}})};Pa.propTypes={inputShowName:j.a.string,resetInput:j.a.func};var _a=Pa;function Ma(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Da=function(e){return Object(d.b)(T.a,Object.assign({as:k.Flex,zaType:"Button",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:function(e){return{borderRadius:"12px",backgroundColor:e.colors.GBK99A,cursor:"pointer","&+&":{marginLeft:"4px"}}}},e))},Ua=function(e){var t,n=e.folders,a=void 0===n?{}:n,o=e.activeFolderId,i=e.getFoldersList,c=e.folderClick,l=e.reset,s=Object(jr.b)(),u=Object(y.useState)(""),f=Ma(r.a,u,2),b=f[0],p=f[1],h=Object(y.useState)(""),v=Ma(r.a,h,2),g=v[0],O=v[1],j=function(e,t){"nav-edit"===e?(p(t.id),O(t.name)):"nav-delete"===e&&N.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.b)("h2",{children:"是否删除已选择分类？"}),Object(d.b)("p",{children:"分类中的图片将归入未分类中"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){s("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t.id),{method:"DELETE",body:{delete_material:!1}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?(N.a.alert("已成功删除分组，该分组的图片已移动至「我的图片-未分类」"),l()):N.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))};return null!=a&&a.hidden?null:Object(d.c)("div",{className:"MaterialLibraryNav",children:[Object(d.c)("div",{className:"MaterialLibraryNav-nav",children:[Object(d.c)(k.Flex,{className:"MaterialLibraryNav-Mine",justifyContent:"space-between",alignItems:"center",children:[Object(d.c)(k.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(d.b)(Wn.a,{className:"nav-icon"}),null==a?void 0:a.name]}),Object(d.b)("div",{className:"nav-num",children:null==a?void 0:a.materialCount})]}),null==a||null===(t=a.child)||void 0===t?void 0:t.map((function(e){return Object(d.c)(k.Flex,{className:m()("MaterialLibraryNav-Folder",{active:o===e.id}),justifyContent:"space-between",alignItems:"center",onClick:function(){c(e.id)},children:[Object(d.c)(k.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(d.b)(Kt,{className:"nav-icon"}),b!==e.id&&Object(d.b)("div",{className:"nav-name",children:e.name})]}),b!==e.id&&Object(d.b)("div",{className:m()("nav-num",{"disable-hover":!e.supportEdit&&!e.supportDelete}),children:e.materialCount||0}),b!==e.id&&(e.supportEdit||e.supportDelete)&&Object(d.c)(k.Flex,{className:"nav-handle",children:[e.supportEdit&&Object(d.b)(Da,{zaText:"编辑",onClick:function(t){t.stopPropagation(),j("nav-edit",e)},children:Object(d.b)(Ea.a,{fill:"currentColor",size:10})}),e.supportDelete&&Object(d.b)(Da,{zaText:"删除",onClick:function(t){t.stopPropagation(),j("nav-delete",e)},children:Object(d.b)(se.a,{fill:"currentColor",size:10})})]}),b===e.id&&Object(d.b)(_a,{folderId:e.id,inputShowName:g,getFoldersList:i,resetInput:function(e){p(e)}})]},e.id)}))]}),Object(d.c)(k.Flex,{className:"MaterialLibraryNav-Add",justifyContent:"space-between",alignItems:"center",onClick:function(){var e;(null==a||null===(e=a.child)||void 0===e?void 0:e.length)>15?N.a.alert("分组已达上限，请删除已有的分类后再行添加"):N.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.b)("h2",{children:"添加分类"}),Object(d.b)(_a,{type:"add",className:"MaterialLibraryNav-input-module"})]}),{text:{ok:"添加",cancel:"取消"}}).then((function(){var e,t=null===(e=document.querySelector(".MaterialLibrary-input-module"))||void 0===e?void 0:e.value;s("".concat(location.origin,"/api/v4/materials/pc_editor/folders"),{method:"POST",body:{name:t,material_type:"image"}}).then((function(){i()})).catch((function(e){var t,n,r;N.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧!")}))}),(function(){}))},children:[Object(d.b)(za,{className:"nav-icon"}),"添加分类"]})]})};Ua.propTypes={folders:j.a.object,getFoldersList:j.a.func,folderClick:j.a.func};var Fa=Ua,Va=["dataList","activeFolderId","folders","getFoldersList","insertImages"];function Ga(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qa(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ha=function(e){var t=e.isPageError,n=e.handleUploadImage,r=e.reset;return t?Object(d.b)(d.a,{children:Object(d.b)(Ue.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:r})}):Object(d.b)(Ra,{css:{marginTop:"-50px"},handleUploadImage:n})},Wa=function(e){var t=e.dataList,n=e.activeFolderId,r=e.folders,a=e.getFoldersList,o=e.insertImages,i=Object(ve.default)(e,Va),c=Object(jr.b)(),l=(t||[]).filter((function(e){return!0===e.checked})),s=Object(y.useMemo)((function(){var e;return null==r||null===(e=r.child)||void 0===e?void 0:e.filter((function(e){return e.id!==n}))}),[r,n]);return Object(d.c)(k.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:l.length>0?"space-between":"flex-end"},i),{},{children:[l.length>0&&Object(d.b)(Tr,{onClick:function(){0!==l.length&&N.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.c)("h2",{children:["是否删除已选择共 ",l.length," 张图片？"]}),Object(d.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){var e="".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/materials");c(e,{method:"DELETE",body:{material_type:"image",folder_material_ids:l.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?a():N.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))},children:"删除图片"}),Object(d.c)(k.Box,{children:[l.length>0&&(null==s?void 0:s.length)>0&&Object(d.b)(Ar,{css:{width:"86px"},onClick:function(){if(0!==l.length){var e=s[0].id;N.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.c)("h2",{children:["为已选择共 ",l.length," 张图片分类"]}),Object(d.b)(ke.b,{buttonClassName:"MaterialLibraryContent-select",listClassName:"MaterialLibraryContent-option",value:n,onChange:function(t){e=t},children:s.map((function(e){var t=e.name,n=e.id;return Object(d.b)(ke.a,{value:n,text:t,children:t},n)}))})]}),{text:{ok:"确定",cancel:"取消"}}).then((function(){c("".concat(location.origin,"/api/v4/materials/pc_editor/material-move"),{method:"POST",body:{folder_id:n,target_folder_id:e,folder_material_ids:l.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?a():N.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))}},children:"移动"}),Object(d.b)(Sr,{active:l.length>0,onClick:function(){o(Rr(l))},zaText:"插入图片；图片数：".concat(l.length||0),children:"插入图片"})]})]}))},Ka=function(e){var t=e.activeFolderId,n=e.getFoldersList,r=e.folders,a=Object(jr.b)(),o=Object(C.useDispatch)(),i=oa({itemKey:"uniqueId"}),c=i.materialList,l=i.paging,s=i.isLoading,u=i.setIsLoading,f=i.hasInited,b=i.setHasInited,p=i.isDrained,h=i.isPageError,m=i.setIsPageError,v=i.selectAllChecked,g=i.toggleSelectAll,O=i.reset,j=i.handleResponseErrorData,w=i.handleResponseData,x=i.chooseImage,S=i.insertImages,A=!c.length,T=Object(we.a)((function(){return u(!0),m(!1),a((null==l?void 0:l.next)||Object(yr.a)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{offset:null==c?void 0:c.length,limit:24}))})),I=Object(we.a)((function(){return T().then(w).catch((function(e){j(e.payload)}))})),R=function(e){var r=e.target.files;if(null!=r&&r.length)if((null==r?void 0:r.length)>100)N.a.alert("添加图片请不要超过 100 张哦~");else{var i,c=[],l=Ga(r,!0);try{var s=function(){var e=i.value;Object(xa.b)({file:e,preset:xa.a.content}).then((function(){Object(ka.a)(e).then((function(o){Object(Sa.a)(o).then((function(o){(c=c.concat({name:null==e?void 0:e.name,source:null==o?void 0:o.original_hash})).length===r.length&&function(e){a("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{method:"POST",body:{material_type:"image",materials:e}}).then((function(e){var t,r;null!==(t=e.payload)&&void 0!==t&&t.success?n():N.a.alert((null===(r=e.payload)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧！")})).catch((function(e){var t,n,r;N.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message)||"网络错误，稍后重试吧!")}))}(c)}))}))})).catch((function(e){o(Object(be.h)(e.message||"图片上传未完成，请稍后发布","red"))}))};for(l.s();!(i=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}}};Object(y.useEffect)((function(){!f&&t&&T().then(w).catch((function(e){j(e.payload,!0)})).finally((function(){b(!0)}))}),[f,b,t,T,w,j]);var E=A?!s&&Object(d.b)(Ha,{handleUploadImage:R,isPageError:h,reset:O}):Object(d.c)(d.a,{children:[Object(d.b)(k.Box,{mt:"-36px",width:"100px",children:Object(d.b)(Ta,{handleUploadImage:R},c.length)}),Object(d.b)(Fr,{getContainer:function(e){return e},onLoad:I,isLoading:s,isDrained:p,css:{marginLeft:"-14px"},children:c.map((function(e,t){return Object(d.b)(ta,{data:e,chooseImage:x,insertImages:S,isPrivate:!0},String([e.uniqueId,t]))}))}),Object(d.b)(Wa,{dataList:c,folders:r,activeFolderId:t,getFoldersList:n,insertImages:S})]});return Object(d.c)(d.a,{children:[Object(d.b)(Cr,{children:Object(d.b)(Nr,{css:{marginLeft:"auto"},checked:v,onChange:g})}),f?E:Object(d.b)(xr,{})]})},Za=function(e){var t,n=Object(Or.default)({},e),r=va(fr.PRIVATE),a=r.hasInited,o=r.getFoldersList,i=r.reset,c=r.isPageError,l=r.folders,s=r.activeFolderId,u=r.setActiveFolderId,f=null===(t=l.child)||void 0===t?void 0:t.find((function(e){return e.id===s})),b=c?Object(d.b)(Ha,{isPageError:!0,reset:i}):Object(d.b)(Ka,Object.assign({folders:l,activeFolderId:s,getFoldersList:o},n),String([s,null==f?void 0:f.materialCount]));return Object(d.c)(k.Flex,{color:"GBL05A",css:{height:"530px",overflow:"hidden",fontSize:"12px"},children:[!c&&Object(d.b)(Fa,{folders:l,activeFolderId:s,folderClick:function(e){s!==e&&u(e)},getFoldersList:o,reset:i}),Object(d.b)(k.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px",flex:1}},n),{},{children:a?b:Object(d.b)(xr,{css:{marginTop:42}})}))]})},Qa=["dataList","deleteImages","insertImages"],Ya=function(e){var t=e.isPageError,n=e.reset,r=Gr().setTabType;return t?Object(d.b)(Ue.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:n}):Object(d.b)(Ue.a.EI1A,{image:"default",content:"最近使用为空，请搜索网络素材或上传图片",buttonText:"上传图片",buttonOnClick:function(){r(fr.PRIVATE)}})},Ja=function(e){var t=e.dataList,n=e.deleteImages,r=e.insertImages,a=Object(ve.default)(e,Qa),o=(t||[]).filter((function(e){return!0===e.checked}));return Object(d.c)(k.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:o.length>0?"space-between":"flex-end"},a),{},{children:[o.length>0&&Object(d.b)(Tr,{onClick:function(){0!==o.length&&N.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.c)("h2",{children:["是否删除已选择共 ",o.length," 张图片？"]}),Object(d.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){n(o.map((function(e){return e.materialId})))}),(function(){}))},children:"删除图片"}),Object(d.b)(Sr,{active:o.length>0,onClick:function(){r(Rr(o))},zaText:"插入图片；图片数：".concat(o.length||0),children:"插入图片"})]}))},Xa=function(e){var t=Object(Or.default)({},e),n=Object(jr.b)(),r=oa({itemKey:"materialId"}),a=r.materialList,o=r.paging,i=r.isLoading,c=r.setIsLoading,l=r.hasInited,s=r.setHasInited,u=r.isDrained,f=r.isPageError,b=r.setIsPageError,p=r.selectAllChecked,h=r.toggleSelectAll,m=r.reset,v=r.handleResponseErrorData,g=r.handleResponseData,O=r.chooseImage,j=r.insertImages,w=!a.length,C=Object(we.a)((function(){return c(!0),b(!1),n((null==o?void 0:o.next)||Object(yr.a)("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{offset:null==a?void 0:a.length,limit:24,material_type:"image"}))})),x=Object(we.a)((function(){return C().then(g).catch((function(e){v(e.payload)}))})),S=Object(we.a)((function(e){return n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"DELETE",body:{material_type:"image",material_ids:e}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?m():N.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))})),A=Object(we.a)((function(e){N.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.b)("h2",{children:"是否从最近使用删除图片？"}),Object(d.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){S([e.materialId])}),(function(){}))}));Object(y.useEffect)((function(){l||C().then(g).catch((function(e){v(e.payload,!0)})).finally((function(){s(!0)}))}),[l,s,C,g,v]);var T=w?!i&&Object(d.b)(Ya,{isPageError:f,reset:m}):Object(d.c)(d.a,{children:[Object(d.b)(Fr,{getContainer:function(e){return e},onLoad:x,isLoading:i,isDrained:u,children:a.map((function(e,t){return Object(d.b)(ta,{data:e,chooseImage:O,insertImages:j,deleted:e.deleted,deleteSingleImage:A},String([e.materialId,t]))}))}),Object(d.b)(Ja,{dataList:a,deleteImages:S,insertImages:j})]});return Object(d.c)(k.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:[Object(d.b)(Cr,{children:Object(d.b)(Nr,{css:{marginLeft:"auto"},checked:p,onChange:h})}),l?T:Object(d.b)(xr,{})]}))},$a=n(94),eo=n.n($a),to=n(146),no=n.n(to),ro=n(290),ao=n(884),oo=n(1009),io=function(e){var t,n=e.data,r=e.deleteImage,a=e.reUploadImage,o=e.dragWrapRef,i=n||{},c=i.tag,l=i.index,s=(null==o||null===(t=o.current)||void 0===t?void 0:t.clientWidth)||746,u={cursor:"pointer",userDrag:"none",userSelect:"none",WebkitUserDrag:"none",WebkitUserSelect:"none"};return Object(d.c)(k.Box,{id:c.originSrc+l,css:function(e){return Object.assign({position:"relative",display:"inline-block",width:"105px",height:"105px",margin:"0 calc(".concat(s-655,"px / 12) 15px"),borderRadius:"2px",background:e.colors.GBK10C,"&:active":{filter:"drop-shadow(0px 3px 6px rgba(0, 0, 0, 0.15)) drop-shadow(0px 0px 4px rgba(0, 0, 0, 0.3))"}},"pending"===c.status&&u)},children:[Object(d.b)(k.Image,{src:c.originSrc,width:"100%",height:"100%",css:{borderRadius:"2px"},sx:{objectFit:"cover"}}),Object(d.c)(k.Box,{css:function(e){return{position:"absolute",top:0,left:0,width:"105px",height:"105px",borderRadius:"2px",zIndex:2,backgroundColor:e.colorMod(e.colors.GBK02A).alpha("success"===c.status?0:.4),"& .CircleLoadingBar .path":{stroke:e.colors.GBK99A},"&:hover":{".close":{display:"block"}}}},children:["pending"===c.status&&Object(d.b)(oo.a,{}),Object(d.b)(k.Box,{className:"close",css:function(e){return Object.assign({position:"absolute",top:"-10px",right:"-9px",zIndex:3,width:"20px",height:"20px",lineHeight:"21px",fontSize:"15px",textAlign:"center",borderRadius:"50%",display:"none",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.4),color:e.colors.GBK99A,"&>span":{marginLeft:"1px"}},u)},onClick:function(){return r(c,l)},children:Object(d.b)(se.a,{center:!0,width:"13px",height:"13px"})}),"error"===c.status&&Object(d.c)(d.a,{children:[Object(d.c)(k.Flex,{fontSize:"15px",fontWeight:"400",height:"82px",color:"GBK99A",alignItems:"center",justifyContent:"center",css:u,onClick:function(){return a(c.file,l)},children:[Object(d.b)(ao.a,{width:"20px",height:"22px"}),Object(d.b)(k.Text,{ml:"3px",children:"重试"})]}),Object(d.b)(k.Box,{css:function(e){return{position:"absolute",bottom:0,left:0,zIndex:3,width:"100%",height:"23px",lineHeight:"23px",fontSize:"12px",fontWeight:400,textAlign:"center",backgroundColor:e.colorMod(e.colors.GBK99A).alpha(.8),color:e.colors.GRD03A,borderRadius:"0 0 1px 1px"}},children:"上传失败"})]})]})]},c.originSrc+l)},co=["dataList","insertImages","onClose"];function lo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var so,uo=function(e){var t=e.src,n=e.originalSrc,r=e.watermarkSrc,a=e.privateWatermarkSrc,o=e.watermark,i=e.dataRawwidth,c=e.dataRawheight,l=e.hash,s=Object(Hr.imgUrl)(t,{quality:eo()(navigator.userAgent).Mobile?50:80,size:window.devicePixelRatio>=1.5?"1440w":"720w"});return{src:s,url:s,originalSrc:n,watermarkSrc:r,privateWatermarkSrc:a,watermark:o,rawWidth:i,rawHeight:c,id:l}},fo=function(e){var t=e.dataList,n=e.insertImages,r=e.onClose,a=Object(ve.default)(e,co);return Object(d.c)(k.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},alignItems:"center",justifyContent:"flex-end"},a),{},{children:[(null==t?void 0:t.length)>0&&Object(d.c)(k.Text,{color:"GBK03A",fontSize:"14px",fontWeight:"400",mr:"10px",children:["已上传 ",t.length," 张图片，拖拽可调整顺序"]}),Object(d.b)(Sr,{active:t.length>0,onClick:function(){var e=t.map((function(e){return e.data||{}}));n(e,!0),r()},zaText:"插入图片；图片数：".concat(t.length||0),children:"插入图片"})]}))},bo=function(e){var t=e.handleUploadImage,n=e.errorList,r=e.reUpload;return Object(d.c)(k.Flex,{alignItems:"center",justifyContent:"space-between",children:[Object(d.b)(Ta,{handleUploadImage:t,style:{margin:"5px 0 4px 20px",height:"32px"},isLocal:!0}),(null==n?void 0:n.length)>0&&Object(d.c)(k.Flex,{alignItems:"center",mr:"20px",mt:"1px",fontSize:"14px",children:[Object(d.c)(k.Text,{color:"GRD03A",children:[n.length," 张上传失败"]}),Object(d.b)(k.Text,{css:function(e){return{width:"114px",height:"32px",lineHeight:"32px",marginLeft:"10px",borderRadius:"3px",cursor:"pointer",background:e.colors.GBK10A,color:e.colors.GBL01A,fontWeight:500,textAlign:"center"}},onClick:r,children:"批量重新上传"})]})]})},po=function(){var e=(Object(yn.a)((function(){return Promise.all([n.e(4),n.e(120)]).then(n.t.bind(null,2970,7))}))||{}).DraggableArea,t=Object(y.useRef)(),a=Object(C.useDispatch)(),o=Gr().sourceType,i=Gr(),c=i.insertImage,l=i.onClose,s=i.initLocalList,u=i.setInitLocalList,f=Object(y.useState)(s||[]),b=lo(r.a,f,2),p=b[0],h=b[1],m=Object(y.useRef)(p);Object(y.useEffect)((function(){m.current=p}),[p]),Object(y.useEffect)((function(){return h(s),function(){var e;u(null===(e=m.current)||void 0===e?void 0:e.map((function(e){return Object.assign(Object.assign({},e),"pending"===e.status&&{status:"error"})})))}}),[]);var v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.findIndex((function(e){return e.id===t})),a=lo(na.a,e);return-1!==r&&a.splice(r,1,Object.assign(Object.assign({},e[r]),n)),a},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var r=null!=n&&n.isUpload?null==n?void 0:n.imageList:p;r.splice(t,1,Object.assign(Object.assign({},r[t]),{},{status:"pending"})),h((function(){return lo(na.a,r)})),a(Object(ro.b)(e,"default",o)).then((function(e){var n=e.payload;h((function(e){var a;return v(e,null===(a=r[t])||void 0===a?void 0:a.id,{data:uo(n),status:"success"})}))})).catch((function(){h((function(e){var n;return v(e,null===(n=r[t])||void 0===n?void 0:n.id,{status:"error"})}))}))}},O=function(e){var t,n=e.target.files;null!=n&&n.length&&((null==n?void 0:n.length)>100?N.a.alert("添加图片请不要超过 100 张哦~"):null===(t=Array.from(n))||void 0===t||t.forEach((function(e){Object(xa.b)({file:e,preset:xa.a.content}).then((function(){h((function(t){var n=[].concat(lo(na.a,t),[{originSrc:window.URL.createObjectURL(e),status:"pending",id:no()("image"),file:e}]);return function(e,t){var n=t.length-1;g(t[n].file,n,{isUpload:!0,imageList:t})}(0,n),n}))})).catch((function(e){a(Object(be.h)(e.message||"图片上传未完成，请稍后发布","red"))}))})))},j=function(e,t){var n=lo(na.a,p);n.splice(t,1),h(n)},w=function(e){var t=[];return null==e||e.forEach((function(e,n){"error"===e.status&&t.push(Object.assign(Object.assign({},e),{},{index:n}))})),t};return null!=p&&p.length?Object(d.c)(d.a,{children:[Object(d.b)(bo,{handleUploadImage:O,errorList:w(p),reUpload:function(){var e;null===(e=w(p))||void 0===e||e.forEach((function(e){return g(e.file,e.index)}))}}),Object(d.b)(k.Box,{ref:t,css:{position:"relative",width:"100%",height:"505px",overflowY:"scroll",padding:"10px 12.5px 16px",lineHeight:"0.8"},children:e?Object(d.b)(e,{tags:p.map((function(e){return Object.assign(Object.assign({},e),{},{id:"".concat(e.id,"_").concat(e.status)})})),render:function(e){return Object(d.b)(io,{data:e,deleteImage:j,reUploadImage:g,dragWrapRef:t})},onChange:function(e){h(e.map((function(e){var t,n;return Object.assign(Object.assign({},e),{},{id:(null===(t=e.id)||void 0===t||null===(n=t.split("_"))||void 0===n?void 0:n[0])||no()("image")})})))}}):p.map((function(e,n){return Object(d.b)(io,{data:{tag:e,index:n},deleteImage:j,reUploadImage:g,dragWrapRef:t},"".concat(e.id,"_").concat(n))}))}),Object(d.b)(fo,{dataList:p.filter((function(e){return"success"===e.status})),onClose:l,insertImages:c})]}):Object(d.b)(Ra,{css:{marginTop:"-20px"},handleUploadImage:O})},ho=function(e){var t=Object(Or.default)({},e);return Object(d.b)(d.a,{children:Object(d.b)(k.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:Object(d.b)(po,Object.assign({},t))}))})};function mo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var vo=(so={},Object(sr.a)(so,fr.LOCAL,ho),Object(sr.a)(so,fr.EMOTICON,fa),Object(sr.a)(so,fr.PUBLIC,Ca),Object(sr.a)(so,fr.PRIVATE,Za),Object(sr.a)(so,fr.LATEST,Xa),so),go=function(e){var t=e.onClose,n=e.sourceType,a=e.sourceId,o=e.insertImage,i=Object(y.useState)(fr.LOCAL),c=mo(r.a,i,2),l=c[0],s=c[1],u=Object(y.useState)([]),f=mo(r.a,u,2),b=f[0],p=f[1],h=vo[l];return Object(y.useEffect)((function(){var e=function(e){return e.preventDefault()};return document.addEventListener("drop",e,!1),document.addEventListener("dragover",e,!1),function(){document.removeEventListener("drop",e,!1),document.removeEventListener("dragover",e,!1)}}),[]),Object(d.b)(qr,{onClose:t,sourceType:n,sourceId:a,insertImage:o,setTabType:s,initLocalList:b,setInitLocalList:p,children:Object(d.c)("div",{children:[Object(d.b)(gr,{tabType:l,tabChange:s}),h&&Object(d.b)(T.b,{block:l,children:Object(d.b)(h,{})})]})})};go.propTypes={sourceType:j.a.string,sourceId:j.a.number,onClose:j.a.func,insertImage:j.a.func};var Oo=go;function jo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var yo=function(e,t){var n=e.sourceType,a=e.sourceId,o=e.insertImage,i=Object(y.useState)(!1),c=jo(r.a,i,2),l=c[0],s=c[1],u=Object(we.a)((function(){return s((function(e){return!e}))}));return Object(y.useImperativeHandle)(t,(function(){return{toggleShown:u}}),[u]),Object(d.b)(De.b,{css:{minWidth:"746px",".Modal-content":{margin:0,padding:0}},onClose:u,children:l&&Object(d.b)(T.b,{block:"MaterialLibrary",children:Object(d.b)(Oo,{onClose:u,sourceType:n,sourceId:a,insertImage:o})})})};yo.propType={sourceType:j.a.string.isRequired,sourceId:j.a.number.isRequired,insertImage:j.a.func.isRequired};var wo=Object(y.forwardRef)(yo),Co=function(e){var t=e.sourceType,n=e.sourceId,r=w.a.createRef(null),a={},o=!1,i=null,c=function(e,t,n){o?i=Object(lr.a)(i,"image","IMMUTABLE",Object.assign(Object.assign({},t?null==e?void 0:e.value:{upload:e}),{},{size:"normal"}),void 0,{isBatched:!0,isLastOneOfBatch:n}):a.setEditorState(Object(lr.a)(a.getEditorState(),"image","IMMUTABLE",{upload:e,size:"normal"}))};return{initialize:function(e){Object.assign(a,e)},components:[Object(d.b)(wo,{ref:r,sourceType:t,sourceId:n,insertImage:function(e,t){var n;n=function(){for(var n=0;n<e.length;n++){var r=n===e.length-1;c({value:e[n]},t,r)}},o=!0,i=a.getEditorState(),n(),a.setEditorState(i),o=!1}},"material_library")],handleCommand:function(e){var t;return"insert-image-from-library"===e?(null===(t=r.current)||void 0===t||t.toggleShown(),"handled"):"not-handled"},toolbar:{label:"插入图片",section:qt.a.BASIC_MEDIA,text:"图片",icon:Wn.a,priority:2,onClick:function(){var e;null===(e=r.current)||void 0===e||e.toggleShown()}},toolbarV2:[{label:"插入图片",section:Ht.a.BASIC_MEDIA,text:"图片",icon:Wn.a,priority:2,onClick:function(){var e;null===(e=r.current)||void 0===e||e.toggleShown()}}]}},xo=n(2948),ko=n(937),So=function(e){var t=e.className,n=e.onClose,r=e.shown,a=e.allInviters,o=e.onChoose;return Object(d.b)(R.b,{title:"添加「谢邀」卡片",subtitle:"选择邀请人，添加感谢他的卡片",onClose:n,className:t,css:{width:"536px"},children:r&&a.map((function(e){return Object(d.c)(k.Flex,{css:{padding:"12px 0"},children:[Object(d.b)(ko.a,{author:e}),Object(d.b)(B.c,{color:"color",preset:"blue",css:{height:"32px",marginLeft:"auto"},onClick:function(){A.a.trackEvent(null,{id:7682,action:"Click"}),o&&o(e)},children:"选择"})]},e.id)}))})},Ao=n(1289);function To(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Io=function(e){var t=e.shown,n=e.hasShown,r=e.children,a=Object(y.useRef)(n),o=Object(y.useRef)(t);return Object(y.useEffect)((function(){!t&&o.current&&(a.current=!0),o.current=t}),[t]),t&&!a.current&&r},Ro=function(e){var t=e.className,n=e.shown,a=e.hasShown,o=e.inviters,i=e.onConfirm,c=e.onCancel,l=Object(y.useState)(n),s=To(r.a,l,2),u=s[0],f=s[1],b=Object(y.useRef)(n);return Object(y.useEffect)((function(){b.current!==n&&f(n),b.current=n}),[n]),(null==o?void 0:o.length)>0&&Object(d.b)(Io,{shown:u,hasShown:a,children:Object(d.c)(k.Flex,{className:t,pb:"12px",px:"16px",mx:"-20px",mb:"16px",color:"GBK05A",justifyContent:"space-between",alignItems:"center",sx:{borderBottom:"1px solid",borderColor:"GBK09A",fontSize:"15px",lineHeight:"20px",position:"relative",zIndex:"0"},children:[Object(d.c)(k.Flex,{alignItems:"center",children:[o.map((function(e,t){return Object(d.b)(k.Image,{src:o[t].avatarUrl,size:24,sx:{borderRadius:"50%",border:"2px solid",borderColor:"GBK99A",position:"relative",zIndex:o.length-t,marginLeft:t?"-14px":"0"}},e.id)})),Object(d.b)(k.Text,{ml:"8px",children:o[0].name+(o.length>1?"等 ".concat(o.length," 人"):"")}),"邀请你回答"]}),Object(d.c)(k.Flex,{alignItems:"center",children:[Object(d.b)(k.Text,{color:"primary",ml:"16px",css:{cursor:"pointer"},onClick:function(){A.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===o.length?"0":"1"}]},{button:{text:"添加谢邀"}}),i&&i(o)},children:"添加谢邀"}),Object(d.b)(k.Text,{ml:"16px",css:{cursor:"pointer"},onClick:function(){f(!1),A.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===o.length?"0":"1"}]},{button:{text:"忽略"}}),c&&c()},children:"忽略"})]})]})})};function Eo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var No=Object(y.forwardRef)((function(e,t){var n=e.getAllInviters,a=e.inviterQuery,o=e.getStore,i=e.syncDraftImmediately,c=Object(y.useContext)(de),l=c.updateFormData,s=(0,c.getFormData)().thankInviterInfo,u=Object(y.useState)(!1),f=Eo(r.a,u,2),b=f[0],p=f[1],h=function(e){l({thankInviterInfo:e}),requestAnimationFrame((function(){i()}))},m=Object(y.useState)(null),v=Eo(r.a,m,2),g=v[0],O=v[1],j=Object(we.a)((function(){return p(!1)}));return Object(y.useImperativeHandle)(t,(function(){return{openInviterListModal:function(){return p(!0)},getInvitersData:function(){return g},getThankInviterInfo:function(){return s}}}),[g,s]),Object(y.useEffect)((function(){n().then((function(e){var t=e.payload;O(t.data);var n=o();n.setEditorState(n.getEditorState())}))}),[]),Object(d.c)(d.a,{children:[s&&Object(d.b)(Ao.a,{css:{marginBottom:16,marginTop:"4px !important"},showDeleteButton:!0,item:{isLabeled:!0},inviter:s,onDelete:function(){h(null)}}),(null==g?void 0:g.length)>0&&Object(d.b)(Ro,{hasShown:Boolean(a)||Boolean(s),shown:!s,inviters:g,onConfirm:function(e){null!=e&&e.length&&(1!==e.length?p(!0):h(e[0]))}}),Object(d.b)(So,{onClose:j,shown:b,allInviters:g,onChoose:function(e){h(e),j()}})]})})),Bo=function(e){var t=e.getShouldShowToolbarButton,n=e.getAllInviters,r=e.inviterQuery,a=e.getInitialThankInviterInfo,o=e.syncDraftImmediately,i={},c=Object(y.createRef)(null);return{initialize:function(e){Object.assign(i,e)},componentsBeforeEditor:[{component:Object(d.b)(No,{getAllInviters:n,inviterQuery:r,ref:c,getStore:function(){return i},getInitialThankInviterInfo:a,syncDraftImmediately:o}),priority:0}],toolbar:{label:"添加谢邀",section:qt.a.CUSTOM_MAIN,priority:3,icon:xo.a,onClick:function(){c.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=c.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=c.current)||void 0===n?void 0:n.getThankInviterInfo()))}},toolbarV2:{label:"添加谢邀",section:Ht.a.BUSINESS_MEDIA,text:"谢邀",icon:xo.a,priority:3,onClick:function(){c.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=c.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=c.current)||void 0===n?void 0:n.getThankInviterInfo()))}}}},zo=Object.assign;function Lo(e){return w.a.createElement(W.a,zo(zo({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"MoneyBag24","data-old-api":"Income24"},e),{className:"ZDI ZDI--Income24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M6.326 3.132a.75.75 0 01.645-.366h10.046a.75.75 0 01.655 1.114l-1.58 2.848c3.444 1.349 5.543 4.405 5.543 7.72 0 2.254-.992 4.177-2.707 5.519-1.702 1.33-4.078 2.065-6.85 2.065-2.77 0-5.147-.735-6.849-2.065-1.715-1.342-2.707-3.265-2.707-5.519 0-3.274 1.994-6.29 5.37-7.659l-1.58-2.916a.75.75 0 01.014-.741zm1.905 1.134l1.4 2.58a.75.75 0 01-.443 1.075c-3.298.998-5.166 3.68-5.166 6.527 0 1.775.766 3.27 2.132 4.337 1.379 1.079 3.405 1.747 5.925 1.747 2.519 0 4.546-.668 5.925-1.747 1.365-1.068 2.13-2.562 2.13-4.337 0-2.87-1.968-5.605-5.342-6.578a.75.75 0 01-.448-1.085l1.399-2.52H8.23z",fillRule:"evenodd",clipRule:"evenodd"}),w.a.createElement("path",{d:"M9.777 10.466a.75.75 0 011.06.056l1.242 1.38 1.242-1.38a.75.75 0 111.115 1.003l-1.607 1.786v.462h1.5a.75.75 0 010 1.5h-1.5v1.75a.75.75 0 01-1.5 0v-1.75h-1.5a.75.75 0 010-1.5h1.5v-.462l-1.607-1.786a.75.75 0 01.055-1.059z",fillRule:"evenodd",clipRule:"evenodd"}))}function Po(e){return w.a.createElement(W.a,zo(zo({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"MoneyBag24","data-old-api":"Income"},e),{className:"Zi Zi--Income"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M6.326 3.132a.75.75 0 01.645-.366h10.046a.75.75 0 01.655 1.114l-1.58 2.848c3.444 1.349 5.543 4.405 5.543 7.72 0 2.254-.992 4.177-2.707 5.519-1.702 1.33-4.078 2.065-6.85 2.065-2.77 0-5.147-.735-6.849-2.065-1.715-1.342-2.707-3.265-2.707-5.519 0-3.274 1.994-6.29 5.37-7.659l-1.58-2.916a.75.75 0 01.014-.741zm1.905 1.134l1.4 2.58a.75.75 0 01-.443 1.075c-3.298.998-5.166 3.68-5.166 6.527 0 1.775.766 3.27 2.132 4.337 1.379 1.079 3.405 1.747 5.925 1.747 2.519 0 4.546-.668 5.925-1.747 1.365-1.068 2.13-2.562 2.13-4.337 0-2.87-1.968-5.605-5.342-6.578a.75.75 0 01-.448-1.085l1.399-2.52H8.23z",fillRule:"evenodd",clipRule:"evenodd"}),w.a.createElement("path",{d:"M9.777 10.466a.75.75 0 011.06.056l1.242 1.38 1.242-1.38a.75.75 0 111.115 1.003l-1.607 1.786v.462h1.5a.75.75 0 010 1.5h-1.5v1.75a.75.75 0 01-1.5 0v-1.75h-1.5a.75.75 0 010-1.5h1.5v-.462l-1.607-1.786a.75.75 0 01.055-1.059z",fillRule:"evenodd",clipRule:"evenodd"}))}var _o=n(1086);function Mo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Do=Object(y.forwardRef)((function(e,t){var n=e.getStore,a=e.getContentInfo,o=Object(y.useState)(!1),i=Mo(r.a,o,2),c=i[0],l=i[1],s=a(),u=s.id,f=s.type;Object(y.useImperativeHandle)(t,(function(){return{setShowUserProfitCardSelector:l}}),[]);var b=function(){return Object(Zt.a)(n().getEditorState()).filter((function(e){return"ad-link-card"===e.getType()}))};return Object(d.b)(d.a,{children:Object(d.b)(De.b,{className:"UserProfitCardSelector",size:"large",onClose:function(){l(!1)},children:c&&Object(d.b)("div",{className:"UserProfitCardSelector-content",children:Object(d.b)(I.a,{className:"UserProfitCardSelector-iframe",src:Object(xt.d)({contentId:u,contentType:f}),onMessage:function(e){var t=n().getEditorRef();if("ProfitCardSelector/submitProfitCardInfo"===(null==e?void 0:e.type)&&null!=e&&e.payload){var r=e.payload,a=r.type,o=r.id,i=r.url;if(r.preventClose||l(!1),"inserLinkCard"===a&&t.props.handleCommand("insert-link-card:".concat(i)),"insertMCNLinkCard"===a){if(Object(Zt.a)(n().getEditorState()).filter((function(e){return"mcn-link-card"===e.getType()})).size>=30)return void N.a.alert(null,{title:"一篇内容最多可添加 ".concat(30," 个商品")});t.props.handleCommand("insert-mcn-link-card:".concat(o))}if("insertEduCard"===a){if(Object(Zt.a)(n().getEditorState()).filter((function(e){return e.getType()===_o.a.TYPE})).size>=_o.a.EDU_CARD_LIMIT)return void N.a.alert(null,{title:"一篇内容最多可添加 ".concat(_o.a.EDU_CARD_LIMIT," 个教育卡片")});t.props.handleCommand("".concat(_o.a.WebInsertCommand).concat(o))}if("insertAdLinkCard"===a){if(o.startsWith("ZhiTask_"))if(b().filter((function(e){return e.getData().id.startsWith("ZhiTask_")})).size>=5)return void N.a.alert("一篇内容最多可添加 ".concat(5," 个「知+自选」卡片"));if(o.startsWith("fee_"))if(b().filter((function(e){return e.getData().id.startsWith("fee_")})).size>=1)return void N.a.alert("一篇内容最多可添加 ".concat(1," 个「付费回答」卡片"));t.props.handleCommand("insert-ad-link-card:".concat(o))}}}})})})})})),Uo=function(e){var t=e.shouldDisabled,n=e.shouldShow,r=void 0===n?function(){return!0}:n,a=e.getContentInfo,o=void 0===a?function(){}:a,i={};return i.containerRef=Object(y.createRef)(),{initialize:function(e){Object.assign(i,e)},handleCommand:function(e){return"toggle-user-profit-modal"===e?(i.containerRef.current.setShowUserProfitCardSelector(!0),"handled"):"not-handled"},toolbar:{label:"用户收益",icon:Po,shouldShow:r,shouldDisabled:function(){return!(null==t||!t())||null},section:qt.a.CUSTOM_MAIN,toolType:z.e.ENTITY,onClick:function(){i.containerRef.current.setShowUserProfitCardSelector(!0),A.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},toolbarV2:{label:"收益",text:"收益",icon:Po,shouldShow:r,shouldDisabled:function(){return!!t()||null},section:Ht.a.BUSINESS_MEDIA,toolType:z.e.ENTITY,onClick:function(){i.containerRef.current.setShowUserProfitCardSelector(!0),A.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},components:Object(d.b)(Do,{ref:i.containerRef,getStore:function(){return i},getContentInfo:o})}},Fo=n(1366),Vo=function(e){var t=e.canSubmit,n=e.handleSubmit,r=e.isReediting,a=e.scheduledPublishAt,o=e.className;return Object(d.b)(T.a,{as:B.c,zaText:!0,zaType:"Button",zaAction:"Answer",zaModuleId:"published_button",extra:{configMap:{traceId:Object(tt.b)(),type:"Answer",publish_type:r?"oldEdit":"newPublish"}},width:86,height:34,lineHeight:"34px",textAlign:"center",fontSize:14,color:B.a.Blue,preset:B.b.Primary,css:{borderRadius:3,cursor:t?"pointer":"not-allowed",opacity:t?1:.3},onClick:n,className:o,children:r?"提交修改":a?"定时发送":"发布回答"})};var Go=n(374),qo=n(42),Ho=n(1186),Wo=n(543),Ko=Object(zt.a)("biz",["OPEN_BIZ_VIP","QUERY_BIZ_VIP_STATUS","GET_COMMERCIAL_REPORT_INFO"]);var Zo=["shown","toggle"],Qo=function(e){var t=e.shown,n=e.toggle,r=Object(ve.default)(e,Zo);return Object(d.b)(De.b,Object.assign(Object.assign({title:"",subtitle:"",onClose:function(){n()}},r),{},{children:t&&Object(d.c)("div",{children:[Object(d.c)(k.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:[Object(d.b)(k.Text,{children:"系统检测到您的账号已开通芝士平台权限。创作者与品牌主的商业合作，需统一通过知乎官方商业合作服务平台「芝士平台」进行。"}),Object(d.b)(k.Text,{children:"知享仅针对品牌自营账号开放。如果您是商家，可以在推出芝士平台后，申请开通知享。"}),Object(d.c)(k.Text,{children:["如仍有疑问，请详询",Object(d.b)(k.Link,{href:"https://www.zhihu.com/messages/0cb9df58ed7a3ff685d0ac55d1c1e553",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"@知乎商业小管家 "}),"反馈，我们将积极解决您的问题。"]})]}),Object(d.b)("button",{onClick:function(){n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"}]},children:"知道了"})]})}))},Yo=["shown","toggle","onSuccess","onFail"];function Jo(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Xo=function(e){var t=e.shown,n=e.toggle,a=e.onSuccess,o=e.onFail,i=Object(ve.default)(e,Yo),c=Object(C.useDispatch)(),l=Object(y.useState)(!0),s=Jo(r.a,l,2),u=s[0],f=s[1],b=Object(ie.a)(!1),p=Jo(r.a,b,2),h=p[0],m=p[1],v=Object(T.l)().trackEvent;return Object(d.c)(d.a,{children:[Object(d.b)(De.b,Object.assign(Object.assign({title:"商业内容推广",subtitle:"",onClose:function(){v({eventType:"Click",action:"Unknown",elementLocation:{text:"开通商业会员弹窗关闭"}}),n()}},i),{},{children:t&&Object(d.c)("div",{children:[Object(d.b)(k.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:"报备后，将自动为您开通「知享」试用版，符合商业内容规范的内容可以正常曝光"}),Object(d.c)(k.Flex,{flexDirection:"inherit",flexWrap:"nowrap",alignItems:"center",style:{marginTop:"10px"},children:[Object(d.b)(ut.a,{onChange:function(){f(!u)},type:"checkbox",checked:u}),Object(d.c)(k.Text,{ml:"4px",children:["我已阅读并同意",Object(d.b)(k.Link,{href:"https://bvip.zhihu.com/agreement",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"《知享服务使用协议》"})]})]}),Object(d.b)("button",{disabled:!u,onClick:function(){c({API:{types:Ko.OPEN_BIZ_VIP,endpoint:"/commercial/vip",root:"".concat(Object(Wo.a)(),"/api/v1"),method:"POST"}}).then((function(e){var t,n,r=e.payload;if(r.isSuccess)return a(),void c(Object(be.h)("开通成功"));o(),"-300"===(null==r||null===(t=r.err)||void 0===t?void 0:t.code)?m.on():c(Object(be.h)((null==r||null===(n=r.err)||void 0===n?void 0:n.msg)||"开通失败","red"))})).catch((function(e){var t;o(),c(Object(be.h)((null==e||null===(t=e.err)||void 0===t?void 0:t.msg)||"开通失败","red"))})),n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"},!u&&{cursor:"not-allowed"}]},children:"确认并开通"})]})})),Object(d.b)(Qo,{shown:h,toggle:m.toggle})]})};function $o(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ei=[{type:!1,description:"非商业推广"},{type:!0,description:"商业推广"}],ti=function(e){var t=e.isReport,n=e.commercialPermissionInfo,a=e.setCommercialPermissionInfo,o=e.setIsReport,i=e.validate,c=Object(T.l)().trackEvent,l=Object(ie.a)(!1),s=$o(r.a,l,2),u=s[0],f=s[1];return Object(d.c)(d.a,{children:[Object(d.b)(_e,{onChange:function(e){if(!i||i()){var t=ei.find((function(t){return t.type===e}));c({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"商业推广-".concat(null==t?void 0:t.description)}}),!0!==e||null!=n&&n.isCommercialVip?o(e):f.on()}},value:Boolean(t),children:ei.map((function(e){return Object(d.b)(Me,{css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}},value:e.type,text:e.description},e.type)}))}),Object(d.b)(Xo,{shown:u,toggle:f.toggle,onSuccess:function(){o(!0),a((function(e){return Object.assign(Object.assign({},e),{},{isCommercialVip:!0})}))},onFail:function(){o(!1)}})]})},ni=function(e){return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"商业推广",title:"商业内容推广",helper:Object(d.c)(d.a,{children:[Object(d.b)("p",{children:"商业内容是指，未经平台允许，用户以推广曝光为目的，发布含有产品售卖信息、牟利性外链等内容，或引导用户至第三方平台进行交易。"}),Object(d.b)("p",{children:"知乎提供了报备功能，创作者可以选择主动对包含商业推广的内容进行报备。对于包含商业推广但是未报备的内容，将按社区规范进行处理"}),Object(d.c)("p",{style:{marginTop:"10px"},children:["关于报备功能更多的信息，",Object(d.b)("a",{href:"https://www.zhihu.com/creator/explore/academy/rights/rights",target:"_blank",rel:"noreferrer noopener",children:"点击前往了解"})]})]})}),Object(d.b)(k.Box,{flex:"1",children:Object(d.b)(ti,Object.assign({},e))})]})},ri=Object(y.forwardRef)((function(e,t){var n=e.commercialReportInfo,a=e.initCommercialPermissionInfo,o=Object(y.useState)(a),i=$o(r.a,o,2),c=i[0],l=i[1],s=Object(y.useState)(!1),u=$o(r.a,s,2),f=u[0],b=u[1],p=Boolean(n);return Object(y.useEffect)((function(){p&&b(n.isReport)}),[p]),Object(y.useImperativeHandle)(t,(function(){return{getIsReport:function(){return f}}})),Object(d.b)(ni,{isReport:Boolean(f),commercialPermissionInfo:c,setIsReport:b,setCommercialPermissionInfo:l})})),ai=function(e){var t=e.isAnonymous,n=e.updateDraftSettings,a=e.initCommercialPermissionInfo,o=Object(C.useDispatch)(),i=Object(y.useState)(a),c=$o(r.a,i,2),l=c[0],s=c[1],u=Object(y.useContext)(de),f=u.updateFormData,b=(0,u.getFormData)().isReport,p=Object(we.a)((function(e){f({isReport:e}),requestAnimationFrame(n)})),h=Object(we.a)((function(){return!t||(o(Object(be.h)("已经启用匿名的内容不能进行商业推广声明","red")),!1)}));return Object(d.b)(ni,{isReport:Boolean(b),commercialPermissionInfo:l,setIsReport:p,setCommercialPermissionInfo:s,validate:h})};function oi(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ii=function(e){var t=e.type,n=e.questionId,a=e.answerId,o=e.articleId,i=e.reportProps,c=void 0===i?{}:i,l=e.taskBindProps,s=void 0===l?{}:l,u=Object(C.useDispatch)(),f=Object(y.useState)([]),b=oi(r.a,f,2),p=oi(r.a,b[0],3),h=p[0],m=void 0===h?null:h,v=p[1],g=void 0===v?{}:v,O=p[2],j=void 0===O?"":O,w=b[1],x="article"===t,k="answer"===t;return Object(Go.a)((function(){var e,t=x?(e=o,{API:{types:Ko.QUERY_BIZ_VIP_STATUS,endpoint:"/articles/settings",query:{token:e},method:"GET"}}):function(e,t){return{API:{types:Ko.QUERY_BIZ_VIP_STATUS,endpoint:"/questions/".concat(e,"/answer-settings"),query:{token:t},method:"GET"}}}(n,a);u(t).then((function(e){var t,n=(null==e||null===(t=e.payload)||void 0===t?void 0:t.commercialPermissionInfo)||{};if(Ve===n.businessLine){var r;if(null===(r=n.cheeseTaskList)||void 0===r||!r.length)return;var a=x?$e:et,o=n.cheeseTaskList.map((function(e){return{bindStatus:qe,bindTaskDTO:e}}));w([a,{taskList:o},Ve])}else if(Ge===n.businessLine){if(n.isShowTab)w([x?ri:ai,{initCommercialPermissionInfo:n},Ge])}}))})),Ve===j&&k&&s.isVideoAnswer?null:m?Object(d.b)(m,Object.assign(Object.assign({},Ve===j?s:c),g)):null},ci=n(1840);function li(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var si=function(e){var t=e.question,n=e.isAnonymous,a=e.disabled,o=e.getAnswerFormRef,i=Object(ie.a)(!1),c=li(r.a,i,2),l=c[0],s=c[1],u=Object(C.useDispatch)(),f=Object(we.a)((function(){var e=o();if(null!=e&&e.current)if(e.current.hasVideo())u(Object(be.h)("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red"));else{if(!e.current.hasMCNLinkCard())return e.current.hasADLinkCard()?e.current.hasFeeConsultCard()?u(Object(be.h)("不能使用匿名身份插入付费咨询卡片","red")):void u(Object(be.h)("不能使用匿名身份插入推荐卡片","red")):void s.on();u(Object(be.h)("不能使用匿名身份推荐商品","red"))}}));return Object(d.c)(k.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(k.Flex,{height:"38px",children:[Object(d.b)(Pe,{checked:!n,text:"不启用匿名",onChange:f,id:"PublishPanel-Anonymous-0",disabled:a,shouldTrackClick:!0,zaTextPrefix:"匿名设置"}),Object(d.b)(Pe,{checked:n,text:"启用匿名",onChange:f,id:"PublishPanel-Anonymous-1",disabled:a,shouldTrackClick:!0,zaTextPrefix:"匿名设置"})]}),Object(d.b)(ci.a,{question:t,shown:l,onClose:s.off})]})},ui=function(e){var t=(0,Object(y.useContext)(de).getFormData)(),n=t.isReport,r=t.commercialZhitaskBindInfo;return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"匿名设置"}),Object(d.b)(si,Object.assign({disabled:Boolean(n)||Boolean(r)},e))]})};var di={type:"none",description:"无声明"},fi=function(e){var t=e.reshipmentDisclaimers,n=e.setReshipmentDisclaimers,r=e.disclaimers,a=Object(T.l)().trackEvent;return t=t||di,(r=JSON.parse(JSON.stringify(r||[]))).push(di),Object(d.b)(_e,{onChange:function(e){var t=r.find((function(t){return t.type===e}));a({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"创作声明-".concat(t.description)}}),t&&n(t)},value:t.type,children:r.map((function(e){return Object(d.b)(Me,{value:e.type,text:e.description},e.type)}))})},bi=Object(y.forwardRef)((function(e,t){return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"创作声明",helper:Object(d.c)(d.a,{children:[Object(d.b)("p",{children:"「创作声明」是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。"}),Object(d.b)("p",{children:"创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"})]})}),Object(d.b)(k.Box,{flex:"1",children:Object(d.b)(fi,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),pi=function(e){var t=e.question,n=e.updateDraftSettings,r=Object(y.useContext)(de),a=r.getFormData,o=r.updateFormData,i=Object(C.useDispatch)(),c=Object(C.useSelector)((function(e){return e.question.disclaimers[t.id]})),l=a().disclaimerType,s=(null==c?void 0:c.find((function(e){return e.type===l})))||di,u=(null==c?void 0:c.length)>0;Object(Go.a)((function(){c||i(Object(Mt.O)(t.id))}));var f=Object(we.a)((function(e){o({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type}),requestAnimationFrame(n)}));return u?Object(d.b)(bi,{reshipmentDisclaimers:s,setReshipmentDisclaimers:f,disclaimers:c}):null},hi=n(419),mi=n(1196),vi=function(e){var t=e.scheduledPublishAt,n=e.initialScheduledPublishAt,r=e.setUseScheduledPublish,a=Boolean(t),o=function(e){r(e)};return Object(d.c)(k.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(k.Flex,{height:"38px",children:[Object(d.b)(Pe,{checked:!a,text:"不使用定时发布",onChange:function(){return o(!1)},id:"PublishPanel-scheduleLabel-0",shouldTrackClick:!0,zaTextPrefix:"定时发布"}),Object(d.b)(Pe,{checked:a,text:"使用定时发布",onChange:function(){o(!0),requestAnimationFrame((function(){Object(xe.scrollBy)(window,{top:50,behavior:"smooth"})}))},id:"PublishPanel-scheduleLabel-1",shouldTrackClick:!0,zaTextPrefix:"定时发布"})]}),a&&n&&Object(d.b)(mi.a,{value:t,min:n,max:hi.a(n,7),onChange:function(e){r(!0,e)},css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",marginTop:"5px",".InputButton":{height:"38px"}}}})]})},gi=function(e){return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"定时发布"}),Object(d.b)(vi,Object.assign({},e))]})},Oi=function(e){var t=e.disabled,n=e.updateDraftSettings,r=Object(y.useContext)(de),a=r.updateFormData,o=(0,r.getFormData)().pushActivity,i=function(e){a({pushActivity:e}),requestAnimationFrame(n)};return Object(d.b)(k.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:Object(d.c)(k.Flex,{height:"38px",children:[Object(d.b)(Pe,{checked:o,text:"开启推送",onChange:function(){i(!0)},id:"PublishPanel-PushToFollowers-0",disabled:t,shouldTrackClick:!0,zaTextPrefix:"推送给关注者"}),Object(d.b)(Pe,{checked:!o,text:"关闭推送",onChange:function(){N.a.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",text:{ok:"关闭推送"}}).then((function(){i(!1)})).catch((function(){}))},id:"PublishPanel-PushToFollowers-1",disabled:t,shouldTrackClick:!0,zaTextPrefix:"推送给关注者"})]})})},ji=function(e){return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"推送给关注者"}),Object(d.b)(Oi,Object.assign({},e))]})},yi=n(1591),wi=n(452),Ci=n(296);function xi(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ki=function(e){var t=e.question.id,n=e.isAnonymous,a=e.disabled,o=e.updateDraftSettings,i=Object(ie.a)(!1),c=xi(r.a,i,2),l=c[0],s=c[1],u=Object(y.useContext)(de),f=u.getFormData,b=u.updateFormData,p=Object(C.useDispatch)(),h=f().rewardTagline,m=Boolean(h),v=Object(we.a)((function(e){b({rewardTagline:e}),requestAnimationFrame(o),p(Object(wi.n)(t,!0)),s.off()}));return Object(d.c)(k.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(k.Flex,{height:"38px",children:[Object(d.b)(Pe,{checked:m,text:"开启赞赏",onChange:function(){n?p(Object(be.h)("匿名回答无法开启赞赏，请先取消匿名","red")):s.on()},id:"PublishPanel-RewardSetting-0",disabled:a,shouldTrackClick:!0,zaTextPrefix:"赞赏设置"}),Object(d.b)(Pe,{checked:!m,text:"关闭赞赏",onChange:function(){b({rewardTagline:""}),requestAnimationFrame(o),p(Object(wi.n)(t,!1))},id:"PublishPanel-RewardSetting-1",disabled:a,shouldTrackClick:!0,zaTextPrefix:"赞赏设置"})]}),l&&Object(d.b)(yi.a,{submitRewardText:v,onClose:s.off,tagline:h,edit:!1})]})},Si=function(e){var t=Object(C.useDispatch)(),n=Object(C.useSelector)((function(e){return e.switches})).isAnswerRewardable;return Object(y.useEffect)((function(){void 0===n&&t(Object(Ci.b)(["isAnswerRewardable"]))}),[t,n]),n?Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"赞赏设置"}),Object(d.b)(ki,Object.assign({},e))]}):null},Ai={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Ti=function(e){var t=e.currentUser,n=e.updateDraftSettings,r=Object(T.l)().trackEvent,a=Object(y.useContext)(de),o=a.updateFormData,i=(0,a.getFormData)().reshipmentSettings;return Object(d.b)(_e,{onChange:function(e){r({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"转载设置-".concat(Ai[e])}}),"need_payment"!==e||t.caEnabled||window.open("/copyright/invite"),o({reshipmentSettings:e}),requestAnimationFrame(n)},value:i,children:Object.keys(Ai).map((function(e){return"need_payment"===e&&t.isOrg?null:Object(d.b)(Me,{value:e,text:Ai[e]},e)}))})},Ii=Object(y.forwardRef)((function(e,t){return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"转载设置"}),Object(d.b)(k.Box,{flex:"1",children:Object(d.b)(Ti,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),Ri=n(500),Ei=n(513),Ni=function(e){var t=e.updateDraftSettings,n=Object(C.useDispatch)(),r=Object(T.l)().trackEvent,a=Object(y.useContext)(de),o=a.updateFormData,i=(0,a.getFormData)().commentPermission,c=Object(C.useSelector)((function(e){var t;return null===(t=e.commentPermission.answer)||void 0===t?void 0:t.default}))||[];Object(y.useEffect)((function(){n(Object(Ei.c)("answer"))}),[n]),Object(y.useEffect)((function(){i!==Ri.b||Object(Ri.c)()||Object(Ri.e)()}),[i]);return Object(d.b)(_e,{onChange:function(e){var n=c.find((function(t){return t.permission===e})).text;r({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"评论权限-".concat(n)}}),e!==i&&(o({commentPermission:e}),requestAnimationFrame(t))},value:i,children:c.map((function(e){var t=e.permission,n=e.text,r=e.disable;return t!==Ri.b||i===t||Object(Ri.c)()?Object(d.b)(Me,{value:t,text:n,disabled:r},t):null}))})},Bi=Object(y.forwardRef)((function(e,t){return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"评论权限"}),Object(d.b)(k.Box,{flex:"1",children:Object(d.b)(Ni,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),zi=n(1212),Li=n(438),Pi=n(155),_i=n(188),Mi=n(905),Di=function(e){var t=e.name,n=void 0===t?"checkitems":t,r=e.type,a=void 0===r?"checkbox":r,o=e.children,i=e.className,c=e.value,l=e.checked,s=e.onChange,u=JSON.stringify(c);return Object(d.c)("label",{className:m()("CheckItem",i),css:function(e){return{position:"relative",display:"block","&:hover":{".CheckItem-box":{borderColor:e.colors.GBL07A}}}},children:[Object(d.b)("input",{className:"CheckItem-input",type:a,name:n,value:u,onChange:s,checked:l,css:function(e){return{position:"absolute",zIndex:-1,opacity:0,"&:checked":{"+ .CheckItem-box":{borderColor:e.colors.GBL07A,".CheckItem-inner":{maxWidth:"calc(100% - 28px)"}}},"&:not(:checked)":{"+ .CheckItem-box":{".CheckItem-icon":{opacity:0,transition:"opacity 200ms"}}}}}},void 0),Object(d.c)("div",{className:"CheckItem-box",css:function(e){return{position:"relative",padding:"12px",border:"1px solid ".concat(e.colors.GBK10A),borderRadius:"3px",transition:"border-color 200ms ease-out"}},children:[Object(d.b)("div",{className:"CheckItem-inner",children:o},void 0),Object(d.b)(Mi.a,{className:"CheckItem-icon",size:20,css:function(e){return{position:"absolute",top:"50%",right:"12px",fill:e.colors.GBL01A,transform:"translateY(-50%)"}}},void 0)]},void 0)]},void 0)},Ui=n(916),Fi=n(457),Vi=n(1145);function Gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var qi=function(e){Object(l.a)(n,e);var t=Gi(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={value:null},e.handleModify=function(){e.setState({modifying:!0})},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleCancel=function(){e.setState({value:null,modifying:!1})},e.handleSubmit=function(t){t.preventDefault(),e.props.onBioChange(e.state.value),e.handleCancel()},e.handleSelect=function(){e.props.onSelect(e.props.value)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,r=e.title,a=e.checked,o=e.rich,i=this.state,c=i.modifying,l=i.value;return c?Object(d.c)("div",{className:"TopicBioItem",children:[Object(d.b)("div",{className:"TopicBioItem-title",children:r}),Object(d.c)("form",{onSubmit:this.handleSubmit,children:[Object(d.b)("div",{className:"TopicBioItem-inner",children:Object(d.b)(ko.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t,children:Object(d.b)(Lr.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:r,autoFocus:!0})})}),Object(d.c)("div",{className:"TopicBioItem-inputFooter",children:[Object(d.b)(Fi.a,{current:l?l.length:0,max:40}),Object(d.c)("div",{className:"TopicBioItem-actions",children:[Object(d.b)(B.c,{preset:"plain",type:"reset",onClick:this.handleCancel,children:"取消"}),Object(d.b)(B.c,{preset:"primary",color:"blue",type:"submit",children:"保存"})]})]})]})]}):n?Object(d.c)("div",{className:"TopicBioItem",children:[Object(d.b)("div",{className:"TopicBioItem-title",children:r}),Object(d.b)(Di,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:a,children:Object(d.b)(ko.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo",children:Object(d.c)("div",{children:[o?Object(d.b)(Li.a,{inline:!0,className:"TopicBioItem-bio",html:n}):Object(d.b)("span",{className:"TopicBioItem-bio",children:n}),Object(d.b)(Vi.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify})]})})})]}):Object(d.b)("div",{className:"TopicBioItem",children:Object(d.c)(B.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify,children:[Object(d.b)(Ui.a,{text:!0,center:!0})," 添加",r]})})}}]),n}(y.Component);qi.propTypes={user:j.a.object.isRequired,title:j.a.node.isRequired,value:j.a.object.isRequired,onBioChange:j.a.func.isRequired,onSelect:j.a.func.isRequired,checked:j.a.bool.isRequired};var Hi=qi;function Wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ki=function(e,t){var n=e.type,r=e.topic,a=(r=void 0===r?{}:r).id,o=t.type,i=t.topic,c=(i=void 0===i?{}:i).id;return n===o&&a===c},Zi=function(e){Object(l.a)(n,e);var t=Wi(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={value:null},e.handleSelect=function(t){return e.setState({value:t})},e.handleChoose=function(){return e.props.onBioChoose(e.state.value)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return Object(d.b)("div",{className:"TopicBios-loading",children:Object(d.b)(nn.a,{})});var t=this.props,n=t.user,r=t.question.topics,a=t.bios,o=t.currentBio,i=t.onHeadlineUpdate,c=t.onBioUpdate,l=this.state.value||o,s={type:"headline"};return Object(d.c)("div",{children:[Object(d.c)("div",{className:"TopicBioItems",children:[Object(d.b)(Hi,{title:"一句话介绍",user:n,bio:n.headline,value:s,onBioChange:i,onSelect:this.handleSelect,checked:Ki(l,s),rich:!0}),r.map((function(t){var r={type:"topic",topic:{id:t.id}};return Object(d.b)(Hi,Object.assign(Object.assign({title:"在 ".concat(t.name," 话题下的话题经验"),user:n},function(e,t){return e.find((function(e){return e.topic.id===t}))}(a,t.id)),{},{value:r,onBioChange:function(e){return c(t.id,e)},onSelect:e.handleSelect,checked:Ki(l,r)}),t.id)}))]}),Object(d.b)(De.a,{children:Object(d.b)(B.c,{color:"blue",preset:"primary",onClick:this.handleChoose,children:"完成"})})]})}}]),n}(y.Component);Zi.propTypes={onHeadlineUpdate:j.a.func.isRequired,onBioUpdate:j.a.func.isRequired,onBioChoose:j.a.func.isRequired,question:j.a.object.isRequired,user:j.a.object.isRequired};var Qi=Zi;function Yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ji=function(e){Object(l.a)(n,e);var t=Yi(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleUpdateHeadline=function(t){e.props.updateProfile(null,{headline:t})},e.handleUpdateBio=function(t,n){e.props.updateBio(t,n)},e.handleBioChoose=function(t){t&&e.props.chooseBio(e.props.question.id,t),e.props.onClose()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return Object(d.b)(Qi,Object.assign({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),n}(y.Component);Ji.propTypes={question:j.a.object.isRequired};var Xi=Object(C.connect)((function(e,t){var n=e.currentUser,r=e.question.bio,a=e.entities,o=a.questions,i=a.users,c=e.topic.bios,l=t.question.id,s=o[l],u=(r[l]||{result:{type:"headline"}}).result;return{isFetching:c.isFetching,currentBio:{type:u.type,topic:u.topic},bios:s.topics.map((function(e){return{topic:e,bio:c[e.id]}})),question:s,user:i[n]}}),{updateProfile:Pi.o,updateBio:_i.jb,chooseBio:Mt.e,loadBios:Mt.G})(Ji),$i=["shown","onClose"];function ec(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var tc=function(e){Object(l.a)(n,e);var t=ec(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,r=Object(ve.default)(e,$i);return Object(d.b)(De.b,{title:"编辑话题经验",subtitle:Object(d.c)("span",{children:["可以填写你从事的职业、取得的资格或过往经历，",Object(d.b)("br",{}),"让你在这个问题下的回答更具说服力。"]}),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1,children:t&&Object(d.b)(Xi,Object.assign(Object.assign({},r),{},{onClose:n}))})}}]),n}(y.Component);tc.propTypes=Object.assign({shown:j.a.bool.isRequired,onClose:j.a.func.isRequired},Xi.propTypes);var nc=tc;function rc(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ac=function(e){var t=e.children;return"string"!=typeof t||t.trim().length?Object(d.b)(k.Text,{maxWidth:"292px",mr:"20px",css:[Object(dt.a)(1)],children:t}):null},oc=function(e){var t=e.questionId,n=e.currentUser,r=Object(C.useSelector)((function(e){return e.question.bio})),a=Object(C.useSelector)((function(e){return e.topic.bios})),o=(r[t]||{result:{type:"headline"}}).result;return"topic"===o.type&&(o.bio=a[o.topic.id]||o.bio),o.bio&&"headline"!==o.type?Object(d.b)(ac,{children:o.bio}):n.headline?Object(d.b)(ac,{children:Object(d.b)(Li.a,{inline:!0,html:(o||{}).bio||n.headline})}):null},ic=function(e){var t=e.question,n=e.currentUser,a=Object(ie.a)(!1),o=rc(r.a,a,2),i=o[0],c=o[1];return Object(d.c)(k.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(k.Flex,{alignItems:"center",height:"100%",css:{cursor:"pointer"},onClick:c.on,children:[Object(d.b)(oc,{questionId:t.id,currentUser:n}),Object(d.c)(T.a,{as:k.Flex,zaType:"Button",zaText:"一句话介绍-修改",color:"GBL01A",alignItems:"center",children:["修改",Object(d.b)(zi.a,{css:{marginLeft:"2px"},size:16})]})]}),Object(d.b)(nc,{shown:i,question:t,onClose:c.off})]})},cc=function(e){return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"一句话介绍"}),Object(d.b)(ic,Object.assign({},e))]})},lc=n(2950),sc=n(1852);function uc(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var dc=function(e){var t,n,a=e.answer,o=Object(C.useDispatch)(),i=Object(Ut.q)(),c=null==a||null===(t=a.attachment)||void 0===t||null===(n=t.video)||void 0===n?void 0:n.campaign,l=Boolean(!(null!=c&&c.title)),s=Object(ie.a)(!1),u=uc(r.a,s,2),f=u[0],b=u[1],p=Object(y.useState)([]),h=uc(r.a,p,2),m=h[0],v=h[1];Object(Go.a)((function(){o(Object(rt.l)()).then((function(e){var t=e.payload;v((null==t?void 0:t.data)||[])}))}));var g=Object(we.a)((function(e){b.off(),o(Object(Ut.m)(e))})),O=Object(we.a)((function(){o(Object(Ut.m)(null))})),j=l?"GBL01A":"GBL05A";return Object(d.c)(k.Flex,{color:"GBL05A",flex:"1",alignItems:"center",css:{fontSize:"14px"},children:[null!=i&&i.title?Object(d.c)(k.Flex,{alignItems:"center",px:"14px",height:"30px",color:j,css:function(e){return{borderRadius:"20px",background:e.colorMod(e.colors[j]).alpha(.1),cursor:"pointer"}},onClick:function(){l&&b.on()},children:[Object(d.b)(lc.a,{mr:4,size:20}),i.title,l&&Object(d.b)(se.a,{text:!0,center:!0,size:6,css:{marginLeft:4},onClick:function(e){O(),e.stopPropagation()}})]}):Object(d.c)(T.a,{as:k.Flex,zaType:"Button",zaText:"绑定活动-选择活动",height:"100%",alignItems:"center",color:"GBL01A",css:{cursor:l?"pointer":"not-allowed"},onClick:function(){l&&b.on()},children:[Object(d.b)(lc.a,{mr:4,size:20}),"选择活动"]}),Boolean(null==m?void 0:m.length)&&Object(d.b)(sc.a,{shown:f,onClose:b.off,defaultCampaignId:null==i?void 0:i.id,campaignList:m,onSubmit:g})]})},fc=function(e){return Object(d.c)(k.Flex,{py:"11px",children:[Object(d.b)(Ee,{name:"绑定活动"}),Object(d.b)(dc,Object.assign({},e))]})};function bc(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var pc=Object(x.withRouter)((function(e){var t,n=e.question,a=e.answer,o=e.isVideoAnswer,i=e.isReediting,c=e.location,l=e.scheduledPublishAt,s=e.initialScheduledPublishAt,u=e.canScheduledPublish,f=e.setUseScheduledPublish,b=e.className,p=e.updateDraftSettings,h=e.getAnswerFormRef,m=e.getInitialEnableMarkdown,v=Object(C.useDispatch)(),g=Object(y.useContext)(de).updateFormData,O=((null==c?void 0:c.query)||{}).push_activity,j=Object(C.useSelector)(Nt.b),w=Object(y.useState)(!1),x=bc(r.a,w,2),S=x[0],A=x[1];Object(Go.a)((function(){Promise.all([v(Object(qo.V)()),v(Object(qo.W)(n.id)),a&&v(Object(Rt.w)(a.id))].filter(Boolean)).then((function(e){var t,n,o,i,c,l,s,u,d,f,b,p=bc(r.a,e,3),h=p[0],v=p[1],j=p[2];g(Object.assign(Object.assign(Object.assign(Object.assign({},Object(Ho.e)(null===(t=h.payload)||void 0===t?void 0:t.settings)),a&&j&&Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Object(Ho.f)(j.payload)),function(e){var t;return{rewardTagline:(null==e||null===(t=e.rewardInfo)||void 0===t?void 0:t.tagline)||""}}(a)),(l=j.payload,{isDisclaimerChecked:b="open"===(null==l||null===(s=l.disclaimerInfo)||void 0===s||null===(u=s[0])||void 0===u?void 0:u.status),disclaimerType:b?null==l||null===(d=l.disclaimerInfo)||void 0===d||null===(f=d[0])||void 0===f?void 0:f.type:"none"})),function(e){var t;return null!=e&&null!==(t=e.thankInviterInfo)&&void 0!==t&&t.member?{thankInviterInfo:e.thankInviterInfo.member}:null}(j.payload)),function(e){var t;return e?{tableOfContentsEnabled:null==e||null===(t=e.tableOfContents)||void 0===t?void 0:t.enabled}:null}(null==a?void 0:a.settings)),Object(Ho.a)(a))),Object(Ho.g)(null===(n=v.payload)||void 0===n?void 0:n.settings)),O&&{pushActivity:Boolean(Number(O))})),m(null===(o=null===(i=h.payload)||void 0===i||null===(c=i.commonSettings)||void 0===c?void 0:c.markdownEnabled)||void 0===o||o)})).finally((function(){A(!0)}))}));var T=null==n||null===(t=n.relationship)||void 0===t?void 0:t.isAnonymous,I=(n||{}).questionType,R=j&&!j.isOrg,E=R&&("normal"===I||T)&&!o;return o&&i?null:S?Object(d.c)(k.Box,{pl:"10px",pr:"20px",width:"100%",bg:"GBK99A",css:{position:"relative"},className:b,children:[Object(d.b)(k.Box,{sx:{borderTop:"1px solid",borderColor:"GBK09A"},ml:"10px"}),Object(d.b)(k.Text,{color:"GBK03A",ml:"10px",pt:"24px",pb:"12px",css:{lineHeight:"24px",fontSize:"17px",fontWeight:"500"},children:"发布设置"}),E&&!i&&Object(d.b)(ui,{question:n,isAnonymous:T,getAnswerFormRef:h}),!o&&Object(d.b)(pi,{question:n,updateDraftSettings:p}),Object(d.b)(ii,{type:"answer",questionId:null==n?void 0:n.id,answerId:null==a?void 0:a.id,taskBindProps:{isAnonymous:T,isVideoAnswer:o},reportProps:{isAnonymous:T,updateDraftSettings:p}}),u&&Object(d.b)(gi,{scheduledPublishAt:l,initialScheduledPublishAt:s,setUseScheduledPublish:f}),o&&Object(d.b)(fc,{answer:a}),!i&&R&&Object(d.b)(cc,{question:n,currentUser:j}),!i&&Object(d.b)(Ii,{currentUser:j,updateDraftSettings:p}),!i&&Object(d.b)(Bi,{updateDraftSettings:p}),!i&&!o&&Object(d.b)(ji,{updateDraftSettings:p}),Object(d.b)(Si,{question:n,isAnonymous:T,updateDraftSettings:p})]}):null})),hc=n(1750),mc=n.n(hc),vc=n(481),gc={editableInit:"Editable.Init",editableEdit:"Editable.Edit",draftLoad:"DraftLoad",draftSave:"DraftSave",addAnswer:"AddAnswer"},Oc=function(e,t){var n=e.isToolbarSticky,r=e.isFullscreen,a=e.toolbarMenuAttention,o=e.scheduledPublishAt,i=e.initialScheduledPublishAt,c=e.placeholder,l=e.draft,s=e.defaultValue,u=e.isLegacyVideoAnswer,f=e.defaultVideo,b=e.question,p=e.videoAnswerEditable,h=e.videoAnswerPublished,v=e.editableReady,g=e.handleChangeContent,O=e.handleAfterChangeContent,j=e.handleFocusWithAuth,w=e.handleSelectText,C=e.handleSubmit,x=e.handleError,k=e.handleLoadStart,S=e.handleLoadEnd,I=e.handleUploadStart,R=e.handleUploadEnd,E=e.handleUploadError,N=e.handleBeforeVideoUpload,B=e.handleMCNLinkCardEdit,L=e.isVideoAnswer,P=e.handleInsertZVideo,_=e.getToolbarSidePlugins,M=e.getToolbarMenuPlugins,D=e.createEditorPlugins,U=e.getEditorBeforePlugins,F=e.setUseScheduledPublish,V=e.allowToolbar,G=void 0===V||V,q=e.onAnyChange,H=e.docPluginProps,W=e.tableOfContentsEnabled,K=e.getMarkdownEnabled,Z=e.videoSource,Q=Object(y.useRef)(null);return Object(d.b)(Fo.a,{name:gc.editableEdit,children:Object(d.b)(T.b,{block:r?"FullScreen":"",children:Object(d.b)(vc.a,{className:m()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:n}),ref:t,hideImageToolbar:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:G,allowUploadDocument:!0,allowVideoTitleChange:!L,allowReference:!0,allowImageEditor:!0,allowZVideo:!L,allowTable:!L,allowCatalog:!L,catalogEnabled:W,useCatalogV2:!0,autoCalcCatalogShouldShow:!1,allowHeaderThree:!1,allowToolbarSticky:!r,toolbarStickyOffset:mt.i,onInsertZVideo:P,getToolbarSidePlugins:_,getToolbarMenuPlugins:M,getEditorBeforePlugins:U,toolbarMenuAttention:a,createEditorPlugins:D,toolbarProps:{menuCallout:o&&i&&Object(d.c)(z.b,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){F(!1),A.a.trackEvent(t,{action:"Click",id:5734,name:"回答"})},children:["发布时间：",Object(d.b)(mi.a,{onRef:Q,value:i,min:i,max:hi.a(i,7),onChange:function(e,t){F(!0,e),A.a.setModule(Q.current,{module:"Unknown",module_name:t.date?"日期":t.hours?"小时":t.minutes?"分钟":void 0}),A.a.trackEvent(Q.current,{action:"Click",id:5731,name:"回答"})}}),Object(d.c)("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"},children:[Object(d.b)(zi.a,{text:!0,center:!0})," 管理待发布内容"]})]})},minRows:6,placeholder:c,defaultValue:l?l.editableContent:s,videoAnswerEditable:p,videoAnswerPublished:h,isLegacyVideoAnswer:u,defaultVideo:f,onReady:v,onChange:g,onAfterChange:O,onFocus:j,onSelectText:w,onSubmit:C,onError:x,onLoadStart:k,onLoadEnd:S,onUploadStart:I,onUploadEnd:R,onUploadError:E,onBeforeVideoUpload:N,logo:mc.a,location:b.title,editingContentType:"answer",onMCNLinkCardEdit:B,useV2Feature:!0,useEditableV2:!0,useImageOperationV2:!0,onAnyChange:q,docPluginProps:H,getMarkdownEnabled:K,videoSource:Z})})})};Oc.propTypes={isToolbarSticky:j.a.bool.isRequired,answer:j.a.object.isRequired,isFullscreen:j.a.bool.isRequired,toolbarMenuAttention:j.a.string,scheduledPublishAt:j.a.number,initialScheduledPublishAt:j.a.number,placeholder:j.a.string.isRequired,draft:j.a.object,defaultValue:j.a.string,isLegacyVideoAnswer:j.a.bool,defaultVideo:j.a.object,question:j.a.object,videoAnswerEditable:j.a.bool,videoAnswerPublished:j.a.bool,editableReady:j.a.func.isRequired,handleChangeContent:j.a.func.isRequired,handleAfterChangeContent:j.a.func.isRequired,handleFocusWithAuth:j.a.func.isRequired,handleSelectText:j.a.func.isRequired,handleSubmit:j.a.func.isRequired,handleError:j.a.func.isRequired,handleLoadStart:j.a.func.isRequired,handleLoadEnd:j.a.func.isRequired,handleUploadStart:j.a.func.isRequired,handleUploadEnd:j.a.func.isRequired,handleUploadError:j.a.func.isRequired,handleBeforeVideoUpload:j.a.func.isRequired,handleMCNLinkCardEdit:j.a.func.isRequired,isVideoAnswer:j.a.bool.isRequired,handleInsertZVideo:j.a.func.isRequired,getToolbarSidePlugins:j.a.func.isRequired,createEditorPlugins:j.a.func.isRequired,getToolbarMenuPlugins:j.a.func.isRequired,getEditorBeforePlugins:j.a.func.isRequired,setUseScheduledPublish:j.a.func.isRequired,getMarkdownEnabled:j.a.func};var jc=Object(y.forwardRef)(Oc),yc=Object(y.forwardRef)((function(e,t){var n=e.children,r=e.className;return Object(d.b)(T.b,{block:"EditorToolbar",children:Object(d.b)("div",{ref:t,css:{width:"100%",display:"flex",justifyContent:"center"},children:Object(d.b)("div",{className:m()("toolbarV3",r),css:{display:"flex",overflowX:"auto",padding:"10px 0 10px 20px",boxShadow:"0px -0.5px 0px 0px rgba(235, 235, 235, 1) inset"},onMouseDown:function(e){return e.preventDefault()},children:n})})})})),wc=n(2945),Cc=n(887),xc=function(e){return{background:e.colors.GBK10A,borderRadius:"4px"}},kc=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},Sc=Object(y.forwardRef)((function(e,t){var n=e.showTogglerIcon,r=e.isMenuOpen,a=e.icon,o=e.isActive,i=e.disabled,c=e.onClick,l=e.className,s=e.text,u=e.label,f=e.sectionIndex,b=e.buttonIndex,p=e.onButtonRectInfoGet,h=Object(y.useRef)(null);Object(y.useEffect)((function(){var e,t=(null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect()).right;t&&(null==p||p({label:u,sectionIndex:f,buttonIndex:b,right:t}))}),[f,b]);var v=n&&Object(d.b)("div",{className:"togglerIcon",css:{transform:"".concat(r?"rotate(180deg)":"rotate(0deg)"),fontSize:0,marginBottom:"2px"},children:Object(d.b)(wc.a,{})});return Object(d.c)(T.a,{as:B.c,zaType:"Button",zaText:u,ref:Object(Cc.a)(t,h),preset:B.b.Plain,className:m()("ToolbarButton",l),disabled:i,css:function(e){return{"&.Button.Button--plain":Object.assign(Object.assign({marginRight:"20px",padding:"2px 4px",paddingRight:n?"1px":"4px",fontSize:"11px",color:e.colors.GBK03A,textAlign:"center",alignItems:"flex-end",display:"flex",whiteSpace:"nowrap"},o&&kc(e)),{},{"&:hover":xc(e)})}},"aria-label":u,onClick:c,children:[Object(d.c)("div",{css:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(d.b)(a,{center:!0}),Object(d.b)("span",{css:{width:"100%"},children:null!=s?s:u})]}),v]})}));Sc.propTypes={icon:j.a.elementType.isRequired,label:j.a.string.isRequired,isActive:j.a.bool,disabled:j.a.bool,showTogglerIcon:j.a.bool,isMenuOpen:j.a.bool,className:j.a.string,text:j.a.string,shortcut:j.a.string,onClick:j.a.func,sectionIndex:j.a.number,buttonIndex:j.a.number,onButtonRectInfoGet:j.a.func},Sc.defaultProps={isActive:!1,disabled:!1,isMenuOpen:!1,showTogglerIcon:!1,onClick:function(){}};var Ac=Sc,Tc=n(134),Ic=n(66),Rc=function(e){return{background:e.colors.GBK10A,".togglerIcon":{borderLeftColor:e.colors.GBL01A}}},Ec=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},Nc=Object(y.forwardRef)((function(e,t){var n=e.isActive,r=e.disabled,a=e.onClick,o=e.icon,i=e.text,c=e.label,l=e.onMouseEnter,s=e.onMouseLeave,u=e.component;return u?Object(d.b)(u,Object.assign({},e)):Object(d.c)(T.a,{as:B.c,zaType:"Button",zaText:c,preset:B.b.Plain,"aria-label":c,disabled:r,css:function(e){return{"&.Button.Button--plain":Object.assign({padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px","&:hover":Rc(e),"&:active":Ec(e)},n&&Ec(e))}},onClick:a,onMouseEnter:l,onMouseLeave:s,ref:t,children:[Object(d.b)(o,{center:!0,css:{marginRight:"4px"}}),null!=i?i:c]})}));Nc.propTypes={icon:j.a.elementType.isRequired,label:j.a.string.isRequired,isActive:j.a.bool,disabled:j.a.bool,className:j.a.string,text:j.a.string,shortcut:j.a.string,onClick:j.a.func,onMouseEnter:j.a.func,onMouseLeave:j.a.func},Nc.defaultTypes={isActive:!1,disabled:!1,onClick:function(){},onMouseEnter:function(){},onMouseLeave:function(){}};var Bc=Nc;function zc(e,t,n){return!!n&&(null!=e&&e.children?e.children.find((function(e){return zc(e,t,n)})):e.commandName?t(e.commandName,n)&&e:void 0)}function Lc(e,t,n){return!!n&&(null!=e&&e.children?e.children.some((function(e){return Lc(e,t,n)})):t(e.commandName,n))}function Pc(e){var t=e.items,n=e.onCommand,r=e.queryCommandState,a=e.queryCommandEnable,o=e.editorState;return t.map((function(e){var t;if(!0===e.hide)return null;var i,c,l=zc(e,r,o),s=!Lc(e,a,o);return null!=e&&null!==(t=e.children)&&void 0!==t&&t.length?Object(d.b)(Tc.c,{toggleEvent:"hover",placement:Ic.RIGHT,enterDelay:300,leaveDelay:300,toggler:Object(d.b)(Bc,{icon:null!==(i=null==l?void 0:l.icon)&&void 0!==i?i:e.icon,onClick:function(t){var r;null===(r=e.onClick)||void 0===r||r.call(e,t),e.commandName&&n(e.commandName)},label:e.label,isActive:!!l,disabled:s}),className:"ToolbarV3SubmenuButton",children:Object(d.b)(Pc,{items:e.children,onCommand:n,queryCommandState:r,queryCommandEnable:a,editorState:o})},e.label):Object(d.b)(Bc,{icon:null!==(c=null==l?void 0:l.icon)&&void 0!==c?c:e.icon,onClick:function(t){var r;null===(r=e.onClick)||void 0===r||r.call(e,t),e.commandName&&n(e.commandName),e.hideMenuOnClick&&document.body.click()},label:e.label,isActive:!!l,disabled:s,component:e.Component},e.label)}))}function _c(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Mc(e){var t=e.subMenu,n=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,i=e.editorState,c=e.isActive,l=e.label,s=e.shortcut,u=e.disabled,f=e.onClick,b=e.icon,p=e.sectionIndex,h=e.buttonIndex,m=e.onButtonRectInfoGet,v=Object(y.useState)(!1),g=_c(r.a,v,2),O=g[0],j=g[1],w=Object(d.b)(Ac,{isMenuToggler:!0,isMenuOpen:O,showTogglerIcon:!0,icon:b,isActive:c,disabled:u,shortcut:s,onClick:f,label:l,sectionIndex:p,buttonIndex:h,onButtonRectInfoGet:m});return Object(d.b)(Tc.c,{toggler:w,onOpen:function(){return j(!0)},onClose:function(){return j(!1)},arrowed:!1,menuContainerClassName:"ToolbarV3Menu-container",preventCloseOnTarget:!0,children:Object(d.b)(Pc,{items:t,onCommand:n,queryCommandState:a,queryCommandEnable:o,editorState:i})})}function Dc(){return Object(d.b)("span",{className:"ToolbarDivider",css:function(e){return{height:"20px",borderRight:"1px solid",borderColor:e.colors.GBK09A,marginLeft:"-4px"}}})}function Uc(e){var t=e.items,n=e.onCommand,r=e.queryCommandState,a=e.queryCommandEnable,o=e.editorState,i=e.showDivider,c=e.showRightSpace,l=e.replaceIconByOnlyChild,s=void 0===l||l,u=e.shouldHide,f=e.sectionIndex,b=e.onButtonRectInfoGet;return null!=u&&u(t)?null:Object(d.c)("div",{className:"toolbar-section",css:Object.assign({display:"flex",alignItems:"center"},c&&{marginRight:"16px"}),children:[t.filter((function(e){return!!e})).map((function(e,t){var i=e.Component,c=e.label,l=e.text,u=e.children,p=e.shortcut,h=e.commandName,m=e.onClick;if(!0===e.hide)return null;var v,g=zc(e,r,o),O=!Lc(e,a,o),j=e.icon,y={label:c,icon:j,disabled:O,shortcut:p,isActive:!!g,text:l,sectionIndex:f,buttonIndex:t,onButtonRectInfoGet:b,onClick:function(e){null==m||m(e),h&&n(h)}};if((null==u?void 0:u.length)>1||!s&&(null==u?void 0:u.length)>0)j=(null==g?void 0:g.icon)||j,v=Mc,y=Object.assign(Object.assign({},y),{},{icon:j,onCommand:n,queryCommandState:r,queryCommandEnable:a,editorState:o,subMenu:u});else if(1===(null==u?void 0:u.length)&&s){v=Ac;var w=u[0],C=w.icon,x=w.label,k=w.text,S=w.shortcut,A=w.commandName;y=Object.assign(Object.assign({},y),{},{icon:C,label:x,text:k,shortcut:S,onClick:function(e){null==m||m(e),A&&n(A)}})}else v=Ac;return i?Object(d.b)(i,Object.assign({toolbarButton:v},y),e.label):Object(d.b)(v,Object.assign({},y),e.label)})),i&&Object(d.b)(Dc,{})]})}Pc.propTypes={items:j.a.arrayOf(j.a.oneOfType([j.a.object,j.a.bool])).isRequired,onCommand:j.a.func.isRequired,queryCommandState:j.a.func.isRequired,queryCommandEnable:j.a.func.isRequired,editorState:j.a.object.isRequired},Mc.propTypes={icon:j.a.elementType.isRequired,subMenu:j.a.arrayOf(j.a.oneOfType([j.a.object,j.a.bool])).isRequired,label:j.a.string.isRequired,onCommand:j.a.func.isRequired,queryCommandEnable:j.a.func.isRequired,queryCommandState:j.a.func.isRequired,editorState:j.a.object.isRequired,shortcut:j.a.string,disabled:j.a.bool,isActive:j.a.bool,onClick:j.a.func,sectionIndex:j.a.number,buttonIndex:j.a.number,onButtonRectInfoGet:j.a.func},Mc.defaultTypes={disabled:!1,isActive:!1,onClick:function(){}},Uc.propTypes={items:j.a.arrayOf(j.a.oneOfType([j.a.object,j.a.bool])).isRequired,onCommand:j.a.func.isRequired,queryCommandState:j.a.func.isRequired,queryCommandEnable:j.a.func.isRequired,shouldHide:j.a.func,editorState:j.a.object.isRequired,showDivider:j.a.bool.isRequired,showRightSpace:j.a.bool.isRequired,isMoreSection:j.a.bool,sectionIndex:j.a.number,replaceIconByOnlyChild:j.a.bool,onButtonRectInfoGet:j.a.func};var Fc=Object(y.forwardRef)((function(e,t){var n=e.mainSections,r=e.setButtonRectInfo,a=e.onCommand,o=e.queryCommandState,i=e.queryCommandEnable,c=e.editorState;return Object(d.b)("div",{className:"mainArea",ref:t,css:{display:"flex",flexShrink:1},children:n.map((function(e,t,n){return e&&n?e.items.length>0&&Object(d.b)(Uc,{sectionIndex:t,onButtonRectInfoGet:r,items:e.items,onCommand:a,queryCommandState:o,queryCommandEnable:i,editorState:c,showDivider:!0,showRightSpace:!0},e.sectionName):null}))})})),Vc=Object(y.forwardRef)((function(e,t){var n=e.moreSections,r=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,i=e.editorState;return Object(d.b)("div",{className:"moreArea",ref:t,css:{display:"flex"},children:n.map((function(e){return e?e.items.length>0&&Object(d.b)(Uc,{items:e.items,onCommand:r,queryCommandState:a,queryCommandEnable:o,editorState:i,showDivider:!1,showRightSpace:!1,replaceIconByOnlyChild:!1,shouldHide:function(e){return e.every((function(e){var t;return 0===(null==e||null===(t=e.children)||void 0===t?void 0:t.length)}))}},e.sectionName):null}))})})),Gc=Object(y.forwardRef)((function(e,t){var n=e.fixSections,r=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,i=e.editorState;return Object(d.b)("div",{className:"fixArea",ref:t,css:{display:"flex"},children:n.map((function(e){return e.items.length>0&&Object(d.b)(Uc,{items:e.items,onCommand:r,queryCommandState:a,queryCommandEnable:o,editorState:i,showDivider:!1,showRightSpace:!1},e.sectionName)}))})})),qc=n(1429),Hc=n(925);function Wc(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Kc(e){var t=e.onCommand,n=e.queryCommandState,a=e.queryCommandEnable,o=e.editorState,i=e.toolbarMainAreaData,c=e.toolbarMoreAreaData,l=e.toolbarFixtureAreaData,s=e.className,u=function(e){var t=e.toolbarMainAreaData,n=e.toolbarMoreAreaData,a=Object(y.useState)((function(){return[Object(Hc.fromJS)(t),Object(Hc.fromJS)(n)]})),o=Wc(r.a,a,2),i=o[0],c=o[1],l=Object(y.useState)(!1),s=Wc(r.a,l,2),u=s[0],d=s[1],f=Object(qc.a)(),b=Wc(r.a,f,2),p=b[0],h=b[1],m=Object(y.useRef)(null),v=Object(y.useRef)(null),g=Object(y.useRef)(null),O=Object(y.useRef)(0),j=Object(we.a)((function(e){e&&(m.current=e,O.current=e.offsetLeft)})),w=Object(y.useRef)([]),C=Object(we.a)((function(e){var t=e.label,n=e.sectionIndex,r=e.buttonIndex,a=e.right;w.current.push({label:t,right:a,sectionIndex:n,buttonIndex:r}),w.current=w.current.sort((function(e,t){var n=e.sectionIndex,r=e.buttonIndex,a=t.sectionIndex,o=t.buttonIndex;return n>a?-1:n<a?1:r>o?-1:r<o?1:0}))})),x=Object(we.a)((function(){var e,t,n,a=null==h?void 0:h.width,o=null==m||null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect().width,l=(null==v||null===(t=v.current)||void 0===t?void 0:t.getBoundingClientRect().width)||0,s=null==g||null===(n=g.current)||void 0===n?void 0:n.getBoundingClientRect().width;if(a&&o&&void 0!==l&&s){var u,f=a-l-s,b=null===(u=w.current)||void 0===u?void 0:u.find((function(e){var t=e.right;return f>t-O.current}));if(b){var p=b.sectionIndex,j=b.buttonIndex,y=p,C=j;p<3&&(y=3),(p<3||j<1)&&(C=1);var x=Wc(r.a,i,2),k=x[0],S=x[1],A=k.getIn([y,"items"]),T=S.getIn([0,"items",0,"children"]),I=A.concat(T),R=I.slice(0,C+1),E=I.slice(C+1),N=k.setIn([y,"items"],R),B=S.setIn([0,"items",0,"children"],E);c([N,B])}}d(!1)}));return Object(y.useEffect)((function(){c([Object(Hc.fromJS)(t),Object(Hc.fromJS)(n)]),d(!0)}),[t]),Object(y.useEffect)((function(){u&&x()}),[u]),Object(y.useEffect)((function(){d(!0)}),[h]),Object(Go.a)((function(){d(!0)})),{mainSections:i[0].toJS(),moreSections:i[1].toJS(),setToolbarRef:p,setMainAreaRef:j,moreAreaRef:v,fixAreaRef:g,setButtonRectInfo:C}}({toolbarMainAreaData:i,toolbarMoreAreaData:c}),f=u.mainSections,b=u.moreSections,p=u.setToolbarRef,h=u.setMainAreaRef,m=u.moreAreaRef,v=u.fixAreaRef,g=u.setButtonRectInfo;return Object(d.c)(yc,{ref:p,className:s,children:[Object(d.b)(Fc,{ref:h,mainSections:f,setButtonRectInfo:g,onCommand:t,queryCommandState:n,queryCommandEnable:a,editorState:o}),Object(d.b)(Gc,{ref:v,fixSections:l,queryCommandEnable:a,queryCommandState:n,onCommand:t,editorState:o}),Object(d.b)(Vc,{ref:m,queryCommandState:n,queryCommandEnable:a,editorState:o,onCommand:t,moreSections:b})]})}var Zc=n(2903),Qc=Object.assign;function Yc(e){return w.a.createElement(W.a,Qc(Qc({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"List24","data-old-api":"List24"},e),{className:"ZDI ZDI--List24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M3.25 9.027a.75.75 0 01.75-.75h11.5a.75.75 0 010 1.5H4a.75.75 0 01-.75-.75zm0 10a.75.75 0 01.75-.75h11.5a.75.75 0 110 1.5H4a.75.75 0 01-.75-.75zM3.25 5A.75.75 0 014 4.25h15a.75.75 0 010 1.5H4A.75.75 0 013.25 5zm0 10a.75.75 0 01.75-.75h15a.75.75 0 010 1.5H4a.75.75 0 01-.75-.75z",fillRule:"evenodd",clipRule:"evenodd"}))}var Jc=n(914),Xc=Object.assign;function $c(e){return w.a.createElement(W.a,Xc(Xc({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Cloud24","data-old-api":"Cloud24"},e),{className:"ZDI ZDI--Cloud24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M10.836 6.355a4.072 4.072 0 00-4.016 4.756.75.75 0 01-.772.875 2.902 2.902 0 10-.13 5.802h.001l11.142-.035h.003a3.753 3.753 0 10-3.53-5.033.75.75 0 01-1.41-.512A5.255 5.255 0 0122.318 14c0 2.9-2.352 5.253-5.252 5.253h-.001l-11.142.034H5.92a4.402 4.402 0 01-.655-8.756v-.104a5.572 5.572 0 019.85-3.57.75.75 0 11-1.15.962 4.062 4.062 0 00-3.128-1.464z",fillRule:"evenodd",clipRule:"evenodd"}))}var el=n(911),tl=Object.assign;function nl(e){return w.a.createElement(W.a,tl(tl({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Gear24","data-old-api":"Gear24"},e),{className:"ZDI ZDI--Gear24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M12.034 8.133a3.858 3.858 0 100 7.716 3.858 3.858 0 000-7.716zM9.676 11.99a2.358 2.358 0 114.716 0 2.358 2.358 0 01-4.716 0z",fillRule:"evenodd",clipRule:"evenodd"}),w.a.createElement("path",{d:"M13.19 2.17a2.415 2.415 0 00-2.381 0L3.967 6.048a2.415 2.415 0 00-1.224 2.1v7.703c0 .87.467 1.672 1.224 2.101l6.842 3.878a2.415 2.415 0 002.382 0l6.842-3.878a2.415 2.415 0 001.224-2.1V8.148c0-.87-.468-1.672-1.224-2.101L13.19 2.17zm-1.64 1.305a.915.915 0 01.902 0l6.842 3.878a.915.915 0 01.464.796v7.702c0 .33-.177.634-.464.796l-6.842 3.878a.915.915 0 01-.902 0l-6.842-3.878a.915.915 0 01-.464-.796V8.15c0-.33.177-.634.464-.796l6.842-3.878z",fillRule:"evenodd",clipRule:"evenodd"}))}var rl=Object.assign;function al(e){return w.a.createElement(W.a,rl(rl({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Markdown24","data-old-api":"Markdown24"},e),{className:"ZDI ZDI--Markdown24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("path",{d:"M3.36 5.964A.75.75 0 002 6.4v11.202a.75.75 0 001.5 0V8.739l4.246 5.938a.75.75 0 001.22 0L13.21 8.74v8.863a.75.75 0 001.5 0V6.4a.75.75 0 00-1.36-.436l-4.995 6.988L3.36 5.964zm16.397.436a.75.75 0 00-1.5 0v9.392l-.963-.961a.75.75 0 10-1.06 1.061l2.243 2.24a.75.75 0 001.06 0l2.242-2.24a.75.75 0 00-1.06-1.061l-.962.961V6.4z",fillRule:"evenodd",clipRule:"evenodd"}))}var ol=Object.assign;function il(e){return w.a.createElement(W.a,ol(ol({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"TrayFull24","data-old-api":"Column24"},e),{className:"ZDI ZDI--Column24"+(e.className?" ".concat(e.className):"")}),w.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},w.a.createElement("path",{d:"M7.822 12a.75.75 0 01.75-.75h6.857a.75.75 0 010 1.5H8.572a.75.75 0 01-.75-.75zm1.142-4a.75.75 0 01.75-.75h4.572a.75.75 0 010 1.5H9.714a.75.75 0 01-.75-.75zm11.786 8a.747.747 0 00-.016-.155l.003.015a.75.75 0 01.013.14zm-17.487-.14a.748.748 0 00.003-.015l-.003.015z"}),w.a.createElement("path",{d:"M7.527 3.25a2.25 2.25 0 00-2.21 1.829l-2.05 10.766-.004.015a.748.748 0 00-.013.14v2.5a2.25 2.25 0 002.25 2.25h13a2.25 2.25 0 002.25-2.25V16a.75.75 0 00-.013-.14l-.003-.015-2.05-10.766a2.25 2.25 0 00-2.211-1.829H7.527zm0 1.5a.75.75 0 00-.737.61l-1.884 9.89h14.188L17.21 5.36a.75.75 0 00-.737-.61H7.527zM4.75 18.5c0 .414.336.75.75.75h13a.75.75 0 00.75-.75v-1.75H4.75v1.75z"})))}var cl=n(1687),ll=n(1685),sl=n(1108);function ul(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var dl=function(e){var t=e.getMarkdownEnabled,n=e.label,a=e.icon,o=e.text,i=e.onClick,c=Object(y.useState)(t()),l=ul(r.a,c,2),s=l[0],u=l[1],f=function(){i(),u(!s)};return Object(d.c)(T.a,{as:B.c,zaType:"Button",zaText:"".concat(n," ").concat(s?"关":"开"),preset:B.b.Plain,"aria-label":n,css:function(e){return{"&.Button.Button--plain":{padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px",position:"relative"}}},children:[Object(d.b)(k.Box,{onClick:f,css:{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:1}}),Object(d.b)(a,{center:!0,css:{marginRight:"4px"}}),null!=o?o:n,Object(d.b)(sl.a,{forceControlled:!0,checked:s,preset:"small",css:{marginLeft:37},onChange:f,onClick:function(e){return e.preventDefault()}})]})};function fl(e){var t,n=e.onCommand,r=e.queryCommandState,a=e.queryCommandEnable,o=e.editorState,i=e.toolbarMainAreaData,c=e.toolbarMoreAreaData,l=e.toolbarFixtureAreaData,s=e.className;return Object(d.c)(yc,{className:s,css:{".ToolbarButton.Button.Button--plain":{marginRight:"6px"},".ToolbarDivider":{marginLeft:"0",paddingLeft:"2px"},".toolbar-section":{marginRight:"8px"},".fixArea .toolbar-section, .moreArea .toolbar-section":{marginRight:"0px"},".fixArea .ToolbarButton.Button.Button--plain:last-child, .moreArea .ToolbarButton.Button.Button--plain:last-child":{marginRight:"0px"},"&.toolbarV3":{paddingLeft:"0px"}},children:[Object(d.b)(Fc,{mainSections:i,moreSectionIsEmpty:0===(null===(t=c[0])||void 0===t?void 0:t.items[0].children.length),onCommand:n,queryCommandState:r,queryCommandEnable:a,editorState:o}),Object(d.b)(Gc,{fixSections:l,queryCommandEnable:a,queryCommandState:r,onCommand:n,editorState:o}),Object(d.b)(Vc,{queryCommandState:r,queryCommandEnable:a,editorState:o,onCommand:n,moreSections:c})]})}var bl=function(e){var t=e.editorState,n=e.onCommand,r=e.queryCommandEnable,a=e.queryCommandState,o=e.showUserProfitButton,i=e.isVideoAnswer,c=e.onInsertVideoClick,l=e.draftPage,s=e.className,u=e.useMediumEditor,f=e.getMarkdownEnabled,b=Zn().jumpUrl,p=Object(y.useMemo)((function(){return function(e){var t=e.showProfit,n=e.onInsertVideoClick,r=e.isVideoAnswer;return[{sectionName:"operation",minLength:3,priority:1,items:[{icon:Rn.b,priority:2,label:"撤销",commandName:"undo",shortcut:"⌘+Z"},{icon:En.b,label:"重做",priority:1,commandName:"redo",shortcut:"⌘+Y"},{icon:Bn,label:"清除格式",priority:3,commandName:"clear-format",shortcut:"⌘+\\"}]},{sectionName:"style",minLength:4,priority:2,items:[{icon:Zc.b,label:"标题",priority:1,children:[{icon:xn.b,label:"一级标题",commandName:"toggle-block-type-header-two",shortcut:"⌘+⌥+1"},{icon:kn.b,label:"二级标题",commandName:"toggle-block-type-header-three",shortcut:"⌘+⌥+2"}]},{icon:wn.b,label:"加粗",commandName:"toggle-inline-style-BOLD",priority:2,shortcut:"⌘+B"},{icon:Cn.b,label:"斜体",commandName:"toggle-inline-style-ITALIC",priority:3,shortcut:"⌘+I"}]},{sectionName:"blockType",minLength:6,priority:4,items:[{icon:Yc,label:"列表",priority:1,children:[{icon:Sn.b,label:"有序列表",commandName:"toggle-block-type-ordered-list-item",shortcut:"⌘+⇧+L"},{icon:An.b,label:"无序列表",commandName:"toggle-block-type-unordered-list-item",shortcut:"⌘+L"}]},{Component:cl.a,icon:Ln.c,label:"目录",commandName:"toggle-catalog",shortcut:"⌘+⌥+J",priority:2},{icon:Tn.a,label:"引用",commandName:"toggle-block-type-blockquote",shortcut:"⌘+⇧+U",priority:3},{icon:_n.b,label:"分割线",commandName:"insert-divider",shortcut:"⌘+⌥+S",priority:4},{icon:In.b,label:"代码块",commandName:"toggle-block-type-code-block",shortcut:"⌘+⌥+C",priority:5},{icon:Pn.b,label:"注释",commandName:"insert-reference",shortcut:"⌘+⌥+R",priority:6}]},{sectionName:"advanced",minLength:2,priority:3,items:[{Component:ll.a,icon:Wn.b,label:"图片",commandName:"insert-image-from-library",priority:7},!r&&{label:"视频",icon:Jc.b,priority:6,onClick:function(){null==n||n()}},{label:"链接",icon:zn.c,commandName:"insert-link",priority:5,shortcut:"⌘+K"},t&&!r&&{label:"收益",icon:Lo,commandName:"toggle-user-profit-modal",priority:4},{label:"公式",icon:Dn.b,commandName:"insert-formula",priority:3,shortcut:"⌘+⌥+E"},!r&&{label:"表格",icon:Mn.b,commandName:"insert-table",priority:2,shortcut:"⌘+⌥+T"},{label:"附件",icon:$c,commandName:"insert-file-from-baidu-wangpan",priority:1}].filter(Boolean)}]}({showProfit:o,onInsertVideoClick:c,isVideoAnswer:i})}),[o,c,i]),h=Object(y.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.draftPage;return[{sectionName:"fixArea",minLength:2,priority:2,items:[Object.assign({label:"文档",icon:Ba},t?{children:[{icon:Ba,label:"文档",commandName:"insert-doc"},{icon:il,label:"草稿箱",onClick:function(){location.href=t}}]}:{commandName:"insert-doc"}),{label:"历史版本",icon:$t.b,commandName:"toggle-draft-history-modal"}]}]}({draftPage:l})}),[l]),m=Object(y.useMemo)((function(){return function(e){var t=e.getMarkdownEnabled,n=e.onHandleManageEditClick;return[{sectionName:"moreArea",minLength:2,priority:2,items:[{label:"更多",icon:el.c,children:[{label:"帮助文档",icon:re.b,commandName:"toggle-help-document",hideMenuOnClick:!0},{label:"默认设置",icon:nl,onClick:function(){return n()},hideMenuOnClick:!0},{Component:function(e){return Object(d.b)(dl,Object.assign({getMarkdownEnabled:t},e))},label:"Markdown 语法识别",icon:al,commandName:"toggle-markdown-enabled"}]}]}]}({getMarkdownEnabled:f,onHandleManageEditClick:function(){return window.open(b)}})}),[f,b]),v=u?fl:Kc;return Object(d.b)(v,{editorState:t,onCommand:n,queryCommandEnable:r,queryCommandState:a,toolbarMainAreaData:p,toolbarMoreAreaData:m,toolbarFixtureAreaData:h,className:s})},pl=n(1085),hl=n(1047);function ml(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var vl="showEvaluatePanelTimer",gl="isShowEvaluatePanel",Ol=function(e){return Object(d.b)(T.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"关闭nps",css:{position:"absolute",top:"11px",right:"11px"}},e),{},{children:Object(d.b)(se.a,{width:"16",height:"16"})}))},jl=function(e){return Object(d.b)(k.Box,{css:{textAlign:"right"},children:Object(d.b)(T.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"提交nps",css:function(e){return{color:e.colors.GBL01A,fontSize:"12px"}}},e),{},{children:"确认提交"}))})},yl=function(e){return Object(d.b)(T.a,Object.assign({as:"button",zaType:"Button",css:function(e){return{width:"25px",display:"inline-block",textAlign:"center",lineHeight:"25px",background:e.colors.GBK10A,borderRadius:"2px",color:e.colors.GBK06A,marginRight:"2px",cursor:"pointer","&:hover":{background:e.colors.GBK09A}}}},e))};function wl(e){var t=e.editorFrom,n=e.storageKey,a=void 0===n?"":n,o=Object(y.useState)(""),i=ml(r.a,o,2),c=i[0],l=i[1],s=Object(y.useState)("10"),u=ml(r.a,s,2),f=u[0],b=u[1],p=Object(y.useState)(""),h=ml(r.a,p,2),m=h[0],v=h[1],g=Object(y.useRef)(),O=Object(hl.a)(),j=Object(jr.b)(),w=Object(we.a)((function(e){j("https://api.zhihu.com/slytherin/fallback/".concat(t),{method:"POST",body:{score:e,content:m}})}));return Object(y.useEffect)((function(){var e=(new Date).getTime()>_.a.get(vl+a);!_.a.get(gl+a)||e?(l(""),setTimeout((function(){l("0"),_.a.set(gl+a,"1"),_.a.set(vl+a,(new Date).getTime()+5184e6),g.current=setTimeout((function(){l("")}),6e4)}),6e5)):l("")}),[a]),""===c?null:Object(d.b)(T.b,{block:"editorEvaluatePanel",children:Object(d.b)(T.f,{zaText:"nps展示",zaType:"Block",children:Object(d.c)(k.Box,{css:function(e){return{width:"310px",position:"fixed",bottom:"72px",right:"110px",background:e.colors.GBK99A,padding:"20px",boxShadow:"0px 1px 3px rgba(26, 26, 26, 0.1)",zIndex:"101"}},children:[Object(d.b)(Ol,{onClick:function(){l("")}}),"0"===c&&Object(d.c)(k.Box,{children:[Object(d.b)(k.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A}},children:"亲爱的创作者，感谢您对知乎内容的贡献"}),Object(d.b)(k.Box,{css:function(e){return{fontSize:"13px",color:e.colors.GBK06A,marginTop:"10px",marginBottom:"20px"}},children:"请选择您对编辑器的满意度，以帮助我们更好的服务于您的创作体验"}),Object(d.b)(k.Box,{className:"evaluate-box",children:[1,2,3,4,5,6,7,8,9,10].map((function(e,t){return Object(d.b)(yl,{zaText:"打分-".concat(e),onClick:function(){clearTimeout(g.current),e<=6?l("1"):e>6&&(l(""),O({text:"感谢您的反馈",delay:2e3}),w(e)),b(e)},children:e},t)}))}),Object(d.c)(k.Flex,{justifyContent:"space-between",css:function(e){return{color:e.colors.GBK03A,marginTop:"15px",fontSize:"11px",lineHeight:"12px"}},children:[Object(d.b)("span",{role:"img","aria-label":"不满意",children:"不满意👎"}),Object(d.b)("span",{role:"img","aria-label":"满意",children:"满意👍"})]})]}),"1"===c&&Object(d.c)(k.Box,{children:[Object(d.b)(k.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A,marginBottom:"10px"}},children:"请写下您的意见或建议"}),Object(d.b)(k.Box,{children:Object(d.b)(pl.a,{className:"Appeal-TextArea",rows:7,placeholder:"请写下您的建议...",css:{width:"270px",height:"85px"},value:m,onChange:function(e){v(e.target.value)}})}),Object(d.b)(k.Box,{css:{textAlign:"right"},children:Object(d.b)(jl,{onClick:function(){l(""),w(f),O({text:"感谢您的反馈",delay:1e3})}})})]})]})})})}var Cl=function(e){return null!=e&&e.length&&e.filter(Boolean).find((function(e){return"8713324000"===String(e.id)&&"pass"===e.status}))?{fileSizeLimit:31457280}:{fileSizeLimit:10485760}},xl=n(962);function kl(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Sl=function(e){var t=e.children,n=e.className;return Object(d.b)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},Al=function(e){var t=e.question,n=e.onClose,a=t.title,o=t.detail,i=Object(y.useState)(null),c=kl(r.a,i,2),l=c[0],s=c[1],u=Object(y.useRef)(null),f=Object(y.useCallback)((function(){return u.current}),[]);return Object(d.b)("div",{css:{position:"absolute",top:0,bottom:0,left:"100%",width:"calc((100vw - 100%)/2 - 20px)"},ref:u,children:Object(d.c)(k.Box,{css:{overflow:"hidden",width:"326px",maxWidth:"326px"},children:[Object(d.b)(L.a,{getStyle:function(){var e=f();return e?{top:85,left:e.getBoundingClientRect().left}:{top:85}},offset:85,container:f,children:Object(d.c)(k.Box,{css:{width:"326px",maxWidth:"326px"},pl:"16px",children:[Object(d.c)(k.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"60px",alignItems:"center"},children:[Object(d.b)(Sl,{css:{fontSize:"18px",lineHeight:"24px"},children:"问题描述"}),Object(d.b)(T.a,{zaType:"Button",zaAction:"Unknown",zaText:"关闭问题详情",as:jn.a,css:{marginLeft:"auto",padding:"16px"},onClick:n})]}),Object(d.c)(k.Box,{bg:"GBK99A",px:"16px",css:{minHeight:"340px",maxHeight:"460px",overflow:"auto"},onClick:function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&s(t)},children:[Object(d.b)(Sl,{css:{fontSize:"16px",lineHeight:"22px",marginBottom:"10px",marginTop:"10px"},children:a}),Object(d.b)(rn.a,{itemProp:"text",tag:"span",html:o})]})]})}),l&&Object(d.b)(xl.a,{img:l,onClose:function(){return s(null)}})]})})},Tl=function(e){var t=e.question,n=e.onClick,r=t.title,a=t.excerpt;return Object(d.b)(k.Box,{bg:"GBK99A",css:{padding:"20px 64px 0"},children:Object(d.c)(Sl,{css:function(e){return{paddingBottom:"20px",borderBottom:"1px solid ".concat(e.colors.GBK09A)}},children:[r,a&&Object(d.c)(T.a,{as:"button",zaType:"Button",zaText:!0,onClick:n,shouldTrackShow:!0,css:function(e){return{color:e.colors.GBL05A,lineHeight:"14px",fontSize:"14px",fontWeight:"normal",display:"inline-flex",alignItems:"center"}},children:["问题描述",Object(d.b)(ye.a,{size:16})]})]})})},Il=n(57);function Rl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var El,Nl,Bl=function(e){var t=function(t){Object(l.a)(r,t);var n=Rl(r);function r(e){var t;return Object(o.a)(this,r),(t=n.call(this,e)).state={needReload:e.useMediumEditor&&Object(Il.isBrowser)()&&Object(Ho.c)()},t}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.state.needReload&&this.props.loadDraft(this.props.question.id).finally((function(){requestAnimationFrame((function(){e.setState({needReload:!1},(function(){requestAnimationFrame((function(){var t;null===(t=e.props.imperativeRef.current)||void 0===t||t.focus()}))}))}))}))}},{key:"render",value:function(){return this.state.needReload?null:Object(d.b)(e,Object.assign({},this.props))}}]),r}(y.Component);return $()(Object(C.connect)(null,{loadDraft:Mt.P})(t),e)};function zl(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Ll(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Pl="questionDetail",_l=function(e){Object(l.a)(n,e);var t=Ll(n);function n(e,r){var i;Object(o.a)(this,n),(i=t.call(this,e,r)).toolbarWrapperRef=Object(y.createRef)(),i.helpDocMilestoneRef=Object(y.createRef)(),i.zaRef=Object(y.createRef)(),i.editableReady=function(){var e=i.props,t=e.reporter,n=e.draft;t.reportSuccess(gc.editableInit),n&&t.reportSuccess(gc.draftLoad)},i.onCompositionStart=function(){i.composition=!0,i.syncDraft.cancel()},i.onCompositionEnd=function(){i.composition=!1,i.prevValue&&i.syncDraft(i.prevValue),i.prevValue=null},i.onChangeContent=function(e){i.loggingDeltaTime||(i.loggingDeltaTime=!0,i.startCompositionTime=Math.floor((new Date).getTime()/1e3)),i.hasEdited=!0,i.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),i.composition?i.prevValue=e:i.syncDraft(e)},i.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var r=n.getRangeAt(0).cloneRange();r.collapse(t);var a=r.getBoundingClientRect();if(0===a.height){var o=r.commonAncestorContainer;1===o.nodeType&&(a=o.getBoundingClientRect())}if(0!==a.height){var i=a.bottom-(window.innerHeight-117);i>0&&window.scrollBy(0,i)}}},i.onDeleteDraftModalShow=function(){i.setState({deleteDraftModalShown:!0})},i.onDeleteDraft=function(){var e=i.props,t=e.isReediting,n=e.activeTabKey;t||(n===V.a.videoAnswer?i.editable.clearAllContent():i.editable.reset(),i.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),i.deleteDraft();var r=i.props.onDeleteDraft;r&&r()},i.onDeleteDraftModalHide=function(){i.setState({deleteDraftModalShown:!1})},i.checkVideoSectionReady=function(e){if(!e)return N.a.alert("没有上传视频，请上传后提交",{title:"无视频"}),!1;var t=e.videoId,n=e.isOriginal;if(t){if("zvideo"===e.type&&null==n)return N.a.alert("没有视频类型，请选择视频为原创或转载后提交",{title:"无视频类型"}),!1}else{var r=i.editable.checkVideoStatus();if(r.isUploading)return N.a.alert("视频上传中，请上传完成后提交",{title:"视频上传中"}),!1;if(r.hasError)return N.a.alert("视频上传失败，请重新上传后提交",{title:"上传失败"}),!1}return!0},i.checkEditorContentReady=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading"),!1):i.editable.hasImage("upload")?(i.handleError("image-uploading"),!1):i.editable.hasImage("error")||i.editable.hasVideo("error")&&!i.editable.hasVideo("error-review")?(N.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"}),!1):!i.editable.hasVideo("error-review")&&!i.editable.hasVideo("censor")||(N.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"}),!1)},i.getSubmitData=function(e,t,n){var r,a=i.state.scheduledPublishAt,o=i.props,l=o.answer,s=o.disclaimers,u=o.settings,f=o.isReediting,b={content:t},p=(0,o.getFormData)(),h=p.isDisclaimerChecked,m=p.disclaimerType,O=p.rewardTagline,j=p.pushActivity,y=p.commentPermission,w=p.reshipmentSettings,C=p.isReport,x=p.commercialZhitaskBindInfo,k=p.thankInviterInfo;if(!f){var S=i.props.currentUser.caEnabled?"need_payment":"allowed";b.reshipmentSettings=w||S,b.commentPermission=y||"all"}if(b.rewardSetting={canReward:Boolean(O),tagline:O},e)return{content:t,attachment:n,rewardSetting:b.rewardSetting,reshipmentSettings:b.reshipmentSettings,commentPermission:b.commentPermission};if(s&&s.length&&(!l||u)&&(b.disclaimerStatus=h?"open":"close",b.disclaimerType=m||"none"),b.commercialReportInfo={isReport:!!C},b.commercialZhitaskBindInfo=null!=(r=x)&&r.bindTaskDTO?{bind_operate:"BIND",task_id:r.bindTaskDTO.taskId,task_type:r.bindTaskDTO.taskType}:null,b.isReport=!!C,a){if(A.a.trackEvent(Object(c.a)(i),{action:"Click",id:5733,name:"回答"}),v.a(a,g.a(new Date,30)))return void N.a.alert(Object(d.b)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});b.publishAt=Math.floor(a/1e3)+0}return void 0!==j&&(b.pushActivity=j),null!=n&&n.bizExt&&(b.bizExt=Object(Ct.a)(n.bizExt)),b.tableOfContentsEnabled=i.editable.hasCatalog(),Object.assign(b,Object(Ho.i)(k,"answer")),b},i.canSubmit=function(){var e,t,n=null===(e=i.editable)||void 0===e?void 0:e.toHTML(),r=i.isVideoAnswer?null===(t=i.editable)||void 0===t?void 0:t.getAttachment():null;return i.isVideoAnswer?Boolean(r||n):Boolean(n)},i.handleSubmit=i.props.authRequired((function(){var e=i.props.reporter;e.reportRequest(gc.addAnswer);try{var t,n=i.props,r=n.answer,a=n.draft,o=n.isReediting,l=n.onSubmit,s=n.showNotification,u=n.question,d=u.id,f=u.questionType,b=u.brand,p=n.currentUser,h=n.updateSettingsDisclaimer,m=n.loadLabel,v=n.onCancel,g=n.useMediumEditor;if(!i.editable)return v(),void e.reportSuccess(gc.addAnswer);if(!i.canSubmit())return void e.reportSuccess(gc.addAnswer);var O=i.editable.toHTML(),j=i.isVideoAnswer?i.editable.getAttachment():null==a?void 0:a.attachment;if(i.isVideoAnswer&&!i.checkVideoSectionReady(j))return void e.reportSuccess(gc.addAnswer);if(!i.checkEditorContentReady())return void e.reportSuccess(gc.addAnswer);var y=i.getSubmitData(i.isVideoAnswer,O,Object.assign(Object.assign({},j),{},{campaign_id:null===(t=i.props.campaign)||void 0===t?void 0:t.id})),w=i.zaRef.current.trackEvent;Promise.resolve(l(y)).then((function(t){var n,a=t.res;if(w({action:"Answer",eventType:"Click",elementLocation:{type:"Button",moduleId:"published_successful",content:{type:"Answer",token:String(null==a||null===(n=a.payload)||void 0===n?void 0:n.id)}}},{configMap:{traceId:i.props.traceId}}),e.reportSuccess(gc.addAnswer),g&&(r&&y.disclaimerStatus&&h(r.id,y.disclaimerStatus,y.disclaimerType),r&&m("answer",r.id),"commercial"===f)){var o=(null==b?void 0:b.toastAnswerDescription)||"已发布！由品牌筛选后进入推荐区。";s(o)}})).then((function(){A.a.trackCardShow(null,{id:7879}),o||A.a.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(d),author_member_hash_id:p.id}]}}],status:{result:"Success",event:{action:"Submit"}}})})).catch((function(t){var n;t.status&&"5"!==(null===(n=t.status)||void 0===n?void 0:n.toString()[0])||e.reportFail(gc.addAnswer,t),o||A.a.trackEvent(Object(c.a)(i),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}));var C=o?"Edit":"Answer";"Answer"===C&&A.a.trackEvent(Object(c.a)(i),{id:4930}),A.a.trackEvent(Object(c.a)(i),{action:C,is_intent:!1})}catch(t){throw e.reportFail(gc.addAnswer,t),t}})),i.validateBeforeCancel=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading-draft"),!1):!i.editable.hasImage("upload")||(i.handleError("image-uploading-draft"),!1)},i.onCancel=function(){var e=i.props.onCancel;i.validateBeforeCancel()&&(i.hasEdited&&i.syncDraftImmediately(),e&&e())},i.onFocus=function(){"org"===i.props.question.questionType&&i.shouldAnswerOrgQuestionModalShow&&i.handleAnswerOrgQuestionModalShow(),i.setState({focusing:!0})},i.onFocusWithAuth=function(){return i.onFocusAuthChecked?i.onFocus():(i.onFocusAuthChecked=!0,i.props.authRequired(i.onFocus)())},i.onSelectText=function(e){i.setState({selectedText:e.replace(/\s/g,"")})},i.onLoadStart=function(){i.setState({loadingShown:!0})},i.onLoadEnd=function(){i.setState({loadingShown:!1})},i.handleInsertZVideo=function(){i.setState({showInsertableVideoUploader:!0})},i.getAllInviters=function(){var e=i.props,t=e.question;return(0,e.fetchAllInviters)(t.id)},i.getToolbarSidePlugins=function(){return null},i.getToolbarMenuPlugins=function(){var e=i.state.scheduledPublishAt;return Object(d.b)(y.Fragment,{children:i.canUseScheduledPublish&&Object(d.c)(z.c,{onClick:function(){i.setUseScheduledPublish(!e),A.a.trackEvent(Object(c.a)(i),{action:"Click",id:5730,name:"回答"})},children:[Object(d.b)(f.a,{text:!0}),e?"取消定时发布":"定时发布"]})})},i.setUseScheduledPublish=function(e,t){if(e)if(t)i.setState({scheduledPublishAt:t});else{var n=g.a(new Date,30);i.setState({initialScheduledPublishAt:n,scheduledPublishAt:n})}else N.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then((function(){i.setState({scheduledPublishAt:void 0}),A.a.trackEvent(Object(c.a)(i),{action:"Click",id:5737,name:"回答"})})).catch((function(){A.a.trackEvent(Object(c.a)(i),{action:"Click",id:5736,name:"回答"})})),A.a.trackCardShow(Object(c.a)(i),{id:5735,name:"回答"})},i.getEditorState=function(){return i.editable.state.editorState?i.editable.state.editorState:i.editable.getEditorState()},i.toggleFullscreen=function(){var e,t,n;i.validateBeforeCancel()&&(i.hasEdited?i.syncDraftImmediately().finally((function(){var e,t,n;Object(Ho.h)(i.props.question.id,null===(e=i.props.answer)||void 0===e?void 0:e.id),null===(t=(n=i.props).onCancel)||void 0===t||t.call(n)})):(Object(Ho.h)(i.props.question.id,null===(e=i.props.answer)||void 0===e?void 0:e.id),null===(t=(n=i.props).onCancel)||void 0===t||t.call(n)))},i.handleUploadStart=function(){i.setState({isUploading:!0})},i.handleUploadEnd=function(){i.setState({isUploading:!1})},i.handleUploadError=function(e,t){switch(t){case"video":i.handleError("video-upload-error");break;case"image":i.handleError("image-upload-error",e)}},i.handleAnswerOrgQuestionModalShow=function(){i.setState({answerModalShown:!0}),i.shouldAnswerOrgQuestionModalShow=!1},i.handleAnswerModalHide=function(){i.setState({answerModalShown:!1})},i.updateDraftSettings=function(){i.hasSettingsChange=!0,i.syncDraft()},i.syncDraftImmediately=i.props.reporter.recordError(gc.draftSave,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.state.content;if(i.editable){var t,n=i.props,r=n.reporter,a=n.draft,o=i.state.lastUpdatedTime,l=e.toHTML(),s=Math.floor(Date.now()/1e3);t=!o||i.startCompositionTime-o>180?s-i.startCompositionTime:s-o,i.setState({isTyping:!1});var u,d=i.props.answer,f=(d=void 0===d?{}:d).attachment;u=i.videoAnswerEditable||"zvideo"===(null==f?void 0:f.type)?"video_answer":"video"===(null==f?void 0:f.type)?"video_answer_v2":"normal";var b=i.isVideoAnswer?e.getAttachment():null==a?void 0:a.attachment,p=i.hasSettingsChange||(i.isVideoAnswer?Boolean(b||l):Boolean(l));i.hasSettingsChange=!1;var h=i.getDraftSettings(i.isVideoAnswer);return p?i.updateDraft(l,t,u,b,h).then((function(e){var t;null!=e&&null!==(t=e.payload)&&void 0!==t&&t.updatedTime&&i.setState({lastUpdatedTime:e.payload.updatedTime}),i.loggingDeltaTime=!1,r.reportSuccess(gc.draftSave),A.a.trackEvent(Object(c.a)(i),{action:"AutoSave"})}),(function(e){throw r.reportFail(gc.draftSave,e),e})).finally((function(){delete i.startCompositionTime})):(r.reportSuccess(gc.draftSave),Promise.resolve(i.deleteDraft()))}})),i.syncDraft=Object(At.a)(i.syncDraftImmediately,2e3),i.getDraftSettings=function(e){var t=i.props,n=t.answer,r=t.disclaimers,a=t.settings,o=t.isReediting,c={},l=(0,t.getFormData)(),s=l.isDisclaimerChecked,u=l.disclaimerType,d=l.rewardTagline,f=l.pushActivity,b=l.commentPermission,p=l.reshipmentSettings,h=l.isReport,m=l.thankInviterInfo,v=void 0===m?"":m;if(!o){var g=i.props.currentUser.caEnabled?"need_payment":"allowed";c.reshipmentSettings=p||g}if(c.commentPermission=b||"all",c.canReward=Boolean(d),c.tagline=d,e)return c;r&&r.length&&(!n||a)&&(c.disclaimerStatus=s?"open":"close",c.disclaimerType=u||"none"),c.commercialReportInfo={is_report:!!h},void 0!==f&&(c.pushActivity=f),c.tableOfContentsEnabled=i.editable.hasCatalog();var O=Object(Ho.i)(v);return c.thankInviterStatus=O.thankInviterStatus,c.thankInviter=O.thankInviter,c},i.updateDraft=function(){for(var e=i.props,t=e.question.id,n=e.draft,r=e.addDraft,a=e.updateDraft,o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return n?a.apply(void 0,[t].concat(c)):r.apply(void 0,[t].concat(c))},i.focus=function(){i.editable&&i.editable.focus()},i.hasVideo=function(){return!!i.editable&&i.editable.hasVideo()},i.hasADLinkCard=function(){return!!i.editable&&i.editable.hasADLinkCard()},i.hasFeeConsultCard=function(){return!!i.editable&&i.editable.hasFeeConsultCard()},i.hasMCNLinkCard=function(){return!!i.editable&&i.editable.hasMCNLinkCard()},i.hasCommercialReport=function(){var e=i.props.getFormData().commercialReportInfo;return null==e?void 0:e.isReport},i.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;i.setState({commentPermission:n})},i.handleReshipmentSettings=function(e){"need_payment"!==e||i.props.currentUser.caEnabled||window.open("/copyright/invite"),i.setState({reshipmentSettings:e})},i.handleError=function(e,t){Object(yt.b)(e,t,i.props.showNotification)},i.handleBeforeVideoUpload=function(){var e=i.props.question;return!e.relationship||!e.relationship.isAnonymous},i.handleReverted=function(e){i.editable.resetWithValue(e.draft.content)},i.toggleMarkdownEnabled=function(){var e=i.state.markdownEnabled;i.setState({markdownEnabled:!e}),i.props.updateMarkdownSettings({markdownEnabled:!e})},i.getDraftStatus=function(){var e=i.props.draft,t=i.state,n=t.isTyping,r=t.dateNow;return e?e.updating||n?"草稿保存中…":e.updated&&r<1e3*e.updatedTime+6e4?"草稿已保存":e.updateFailed?Object(d.b)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):p()(El||(El=Object(a.a)(["草稿保存于",""])),Object(M.toRelativeString)(e.updatedTime)):""},i.handleEditGGRCard=function(e){var t=e.type,n=e.payload,r=i.state.mcnEditingGood,a=i.props.updateLinkCard;"goodsEditor/submitNewGoodsInfo"!==t?"goodsEditor/closeGoodsEditor"!==t||i.setState({mcnEditingGood:null}):a(Object.assign(Object.assign({},r),{},{title:null==n?void 0:n.title})).finally((function(){i.setState({mcnEditingGood:null}),i.editable.handleCommand("edit-mcn-link-card:".concat(r.id))}))},i.shouldShowProfit=function(){return i.props.showUserProfitButton&&!i.isVideoAnswer},i.getSentences=function(){var e;return i.props.isReediting&&null!==(e=i.props.answer)&&void 0!==e&&e.id?i.props.getInteractText("answers",i.props.answer.id).then((function(e){var t;return null==e||null===(t=e.payload)||void 0===t?void 0:t.data})):null},i.createEditorPlugins=function(){var e,t,n,r=On({type:"question",id:i.props.question.id,draftType:null!==(e=i.props.answer)&&void 0!==e&&e.id?"answer":void 0,draftId:null===(t=i.props.answer)||void 0===t?void 0:t.id,syncDraft:i.syncDraft}),a=Bo({getShouldShowToolbarButton:function(){return!i.isVideoAnswer},getAllInviters:i.getAllInviters,inviterQuery:i.props.inviterQuery,getInitialThankInviterInfo:function(){return i.props.thankInviterInfo},syncDraftImmediately:i.syncDraftImmediately}),o=Uo({shouldDisabled:function(){return i.props.question.relationship.isAnonymous},shouldShow:function(){return i.shouldShowProfit()},getContentInfo:function(){var e;return{type:"answer",id:null===(e=i.props.answer)||void 0===e?void 0:e.id}}}),l=Xt(),s=Co({sourceType:"answer",sourceId:null===(n=i.props.question)||void 0===n?void 0:n.id});i.helpDocPlugin=ir({getInitialOffset:i.getHelpDocInitialOffset,getShouldHide:i.getShouldHideHelpDoc,forceUpdate:i.forceUpdate.bind(Object(c.a)(i))});var u=cr({onToggle:i.toggleMarkdownEnabled});return[Q({getSentences:i.getSentences}),r,a,o,l,s,i.helpDocPlugin,u]},i.renderRichInput=function(){var e,t=i.props,n=t.answer,r=(n=void 0===n?{}:n).attachment,a=t.answer,o=t.question,c=t.isReediting,l=t.draft,s=t.defaultValue,u=i.state,f=u.toolbarMenuAttention,b=u.scheduledPublishAt,p=u.initialScheduledPublishAt,h=i.props.getFormData().tableOfContentsEnabled,m="".concat(c?"修改":"写","回答...");"commercial"===o.questionType&&(m=null===(e=o.brand)||void 0===e?void 0:e.editorDescription);i.isVideoAnswer&&(m="详细介绍下视频（选填）");var v,g=i.videoAnswerEditable||"video_answer"===(null==l?void 0:l.type)||"zvideo"===(null==r?void 0:r.type);if(l)v=null==l?void 0:l.attachment;else if("zvideo"===(null==r?void 0:r.type))v=r.zvideo;else if("video"===(null==r?void 0:r.type)){var O;v=Object.assign(Object.assign({},null===(O=r.video)||void 0===O?void 0:O.videoInfo),{},{videoId:r.attachmentId})}var j={ref:function(e){return i.editable=e},answer:a,question:o,toolbarMenuAttention:f,scheduledPublishAt:b,initialScheduledPublishAt:p,placeholder:m,draft:l,defaultValue:s,isLegacyVideoAnswer:g,defaultVideo:v,videoAnswerEditable:i.videoAnswerEditable,videoAnswerPublished:i.videoAnswerPublished,editableReady:i.editableReady,handleChangeContent:i.onChangeContent,handleAfterChangeContent:i.onAfterChangeContent,handleFocusWithAuth:i.onFocusWithAuth,handleSelectText:i.onSelectText,handleSubmit:i.handleSubmit,handleError:i.handleError,handleLoadStart:i.onLoadStart,handleLoadEnd:i.handleLoadEnd,handleUploadStart:i.handleUploadStart,handleUploadEnd:i.handleUploadEnd,handleUploadError:i.handleUploadError,handleBeforeVideoUpload:i.handleBeforeVideoUpload,handleMCNLinkCardEdit:function(e,t){i.setState({mcnEditingGood:t})},isVideoAnswer:i.isVideoAnswer,handleInsertZVideo:i.handleInsertZVideo,getToolbarSidePlugins:i.getToolbarSidePlugins,createEditorPlugins:i.createEditorPlugins,getToolbarMenuPlugins:i.getToolbarMenuPlugins,getEditorBeforePlugins:i.getEditorBeforePlugins,setUseScheduledPublish:i.setUseScheduledPublish,allowToolbar:!1,onAnyChange:i.handleAnyChange,docPluginProps:Cl(i.props.creatorRightStatus),tableOfContentsEnabled:h,getMarkdownEnabled:function(){return i.state.markdownEnabled},videoSource:"answer"};return Object(d.b)(jc,Object.assign({},j))},i.handleAnyChange=function(e){var t=e.editorState;i.setState({editorState:t})},i.handleKeyCommand=function(e){if(!i.editable)return"not-handled";var t=i.editable.handleKeyCommand(e);return"toggle-catalog"===e&&requestAnimationFrame((function(){i.forceUpdate(),i.syncDraftImmediately()})),t},i.queryCommandEnable=function(e,t){return!!i.editable&&i.editable.queryCommandEnable(e,t)},i.queryCommandState=function(e,t){return!!i.editable&&i.editable.queryCommandState(e,t)},i.getHelpDocInitialOffset=function(){var e=i.toolbarWrapperRef.current;if(e){var t=e.getBoundingClientRect(),n=i.props.useMediumEditor?t.bottom-50:t.bottom+20;return document.documentElement.clientWidth-t.right>328?{top:n,left:t.right+18}:{top:n,right:0}}},i.getShouldHideHelpDoc=function(){if(!i.props.useMediumEditor)return!1;var e=i.helpDocMilestoneRef.current;return!!e&&e.getBoundingClientRect().top<117},i.getAnswerFormRef=function(){return i.props.imperativeRef},i.handleCloseWriteShieldModal=function(){var e,t;i.props.useMediumEditor?null===(e=(t=i.props).onCancel)||void 0===e||e.call(t):(window.close(),requestAnimationFrame((function(){window.location.href="https://www.zhihu.com"})))};var l=i.props,s=l.defaultValue,u=l.draft,b=u?u.editableContent:s,h=u?u.updatedTime:0;return i.state={draft:b,content:{toHTML:function(){return b}},isEmpty:!b,isTyping:!1,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:h,showInsertableVideoUploader:!1,mcnEditingGood:null,initialScheduledPublishAt:void 0,scheduledPublishAt:void 0,thankInviterInfo:e.thankInviterInfo||e.inviterFromNotification,editorState:null,rightArea:null,markdownEnabled:!1},i.hasEdited=!1,i}return Object(i.a)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting,r=e.activeTabKey;return t&&t.autoSendingCreations&&r===V.a.textAnswer&&!n}},{key:"componentDidMount",value:function(){var e,t,n=this;null===(e=this.props.writeShield)||void 0===e||null===(t=e.setOnModalClose)||void 0===t||t.call(e,this.handleCloseWriteShieldModal);var a=this.props,o=a.reporter,i=a.draft,c=a.question.id,l=a.getBio,s=a.loadCreatorRightStatus;l(c),s(),o.reportRequest(gc.editableInit),i&&o.reportRequest(gc.draftLoad),this.shouldAnswerOrgQuestionModalShow=!It.getKnown(),this.onFocusAuthChecked=!1;var u=this.props,d=u.fillCurrentUserIfNeeded,f=u.getUserProfitPermission,b=d(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);f(),Promise.resolve(b).then((function(){wt.a.getActionsByNames(["a_draft_history",n.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then((function(e){var t=zl(r.a,e,1)[0];t&&(n.setState({toolbarMenuAttention:t.description}),wt.a.markAsShown(t),"auto_pub_answer"===t.guide_name&&A.a.trackCardShow(n,{id:5738}))})),A.a.trackCardShow(n,{id:5729,name:"回答"})})),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return window.name="",n.state.isUploading||n.composition||n.syncDraft.pending()||n.props.draft&&n.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval((function(){return n.setState({dateNow:Date.now()})}),6e4),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus,hasVideo:this.hasVideo,hasADLinkCard:this.hasADLinkCard,hasMCNLinkCard:this.hasMCNLinkCard,hasFeeConsultCard:this.hasFeeConsultCard,toggleFullscreen:this.toggleFullscreen,hasCommercialReport:this.hasCommercialReport,hasEditorContent:function(){return!n.state.isEmpty}}),function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(r)&&"function"==typeof(null===(e=window)||void 0===e||null===(t=e.aria)||void 0===t||null===(n=t.initcallback)||void 0===n?void 0:n.disableShortKeys)){var a=r.map((function(e){return jt[e]}));window.aria.initcallback.disableShortKeys(a)}}(["r","t","e"])}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.reporter,r=this.state,a=e.currentUser,o={};r.reshipmentSettings||void 0===a.caEnabled||(o.reshipmentSettings=a.caEnabled?"need_payment":"allowed"),r.commentPermission||void 0===a.lastCommentPermission||(o.commentPermission=a.lastCommentPermission),Object.keys(o).length&&this.setState(o),this.draftLoaded||this.state.draft||this.props.draft||!e.draft||(n.wrapAutoRecord(gc.draftLoad,(function(){var n=e.draft.editableContent;n&&(t.setState({draft:n,isEmpty:!n,content:{toHTML:function(){return n}}}),t.editable&&!t.editable.toHTML()&&t.editable.resetWithValue(n))}))(),this.draftLoaded=!0)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,r=n.focusing,a=n.thankInviterInfo,o=this.props,i=o.tagline,c=o.inviterFromNotification;if(i){var l=_.a.get("rewardNotication");r&&!l&&(this.setState({rewardNotication:!1}),_.a.set("rewardNotication",!0),this.timeout=setTimeout((function(){t.setState({rewardNotication:!0})}),2e3))}a||!c||e.inviterFromNotification||this.setState({thankInviterInfo:c})}},{key:"componentWillUnmount",value:function(){var e,t,n;this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null),"function"==typeof(null===(e=window)||void 0===e||null===(t=e.aria)||void 0===t||null===(n=t.initcallback)||void 0===n?void 0:n.disableShortKeys)&&window.aria.initcallback.disableShortKeys([])}},{key:"getCloneContent",value:function(){return this.getEditorState().getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,r=e.deleteDraft;if(n)return r(t.id)}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.isReediting,r=t.useMediumEditor,o=t.draft,i=this.state,c=i.content,l=i.scheduledPublishAt,s=i.markdownEnabled,u=n&&this.isVideoAnswer,f=c.toHTML()||"",b=r?Le:ze;return Object(d.c)(b,{hideScrollButton:u,getContaner:function(){return e.form},isAnswer:!0,children:[Object(d.c)(k.Flex,{children:[Object(d.b)(k.Text,{color:"GBL05A",fontSize:"14px",ml:u?"0":"24px",children:p()(Nl||(Nl=Object(a.a)(["字数：",""])),U(f,!0))}),s&&Object(d.b)(oe,{})]}),Object(d.b)(k.Text,{color:"GBL05A",fontSize:"14px",ml:"auto",children:this.getDraftStatus()}),r&&n&&Object(d.b)(B.c,{zaType:"Button",zaText:!0,color:"grey",preset:"secondary",css:{marginLeft:"24px"},onClick:this.onCancel,children:o?"保存草稿并离开":"取消"}),Object(d.b)(Vo,{canSubmit:this.canSubmit(),handleSubmit:this.handleSubmit,isReediting:n,scheduledPublishAt:l,type:"answer",css:{marginLeft:"24px"}})]})}},{key:"videoAnswerPublished",get:function(){var e=this.props.answer,t=(e=void 0===e?{}:e).attachment;return["zvideo","video"].includes(null==t?void 0:t.type)}},{key:"videoAnswerEditable",get:function(){return this.props.activeTabKey===V.a.videoAnswer}},{key:"isVideoAnswer",get:function(){return this.videoAnswerPublished||this.videoAnswerEditable}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.className,o=r.isReediting,i=r.answer,c=(i=void 0===i?{}:i).answerType,l=r.question,s=r.currentUser,u=r.answer,f=r.draft,b=r.activeTabKey,p=r.useMediumEditor,h=r.showUserProfitButton,v=this.state,g=v.deleteDraftModalShown,O=v.showInsertableVideoUploader,j=v.mcnEditingGood,y=v.editorState,w=v.initialScheduledPublishAt,C=v.scheduledPublishAt,x=v.rightArea,k=p?{offset:52,container:function(){return n.form}}:{getStyle:function(){return{width:"100%",top:0,left:0}}};return Object(d.c)(E.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(l.id),author_member_hash_id:s.id},children:[Object(d.c)("form",{ref:function(e){n.form=e},className:m()("AnswerForm",a),onSubmit:function(e){return e.preventDefault()},noValidate:!0,css:[{borderBottom:"none"},p?{".AnswerForm-editor .Catalog.isCatalogV2":{width:"140px",marginLeft:"-164px"}}:{".AnswerForm-editor .Catalog.isCatalogV2":{marginLeft:"-260px"}}],children:[Object(d.b)(T.e,{ref:this.zaRef}),Boolean(this.isVideoAnswer&&(null===(e=this.props.writeShield)||void 0===e||null===(t=e.commands)||void 0===t?void 0:t.write)&&!this.props.writeShield.commands.write.instruction&&!this.props.writeShield.isLoading)&&Object(d.b)(St.a,{writeScene:{type:"zvideo"},onClose:this.handleCloseWriteShieldModal}),Object(d.c)("div",{children:[Object(d.b)(wl,{editorFrom:p?"answer-pc-editor-modified":"answer-pc-editor-full"}),this.editable&&Object(d.b)(L.a,Object.assign(Object.assign({},k),{},{children:Object(d.b)("div",{ref:this.toolbarWrapperRef,css:function(e){return{display:"flex",justifyContent:"center",margin:"0px auto",background:e.colors.GBK99A}},children:Object(d.b)(bl,{editorState:y,onCommand:this.handleKeyCommand,queryCommandEnable:this.queryCommandEnable,queryCommandState:this.queryCommandState,showUserProfitButton:h,isVideoAnswer:this.isVideoAnswer,onInsertVideoClick:this.handleInsertZVideo,useMediumEditor:p,getMarkdownEnabled:function(){return n.state.markdownEnabled}},b)})})),Object(d.c)("div",{css:function(e){return[{position:"relative",".Editable":{paddingTop:"1px",minHeight:"calc(100vh - 120px)"}},p?{width:"694px",margin:"0 auto",background:e.colorMod(e.colors.GBK10C).alpha(.45),".Editable-content":{paddingBottom:"62px"}}:{width:"782px",margin:"20px auto",".AnswerForm-editor .RichText--editable":{paddingLeft:64,paddingRight:64}}]},children:[x===Pl&&Object(d.b)(Al,{question:l,onClose:function(){n.setState({rightArea:null})}}),!p&&Object(d.b)(Tl,{question:l,onClick:function(){return n.setState({rightArea:Pl})}}),Object(d.b)("div",{css:{minHeight:"calc(100vh - 120px)"},children:this.renderRichInput()}),Object(d.b)("div",{ref:this.helpDocMilestoneRef}),Object(d.b)(pc,{question:l,answer:u,isVideoAnswer:this.isVideoAnswer,isReediting:o,setUseScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,initialScheduledPublishAt:w,scheduledPublishAt:C,draft:f,getAnswerFormRef:this.getAnswerFormRef,css:!p&&{paddingLeft:"54px",paddingRight:"64px"},updateDraftSettings:this.updateDraftSettings,getInitialEnableMarkdown:function(e){return n.setState({markdownEnabled:e})}})]})]}),"org"===l.questionType&&Object(d.b)(It,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),Object(d.b)(Gt.a,{title:"清除草稿",subtitle:o?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:g,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),O&&Object(d.b)(Ot,{show:O,onClose:function(){return n.setState({showInsertableVideoUploader:!1})},onZVideoSubmit:function(e){n.setState({showInsertableVideoUploader:!1}),n.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(e)))},onVideoSubmit:function(e){n.setState({showInsertableVideoUploader:!1}),n.editable.handleCommand("insert-video-card",e)}}),Object(d.b)(R.b,{className:"AnswerForm-MCNEditor",title:"编辑商品",onClose:function(){n.setState({mcnEditingGood:null})},children:Boolean(j)&&Object(d.b)(I.a,{className:"AnswerForm-MCNEditorIframe",src:Object(xt.a)({title:j.title,originTitle:j.originTitle,source:j.source,sourceId:j.sourceId,productTypeName:j.productTypeName}),onMessage:this.handleEditGGRCard})}),Object(d.b)(Vt,{onClose:function(){window.location.href="https://www.zhihu.com/question/".concat(l.id,"/answer/").concat(u.id)},shown:"slideshow"===c})]}),this.renderFooter()]})}}]),n}(y.Component);_l.propTypes={activeTabKey:j.a.string,question:j.a.object,isReediting:j.a.bool,defaultValue:j.a.string,getFormData:j.a.func,reporter:j.a.object},_l.defaultProps={isReediting:!1};var Ml={addDraft:Mt.b,updateDraft:Mt.lb,deleteDraft:Mt.j,showNotification:be.h,fillCurrentUserIfNeeded:Nt.f,updateSettingsDisclaimer:Rt.I,loadLabel:Pt.e,getUserProfitPermission:Dt.b,updateLinkCard:_t.b,fetchAllInviters:Mt.o,getBio:Mt.q,loadCreatorRightStatus:Et.c,updateMarkdownSettings:Mt.ob,getInteractText:function(e,t){return{API:{types:Lt.GET_INTERACT_TEXT,endpoint:"/".concat(e,"/").concat(t,"/segments")},FAILSAFE:!0}}};t.a=Object(S.compose)(Object(St.b)({init:!0,getScene:function(e){return{type:"answer",token:String(e.question.id)}}}),(function(e){var t=function(t){Object(l.a)(r,t);var n=ee(r);function r(){return Object(o.a)(this,r),n.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(d.b)(ne,{children:Object(d.b)(e,Object.assign({},this.props))})}}]),r}(y.Component);return $()(t,e)}),tt.c,Bl,x.withRouter,kt.a,Object(C.connect)((function(e,t){var n,r,a=e.entities,o=a.questions,i=a.drafts,c=void 0===i?{}:i,l=e.question,s=t.location.query.inviter,u=Object(Ut.b)(e),d=Object(Nt.b)(e),f=Object(Mt.d)(e,t.question.id),b=s&&(null==f||null===(n=f.find)||void 0===n?void 0:n.call(f,(function(e){return e.id===s}))),p=c["question_".concat(t.question.id)];return{campaign:u,question:o[t.question.id]||t.question,draft:p,currentUser:d,isPuQuestion:Boolean(l&&l.brand&&l.brand.isPuQuestion),disclaimers:l.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null,showUserProfitButton:e.userProfit.permission.visible,thankInviterInfo:null===(r=Object(Pt.c)(e,t.answer))||void 0===r?void 0:r.thankInviterInfo,allInviters:f,inviterQuery:s,inviterFromNotification:b,isOffice:Object(Bt.e)(e),creatorRightStatus:Object(Et.a)(e)}}),Ml),fe,Fo.e)(_l)},1576:function(e,t,n){"use strict";n.d(t,"a",(function(){return tn})),n.d(t,"b",(function(){return rn}));var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(0),u=n.n(s),d=n(3),f=n.n(d),b=n(13),p=n.n(b),h=n(51),m=n(968),v=n(1746),g=function(e){var t=e.className,n=void 0===t?"":t,r=e.extra,a=void 0===r?{}:r,o=a.ua,i=void 0===o?{}:o,c=a.isVip,l=void 0!==c&&c,s="https://www.zhihu.com/settings/filter";return u.a.createElement(h.b,{block:"KfeCollection-FeedBlockEntry"},u.a.createElement(h.a,{zaType:"Button",extra:{link:{url:s}},onClick:function(){l?Object(v.a)(s,i):m.a.show()},zaText:"设置屏蔽关键词",shouldTrackShow:!0},u.a.createElement("div",{className:p()("KfeCollection-FeedBlockEntry-root",n)},u.a.createElement("div",{className:"KfeCollection-FeedBlockEntry-title"},"设置屏蔽关键词"),u.a.createElement("img",{className:"KfeCollection-FeedBlockEntry-img",src:"https://pic3.zhimg.com/v2-e5f10c5bc3593ca097cb7bfc5502d9b9.png"}))))};g.propTypes={className:f.a.string,extra:f.a.shape({ua:f.a.object,isVip:f.a.bool}).isRequired};var O=g,j=n(911),y=n(21),w=n(20),C=n(25),x=n(433),k=n(33),S=n(134),A=n(1428),T=n(929),I=n(8);function R(e,t,n){return t&&n?function(t,r){var a=e.relationship,o=(a=void 0===a?{}:a).isAuthor,i={toggler:Object(l.b)(k.c,{preset:"plain",className:"OptionsButton",icon:j.a,"aria-label":"更多"}),reversed:!0,onOpen:function(){return function(e,t){C.a.trackEvent(e,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))}(t(),r)},menuClassName:"ItemOptions-selfMenu",itemClassName:"ItemOptions-selfMenuItem"};if(!o)return Object(I.e)(S.c,Object.assign(Object.assign({},i),{},{key:"options"}),n({itemClassName:"ItemOptions-selfMenuItem",getContainer:t}))}:null}var E=n(1843),N=n(35),B=n(1030),z=n.n(B),L=n(999),P=n(940),_=n(964),M=n(988),D=n(105),U=n(72),F=n.n(U),V=n(973),G=n(1274),q=n(1293),H=n(1038),W=n(965),K=n(1115),Z=n(65),Q=n(41),Y=n(1343),J=n(622);function X(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var $=function(e){var t=e.commentsShown,n=void 0!==t&&t,r=e.onCommentButtonClick,a=void 0===r?F.a:r,o=e.eduSection,i=e.author,c=e.renderOptions,u=o.commentCount,d=o.isLiked,f=o.id,b=o.voting,p=o.voteCount,h=o.title,m=o.type,v=o.routeUrl,g=Object(Q.p)(i),O=Object(Z.p)(),j=Object(s.useState)(!1),w=X(N.a,j,2),C=w[0],x=w[1],k=Object(s.useCallback)((function(){x(!0)}),[]),S=Object(s.useCallback)((function(){x(!1)}),[]),A=Object(y.useDispatch)(),T=Object(D.a)((function(e){A(Object(J.b)(f,e))})),I=Object(D.a)((function(e,t){A(Object(J.c)(f,e,t))}));return Object(l.c)(l.a,{children:[Object(l.b)(q.a,{renderChildren:function(e){return[{name:e.Vote,component:Object(l.b)(G.c,{defaultStatus:Object(Y.a)(b),defaultVoteUpCount:p,onChange:I})},{name:e.Comment,component:Object(l.b)(V.a,{onClick:a,commentsShown:n,count:u,positionStatus:"normal"})},{name:e.Share,component:Object(l.b)(W.a,{id:f,type:m,url:v,title:h,authorName:i.name,css:{marginLeft:"24px"}})},{name:e.Favlist,component:Object(l.b)(K.a,{onClick:k,label:"收藏",showIcon:!O},"favlist")},{name:e.Like,component:Object(l.b)(G.b,{currentIsLiked:Boolean(d),css:{marginLeft:"24px"},onClick:T})},{name:e.Unknown,component:g?null:c()}]}}),Object(l.b)(H.a,{id:f,type:"edu_section",shown:C,onClose:S,zaEnabled:!0})]})};$.defaultProps={renderOptions:function(){return null}};var ee=$,te=n(1023),ne=n(435),re=n(887),ae=n(59),oe=n(937),ie=n(39),ce=n(1036),le=function(e){var t,n;return(null==e||null===(t=e.thumbnailExtraInfo)||void 0===t?void 0:t.videoId)||(null==e||null===(n=e.video)||void 0===n?void 0:n.videoId)},se=n(153),ue=n(2943),de=n(1011),fe=function(e){var t=e.className,n=e.imgSrc,r=e.href,a=e.title,o=e.children,i=e.imgStyle,c=void 0===i?{}:i,s=e.zaBlockText,u=void 0===s?"":s;return Object(l.b)(ne.b,{href:r,shouldTrackShow:!0,zaType:"Card",zaAction:"OpenUrl",view:{elementLocation:{block:{blockText:u}}},extra:{link:{url:r}},target:"_blank",children:Object(l.c)(ae.Flex,{height:"72px",className:t,bg:"GBK10A",p:"0 20px 0 16px",alignItems:"center",justifyContent:"space-between",children:[Object(l.c)(ae.Flex,{children:[n&&Object(l.b)(ae.Image,{mr:"16px",src:n,css:Object.assign({width:"64px",height:"40px",borderRadius:"4px",objectFit:"cover"},c)}),Object(l.c)(ae.Box,{children:[Object(l.b)(ae.Text,{fontWeight:500,fontSize:"15px",lineHeight:"18px",mb:"4px",color:"GBK02A",maxWidth:"400px",css:Object(de.a)(1),children:a}),Object(l.b)(ae.Text,{fontSize:"13px",lineHeight:"18px",color:"GBK06A",children:o})]})]}),Object(l.b)(ue.b,{fill:"#999999"})]})})},be=function(e){var t=e.eduSection,n=t.routeUrl,r=t.playCount,a=t.courseNum,o=t.courseTitle,i=t.courseImageInfo,c=(i=void 0===i?{}:i).url,s=void 0===c?"":c;return Object(l.c)(fe,{imgSrc:s,href:n,title:"来自视频课：".concat(o),zaBlockText:"视频课卡片",children:[a?"共 ".concat(a," 集"):""," ",a&&r?"·":""," ",r?"".concat(Object(se.cnNiceNumber)(r),"次学习"):""]})},pe=function(e){var t=e.eduSection,n=void 0===t?{}:t,r=e.author,a=e.expanded,o=e.alwaysShowVolumeButton,i=e.videoRef,c=n.title,u=n.routeUrl,d=n.id,f=n.attachedInfoBytes,b=le(n),p=Object(s.useRef)(),h=Object(re.a)(p,i);return Object(ce.a)({videoId:b,iframeRef:p}),Object(l.c)(T.e,{className:"EduSectionItem",data:n,title:Object(l.b)(l.a,{children:Object(l.b)(ne.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(l.b)("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:c})})}),link:u,lastreadTouchable:!0,"data-zop":JSON.stringify({authorName:null==r?void 0:r.name,itemId:d,title:c,type:"edu_section"}),children:[Object(l.c)(ae.Box,{my:"16px",children:[Object(l.b)("div",{className:"EduSectionItem-video",css:{margin:"0px"},children:Object(l.b)(te.a,{ref:h,className:"EduSectionItem-player",type:"video",src:"https://".concat(ie.a.videoHost,"/video/").concat(b,"?").concat(new URLSearchParams([["itemId",d],["itemType","edu_section"]]).toString()),iframeProps:{allowFullScreen:!0},griffithProps:{alwaysShowVolumeButton:o},zaProps:{type:"EduSection",token:n.id,attachedInfo:f}})}),a&&Object(l.b)(be,{eduSection:n})]}),a&&Object(l.b)(oe.a,{preset:"plain",author:r,userLinkV2:!0},"authorInfo")]})},he=n(1737);function me(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ve(e){var t=e.eduSection,n=e.eduSection,r=n.id,a=n.description,o=void 0===a?"":a,i=n.author,c=e.onToggleExpand,u=e.renderOptions,d=e.truncateDisabled,f=e.limit,b=Object(y.useSelector)((function(e){return z()(i)?e.entities.users[i]:i})),p=Object(s.useState)(!1),h=me(N.a,p,2),m=h[0],v=h[1],g=Object(s.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),O=me(N.a,g,2),j=O[0],w=O[1],C=function(e){v(e),c&&c(e)};return Object(l.c)("div",{children:[Object(l.b)(he.a,{eduSection:t,renderContent:function(){return Object(l.b)(pe,{eduSection:t,author:b,expanded:m})},renderActions:function(){return Object(l.b)(_.b,Object.assign(Object.assign({excerpt:Object(L.c)(o,200),html:o,cover:null,hasVideo:!1},f?{limit:f}:{}),{},{truncateDisabled:d,allowCollapseWithEmptyExcerpt:!0,expanded:m,onToggleExpend:C,data:Object.assign(Object.assign({},t),{},{id:r}),children:Object(l.b)(ee,{className:"EduSectionItem-toolbar",eduSection:t,author:b,commentsShown:j.commentsShown,onCommentButtonClick:function(e,t){return w(t)},renderOptions:u})}))}}),Object(l.b)(P.a,{className:"EduSectionItem-comment",containerClassName:"EduSectionItem-commentContainer",parent:t,shown:j.commentsShown,commentPattern:j.commentPattern,autoFocus:j.autoFocus,onClose:function(){return w(Object.assign(Object.assign({},j),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})}ve.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var ge=Object(w.compose)(Object(M.a)((function(e){var t=e.eduSection;return{content:{type:"EduSection",id:String(t.id)},extra:{mediaInfo:{videoInfo:{videoId:le(t)}}}}})))(ve),Oe=n(1344),je=n(143),ye=n(1273),we=n(1538);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var xe=function(e){Object(o.a)(n,e);var t=Ce(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.liveCourse,a=t.liveCourse,o=a.id,i=a.type,c=a.subject,s=a.courseMemberCount,u=a.liveCount,d=a.price,f=a.promotionPrice,b=a.headImageMobile,p=a.likedNum,h=a.isLiked,m=a.description,v=a.speakers,g=void 0===v?[]:v,O=t.lastreadTouchable,j=t.renderOptions,y=t.zaIds.options,w="/lives/courses/".concat(o);if(n!==T.c.interactive)return Object(l.b)(T.e,{data:r,link:w,title:Object(l.b)("a",{href:w,target:"_blank",rel:"noopener noreferrer",children:c})});Boolean(g.length)&&"".concat(g[0].member.name).concat(g.length>1?"等":"","的私家课 · ").concat(u," 节课");var C={id:o,type:i};return Object(l.c)("div",{className:"LiveCourseItem",children:[b&&Object(l.b)("a",{className:"LiveCourseItem-cover",href:w,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:Object(je.imgUrl)(b,"640w"),srcSet:"".concat(Object(je.imgUrl)(b,"r")," 2x"),alt:c})}),Object(l.b)(T.e,{data:r,link:w,title:Object(l.b)("a",{href:w,target:"_blank",rel:"noopener noreferrer",children:c}),lastreadTouchable:O,children:Object(l.c)(_.b,{excerpt:"",limit:60,limitWithImage:60,html:m||"",data:r,extra:Object(l.c)(T.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"参与人数："}),Object(se.formatNumber)(s)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"课程节数："}),Object(se.formatNumber)(u)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"特价："}),"number"==typeof f?Object(l.c)("span",{className:"LiveItem-price",children:[Object(we.a)(f),Object(l.b)("del",{children:Object(we.a)(d)})]}):Object(we.a)(d)]})]}),children:[Object(l.b)(ye.a,Object.assign(Object.assign({},C),{},{liked:h,count:p,icon:"thank"})),Object(l.b)(W.a,Object.assign(Object.assign({},C),{},{url:w,title:c})),j&&j((function(){return e.contentItem}),y)]})})]})}}]),n}(s.Component);xe.propTypes={preset:f.a.oneOf(Object.values(T.c)),renderOptions:f.a.func,zaIds:f.a.object},xe.defaultProps={zaIds:{}};var ke=Object(x.b)((function(e){var t=e.liveCourse,n=e.trackCardShow,r=void 0===n||n;return{module:"LiveCourseItem",card:{content:{type:"LiveCourse",id:t.id}},trackCardShow:r}}))(xe),Se=n(1830),Ae=n(1416),Te=n(1423),Ie=n(1847),Re=n(972),Ee=n(1270),Ne=n(1543),Be=n(1291),ze=n(1254);n(1255);function Le(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Pe(e){var t=e.target,n=e.target,r=n.id,a=n.attachment.url,o=n.description,i=n.title,c=n.author,u=n.thumbnailExtraInfo,d=n.isReviewing,f=n.isUpdateReviewing,b=e.lastreadTouchable,p=e.preset,h=void 0===p?"primary":p,m=e.onToggleExpand,v=e.renderOptions,g=e.renderActionButtons,O=e.toggleUninterest,j=u||{},w=j.videoId,C=j.url,x=Object(s.useRef)();Object(ce.a)({videoId:w,iframeRef:x});var k=Object(y.useSelector)((function(e){return z()(c)?e.entities.users[c]:c})),S=Object(Q.p)(k),A=Object(s.useState)(!1),I=Le(N.a,A,2),R=I[0],E=I[1],B=Object(s.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),M=Le(N.a,B,2),D=M[0],U=M[1],F=Object(ze.a)(h,R,k),V=Le(N.a,F,1)[0];return Object(l.b)(Re.a,{data:t,children:Object(l.c)(T.e,{className:"ZVideoItem",data:t,title:Object(l.b)("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:i}),link:a,meta:V,lastreadTouchable:b,"data-zop":JSON.stringify({authorName:null==k?void 0:k.name,itemId:r,title:i,type:"zvideo"}),children:[S&&(d||f)&&Object(l.b)(Be.a,{}),R&&w&&Object(l.b)("div",{className:"ZVideoItem-video",children:Object(l.b)(te.a,{className:"ZVideoItem-player",type:"video",ref:x,src:"https://".concat(ie.a.videoHost,"/video/").concat(w,"?").concat(new URLSearchParams([["itemId",r],["itemType","zvideo"]]).toString()),iframeProps:{allowFullScreen:!0},zaProps:{token:r}})}),R&&Object(l.b)(Ne.a,{}),Object(l.b)(_.b,{excerpt:Object(L.c)(o),html:o,cover:C,hasVideo:!0,truncateDisabled:!0,allowCollapseWithEmptyExcerpt:!0,expanded:R,onToggleExpend:function(e){E(e),m&&m(e)},children:Object(l.b)(Ee.a,{className:"ZVideoItem-toolbar",zvideo:t,author:k,commentsShown:D.commentsShown,onCommentButtonClick:function(e,t){return U(t)},renderOptions:v,renderActionButtons:g,toggleUninterest:O})}),Object(l.b)(P.a,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:t,shown:D.commentsShown,commentPattern:D.commentPattern,autoFocus:D.autoFocus,onClose:function(){return U(Object.assign(Object.assign({},D),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}Pe.defaultProps={renderOptions:function(){return[null]}};var _e=Object(w.compose)(Object(M.a)((function(e){var t,n=e.target;return{content:{type:"Answer",token:String(n.id)},extra:{mediaInfo:{videoInfo:{videoId:null===(t=n.thumbnailExtraInfo)||void 0===t?void 0:t.videoId}}}}})))(Pe),Me=n(1609),De=n(1019),Ue=n(1816),Fe=n(1183),Ve=n(1362);function Ge(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function qe(e){var t,n,r=e.zvideo,a=e.zvideo,o=a.id,i=a.description,c=void 0===i?"":i,u=a.title,d=a.author,f=a.isVisible,b=a.creationRelationship,p=a.attachedInfoBytes,h=e.lastreadTouchable,m=e.preset,v=void 0===m?"primary":m,g=e.onToggleExpand,O=e.renderOptions,j=e.couldShowHiddenSign,w=e.renderActionButtons,C=e.shouldAlwaysShowPlayer,x=e.truncateDisabled,k=e.limit,S=e.showMetaAfterPlayer;r.thumbnailExtraInfo&&(t=r.thumbnailExtraInfo.videoId,n=r.thumbnailExtraInfo.url),r.video&&(t=r.video.videoId,n=r.video.thumbnail);var A=Object(y.useSelector)((function(e){return z()(d)?e.entities.users[d]:d})),I=Object(Q.p)(A),R=Object(s.useState)(!1),E=Ge(N.a,R,2),B=E[0],M=E[1],D=Object(s.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),U=Ge(N.a,D,2),F=U[0],V=U[1],G=Object(ze.a)(v,B,A,b),q=Ge(N.a,G,1)[0],H=I&&!f&&j,W="https://".concat(ie.a.wwwHost,"/zvideo/").concat(o),K=t&&(C||B),Z=Object(De.isCoCreateRelation)(b),Y=Object(Ve.a)({expanded:B,isVideoCoverFullSize:C&&S,renderFlag:Z}),J=Z?140:200;return Object(l.b)(Re.a,{data:r,children:Object(l.c)(T.e,{className:"ZVideoItem",data:r,title:Object(l.c)(l.a,{children:[H&&Object(l.c)("span",{className:"ZVideoItem-hiddenSign",children:[Object(l.b)(Me.a,{}),"隐藏"]}),Object(l.b)(ne.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(l.b)("a",{href:W,target:"_blank",rel:"noopener noreferrer",children:u})})]}),link:W,meta:S?null:q,lastreadTouchable:h,"data-zop":JSON.stringify({authorName:null==A?void 0:A.name,itemId:o,title:u,type:"zvideo"}),children:[I&&(r.isReviewing||r.isUpdateReviewing)&&Object(l.b)(Be.a,{}),K&&Object(l.c)(ae.Box,{my:"16px",children:[Object(l.b)("div",{className:"ZVideoItem-video",css:{margin:"0px"},children:Object(l.b)(Ue.a,{itemId:o,itemType:"zvideo",videoId:t,zaProps:{type:"Zvideo",token:r.id,attachedInfo:p}})}),B&&Object(l.b)(De.CreationRelationshipBar,{id:o,creationRelationship:b})]}),S&&q,Object(l.b)(_.b,Object.assign(Object.assign({excerpt:Object(L.c)(c,J),html:c,cover:C?null:n,hasVideo:!C},k?{limit:k}:{}),{},{truncateDisabled:x,allowCollapseWithEmptyExcerpt:!0,expanded:B,onToggleExpend:function(e){M(e),g&&g(e)},data:Object.assign(Object.assign({},r),{},{id:o}),prefix:Y,children:Object(l.b)(Ee.a,{className:"ZVideoItem-toolbar",zvideo:r,author:A,commentsShown:F.commentsShown,onCommentButtonClick:function(e,t){return V(t)},renderOptions:O,renderActionButtons:w})})),Object(l.b)(P.a,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:r,shown:F.commentsShown,commentPattern:F.commentPattern,autoFocus:F.autoFocus,onClose:function(){return V(Object.assign(Object.assign({},F),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}qe.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var He=Object(w.compose)(Object(M.a)((function(e){var t=e.zvideo;return{content:{type:"Zvideo",token:String(t.id)},extra:{mediaInfo:{videoInfo:{videoId:t.id}}}}})),Object(y.connect)((function(e,t){return Object.assign(Object.assign({},t),{},{zvideo:Object.assign(Object.assign({},t.zvideo),{},{creationRelationship:Object(Fe.c)(t.zvideo)})})})))(qe),We=n(32),Ke=n(198),Ze=n(215),Qe=n(1077),Ye=n(154);function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var Xe=function(e){Object(o.a)(n,e);var t=Je(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.eventcard,r=n.linkTitle,a=n.linkUrl,o=n.title,i=n.eventUrl,c=n.extraInfo,s=n.content,u=n.bannerUrl,d=t.eventcard,f=t.lastreadTouchable,b=t.renderOptions,p=t.zaIds.options;return Object(l.c)("div",{className:"EventcardItem",children:[u&&Object(l.b)("a",{className:"EventcardItem-cover",href:i,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:u,srcSet:"".concat(u," 2x"),alt:o})}),Object(l.c)(T.e,{data:d,link:i,onRef:function(t){e.contentItem=t},title:Object(l.b)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:o}),lastreadTouchable:f,children:[Object(l.b)("div",{className:"EventcardItem-content",children:s}),Object(l.c)(T.a,{children:[Boolean(r)&&Object(l.b)(Ye.a,{a:!0,color:"blue",to:a,children:r}),Object(l.b)("span",{children:c}),b&&b((function(){return e.contentItem}),p)]})]})]})}}]),n}(s.Component);Xe.propTypes={preset:f.a.oneOf(Object.values(T.c)),zaIds:f.a.object,renderOptions:f.a.func};var $e=Object(x.b)((function(e){var t=e.trackCardShow;return{module:"EventItem",trackCardShow:void 0===t||t}}))(Xe),et=n(1043),tt=n(156),nt=n(173),rt=n(1185),at=n(930),ot=n(1586),it=n(1363),ct=n(52),lt=Object.assign;var st=function(e){return u.a.createElement(ct.a,lt({width:"40",height:"40",viewBox:"0 0 40 40"},e),u.a.createElement("path",{d:"M20 12c6.904 0 12.5 5.596 12.5 12.5S26.904 37 20 37c-6.903 0-12.5-5.596-12.5-12.5S13.097 12 20 12zm0 16.826l3.222 2.061c.76.486 1.218.165 1.016-.72l-.886-3.892 2.867-2.572c.677-.608.494-1.165-.413-1.241l-3.734-.314-1.467-3.693c-.334-.841-.876-.841-1.21 0l-1.467 3.693-3.734.314c-.917.077-1.092.631-.413 1.24l2.867 2.573-.886 3.891c-.202.886.253 1.209 1.016.721L20 28.826zM29.525 3a1 1 0 01.79 1.612l-4.336 5.6a1 1 0 01-.79.388h-.446a1 1 0 01-.853-.479l-3.792-6.208A.6.6 0 0120.61 3h8.915zm-8.692 6.043a1 1 0 01-.83 1.557h-5.468a1 1 0 01-.81-.413l-4.06-5.6A1 1 0 0110.476 3h5.772a1 1 0 01.83.443l3.756 5.6z"}))},ut=function(e){return"FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"===e?{labelInfo:{foregroundColor:{alpha:1,group:"GYL02A"},backgroundColor:{alpha:.08,group:"GYL02A"},text:"专业",type:"recognition"},extra:{customIcon:st,customIconClassName:"FeedSource-recognizeIcon"}}:null},dt=n(2),ft=n(1341),bt=n(1037),pt=n(1851),ht=/({})/,mt={people:{Component:at.a,type:"user"},topic:{Component:bt.a},column:{Component:ft.a},roundtable:{Component:pt.a}},vt=function(e){var t=e.actors,n=e.template,r=t.slice(0,5);return Object(l.b)(et.CJKSpace,{children:n.split(ht).map((function(e){return"{}"===e?r.map((function(e,t){if(!mt[e.type])return Object(l.c)("span",{children:[e.title,t<r.length-1&&"、"]},e.id);var n=mt[e.type],a=n.Component,o=n.type,i=void 0===o?e.type:o,c=Object.assign(Object(dt.a)({},i,e),"people"===e.type&&{noBadge:!0});return Object(l.c)("span",{children:[Object(l.b)(a,Object.assign(Object.assign({},c),{},{children:e.name||e.title})),t<r.length-1&&"、"]},e.id)})):e}))})},gt=/{}/,Ot=["pin","answer","article"],jt=["FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"],yt=Object(nt.a)((function(e){var t=e.feed,n=(e.currentUser,t.actionTextTpl),r=void 0===n?"":n,a=t.createdTime,o=t.actors,i=void 0===o?[]:o,c=t.verb,u=void 0===c?"":c,d=u.includes("MEMBER"),f=Object(s.useMemo)((function(){return d&&1e3*a<=Date.now()&&Object(tt.toRelativeString)(a)}),[d,a]);if(Object(it.b)(t)){var b=i[0],p=r.replace(gt,"");return Object(l.b)("div",{className:"FeedSource",children:Object(l.c)("div",{className:"FeedSource-firstline",children:[Object(l.c)(et.CJKSpace,{children:[Object(l.b)(at.a,{user:b,noHoverCard:!1,badgeProps:{css:{margin:"0 .3em"}},children:b.name}),p]}),f&&[Object(l.b)(rt.a,{},"bull"),f]]})})}return Object(l.c)("div",{className:"FeedSource",children:[Object(l.c)("div",{className:"FeedSource-firstline",children:[Object(l.b)(vt,{actors:i,template:r}),jt.includes(u)&&Object(l.b)(ot.a,Object.assign(Object.assign({},ut(u)),{},{className:"FeedSource-labelIcon"})),f&&[Object(l.b)(rt.a,{},"bull"),f]]}),t.target&&Ot.includes(t.target.type)&&Object(l.b)(oe.a,{className:"FeedSource-byline",author:t.target.author,preset:"plain",extra:!1})]})})),wt=n(1123),Ct=n(469);function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function kt(e){return e.closest(".TopstoryItem").querySelector(".ContentItem")}var St=function(e){Object(o.a)(n,e);var t=xt(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleToggleUninterest=function(){var t=e.props,n=t.zaIgnoreId,r=t.getContainer,a=e.props,o=a.item,i=o.id,c=o.type,l=o.ad,s=o.isUninterest,u=a.toggleUninterest,d=a.type,f="feed_advert"===c;f&&Object(Ke.c)(l.closeTrack);var b=f?kt(e.el):r();return C.a.trackEvent(b,Object.assign({action:s?"UnIgnore":"Ignore",element:"Button",is_intent:!0},n&&{id:n})),u(i,d)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.ua,r=t.isVip,a=Object(l.b)(h.a,{as:S.b,zaAction:"Ignore",zaType:"Button",className:this.props.itemClassName,onClick:this.handleToggleUninterest,onRef:function(t){e.el=t},children:"不感兴趣"}),o=Object(l.b)(S.b,{className:"TopstoryItem-menuItem",onClick:this.props.authRequired((function(){})),children:Object(l.b)(O,{extra:{ua:n,isVip:r}})});return"feed_advert"===this.props.item.type?Object(l.c)(S.c,{className:"TopstoryItem-rightButton",toggler:Object(l.c)(k.c,{onRef:function(t){e.el=t},className:"TopstoryItem-advertButton",preset:"plain",children:["广告",Object(l.b)(wt.a,{center:!0})]}),children:[Object(l.b)(S.b,{className:"TopstoryItem-menuItem",onClick:this.handleToggleUninterest,children:"不感兴趣"}),Object(l.b)(S.b,{className:"TopstoryItem-menuItem",tag:"a",target:"_blank",href:"/promotion-intro",children:"知乎广告介绍"}),o]}):Object(l.c)(s.Fragment,{children:[a,o]})}}]),n}(s.Component);St.propTypes={zaIgnoreId:f.a.number,getContainer:f.a.func};var At=Object(y.connect)(null,{toggleUninterest:Ct.n})(St),Tt=n(2276),It=n(2106);function Rt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Et=Object(w.compose)(Object(M.a)((function(e){var t=e.question;return{content:{type:"Question",token:String(t.id)},block:"写回答卡片"}})))((function(e){var t=e.question,n=e.lastreadTouchable,r=e.renderOptions,a=e.zaInfos,o=t.id,i=t.title,c=t.content,u=t.excerpt,d=t.viewCount,f=t.answerCount,b=t.recReason,p=a.options,h=a.title,m=a.expand,v=Object(s.useState)(!0),g=Rt(N.a,v,2),O=g[0],j=g[1],y=Object(s.useState)(null),w=Rt(N.a,y,2),C=w[0],x=w[1];return Object(l.c)("div",{className:"TopstoryQuestionAskItem",children:[Object(l.c)("div",{className:"TopstoryQuestionAskItem-hint",children:[Object(l.b)(Tt.a,{center:!0}),b]}),Object(l.b)(T.e,{data:t,title:Object(l.b)("a",Object.assign(Object.assign({href:"/question/".concat(o),target:"_blank",rel:"noopener noreferrer"},h&&{"data-za-detail-view-id":h}),{},{children:i})),lastreadTouchable:n,onRef:x,children:Object(l.c)(_.b,{html:c,excerpt:u,limit:60,limitWithImage:60,zaIds:{expand:m},onToggleExpend:function(){return j(!O)},children:[Object(l.c)(Ye.a,{className:"TopstoryQuestionAskItem-writeAnswerButton",preset:"outline",color:"blue",to:"/question/".concat(o,"?write"),target:"_blank","data-za-detail-view-id":5121,"data-za-detail-view-action":"Answer",children:[Object(l.b)(It.a,{}),"写回答"]}),Object(l.c)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[Object(se.formatNumber)(d)," 次浏览"]}),Object(l.c)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[Object(se.formatNumber)(f)," 个回答"]}),r&&r((function(){return C}),p)]})})]})})),Nt=n(1060),Bt=n(1584),zt=n(4),Lt=n(135),Pt=n.n(Lt),_t=n(1288);function Mt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Dt=Pt()((function(e){return e.findIndex((function(e){return"annotation"===e.name}))}),(function(e){return e.map((function(e){return e.name})).join("-")})),Ut=Object(l.b)(_t.a,{annotationDetail:{showOuter:!0,reasonDescription:"品牌提问"}},"BrandQuestion");var Ft=[function(e,t){var n=e.componentList,r=t.item.target,a=t.tabType;if(!Boolean("recommend"===a&&r.question&&"commercial"===r.question.questionType))return e;var o=Dt(n);if(n[o].component){var i=Mt(zt.a,n);return i[o]={name:"annotation",component:Ut},Object.assign(Object.assign({},e),{},{componentList:i})}return e}],Vt=n(5),Gt=n(455);var qt=function(e){var t=e.node,n=e.data,r=void 0===n?{}:n;return Object(s.useEffect)((function(){if(t&&r){var e=Object(Vt.camelizeKeys)(r).viewXTracks,n=void 0===e?[]:e;Object(Gt.g)(t,n)}}),[t,r]),null},Ht=n(926),Wt=n(83),Kt=n(1184),Zt=n(158),Qt=function(e){return null==e?void 0:e.forEach((function(e){return Object(Wt.e)(e,{})}))};function Yt(e){var t=e.promotionExtra,n=e.children,r=Object(s.useRef)(null),a=Object(s.useMemo)((function(){return Object(Kt.a)(t)}),[t]);Object(s.useEffect)((function(){a&&(Qt(a.impression_tracks),Object(Ht.onViewedOnce)(r.current,(function(){return Qt(a.view_tracks)})))}),[a]);var o=Object(s.useCallback)((function(){a&&Qt(a.click_tracks)}),[a]);return Object(l.c)("div",{ref:r,children:[Object(l.b)(Zt.a,{children:Object(l.b)(qt,{data:a,node:r.current})}),"function"==typeof n?n(o):n]})}Yt.propTypes={promotionExtra:f.a.string.isRequired,children:f.a.oneOfType([f.a.func,f.a.any]).isRequired};function Jt(e){var t,n=e.item,r=e.tabType,a=e.isFollowTab,o=e.preset,i=e.hasAuthorBeforeContent,c=e.handleExpand,u=e.renderIgnoreButton,d=n.actionTextTpl,f=n.actors,b=n.target,p=n.promotionExtra,h=Object(s.useMemo)((function(){return function(e){var t;if(2===(null===(t=e.attachment)||void 0===t?void 0:t.type)){var n=e.attachment,r=n.parentTitle,a=n.isComplete,o=n.parentContentToken,i=n.parentPlayCount,c=n.parentVoteupCount,l=n.splitStart,s={videoId:e.thumbnailExtraInfo.videoId,zvideoId:o,title:r,playCount:i,voteupCount:c,isComplete:a,startTime:l};return Object.assign(Object.assign({},e),{},{videoAnswerData:s})}return e}(b)}),[b]),m="recommend"===r,v=Object(s.useMemo)((function(){return null==f?void 0:f.find((function(e){return"people"===e.type}))}),[f]),g=Object(l.b)(Nt.a,Object.assign(Object.assign({answer:h},i&&{formatContent:it.a}),{},{action:a&&"{}赞同了回答"===d&&"voted",actor:v,preset:o,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,renderExtraOptions:u,onToggleExpand:c,zaInfos:Qe.c,renderActionButtons:(t={tabType:r,item:n},function(e){var n=Ft.reduce((function(e,n){return n(e,t)}),e);return Object(Bt.b)(n)}),hideCommercialInviteLabel:!0,shouldAlwaysShowPlayer:m,isRecommend:m}));return p?Object(l.b)(Yt,{promotionExtra:p,children:function(e){return Object(s.cloneElement)(g,{trackPromotionClick:e})}}):g}Jt.propTypes={item:f.a.object.isRequired,tabType:f.a.oneOf(["recommend","follow"]),isFollowTab:f.a.bool,preset:f.a.string,hasAuthorBeforeContent:f.a.bool,handleExpand:f.a.func,renderIgnoreButton:f.a.func};var Xt=n(1199);function $t(e){var t=e.item,n=e.isFollowTab,r=e.preset,a=e.hasAuthorBeforeContent,o=e.handleExpand,i=e.renderOptions,c=t.actionTextTpl,u=t.actors,d=t.target,f=t.promotionExtra,b=Object(s.useMemo)((function(){return null==u?void 0:u.find((function(e){return"people"===e.type}))}),[u]),p=Object(l.b)(Xt.a,Object.assign(Object.assign({article:d},a&&{formatContent:it.a}),{},{action:n&&("{}赞了文章"===c||"{}赞同了文章"===c)&&"voted",actor:b,preset:r,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c,onToggleExpand:o,renderOptions:i}));return f?Object(l.b)(Yt,{promotionExtra:f,children:function(e){return Object(s.cloneElement)(p,{trackPromotionClick:e})}}):p}function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}$t.propTypes={item:f.a.object.isRequired,isFollowTab:f.a.bool,preset:f.a.string,hasAuthorBeforeContent:f.a.bool,handleExpand:f.a.func,renderOptions:f.a.func};var tn={question:"question",answer:"answer",question_ask:"question_ask",article:"article",column:"column",collection:"collection",roundtable:"roundtable",live_course:"live_course",live:"live",ebook:"ebook",pin:"pin",eventcard:"eventcard",zvideo:"zvideo",edu_section:"edu_section"},nn=function(e){Object(o.a)(n,e);var t=en(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={preset:"special-plain",hasAuthorBeforeContent:"recommend"===e.props.type,limitProps:{}},e.handleExpand=function(t){var n=e.props.type;e.setState({preset:"recommend"===n&&t?"plain":"special-plain",hasAuthorBeforeContent:"recommend"===n&&!t})},e.handleToggleUninterest=function(t){var n=e.props,r=n.item.id,a=n.toggleUninterest,o=n.type;return C.a.trackEvent(t.target,{id:Qe.c.ignore,action:"Ignore",element:"Button",is_intent:!0}),a(r,o)},e.renderZVideoOptions=function(t,n){return[Object(l.c)(S.c,{toggler:Object(l.b)(k.c,{preset:"plain",className:"OptionsButton",icon:j.a,"aria-label":"更多"}),children:[Object(l.b)(h.a,{zaType:"Button",zaAction:"Ignore",as:S.b,className:"ZVideoToolbar-menuItem",onClick:e.handleToggleUninterest,children:"不感兴趣"}),Object(l.b)(S.b,{className:"TopstoryItem-menuItem",onClick:e.props.authRequired((function(){})),children:Object(l.b)(O,{extra:{ua:t,isVip:n}})})]},"options")]},e.renderItem=function(t,n){var r,a=e.props,o=a.ua,i=a.currentUser,c=((null==i?void 0:i.vipInfo)||{}).isVip,s=t.target,u=t.actor,d=t.actionTextTpl,f=e.state,b=f.preset,p=f.hasAuthorBeforeContent,h="follow"===n,m="recommend"===n,v=m?function(r){return Object(l.b)(At,Object.assign({type:n,item:t,zaIgnoreId:Qe.c.ignore,ua:o,isVip:c,authRequired:e.props.authRequired},r))}:void 0,g=v?R(s,i,v):void 0;switch(s.type){case tn.question:return Object(l.b)(Te.a,{preset:T.c.interactive,question:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c,renderOptions:g});case tn.question_ask:return Object(l.b)(Et,{question:s,lastreadTouchable:!0,zaInfos:Qe.c,renderOptions:g});case tn.answer:return Object(l.b)(Jt,{item:t,tabType:n,isFollowTab:h,preset:b,hasAuthorBeforeContent:p,handleExpand:e.handleExpand,renderIgnoreButton:v});case tn.article:return Object(l.b)($t,{item:t,isFollowTab:h,preset:b,hasAuthorBeforeContent:p,handleExpand:e.handleExpand,renderOptions:g});case tn.column:return Object(l.b)(A.a,{preset:T.c.interactive,column:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c,renderOptions:g});case tn.collection:return Object(l.b)(Oe.a,{preset:T.c.interactive,favlist:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c,renderOptions:g});case tn.roundtable:return Object(l.b)(Ie.a,{preset:T.c.interactive,roundtable:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:Qe.c});case tn.live_course:return Object(l.b)(ke,{liveCourse:s,preset:T.c.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:g,zaIds:Qe.c});case tn.live:return Object(l.b)(Se.a,{live:s,preset:T.c.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:g,zaIds:Qe.c});case tn.ebook:return Object(l.b)(E.a,{ebook:s,preset:T.c.interactive,trackCardShow:!1,lastreadTouchable:!0});case tn.pin:return Object(l.b)(Ae.a,{action:"{}赞了想法"===d&&"voted",actor:u,pin:s,preset:"plain",trackCardShow:!1,lastreadTouchable:!0});case tn.zvideo:return 1===(null===(r=s.attachment)||void 0===r?void 0:r.type)?Object(l.b)(_e,{target:s,preset:b,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(o,c)},lastreadTouchable:!0}):Object(l.b)(He,{zvideo:s,preset:b,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(o,c)},lastreadTouchable:!0,shouldAlwaysShowPlayer:m,showMetaAfterPlayer:m});case tn.eventcard:return Object(l.b)($e,{trackCardShow:!1,eventcard:s,lastreadTouchable:!0,renderOptions:g,zaIds:Qe.c});case tn.edu_section:return Object(l.b)(ge,{eduSection:s,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(o,c)},lastreadTouchable:!0});default:return null}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.type,r=e.className;return t.target.isDelete?null:Object(l.c)("div",{className:p()("Feed",r),children:["follow"===n&&Object(l.b)(yt,{feed:t}),this.renderItem(t,n)]})}}]),n}(s.PureComponent);nn.propTypes={item:f.a.object.isRequired,type:f.a.oneOf(["recommend","follow"]),className:f.a.string};var rn=Object(w.compose)(Ze.a,Object(y.connect)((function(e){return{ua:e.env.userAgent}})),Object(x.b)((function(e){var t=e.item,n=t.id,r=t.attachedInfo,a=t.target,o=t.target,i=o.id,c=o.type,l=t.dataZaIndex;return{module:"FeedItem",index:String(void 0===l?0:l),isAd:!1,attachedInfoBytes:r,card:{card_type:"Feed",feed_id:n,has_image:Boolean(a.thumbnailExtraInfo&&"image"===a.thumbnailExtraInfo.type),has_video:Boolean(a.thumbnailExtraInfo&&"video"===a.thumbnailExtraInfo.type),content:Object.assign(Object.assign({type:We.db[c]},Object(Ke.a)(c,i)),{},{video_id:a.thumbnailExtraInfo&&a.thumbnailExtraInfo.videoId})},view:{id:2743},trackCardShow:!0}})))(nn)},1584:function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"a",(function(){return N}));var r=n(1253),a=n(1),o=n(15),i=n(16),c=n(18),l=n(19),s=n(9),u=n(4),d=n(0),f=n(20),b=n(3),p=n.n(b),h=n(21),m=n(71),v=n.n(m),g=n(25),O=n(51),j=n(871),y=n(33),w=(n(134),n(92)),C=n(221),x=n(215),k=n(439),S=n(32),A=n(1749);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var I={answer:p.a.object.isRequired,renderThankButtonText:p.a.func,zaInfo:p.a.number},R=[].concat(function(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}(u.a,Object.keys(I)),["updateAnswerThank","dispatch","authRequired","isLogin","currentUser"]),E=function(e){Object(c.a)(n,e);var t=T(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).buttonRef=Object(d.createRef)(),e.handleUpdateThanked=e.props.authRequired((function(){var t=e.props,n=t.answer,r=n.id,a=n.relationship,o=(a=void 0===a?{}:a).isThanked,i=t.zVideoId,c=t.updateAnswerThank,l=t.zaInfo,s=t.answer,u=!o;g.a.trackEvent(e.buttonRef.current,Object.assign({action:u?"Thank":"UnThank",element:"Button"},l&&{id:l})),c(r,u,{zVideoId:i},s)}),S.ab.thank),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.renderThankButtonText,o=t.disabled,i=n.relationship,c=(i=void 0===i?{}:i).isThanked,l=v()(this.props,R),s=r(n);return Object(a.c)(a.a,{children:[Object(a.b)(k.c,{input:"l",action:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}),Object(a.b)(O.a,Object.assign({as:y.c,zaType:"Button",zaAction:c?"UnLike":"Like",zaText:!0,onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:j.a,label:s,disabled:o,"aria-live":"polite"},l))]})}}]),n}(d.Component);E.propTypes=I,E.defaultProps={renderThankButtonText:function(e){var t=e.relationship,n=(t=void 0===t?{}:t).isThanked,r=e.question.title;return Object(A.a)(r,S.P)?n?"取消祈祷":"祈祷":n?"取消喜欢":"喜欢"}};var N=Object(f.compose)(x.a,Object(h.connect)(null,{updateAnswerThank:w.G}),Object(C.a)(null))(E)},1586:function(e,t,n){"use strict";var r=n(2),a=n(1),o=n(13),i=n.n(o),c=n(2949),l=n(221),s=n(893),u=n(2951),d=n(2952),f=n(898),b=n(2953),p=n(2954),h=n(2955),m=n(2278),v=n(2956),g={online_roundtable:s.a,relevant:u.a,editor_recommendation:d.a,roundtable:s.a,special:f.a,weekly:b.a,daily:p.a,professional:h.a,zhizhi_plan_recommend:m.a,zhizhi_plan_edu_recommend:m.a,zhizhi_plan_baby_recommend:m.a,zhizhi_plan_acg_recommend:m.a,zhizhi_plan_outing_recommend:m.a,zhizhi_plan_rumour_deny:v.a,zhizhi_plan:m.a},O={alpha:1,group:"GYL02A"},j={alpha:.08,group:"GYL02A"},y={brand_special:c.a},w=Object.assign(Object.assign({},g),{},{COMMERCIAL_ICONS:y}),C=function(e){return"GBL07A"===(e||O).group?"commercial":"positive"},x=function(e){return"GBL07A"===(e||j).group?"commercial":"positive"},k=function(e){return"recognition"===e?"professional":e};t.a=Object(l.a)(null)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,o=void 0===n?{}:n,c=e.className;if(!t)return null;var l=t.type,s=t.text,u=t.foregroundColor,d=t.backgroundColor,f=o.customIcon,b=o.customIconClassName,p=C(u),h=x(d),m=f||w[k(l)];return m?Object(a.c)("span",{className:i()("Label-icon","Label-iconColor--".concat(p),Object(r.a)({},"Label-iconColor--".concat(h,"Background"),d),c),children:[Object(a.b)(m,{center:!0,className:i()("Label-iconImg",b)}),s]}):null}))},1596:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(86),i=n(18),c=n(19),l=n(9),s=n(1),u=n(0),d=n(3),f=n.n(d),b=n(25),p=n(235),h=n(926),m=n(937);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=v(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={expanded:!0},e.handleTitleClick=function(t){b.a.trackEvent(Object(o.a)(e),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(t)},e.renderHeader=function(){var t=e.props,n=t.title,r=t.url,a=t.author;return Object(s.c)("div",{className:"AbstractCard-header",children:[Object(s.c)("div",{className:"AbstractCard-desc",children:[Object(s.b)("span",{role:"button",tabIndex:0,className:"AbstractCard-title",onClick:function(){return e.handleTitleClick(r,n)},children:n}),Object(s.b)("span",{className:"AbstractCard-source",children:e.abstractSourceInfo})]}),Object(s.b)(m.a,{zaId:6120,className:"AbstractCard-author",author:a,preset:"plain"})]})},e.renderContent=function(){var t=e.props,n=t.content,r=t.member.name,a=t.theme;return Object(s.c)("div",{className:"AbstractCard-content",children:[Object(s.b)("div",{className:"AbstractCard-text AbstractCard-text--".concat(a),children:n}),Object(s.b)("div",{className:"AbstractCard-tip",children:Object(s.c)("span",{className:"AbstractCard-info",children:[r," 摘录于 ",e.createdFormat]})})]})},e}return Object(a.a)(n,[{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return Object(p.a)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}},{key:"componentDidMount",value:function(){Object(h.onViewedOnce)(this.node,(function(){b.a.trackCardShow(null,{id:6118})}))}},{key:"render",value:function(){var e=this;return Object(s.c)("div",{className:"AbstractCard",ref:function(t){e.node=t},children:[this.renderHeader(),this.renderContent()]})}}]),n}(u.Component);g.propTypes={title:f.a.string.isRequired,url:f.a.string.isRequired,author:f.a.object,member:f.a.object,content:f.a.string.isRequired,created:f.a.number,theme:f.a.string.isRequired};t.a=g},1609:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"EyeSlash24","data-old-api":"EyeSlash24"},e),{className:"ZDI ZDI--EyeSlash24"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M7.517 4.474c1.206-.453 2.608-.724 4.234-.724 6.036 0 8.834 3.715 9.985 6.161a5.255 5.255 0 01-.393 5.219 11.207 11.207 0 01-3.027 3.036.75.75 0 11-.835-1.245c.058-.04.115-.078.171-.118a9.704 9.704 0 002.447-2.511 3.755 3.755 0 00.28-3.742c-1.003-2.131-3.374-5.3-8.628-5.3-1.456 0-2.679.242-3.706.628a.75.75 0 11-.528-1.404zM5.498 6.382a.75.75 0 01-.07 1.059c-1.126.987-1.854 2.148-2.306 3.105a3.756 3.756 0 00.281 3.749c1.206 1.787 3.71 4.26 8.348 4.26 1.237 0 2.315-.175 3.253-.462a.75.75 0 11.438 1.435c-1.084.33-2.31.527-3.69.527-5.28 0-8.198-2.855-9.592-4.921a5.256 5.256 0 01-.394-5.228c.513-1.09 1.353-2.435 2.674-3.593a.75.75 0 011.058.07z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{d:"M20.048 20.012a.75.75 0 01-1.06.036l-15.5-14.5a.75.75 0 011.025-1.096l15.5 14.5a.75.75 0 01.035 1.06z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{d:"M9.559 11.535c-.203 1.067.554 2.164 1.808 2.374a2.36 2.36 0 001.707-.36.75.75 0 011.043.191.75.75 0 01-.215 1.04 3.893 3.893 0 01-2.816.602c-1.984-.331-3.381-2.13-3.007-4.094.06-.311.16-.607.297-.881a.768.768 0 011.01-.358.733.733 0 01.338.995 1.908 1.908 0 00-.165.491zm1.219-2.362a.769.769 0 01.716-.797c.302-.02.61-.007.92.045 1.784.299 3.086 1.775 3.066 3.501a.77.77 0 01-.762.754.73.73 0 01-.744-.74c.011-.948-.72-1.854-1.842-2.041a2.427 2.427 0 00-.566-.028.732.732 0 01-.788-.694z",fillRule:"evenodd",clipRule:"evenodd"}))}},1689:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Org24","data-old-api":"Org"},e),{className:"Zi Zi--Org"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M10.786 8.41a8.938 8.938 0 00-3.968-2.528c-.305-1.719.814-3.337 2.442-3.741 1.221-.405 2.646.101 3.46 1.011 1.045 1.38.915 3.64.814 4.348-.102 1.315-1.221 3.034-1.323 3.135-.305-.809-.814-1.517-1.425-2.225zm-2.442 2.832c-1.526.202-3.052 1.01-4.171 2.123-1.12-.404-1.934-1.314-2.137-2.427-.316-2.427 1.526-3.64 2.849-3.842 1.628-.372 2.849.505 4.07 1.415 1.146 1.012 2.035 2.63 2.035 2.73-.916-.202-1.832-.1-2.646 0zm4.986.303c.509-.607.931-1.585 1.12-2.225.318-1.039.61-3.134.203-4.651 1.323-1.011 3.154-1.011 4.477.303 1.235 1.146 1.018 2.933.814 3.438-.663 1.581-1.933 2.326-3.256 2.832-1.221.404-3.256.303-3.358.303zm-2.645 1.011c-.51.607-.916 1.416-1.221 2.326-.407 1.314-.643 3.06-.102 4.55-1.323 1.011-3.256 1.011-4.477-.202-1.198-1.124-1.018-2.933-.814-3.438.599-1.605 1.933-2.326 3.256-2.831.916-.304 3.256-.405 3.358-.405zm9.259-1.82c1.018.404 1.933 1.315 2.035 2.427.233 2.57-1.526 3.64-2.849 3.842-1.526 0-2.85-.505-4.07-1.415-1.018-.81-2.035-2.528-2.035-2.63.916.203 1.831.102 2.645 0 1.628-.404 3.053-1.112 4.274-2.224zm-6.716 4.854c1.065 1.08 2.442 2.022 4.07 2.528.306 1.719-.814 3.235-2.442 3.741-1.22.404-2.645-.101-3.46-1.011-1.1-1.481-1.017-3.54-.915-4.247.102-1.315 1.221-3.034 1.323-3.135.305.708.721 1.44 1.424 2.124z"}))}},1735:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),a=n(31),o=n(6),i=Object(o.a)("promotion",["LIKE"]);function c(e){return function(t,n){var o=n().entities.promotions[e]||{},c=o.voteupCount,l=o.voting,s=l?0:1;return t({API:{types:i.LIKE,endpoint:"v3/promotions/".concat(e,"/voters"),query:{voting:s},method:"POST"},UPDATE:{request:{promotions:Object(r.a)({},e,{voteupCount:c+(l?-1:1),voting:s})},success:function(t){return{promotions:Object(r.a)({},e,t)}},failure:{promotions:Object(r.a)({},e,o)}},NOTIFICATION:{failure:a.a}})}}},1736:function(e,t,n){},1737:function(e,t,n){"use strict";var r=n(1),a=n(972),o=n(1274),i=n(1293);t.a=function(e){var t=e.eduSection,n=e.renderContent,c=e.renderActions,l=t.id;return Object(r.c)(a.a,{data:t,children:[null==n?void 0:n(),Object(r.b)(o.a,{contentId:l,contentType:"edu_section",children:null==c?void 0:c(i.a)})]})}},1740:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(59),o=n(667),i=n(424),c=function(e){var t=Object(o.a)();return Object(r.b)(a.Flex,Object.assign(Object.assign({width:"58px",height:"20px",bg:Object(i.a)(t.colors.GYL01A).alpha(.08),color:t.colors.GYL01A,alignItems:"center",justifyContent:"center",css:{fontWeight:"normal",fontSize:12,borderRadius:4,overflow:"hidden"}},e),{},{children:"联合创作"}))}},1741:function(e,t){},1742:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n(869),o=n(158),i=function(e){var t=e.zvideo,n=t.id,r=t.imageUrl,a=t.author,o=t.video,i=t.playCount,c=t.voteupCount,l=e.stats,s=l.memberCount,u=l.count;return{zvideoId:n,thumbnail:r,duration:o.duration,avatarUrl:a.avatarUrl,userName:a.name,memberCount:s,videoCount:u,playCount:i,voteupCount:c}};function c(e){var t=e.coCreationRefBy,o=e.referenceRefBy,c=e.type,l=Boolean(t),s=!l&&Boolean(o),u=Object(a.a)((function(){return n.e(76).then(n.bind(null,2833))}));if(l){if(u){var d=i(t),f=d.zvideoId,b=d.thumbnail,p=d.duration,h=d.avatarUrl,m=d.userName,v=d.memberCount,g=d.videoCount,O=d.playCount,j=d.voteupCount;return Object(r.b)(u.CoCreationCard,{zaContentId:f,thumbnail:b,duration:p,avatarUrl:h,userName:m,isMultiMember:v>1,videoCount:g,playCount:O,voteupCount:j,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(f),showSingleVideoUI:!0})}return Object(r.b)("div",{css:{height:82}})}if(s){if(u){var y=i(o),w=y.zvideoId,C=y.avatarUrl,x=y.userName,k=y.memberCount;return Object(r.b)(u.ReferenceCard,{type:c,zaContentId:w,avatarUrl:C,userName:x,isMultiMember:k>1,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(w),showSingleVideoUI:!0})}return Object(r.b)("div",{css:{height:44}})}return null}function l(e){return Object(r.b)(o.a,{replacement:null,children:Object(r.b)(c,Object.assign({},e))})}},1743:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n(59),o=n(937),i=n(1144),c=function(e){var t=e.mainAuthor,n=e.subAuthor,i=function(e){return"plain"===e||"special-plain"===e}(e.preset);return Object(r.c)(a.Flex,{mt:"10px",children:[Object(r.b)(o.a,Object.assign(Object.assign({},i&&{preset:"plain"}),{},{author:t,coCreationAuthorDescriptionText:"视频作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1,css:{marginRight:i?16:30}})),Object(r.b)(o.a,Object.assign(Object.assign({},i&&{preset:"plain"}),{},{author:n,coCreationAuthorDescriptionText:"图文作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1}))]})};function l(e,t,n,a){var o=Object(i.b)(t,n),l=Object(i.c)(n);return a&&Object(r.b)(c,{preset:e,mainAuthor:o,subAuthor:l},"coCreateAuthors")}},1744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},1746:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(48);function a(e,t){t.ZhihuHybrid?r.a.dispatch("base/openURL",{url:e}):window.location.href=e}},1747:function(e,t,n){"use strict";var r=n(35),a=n(50),o=n(0),i=n(374);function c(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}t.a=function(e){var t=e.disabled,n=e.children,l=Object(o.useState)(null),s=c(r.a,l,2),u=s[0],d=s[1];return Object(i.a)((function(){d(document.querySelector("#AnswerFormPortalContainer"))})),t?n:Boolean(u)&&Object(a.createPortal)(n,u)}},1748:function(e,t,n){"use strict";function r(e){var t,n=null==e||null===(t=e.reactionInstruction)||void 0===t?void 0:t.rEACTIONANONYMOUS;return void 0!==n?n||"该问题暂不支持启用匿名":""}function a(e){return 0===Number(null==e?void 0:e.id)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},1749:function(e,t,n){"use strict";t.a=function(e,t){return t.every((function(t){return e.includes(t)}))}},1750:function(e,t,n){e.exports=n.p+"assets/logo.804f083e.png"},1751:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n(0),o=n(59),i=n(2413),c=n(51);function l(e){var t=e.handleClick,n=Object(a.useRef)(null);return Object(r.c)(c.a,{as:o.Flex,zaAction:"Unknown",zaText:"全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",pr:"20px",lineHeight:"55px",css:{cursor:"pointer"},onClick:t,ref:n,children:[Object(r.b)(o.Text,{mr:"10px",children:"全屏编辑"}),Object(r.b)(i.a,{text:!0,center:!0})]})}},1752:function(e,t,n){},1753:function(e,t,n){"use strict";var r=n(37),a=n(1),o=n(21),i=n(374),c=n(105),l=n(296),s=n(92),u=n(215),d=n(32),f=n(1114),b=["disabled","currentUser","authRequired","answer","isOwner"];t.a=Object(u.a)((function(e){var t,n=e.disabled,u=e.currentUser,p=e.authRequired,h=e.answer,m=e.isOwner,v=Object(r.default)(e,b),g=Object(o.useDispatch)(),O=Boolean(!n&&u);Object(i.a)((function(){O&&g(Object(l.b)(["opposeRight"]))}));var j=Object(c.a)(p((function(e){g(Object(s.H)(h.id,e,{cardType:h.cardType},h))}),d.ab.vote));return Object(a.b)(f.a,Object.assign({count:h.voteupCount,voting:h.relationship&&h.relationship.voting,isOwner:Boolean(m||(null===(t=h.relationship)||void 0===t?void 0:t.isAuthor)),onVote:j},v))}))},1754:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(1),a=n(1023),o=n(887),i=n(971),c=n(0),l=n(153),s=n(1019),u=n(39),d=n(1755),f=n(1036),b=(n(1756),function(e,t){return null!=e&&e.plainText?"".concat(e.plaintext," · "):Object(s.isReferenceRelation)(t)?"引用创作 · ":null});function p(e){var t=e.videoId,n=e.zvideoId,s=e.title,p=e.playCount,h=void 0===p?0:p,m=e.voteupCount,v=void 0===m?0:m,g=e.isComplete,O=void 0!==g&&g,j=e.startTime,y=void 0===j?0:j,w=e.creationReferences,C=e.creationRelationship,x=e.shouldExpandState,k=e.videoRef,S=e.alwaysShowVolumeButton,A=e.itemId,T=e.itemType,I=Number(y/1e3),R=Object(c.useRef)(),E=Object(c.useRef)({currentTime:0}),N=Object(c.useRef)(Object(i.c)(t,"*",!0));Object(f.a)({videoId:t,iframeRef:R}),Object(c.useEffect)((function(){var e=N.current.subscribeMessage((function(e,t){e===i.b.DOM.TIMEUPDATE&&(E.current.currentTime=t.currentTime)}));return function(){return e.unsubscribe()}}),[]);return Object(r.c)("div",{className:"VideoAnswerPlayer",children:[Object(r.b)("div",{className:"VideoAnswerPlayer-video",children:Object(r.b)(a.a,{zaProps:{type:"Answer",token:A},ref:Object(o.a)(R,k),className:"VideoAnswerPlayer-iframe",type:"video",src:"https://".concat(u.a.videoHost,"/video/").concat(t,"?").concat(new URLSearchParams([["itemId",A],["itemType",T]]).toString()),iframeProps:{allowFullScreen:!0},griffithProps:{alwaysShowVolumeButton:S}})}),x&&Object(r.c)("div",{role:"button",tabIndex:0,"aria-label":"跳转到对应视频",className:"VideoAnswerPlayer-stateBar",onClick:function(){N.current.dispatchMessage(R.current.contentWindow,i.a.PAUSE,{});var e=(E.current.currentTime+I).toFixed(1);window.open("https://".concat(u.a.wwwHost,"/zvideo/").concat(n,"?playTime=").concat(e))},children:[Object(r.c)("div",{className:"VideoAnswerPlayer-state",children:[Object(r.b)("div",{className:"VideoAnswerPlayer-state--title",children:s}),Object(r.c)("div",{className:"VideoAnswerPlayer-state--data",children:[b(w,C),Object(l.cnNiceNumber)(h),"播放",v>0?" · ".concat(Object(l.cnNiceNumber)(v),"赞同"):null]})]}),!O&&Object(r.c)("div",{className:"VideoAnswerPlayer-action",children:[Object(r.b)(d.a,{style:{marginRight:"6px"}}),"完整版"]})]})]})}},1755:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(52),i=Object.assign;var c=function(e){return a.a.createElement(o.a,i({width:"8",height:"10",fill:"none",viewBox:"0 0 8 10"},e),a.a.createElement("path",{fill:"#121212",d:"M1.315 9.302a.6.6 0 01-.915-.51v-7.52a.6.6 0 01.914-.51l6.11 3.754a.6.6 0 010 1.022l-6.11 3.764z",fillRule:"evenodd",clipRule:"evenodd"}))}},1756:function(e,t,n){},1757:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n(2910),i=n(33),c=n(986),l=n(433),s=n(25);t.a=function(e){var t=e.className,n=e.onClick,u=e.html,d=e.sourceId,f=Object(a.useCallback)((function(e){s.a.trackEvent(e.target,{id:9857,action:"Click"}),n&&n(e)}),[n]),b=Object(a.useMemo)((function(){return Object(c.c)(u,d).catalog}),[u,d]);return null!=b&&b.length?Object(r.b)(l.a,{trackCardShow:!0,view:{id:9856},children:Object(r.b)(i.c,{preset:"plain",className:t,onClick:f,icon:o.a,label:"目录"})}):null}},1758:function(e,t,n){},1759:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(40),a=n.n(r),o=n(123),i=n.n(o),c=n(0),l=n(51),s=n(1025),u=n(1856),d=function(){var e=Object(l.l)().trackEvent;return Object(c.useCallback)(function(){var t=i()(a.a.mark((function t(n){var r,o,i,c,l,d,f,b,p,h,m,v,g,O,j;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.element,o=n.id,i=n.url,c=n.source,l=n.scenes,d=void 0===l?s.b.Content:l,f=n.utmInfo,b=void 0===f?{}:f,p=n.appSchemaIos,h=n.appSchemaAndroid,m=n.isOpenPopup,v=void 0!==m&&m,g=n.extraInfo,O=void 0===g?{}:g,j=n.onClick,Object(u.a)({element:r,id:o,url:i,source:c,scenes:d,utmInfo:b,appSchemaIos:p,appSchemaAndroid:h,isOpenPopup:v,extraInfo:O,trackEvent:e,onClick:j});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}},1760:function(e,t,n){},1813:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ve})),n.d(t,"b",(function(){return ut}));var r=n(1),a=n(21),o=n(0),i=n.n(o),c=n(3),l=n.n(c),s=n(13),u=n.n(s),d=n(170),f=n(667),b=n(40),p=n.n(b),h=n(123),m=n.n(h),v=n(48),g=function(){var e=m()(p.a.mark((function e(t,n,r){var a,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(e){return{state:-1,message:e}},o=function(e){return{state:0,data:e}},t.Android&&t.Zhihu){e.next=4;break}return e.abrupt("return",a("「先用后付」激活仅支持安卓端内哦"));case 4:return e.prev=4,e.next=7,v.a.supportsAction("payment/activePayScore");case 7:if(!e.sent){e.next=17;break}return e.next=11,Object(v.a)("payment/activePayScore").dispatch({sku_id:n||"",type:r||0});case 11:if(null==(i=e.sent)||!i.orderId){e.next=14;break}return e.abrupt("return",o(i));case 14:throw new Error("激活获取订单号失败");case 17:return e.abrupt("return",a("当前客户端版本不支持，请升级后重试 ~"));case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(4),e.abrupt("return",a(e.t0.errMsg||e.t0.message||"激活失败，请稍后重试"));case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),O=n(23),j=n.n(O),y=n(27),w=n.n(y),C=n(103),x=n.n(C),k=n(26),S=n.n(k),A=n(28),T=n.n(A),I=n(17),R=n.n(I),E=n(926),N=n(917),B=n(25),z=n(51),L=n(56),P=n(24),_=n.n(P);function M(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){var n=e[t];return null!=n&&"".concat(t,"=").concat(encodeURIComponent(n))})).filter(Boolean).join("&")},U=function(e){if(!e)return{};var t=e.match(/\?([^#]+)/)||[],n=M(_.a,t,2)[1];return n?n.split("&").reduce((function(e,t){var n=t.split("="),r=M(_.a,n,2),a=r[0],o=r[1];return e[a]=decodeURIComponent(o),e}),{}):{}},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=D(Object.assign(Object.assign({},U(e)),t));return n?/\?([^#]+)/.test(e)?e.replace(/\?([^#]+)/,"?".concat(n)):/(#[\w]+)$/.test(e)?e.replace(/(#[\w]+)$/,"?".concat(n,"$1")):"".concat(e,"?").concat(n):e};function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R()(e);if(t){var a=R()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=function(e){S()(n,e);var t=V(n);function n(e){var r;return j()(this,n),r=t.call(this,e),G(x()(r),"handleClick",(function(e,t){var n=r.props.onClick;B.a.trackEvent(r.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),"function"==typeof n&&n(r.node),r.unlisten=v.a.listen("base/viewDidAppear",(function(){var e=r.props.popupCallback;e&&e(),r.unlisten&&r.unlisten()}))})),G(x()(r),"handleQuery",(function(e){var t=r.props.extra,n=((void 0===t?{}:t)||{}).ua,a=void 0===n?{}:n;if(null!=a&&a.Mobile&&(null==a||!a.Zhihu)){var o,i,c=Object(L.parse)(null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.search.substring(1));if("svipgrowth"===(c||{}).utm_medium){var l=encodeURIComponent(Object(L.stringify)(c));r.setState({url:F(e,{growth_ref_url:l})})}}})),r.state={url:""},r}return w()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.btnInfo;if(t){var n=t.btnText,r=t.link;this.setState({url:r}),this.handleQuery(r),v.a.dispatch("vip/preloadVIPHybridPopup",{url:r}),Object(E.onViewedOnce)(this.node,(function(){B.a.trackCardShow(e.node,{id:4241,name:n},{link:{url:r,anchor:n}})}))}}},{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,r=t.zaInfo,a=void 0===r?{}:r,o=t.className,c=this.state.url;if(!n)return null;var l=n.btnText;return i.a.createElement("div",{className:u()("KfeCollection-PurchaseBtn",o)},i.a.createElement("div",{className:"KfeCollection-PurchaseBtn-mask"}),i.a.createElement(z.b,{block:"textLink",content:Object.assign({},a||{})},i.a.createElement(z.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:c}}},i.a.createElement("a",{className:"KfeCollection-PurchaseBtn-HybridLink",href:c,target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick(c,l)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},i.a.createElement("span",{className:"KfeCollection-PurchaseBtn-text"},l)," ",i.a.createElement(N.b,{className:"KfeCollection-PurchaseBtn-ArrowRight"})))))}}]),n}(i.a.Component);q.propTypes={popupCallback:l.a.func};var H=q,W=n(50),K=n(461),Z=n(981);function Q(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Y(e){var t=e.zaInfo,n=e.btnInfo,r=e.picsInfo,a=e.className,c=e.onClick,l=e.popupCallback,s=e.theme,d=e.isMobile,f=e.extra,b=void 0===f?{}:f,p=n.btnText,h=n.link,m=Object(o.useState)(h),g=Q(_.a,m,2),O=g[0],j=g[1],y=r.pcPic,w=r.dayPic,C=r.nightPic,x=Object(o.useRef)(),k=Object(o.useRef)(null),S=Object(o.useRef)(!0),A=(b||{}).ua,T=void 0===A?{}:A,I=Object(o.useMemo)((function(){return d?"dark"===s?C:w:y}),[d,s,y,C,w]),R=null;return Object(o.useEffect)((function(){if(d&&(null==T||!T.Zhihu)){var e,t,n=Object(L.parse)(null===(e=window)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.search.substring(1));if("svipgrowth"===(n||{}).utm_medium){var r=encodeURIComponent(Object(L.stringify)(n));j(F(h,{growth_ref_url:r}))}}}),[d,null==T?void 0:T.Zhihu,h]),Object(o.useEffect)((function(){return function(){R&&R()}}),[R]),i.a.createElement("div",{className:u()("KfeCollection-VipBenefitsCard",a)},i.a.createElement(z.b,{block:"vipBenefitsCard",content:Object.assign(Object.assign({},t),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer})},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:O}}},i.a.createElement("a",{className:"KfeCollection-VipBenefitsCard-HybridLink",href:O,target:"_blank",rel:"noopener noreferrer",onClick:function(){B.a.trackEvent(x.current,{id:4240,action:"OpenUrl",name:p},{link:{url:O,anchor:p}}),"function"==typeof c&&c(x.current),R=v.a.listen("base/viewDidAppear",(function(){l&&l(),R&&R()}))},ref:x,"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[t]}})},I&&i.a.createElement(K.a,{onObserve:function(e){e[0].isIntersecting&&S.current&&(Object(v.a)("base/postMessage").dispatch({type:"vip/truncation",data:{ShowVipTc:!0}}),S.current=!1)},threshold:1},i.a.createElement("img",{className:"KfeCollection-VipBenefitsCard-pic",src:I,ref:k}))))))}Y.propTypes={zaInfo:l.a.object,btnInfo:l.a.object,popupCallback:l.a.func,onClick:l.a.func,className:l.a.string,theme:l.a.string.isRequired,isMobile:l.a.bool.isRequired,picsInfo:l.a.object.isRequired};var J=Y,X=n(143);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R()(e);if(t){var a=R()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te="dark",ne="light",re=function(e){S()(n,e);var t=$(n);function n(e){var r;return j()(this,n),r=t.call(this,e),ee(x()(r),"handleClick",(function(e,t){var n=r.props.onClick;B.a.trackEvent(r.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),n&&n({target:r.node})})),ee(x()(r),"handleQuery",(function(e){var t=r.props.extra,n=((void 0===t?{}:t)||{}).ua,a=void 0===n?{}:n;if(null!=a&&a.Mobile&&(null==a||!a.Zhihu)){var o,i,c=Object(L.parse)(null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.search.substring(1));"svipgrowth"===(c||{}).utm_medium&&r.setState({url:F(e,c)})}})),r.state={url:""},r}return w()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.goodsCard.body.link;this.setState({url:t}),Object(E.onViewedOnce)(this.node,(function(){B.a.trackCardShow(e.node,{id:4241,name:"课程"},{link:{url:t,anchor:"课程"}})})),this.handleQuery(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.zaInfo,a=void 0===r?{}:r,o=t.goodsCard,c=t.className,l=n===te,s=this.state.url,d=o.header,f=d.title,b=d.subTitle,p=o.body,h=p.title,m=p.cover,v=p.coverLabel,g=p.desc,O=p.label,j=p.vipNote,y=o.catalog;return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV2",c),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},i.a.createElement("h1",{className:"KfeCollection-GoodsCardV2-header"},"".concat(f).concat(b?" · ".concat(b):"")),i.a.createElement(z.b,{content:Object.assign(Object.assign({},a),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"oldSkuCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:s}}},i.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV2-content",onClick:function(){return e.handleClick(s,h)},ref:function(t){return e.node=t}},i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover"},i.a.createElement("img",{className:u()("KfeCollection-GoodsCardV2-cover-img",{"KfeCollection-GoodsCardV2-cover-img--dark":l}),src:Object(X.imgUrl)(m,{size:"200x0"})}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover-label"},v)),i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-detail"},i.a.createElement("div",null,i.a.createElement("h2",{className:"KfeCollection-GoodsCardV2-detail-title"},h),g&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-desc"},g),i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-label"},O)),i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:j}}))))),y&&y.length>0&&i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalog"},"章节目录",i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalogSectionList"},y.map((function(e){var t=e.manuscriptUrl,n=e.sectionId,r=e.title;return i.a.createElement(z.a,{zaType:"Text",key:n,zaBlock:"catalog",extra:{link:{url:t}},zaAction:"OpenUrl"},i.a.createElement("a",{className:"KfeCollection-GoodsCardV2-catalogSectionItem",href:t,target:"_blank",rel:"noopener noreferrer",key:n,"data-za-detail-view-id":7500,"data-za-extra":JSON.stringify({button:{text:r}})},r,i.a.createElement(N.a,{className:"KfeCollection-GoodsCardV2-catalogSectionItemIcon"})))}))))))}}]),n}(i.a.Component);ee(re,"propTypes",{theme:l.a.oneOf([te,ne]),onClick:l.a.func,extra:l.a.object}),ee(re,"defaultProps",{theme:ne});var ae=re,oe=n(1220),ie=function(e){return e?-1===e.indexOf("?")?"".concat(e,"?entry=qa"):"".concat(e,"&entry=qa"):""};function ce(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var le=function(e){var t=e.className,n=e.nextSectionInfo,r=e.goodsCard,a=e.zaInfo,c=void 0===a?{}:a,l=e.theme,s=void 0===l?"light":l,f=r.header,b=(void 0===f?{}:f).brandImage,p=n.title,h=n.content,m=n.url,v=n.skuUrl,g=n.voteNum,O=n.isShowVote,j=n.trackNum,y=n.skuName,w="dark"===s,C=Object(z.l)().trackEvent,x=ie(m),k=Object(o.useRef)(),S=Object(o.useState)(!1),A=ce(_.a,S,2),T=A[0],I=A[1],R=Object(d.b)(),E=!p||!m||0===j;Object(o.useEffect)((function(){if(k.current&&h){var e=k.current.clientWidth,t=document.createElement("p");t.style="visibility:hidden;position:absolute;left:-9999px;top:-9999px;width:".concat(e,"px;line-height:21px;font-size:13px;"),t.innerText=h.replace(/[\r\n]/g,""),document.body.appendChild(t);var n=t.clientHeight>63;I(n),document.body.removeChild(t)}}),[k,h]);var B=Object(o.useCallback)((function(){C({action:"OpenUrl",eventType:"Click",elementLocation:{text:p,block:{blockText:"StoryCardTitle"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:m}})}),[p,C,m]),L=Object(o.useCallback)((function(){C({action:"OpenUrl",eventType:"Click",elementLocation:{block:{blockText:"StoryCardButton"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:v}})}),[v,C]);return i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV4",{"KfeCollection-GoodsCardV4-dark":w},t),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[c]}})},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-guide"},i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideBefore"},"来自",i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideBeforeBold"},"「",b,"」"),"专栏"),i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideTitle"},"《".concat(y)),i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideAfter"},"》")),E?null:i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-wrapper"},i.a.createElement("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV4-header",onClick:B},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-title"},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-titleText"},"继续阅读下一篇：".concat(p)),i.a.createElement(oe.a,{className:"KfeCollection-GoodsCardV4-headerIcon"})),i.a.createElement("img",{className:"KfeCollection-GoodsCardV4-vipIcon",src:"https://pic2.zhimg.com/v2-d296124c7c5db450cd7cb5d567afd0f0.png"})),i.a.createElement(z.b,{content:Object.assign(Object.assign({},c),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"StoryCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:m}}},i.a.createElement("a",{href:x,target:"_blank",rel:"noopener noreferrer"},h?i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-contentWrapper".concat(R.iOS?" KfeCollection-GoodsCardV4-iosContent":"")},i.a.createElement("p",{className:"KfeCollection-GoodsCardV4-content",ref:k},h),T&&O&&i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-endorse"},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-mask"}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-ellipsis"},"..."),i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-endorseText"},g))):null))),i.a.createElement("a",{className:"KfeCollection-GoodsCardV4-bottom",target:"_blank",rel:"noopener noreferrer",href:ie(v),onClick:L},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-bottomText"},"查看本专栏全部",i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-num"},j),"篇",i.a.createElement(N.a,{className:"KfeCollection-GoodsCardV4-arrowRight",text:!0,center:!0})))))},se=n(891),ue=n(1160),de=function(e){return i.a.createElement(ue.a,Object.assign({viewBox:"0 0 43 41"},e),i.a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z"}))};de.defaultProps={name:"FullStar"};var fe=de,be=function(e){return i.a.createElement(ue.a,Object.assign({viewBox:"0 0 43 41"},e),i.a.createElement("g",{fillRule:"evenodd"},i.a.createElement("path",{d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z",opacity:".2"}),i.a.createElement("path",{d:"M21.5.162v34.931c-.716.01-1.43.188-2.083.53L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165c.29-.59.872-.94 1.486-.965z"})))};be.defaultProps={name:"HalfStar"};var pe=be,he=function(e){var t=e.value,n=void 0===t?5:t,r=e.size,a=void 0===r?13:r,c=Object(o.useMemo)((function(){return function(e){return 0===e?0:e%1==0?e/2:e>=10?5:(parseInt(e)+1)/2}(n)}),[n]),l=Object(o.useMemo)((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=e%1,r=parseInt(e/1),a=n?1:0;return{full:r,half:a,empty:parseInt(t-r-a)}}(c)}),[c]),s=l.full,d=l.half,f=l.empty;return i.a.createElement("div",{className:"KfeCollection-RatingNew"},!!s&&new Array(s).fill(1).map((function(e,t){return i.a.createElement(fe,{className:u()("KfeCollection-RatingNew-FullStar","KfeCollection-RatingNew-Star"),key:t,size:a})})),!!d&&i.a.createElement(pe,{className:u()("KfeCollection-RatingNew-HalfStar","KfeCollection-RatingNew-Star"),size:a}),!!f&&new Array(f).fill(1).map((function(e,t){return i.a.createElement(fe,{className:u()("KfeCollection-RatingNew-EmptyStar","KfeCollection-RatingNew-Star"),key:t,size:a})})))};function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R()(e);if(t){var a=R()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}var ve,ge,Oe,je=function(e){S()(n,e);var t=me(n);function n(){return j()(this,n),t.apply(this,arguments)}return w()(n,[{key:"render",value:function(){var e=this.props,t=e.total,n=e.value;if(e.isNew)return i.a.createElement(he,this.props);var r=Math.floor(Math.round(2*n)/2),a=Math.round(2*n)%2,o=t-r-a;return i.a.createElement("div",{className:"KfeCollection-Rating"},Array.from({length:r}).map((function(e,t){return i.a.createElement("div",{className:"KfeCollection-Rating-star",key:"full-".concat(t)},i.a.createElement(se.a,null))})),Boolean(a)&&i.a.createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--half",key:"half"},i.a.createElement(se.a,null),i.a.createElement(se.a,null)),Array.from({length:o}).map((function(e,t){return i.a.createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--empty",key:"empty-".concat(t)},i.a.createElement(se.a,null))})))}}]),n}(i.a.Component);Oe={value:5,total:5,size:13,isNew:!1},(ge="defaultProps")in(ve=je)?Object.defineProperty(ve,ge,{value:Oe,enumerable:!0,configurable:!0,writable:!0}):ve[ge]=Oe;var ye=je,we=n(1746),Ce=["Live","RemixAlbum","RemixInstabook"],xe={Live:"Live 讲座","课程":"盐选专栏"};var ke=function(e){var t=e.goodsCard,n=e.zaInfo,r=void 0===n?{}:n,a=e.isMobile,c=e.theme,l=void 0===c?"light":c,s=e.resourceType,f=t.header,b=void 0===f?{}:f,p=t.body,h=void 0===p?{}:p,m=b.skuTitle,v=b.brandImage,g=b.link,O=h.title,j=h.coverLabel,y=h.link,w=h.desc,C=h.activeLink,x=h.vipNote,k=h.icons,S=h.cover,A=h.introduce,T=h.score,I=h.activeText,R=h.contentType,E=Object(d.b)(),B=!a&&Ce.includes(R)?y:C,L=24===s,P=Object(o.useCallback)((function(){Object(we.a)(ie(B),E)}),[B,E]),_=Object(o.useCallback)((function(){L?Object(we.a)(ie(g),E):P()}),[L,g,E,P]),M=function(){var e=k||{},t=e.centerIcon,n=e.leftTopDayIcon,r=e.leftTopNightIcon;return i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentWrapper"},S&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentLeft"},n&&r&&i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverVip",src:"light"===l?n:r}),i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverImg",style:L?{objectFit:"cover"}:{},src:S}),t&&i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverBtn",src:t}),j&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-coverLabel"},xe[j]||j)),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentRight"},i.a.createElement("div",null,O&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentTitle"},O),w&&L&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentDes"},w),T?i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentStar"},i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-score"},T),i.a.createElement(ye,{value:+T/2})):A&&A.length?i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentIntro"},A.map((function(e){return i.a.createElement("div",{key:e,className:"KfeCollection-GoodsCardNew-contentIntroItem"},e)}))):null),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentBottom"},x?i.a.createElement("p",{className:"KfeCollection-GoodsCardNew-vipNote",dangerouslySetInnerHTML:{__html:x}}):i.a.createElement("div",null),I&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-readBtn"},I,i.a.createElement(N.b,{className:u()("KfeCollection-GoodsCardNew-arrowRight",{"KfeCollection-GoodsCardNew-arrowRightFix":E.Android}),size:20})))))};return i.a.createElement("section",{className:"KfeCollection-GoodsCardNew","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-guide"},i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-guideBefore"},"以上回答来自"),v&&i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-brandImg"},"「",v,"」"),j&&i.a.createElement("span",null,j)),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-wrapper"},i.a.createElement(z.b,{content:Object.assign(Object.assign({},r),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"".concat(s,"_card")},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:B}}},i.a.createElement("div",{onClick:_,className:"KfeCollection-GoodsCardNew-header"},i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-headerTitle"},m),i.a.createElement(oe.a,{className:"KfeCollection-GoodsCardNew-headerIcon"})),i.a.createElement("a",{onClick:P,rel:"noopener noreferrer"},M())))))};function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R()(e);if(t){var a=R()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=function(e){S()(n,e);var t=Se(n);function n(){var e;j()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Ae(x()(e),"handleObserve",(function(t){var n=e.props.logPaidAnswerProgress;t.forEach((function(t){if(0!==t.intersectionRatio){var r=t.target;e.observer.unobserve(r),n&&n("card")}}))})),Ae(x()(e),"renderVipCard",(function(){var t=e.props,n=t.result,r=void 0===n?{}:n,a=t.theme,o=t.isMobile,c=r.zaInfo,l=r.className,s=r.nextSectionInfo,u=r.goodsCard,d=r.abParam,f=r.resourceType;return s?i.a.createElement(le,{nextSectionInfo:s,goodsCard:u,zaInfo:c,theme:a,className:l}):u?i.a.createElement(ke,{isMobile:o,goodsCard:u,zaInfo:c,theme:a,resourceType:f,abParam:d}):null})),e}return w()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.hasPurchased,r=t.logPaidAnswerProgress;if(n&&r&&"undefined"!=typeof window&&window.IntersectionObserver){if(this.target=Object(W.findDOMNode)(this),!this.target)return;this.observer=new window.IntersectionObserver(this.handleObserve,{threshold:[.1]}),setTimeout((function(){e.observer.observe(e.target)}))}}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.unobserve(this.target)}},{key:"render",value:function(){var e=this.props,t=e.hasPurchased,n=e.result,r=void 0===n?{}:n,a=e.theme,o=e.className,c=e.isMobile,l=e.logPaidAnswerProgress,s=e.extra,u=void 0===s?{}:s,d=r.goodsCard,f=r.zaInfo,b=r.btnInfo,p=r.abParam,h=r.benefitsPics,m=r.popupCallback,v="1"===(null==p?void 0:p.benefitsPicsShow);return t?this.renderVipCard():v?i.a.createElement(J,{btnInfo:b||{},zaInfo:f||{},picsInfo:h||{},popupCallback:m,theme:a,isMobile:c||!1,onClick:l,extra:u}):d?i.a.createElement(ae,{goodsCard:d,zaInfo:f,className:o,extra:u}):null}}]),n}(i.a.Component);Ae(Te,"propTypes",{result:l.a.object.isRequired,theme:l.a.string,hasPurchased:l.a.bool,onBookshelfButtonClick:l.a.func,logPaidAnswerProgress:l.a.func,extra:l.a.object}),Ae(Te,"defaultProps",{result:{goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}}});var Ie=Te,Re=n(905);n(190);function Ee(e){return!e&&0!==e}var Ne={yellow:{day:"https://pic1.zhimg.com/v2-74a907bc68ec906c4cbe6fbcd7b382f1.png",night:"https://pic1.zhimg.com/v2-f6840db8368fe995a6a81b20866c90e8.png"},blue:{day:"https://pic1.zhimg.com/v2-176249162145d8ec58435bfab44d2d6e.png",night:"https://pic3.zhimg.com/v2-ae3c36cfe91b5ce4faf4908a551413a3.png"}};var Be=function(e){var t=e.result,n=void 0===t?{}:t,r=e.isDarkMode,a=n.paidConsult,o=n.zaInfo;if(!a)return null;var c,l,s=a.userId,u=a.consultUrl,d=a.name,f=a.avatarPath,b=a.description,p=a.descriptionType,h=a.answerCount,m=a.averageScore;return i.a.createElement("div",{className:"KfeCollection-PaidConsultCard"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Header"},"向作者咨询"),i.a.createElement(z.b,{content:Object.assign(Object.assign({},o),{},{id:s,type:Z.e.Conversation}),block:"PaidConsultCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:u}}},i.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},(l=null,3!==p&&(l=1===p?Ne.yellow:Ne.blue),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-CardWrapper"},i.a.createElement("img",{className:"KfeCollection-PaidConsultCard-Avatar",src:f}),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Right"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-NameWrapper"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Name"},d),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Action"},"去咨询",i.a.createElement(N.a,{className:"KfeCollection-PaidConsultCard-ArrowRight",text:!0,center:!0}))),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-SubInfo"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-ConsultTime"},i.a.createElement(Re.a,{className:"KfeCollection-PaidConsultCard-ConsultTimeIcon",text:!0,center:!0}),i.a.createElement("div",null,h," 次咨询")),!Ee(m)&&i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-ConsultScore"},i.a.createElement(se.a,{className:"KfeCollection-PaidConsultCard-ConsultScoreIcon",text:!0,center:!0}),i.a.createElement("div",null,Ee(c=m)?"":-1===c.toString().indexOf(".")?c.toFixed(1):c))),b&&i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Info"},l&&i.a.createElement("img",{className:"KfeCollection-PaidConsultCard-InfoIcon",src:r?l.night:l.day}),i.a.createElement("p",null,b)))))))))};function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R()(e);if(t){var a=R()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}var Le=function(e){S()(n,e);var t=ze(n);function n(){return j()(this,n),t.apply(this,arguments)}return w()(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.url,r=e.zaInfo,a=void 0===r?{}:r;return t&&n?i.a.createElement("div",{className:"KfeCollection-TextLink"},i.a.createElement("div",{className:"KfeCollection-TextLink-mask"}),i.a.createElement(z.b,{block:"textLinkV2",content:Object.assign({},a||{})},i.a.createElement(z.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:n}}},i.a.createElement("a",{className:"KfeCollection-TextLink-HybridLink",href:n,target:"_blank",rel:"noopener noreferrer","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},i.a.createElement("span",{className:"KfeCollection-TextLink-text"},t)," ",i.a.createElement(N.a,{className:"KfeCollection-TextLink-ArrowRight"}))))):null}}]),n}(i.a.Component);Le.propTypes={zaInfo:l.a.object,text:l.a.string.isRequired,url:l.a.string.isRequired};var Pe=Le;function _e(e){var t=e.paidContent,n=void 0===t?{}:t,r=e.hasPurchased,a=e.className,c=e.popupCallback,l=e.onLogPaidAnswerProgress,s=e.handleBookshelfButtonClick,b=e.onPayScoreCallback,p=n.resourceType,h=n.btnInfo,m=n.zaInfo,v=n.advertorialInfo||{},O=v.text,j=v.url,y=Object(f.a)().isDarkMode,w=void 0!==y&&y,C=Object(d.b)(),x=Object(o.useRef)(null);return function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{threshold:[.6]},c=Object(o.useRef)(!0),l=t&&e&&e.Zhihu&&e.Android&&"undefined"!=typeof window&&window.IntersectionObserver&&r&&r.current,s=Object(o.useCallback)((function(t){Array.isArray(t)&&t.length&&t[0].isIntersecting&&l&&c.current&&(c.current=!1,g(e,n,0).then((function(e){"function"==typeof a&&a(e)})))}),[a,l,n,e]);Object(o.useEffect)((function(){if(l){var e=new window.IntersectionObserver(s,i),t=r.current;return setTimeout((function(){e&&e.observe(t)}),0),function(){e.unobserve(t)}}}),[l,s,r,i])}(C,!r&&"function"==typeof b&&20!==p,n.id,x,(function(e){return b(e)})),20===p&&O&&j?i.a.createElement(Pe,{text:O,url:j}):i.a.createElement("div",{className:u()("KfeCollection-PaidAnswerFooter",a),ref:x},!r&&i.a.createElement(H,{btnInfo:h,zaInfo:m||{},popupCallback:c,extra:{ua:C},onClick:l}),i.a.createElement(Ie,{isMobile:C.Mobile,extra:{ua:C},isDarkMode:w,result:n,hasPurchased:r,onBookshelfButtonClick:s,theme:w?"dark":"light",popupCallback:c,logPaidAnswerProgress:l}),i.a.createElement(Be,{result:n,isDarkMode:w,extra:{ua:C}}))}_e.propTypes={paidContent:l.a.object.isRequired,hasPurchased:l.a.bool.isRequired,className:l.a.string,popupCallback:l.a.func,onLogPaidAnswerProgress:l.a.func,handleBookshelfButtonClick:l.a.func,onPayScoreCallback:l.a.func};var Me=_e,De=n(221),Ue=n(92);function Fe(e){var t,n=e.answer,o=(Object(a.useSelector)((function(e){return Object(Ue.x)(e,null==n?void 0:n.id)}))||{}).result;if(!o)return null;var i=null==n||null===(t=n.paidInfo)||void 0===t?void 0:t.hasPurchased;return Object(r.b)(Me,{hasPurchased:i,paidContent:o})}var Ve=Object(De.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(r.b)(Fe,{answer:t}):null}));function Ge(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var He=function(e){if(!window)return null;try{var t=document.createElement("div");t.innerHTML=e;var n,r=Array.from(t.childNodes),a=function(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return qe(t,void 0!==n&&n<r?n:r)}return e(t,n)}(_.a,r,3),o=a[0].nodeValue,i=a[1],c=i.innerText,l=i.attributes,s=a[2].nodeValue,u={},d=Ge(l,!0);try{for(d.s();!(n=d.n()).done;){var f=n.value;u[f.name]=f.value}}catch(e){d.e(e)}finally{d.f()}return o&&c&&s?{prefixText:o,content:c,status:s,linkInfo:{name:"a",attr:u}}:null}catch(e){return null}};function We(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Ke=function(e){var t=e.content;t=void 0===t?[]:t;var n=We(_.a,t,2),r=n[0],a=n[1],o=e.className,c=e.onClick;return i.a.createElement("div",{className:u()("KfeCollection-CertainEndEllipsis",o),onClick:c},i.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-start"},r),i.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-end"},a))},Ze=function(e){var t=e.contentName,n=e.fallbackContent,r=e.onClick,a=Object(o.useMemo)((function(){return function(e){return He(e)}(t)}),[t]);if(null===a)return n;var c=a.prefixText,l=a.content,s=a.status,u=a.linkInfo,d=u.name,f=i.a.createElement(i.a.Fragment,null,c,i.a.createElement(d,u.attr,l.slice(0,-1))),b=i.a.createElement(i.a.Fragment,null,i.a.createElement(d,u.attr,l.slice(-1)),s);return i.a.createElement(Ke,{onClick:r,content:[f,b],className:"KfeCollection-PaidContentNameCertainEndEllipsis"})};var Qe=function(e){var t=e.introCard,n=e.paidConsult,r=e.RichTextComponent,a=e.className,o=e.zaInfo,c=void 0===o?{}:o,l=e.handleTrack,s=e.extra,d=void 0===s?{}:s,f=t.statement,b=t.description,p=t.contentName,h=t.authorDesc,m=d.isNewStyle,v=d.isMobile,g=Object(z.l)().trackEvent,O=function(e,t){var n=e.target,r=e.target,a=r.text,o=r.href,i=5325===t?"userName":"bookTitle";"A"===r.tagName&&(B.a.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:a},link:{url:o}}),g({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Text",block:{blockText:i}}},{link:{url:o}})),l&&l(e,o)},j=function(e){return m?"".concat(e,v?"-newStyle-mobile":"-newStyle-pc"):e};return i.a.createElement("section",{className:u()(j("KfeCollection-IntroCard"),a),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[c]}})},!m&&i.a.createElement(i.a.Fragment,null,!!f&&i.a.createElement("p",null,f),!!b&&i.a.createElement("p",null,b),(!!f||!!b)&&i.a.createElement("p",{className:"KfeCollection-IntroCard-spacing"})),i.a.createElement(Ze,{contentName:p,onClick:function(e){return O(e,5326)},fallbackContent:i.a.createElement("p",{onClick:function(e){return O(e,5326)},className:j("KfeCollection-IntroCard-contentName"),dangerouslySetInnerHTML:{__html:p}})}),r?i.a.createElement(r,{className:j("KfeCollection-IntroCard-authorDesc"),html:h,onClick:function(e){return O(e,5325)}}):i.a.createElement("p",{onClick:function(e){return O(e,5325)},className:j("KfeCollection-IntroCard-authorDesc"),dangerouslySetInnerHTML:{__html:h}}),n&&n.consultUrl&&i.a.createElement(z.b,{content:Object.assign(Object.assign({},c),{},{id:n.userId,type:Z.e.Conversation}),block:"PaidConsultTopText"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:n.consultUrl}}},i.a.createElement("div",{className:j("KfeCollection-IntroCard-paidConsult")},"作者已开通付费咨询，可向作者",i.a.createElement("a",{href:n.consultUrl,target:"_blank",rel:"noopener noreferrer"},"发起咨询")))))},Ye=n(1039),Je=function(e){return i.a.createElement(ue.a,Object.assign({viewBox:"0 0 140 43"},e),i.a.createElement("defs",null,i.a.createElement("rect",{id:"zhimg_ic_primelabel_01@2x-a",width:"70",height:"30",x:"0",y:"0"})),i.a.createElement("g",{fillRule:"evenodd",transform:"translate(0 -6)"},i.a.createElement("path",{fillRule:"nonzero",d:"M80.0023638,2.63706979 L129.732029,30.638653 C135.976314,34.154746 139.822785,40.6523917 139.822785,47.6843672 L139.822785,103.687744 C139.822785,110.719509 135.976314,117.217365 129.732029,120.733248 L80.0023638,148.734831 C73.758079,152.250924 66.0649216,152.250924 59.8206368,148.734831 L10.0909714,120.733248 C3.84668657,117.217365 -7.10542736e-14,110.719509 -7.10542736e-14,103.687744 L-7.10542736e-14,47.6843672 C-7.10542736e-14,40.6523917 3.84668657,34.154746 10.0909714,30.638653 L59.8206368,2.63706979 C66.0649216,-0.879023264 73.758079,-0.879023264 80.0023638,2.63706979 Z M62.8214584,21.9369801 L62.4917192,22.1167713 L25.9257887,42.6512656 C21.4364336,45.1724346 18.6325361,49.7839786 18.5101354,54.8082708 L18.5059568,55.1514561 L18.5059568,96.2205991 C18.5059568,101.262635 21.2100909,105.930346 25.6223198,108.545528 L25.9257887,108.720635 L62.4917192,129.25513 C66.9737863,131.772206 72.4710741,131.832136 77.0014851,129.434921 L77.3312243,129.25513 L113.897155,108.720635 C118.38651,106.199617 121.190256,101.587929 121.31265,96.5637746 L121.316828,96.2205991 L121.316828,55.1514561 C121.316828,50.1092692 118.612846,45.4417025 114.200623,42.826383 L113.897155,42.6512656 L77.3312243,22.1167713 C72.8491571,19.5996952 67.3518694,19.5397648 62.8214584,21.9369801 Z M69.2442049,35.8512397 L88.2394468,68.1217272 L103.868354,54.7872625 L103.868354,94.6758324 C103.868354,97.7547043 101.333778,100.250689 98.2071383,100.250689 L40.2839921,100.24974 C37.1573717,100.249699 34.6227848,97.7537776 34.6227848,94.674925 L34.6227848,54.7872625 L50.2512033,68.1217272 L69.2442049,35.8512397 Z",mask:"url(#zhimg_ic_primelabel_01@2x-b)",opacity:".54"})))};Je.defaultProps={name:"PrivilegeLabel"};var Xe=Je,$e=function(e){var t=e.data,n=e.className,r=e.extra,a=t||{},o=a.vipText,c=a.worthText,l=a.cardColor,s=void 0===l?0:l,d=r||{},f=d.isNewStyle,b=d.isMobile,p=function(e){return f?"".concat(e,b?"-newStyle-mobile":"-newStyle-pc"):e};return 0===s?null:i.a.createElement("div",{className:u()(p("KfeCollection-Privilege"),n)},i.a.createElement(Ye.a,{className:p("KfeCollection-Privilege-vipIcon")}),i.a.createElement("div",{className:p("KfeCollection-Privilege-content")},i.a.createElement("span",{className:"KfeCollection-Privilege-vipText"},o),i.a.createElement("span",null," ".concat(c))),!f&&i.a.createElement(Xe,{className:"KfeCollection-Privilege-label"}))},et=function(e){var t=e.data,n=e.className,r=e.extra,a=t||{},o=a.worthText,c=a.cardColor,l=void 0===c?0:c,s=r||{},d=s.isNewStyle,f=s.isMobile;return 2!==l?null:i.a.createElement("div",{className:u()(d?f?"KfeCollection-OrdinaryLabel-newStyle-mobile":"KfeCollection-OrdinaryLabel-newStyle-pc":"KfeCollection-OrdinaryLabel",n)},i.a.createElement("div",{className:"KfeCollection-OrdinaryLabel-content"},o))},tt=n(1421),nt=n(889),rt=function(e){var t=e.ua,n=void 0===t?{}:t,r=e.isDarkMode,a=void 0!==r&&r,o=e.isFixed,c=void 0!==o&&o;return i.a.createElement("div",{className:c?"KfeCollection-FabledStatement-fixed":"KfeCollection-FabledStatement"},i.a.createElement(nt.a,{isDarkMode:a,ua:n},i.a.createElement(d.a.Provider,{value:n},i.a.createElement(tt.g,{disclaimerInfo:{excerpt:"包含虚构创作",description:"创作声明",subDescription:"内容中的情节存在虚构加工，仅供参考"}}))))};function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R()(e);if(t){var a=R()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T()(this,n)}}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function(e){S()(n,e);var t=at(n);function n(){return j()(this,n),t.apply(this,arguments)}return w()(n,[{key:"render",value:function(){var e=this.props,t=e.result,n=t.introCard,r=t.vipWorthInfo,a=t.isFabled,o=void 0!==a&&a,c=t.abParam,l=t.paidConsult,s=t.zaInfo,u=e.extra,d=u.ua,f=void 0===d?{}:d,b=u.isDarkMode,p=(r||{}).cardColor,h={isNewStyle:"1"===(c||{}).paTopLabel,isMobile:Boolean(f.Mobile)},m=h.isNewStyle&&!h.isMobile&&0!==p;return i.a.createElement("div",{className:"KfeCollection-AnswerTopCard-Container"},i.a.createElement("div",{className:m?"KfeCollection-AnswerTopCard-FlexContainer":""},2===p?i.a.createElement(et,{data:r,extra:h}):i.a.createElement($e,{data:r,className:h.isNewStyle?"":"KfeCollection-AnswerTopCard-Privilege",extra:h}),o&&h.isNewStyle&&i.a.createElement(rt,{ua:f,isDarkMode:b,isFixed:m})),Boolean(n)&&i.a.createElement("div",null,i.a.createElement(Qe,{introCard:n,paidConsult:l,zaInfo:s,extra:h})))}}]),n}(i.a.Component);ot(it,"propTypes",{className:l.a.string,result:l.a.object.isRequired}),ot(it,"defaultProps",{result:{articleDesc:{},vipWorthInfo:{},goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}},extra:{ua:{}}});var ct=it,lt=n(65),st=function(e){var t=e.answer,n=Object(a.useSelector)((function(e){return Object(Ue.x)(e,null==t?void 0:t.id)}))||{},i=n.isRequesting,c=n.error,l=n.result,s=Boolean(!i&&!c&&!l),u=Object(a.useDispatch)();Object(o.useEffect)((function(){s&&u(Object(Ue.u)(t.id))}),[s,u,t.id]);var d=Object(a.useSelector)(lt.m),b=Object(f.a)().isDarkMode;return Object(r.b)(ct,{result:l,extra:{ua:d,isDarkMode:b}})},ut=Object(De.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(r.b)(st,{answer:t}):null}))},1816:function(e,t,n){"use strict";var r=n(1),a=n(1023),o=n(30),i=n.n(o),c=n(40),l=n.n(c),s=n(123),u=n.n(s),d=n(34),f=n.n(d),b=n(24),p=n.n(b),h=n(26),m=n.n(h),v=n(28),g=n.n(v),O=n(17),j=n.n(O),y=n(23),w=n.n(y),C=n(27),x=n.n(C),k=n(0),S=n.n(k),A=n(1420),T=n(1745),I=n(971),R=n(2397),E=n(2402),N=n.n(E),B=n(72),z=n.n(B),L=n(1031),P=n.n(L),_=n(1347),M=n.n(_),D=n(1348),U=n.n(D),F=n(1349),V=n.n(F),G=n(1350),q=n.n(G),H=n(1351),W=n.n(H),K=n(1352),Z=n.n(K),Q=n(1353),Y=n.n(Q),J=n(1354),X=n.n(J),$=n(1355),ee=n.n($),te=n(1356),ne=n.n(te),re=n(1357),ae=n.n(re),oe=n(1358),ie=n.n(oe),ce=n(1359),le=n.n(ce),se=n(1032),ue=n.n(se),de=/([A-Z])/g,fe=function(e){return"-"+String(e.toLowerCase())},be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var pe=["Webkit","ms","Moz","O"];Object.keys(be).forEach((function(e){pe.forEach((function(t){be[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=be[e]}))}));var he=function(e,t){return"number"==typeof t?be[e]?""+t:t+"px":""+t},me=function(e,t){return ge(he(e,t))},ve=function(e,t){return P()(e).toString(36)},ge=function(e){return"!"===e[e.length-10]&&" !important"===e.slice(-11)?e:String(e)+" !important"},Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ye="undefined"!=typeof Map,we=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.keyOrder=[]}return je(e,[{key:"forEach",value:function(e){for(var t=0;t<this.keyOrder.length;t++)e(this.elements[this.keyOrder[t]],this.keyOrder[t])}},{key:"set",value:function(t,n,r){if(this.elements.hasOwnProperty(t)){if(r){var a=this.keyOrder.indexOf(t);this.keyOrder.splice(a,1),this.keyOrder.push(t)}}else this.keyOrder.push(t);if(null!=n){if(ye&&n instanceof Map||n instanceof e){var o=this.elements.hasOwnProperty(t)?this.elements[t]:new e;return n.forEach((function(e,t){o.set(t,e,r)})),void(this.elements[t]=o)}if(Array.isArray(n)||"object"!==(void 0===n?"undefined":Oe(n)))this.elements[t]=n;else{for(var i=this.elements.hasOwnProperty(t)?this.elements[t]:new e,c=Object.keys(n),l=0;l<c.length;l+=1)i.set(c[l],n[c[l]],r);this.elements[t]=i}}else this.elements[t]=n}},{key:"get",value:function(e){return this.elements[e]}},{key:"has",value:function(e){return this.elements.hasOwnProperty(e)}},{key:"addStyleType",value:function(t){var n=this;if(ye&&t instanceof Map||t instanceof e)t.forEach((function(e,t){n.set(t,e,!0)}));else for(var r=Object.keys(t),a=0;a<r.length;a++)this.set(r[a],t[r[a]],!0)}}]),e}(),Ce=["Webkit"],xe=["Moz"],ke=["ms"],Se=["Webkit","Moz"],Ae=["Webkit","ms"],Te=["Webkit","Moz","ms"],Ie={plugins:[M.a,U.a,V.a,q.a,W.a,Z.a,Y.a,X.a,ee.a,ne.a,ae.a,ie.a],prefixMap:{transform:Ae,transformOrigin:Ae,transformOriginX:Ae,transformOriginY:Ae,backfaceVisibility:Ce,perspective:Ce,perspectiveOrigin:Ce,transformStyle:Ce,transformOriginZ:Ce,animation:Ce,animationDelay:Ce,animationDirection:Ce,animationFillMode:Ce,animationDuration:Ce,animationIterationCount:Ce,animationName:Ce,animationPlayState:Ce,animationTimingFunction:Ce,appearance:Se,userSelect:Te,fontKerning:Ce,textEmphasisPosition:Ce,textEmphasis:Ce,textEmphasisStyle:Ce,textEmphasisColor:Ce,boxDecorationBreak:Ce,clipPath:Ce,maskImage:Ce,maskMode:Ce,maskRepeat:Ce,maskPosition:Ce,maskClip:Ce,maskOrigin:Ce,maskSize:Ce,maskComposite:Ce,mask:Ce,maskBorderSource:Ce,maskBorderMode:Ce,maskBorderSlice:Ce,maskBorderWidth:Ce,maskBorderOutset:Ce,maskBorderRepeat:Ce,maskBorder:Ce,maskType:Ce,textDecorationStyle:Se,textDecorationSkip:Se,textDecorationLine:Se,textDecorationColor:Se,filter:Ce,fontFeatureSettings:Se,breakAfter:Te,breakBefore:Te,breakInside:Te,columnCount:Se,columnFill:Se,columnGap:Se,columnRule:Se,columnRuleColor:Se,columnRuleStyle:Se,columnRuleWidth:Se,columns:Se,columnSpan:Se,columnWidth:Se,writingMode:Ae,flex:Ae,flexBasis:Ce,flexDirection:Ae,flexGrow:Ce,flexFlow:Ae,flexShrink:Ce,flexWrap:Ae,alignContent:Ce,alignItems:Ce,alignSelf:Ce,justifyContent:Ce,order:Ce,transitionDelay:Ce,transitionDuration:Ce,transitionProperty:Ce,transitionTimingFunction:Ce,backdropFilter:Ce,scrollSnapType:Ae,scrollSnapPointsX:Ae,scrollSnapPointsY:Ae,scrollSnapDestination:Ae,scrollSnapCoordinate:Ae,shapeImageThreshold:Ce,shapeImageMargin:Ce,shapeImageOutside:Ce,hyphens:Te,flowInto:Ae,flowFrom:Ae,regionFragment:Ae,textOrientation:Ce,boxSizing:xe,textAlignLast:xe,tabSize:xe,wrapFlow:ke,wrapThrough:ke,wrapMargin:ke,touchAction:ke,gridTemplateColumns:ke,gridTemplateRows:ke,gridTemplateAreas:ke,gridTemplate:ke,gridAutoColumns:ke,gridAutoRows:ke,gridAutoFlow:ke,grid:ke,gridRowStart:ke,gridColumnStart:ke,gridRowEnd:ke,gridRow:ke,gridColumn:ke,gridColumnEnd:ke,gridColumnGap:ke,gridRowGap:ke,gridArea:ke,gridGap:ke,textSizeAdjust:Ae,borderImage:Ce,borderImageOutset:Ce,borderImageRepeat:Ce,borderImageSlice:Ce,borderImageSource:Ce,borderImageWidth:Ce}};var Re=le()(Ie),Ee=[function(e,t,n){return":"!==e[0]?null:n(t+e)},function(e,t,n){if("@"!==e[0])return null;var r=n(t);return[String(e)+"{"+String(r.join(""))+"}"]}],Ne=function e(t,n,r,a,o){for(var i=new we,c=0;c<n.length;c++)i.addStyleType(n[c]);var l=new we,s=[];i.forEach((function(n,i){r.some((function(c){var l=c(i,t,(function(t){return e(t,[n],r,a,o)}));if(null!=l)return Array.isArray(l)?s.push.apply(s,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l)):(console.warn("WARNING: Selector handlers should return an array of rules.Returning a string containing multiple rules is deprecated.",c),s.push("@media all {"+String(l)+"}")),!0}))||l.set(i,n,!0)}));var u=Le(t,l,a,o,r);return u&&s.unshift(u),s},Be=function(e,t,n){return String("m"===(r=e.replace(de,fe))[0]&&"s"===r[1]&&"-"===r[2]?"-"+String(r):r)+":"+String(n(e,t))+";";var r},ze=function(e,t){return e[t]=!0,e},Le=function(e,t,n,r,a){!function(e,t,n){if(t)for(var r=Object.keys(t),a=0;a<r.length;a++){var o=r[a];e.has(o)&&e.set(o,t[o](e.get(o),n),!1)}}(t,n,a);var o=Object.keys(t.elements).reduce(ze,Object.create(null)),i=Re(t.elements),c=Object.keys(i);if(c.length!==t.keyOrder.length)for(var l=0;l<c.length;l++)if(!o[c[l]]){var s=void 0;if((s="W"===c[l][0]?c[l][6].toLowerCase()+c[l].slice(7):"o"===c[l][1]?c[l][3].toLowerCase()+c[l].slice(4):c[l][2].toLowerCase()+c[l].slice(3))&&o[s]){var u=t.keyOrder.indexOf(s);t.keyOrder.splice(u,0,c[l])}else t.keyOrder.unshift(c[l])}for(var d=!1===r?he:me,f=[],b=0;b<t.keyOrder.length;b++){var p=t.keyOrder[b],h=i[p];if(Array.isArray(h))for(var m=0;m<h.length;m++)f.push(Be(p,h[m],d));else f.push(Be(p,h,d))}return f.length?String(e)+"{"+String(f.join(""))+"}":""},Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var _e=null,Me={fontFamily:function e(t){if(Array.isArray(t)){var n={};return t.forEach((function(t){n[e(t)]=!0})),Object.keys(n).join(",")}return"object"===(void 0===t?"undefined":Pe(t))?(Ge(t.src,"@font-face",[t],!1),'"'+String(t.fontFamily)+'"'):t},animationName:function e(t,n){if(Array.isArray(t))return t.map((function(t){return e(t,n)})).join(",");if("object"===(void 0===t?"undefined":Pe(t))){var r="keyframe_"+String((o=t,ve(JSON.stringify(o)))),a="@keyframes "+r+"{";return t instanceof we?t.forEach((function(e,t){a+=Ne(t,[e],n,Me,!1).join("")})):Object.keys(t).forEach((function(e){a+=Ne(e,[t[e]],n,Me,!1).join("")})),Ve(r,[a+="}"]),r}return t;var o}},De={},Ue=[],Fe=!1,Ve=function(e,t){var n;if(!De[e]){if(!Fe){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");Fe=!0,ue()(He)}(n=Ue).push.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)),De[e]=!0}},Ge=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!De[e]){var o=Ne(t,n,a,Me,r);Ve(e,o)}},qe=function(){Fe=!1;var e=Ue;return Ue=[],e},He=function(){var e=qe();e.length>0&&function(e){if(null==_e&&null==(_e=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(_e=document.createElement("style")).type="text/css",_e.setAttribute("data-aphrodite",""),t.appendChild(_e)}var n=_e.styleSheet||_e.sheet;if(n.insertRule){var r=n.cssRules.length;e.forEach((function(e){try{n.insertRule(e,r),r+=1}catch(e){}}))}else _e.innerText=(_e.innerText||"")+e.join("")}(e)},We=function(e){e.forEach((function(e){De[e]=!0}))},Ke=function(e,t,n){var r=[],a=[],o=function e(t,n,r,a){for(var o=0;o<t.length;o+=1)t[o]&&(Array.isArray(t[o])?a+=e(t[o],n,r,a):(n.push(t[o]._name),r.push(t[o]._definition),a+=t[o]._len));return a}(t,r,a,0);if(0===r.length)return"";var i=void 0;return i=1===r.length?"_"+String(r[0]):"_"+String(ve(r.join()))+String((o%36).toString(36)),Ge(i,"."+String(i),a,e,n),i},Ze=function(e,t){return String(t)+"_"+String(ve(e))},Qe=ve,Ye={create:function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r+=1){var a=n[r],o=e[a],i=JSON.stringify(o);t[a]={_len:i.length,_name:Qe(i,a),_definition:o}}return t},rehydrate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];We(e)}},Je="undefined"!=typeof window?null:{renderStatic:function(e){return Ue=[],De={},Fe=!1,_e=null,function(){if(Fe)throw new Error("Cannot buffer while already buffering");Fe=!0}(),{html:e(),css:{content:qe().join(""),renderedClassNames:Object.keys(De)}}}};var Xe=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ee;return{StyleSheet:Object.assign({},Ye,{extend:function(r){var a=r.map((function(e){return e.selectorHandler})).filter((function(e){return e}));return e(t,n.concat(a))}}),StyleSheetServer:Je,StyleSheetTestUtils:null,minify:function(e){Qe=e?ve:Ze},css:function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return Ke(t,r,n)},flushToStyleTag:He,injectAndGetClassName:Ke,defaultSelectorHandlers:Ee}}(!0),$e=(Xe.StyleSheet,Xe.StyleSheetServer,Xe.StyleSheetTestUtils,Xe.css),et=(Xe.minify,Xe.flushToStyleTag,Xe.injectAndGetClassName,Xe.defaultSelectorHandlers,n(2409)),tt=n(105),nt=n(5),rt=n(1360),at=n(476),ot=n(46),it=n(59),ct=n(466),lt=n.n(ct),st=["id","autoplay","onEvent","children","className","sources","isAbortLoadVideo","pageName","hideWatermark"],ut=["id","zaProps","autoplay"],dt=["id","autoplay","defaultQuality","hideMobileControls","hideCover","noWriteDocTitle","isAbortLoadVideo","pageName","className","dispatchRef"],ft=["id","zaProps","autoplay","hybridVideoManagerRef","defaultQuality","hideMobileControls","hideCover","isAbortLoadVideo","noWriteDocTitle","pageName"];function bt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function pt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return ht(t,void 0!==n&&n<r?n:r)}return e(t,n)}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j()(e);if(t){var a=j()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var vt=function(e){var t=e.msg;return Object(r.b)("div",{css:{position:"absolute",overflow:"hidden",top:0,bottom:0,left:0,right:0,background:"#EBEBEB"},children:Object(r.b)("div",{css:{position:"absolute",zIndex:1,top:"50%",left:"50%",color:"#BFBFBF",transform:"translate(-50%, -50%)",whiteSpace:"nowrap"},children:t})})},gt={fhd:"1080P",hd:"720P",sd:"480P",ld:"360P"},Ot=function(){function e(t){var n=this,r=t.push,a=t.update,o=t.remove,i=t.getMessageHelper;w()(this,e),this.EVENTS=[I.b.CHANGE_QUALITY_START,I.b.CHANGE_QUALITY_SUCCESS,I.b.CHANGE_QUALITY_FAIL],this.unsubscribes=[],this.timer=null,this.isUpdating=!1,this.handleMessage=function(e,t){[I.b.CHANGE_QUALITY_START,I.b.CHANGE_QUALITY_SUCCESS,I.b.CHANGE_QUALITY_FAIL].includes(e)&&n.handleChangeQuality(e,t)},this.handleChangeQuality=function(e,t){switch(e){case I.b.CHANGE_QUALITY_START:if(n.timer&&(clearTimeout(n.timer),n.remove({type:"quality"}),n.timer=null),n.isUpdating)return void n.update({type:"quality",text:"正在为你切换到".concat(gt[t],"，请稍候…")});n.push({type:"quality",text:"正在为你切换到".concat(gt[t],"，请稍候…")}),n.isUpdating=!0;break;case I.b.CHANGE_QUALITY_SUCCESS:n.update({type:"quality",text:"已成功切换清晰度"}),n.isUpdating=!1,clearTimeout(n.timer),n.timer=setTimeout((function(){n.remove({type:"quality"}),n.timer=null}),3e3);break;case I.b.CHANGE_QUALITY_FAIL:}};var c=i();this.unsubscribes=[],this.EVENTS=[I.b.CHANGE_QUALITY_START,I.b.CHANGE_QUALITY_SUCCESS,I.b.CHANGE_QUALITY_FAIL],this.EVENTS.forEach((function(e){var t=n.handleMessage.bind(n,e),r=c.subscribeMessage((function(n,r){n===e&&t(r)})).unsubscribe;n.unsubscribes.push({handler:t,unsubscribe:function(){clearTimeout(n.timer),r()}})})),this.push=r,this.update=a,this.remove=o,this.timer=null,this.isUpdating=!1}return x()(e,[{key:"destroy",value:function(){this.unsubscribes.forEach((function(e){var t=e.handler;(0,e.unsubscribe)(t)}))}}]),e}(),jt=function(){function e(t){var n=this,r=t.push,a=t.update,o=t.remove,i=t.getMessageHelper;w()(this,e),this.EVENTS=I.b.PLAYBACK_RATE_CHANGE,this.unsubscribes=[],this.timer=null,this.isUpdating=!1,this.handleChange=function(e){var t=e.rate;n.timer&&(clearTimeout(n.timer),n.remove({type:"rate"}),n.timer=null),n.push({type:"rate",text:"已成功切换到".concat(t.text,"倍速")}),n.timer=setTimeout((function(){n.remove({type:"rate"}),n.timer=null}),3e3)};var c=this.handleChange.bind(this),l=i().subscribeMessage((function(e,t){e===n.EVENTS&&c(t)})).unsubscribe;this.unsubscribes=[{handler:c,unsubscribe:function(){clearTimeout(n.timer),l()}}],this.push=r,this.update=a,this.remove=o}return x()(e,[{key:"destroy",value:function(){this.unsubscribes.forEach((function(e){var t=e.handler;(0,e.unsubscribe)(t)}))}}]),e}(),yt=function(e){var t=e.thumbnail,n=e.msg;return Object(r.c)("div",{css:{position:"absolute",overflow:"hidden",top:"50%",transform:"translateY(-50%)",width:"100%",height:"100%"},children:[t&&Object(r.b)("img",{css:{width:"100%",filter:"blur(8px)",transform:"scale(1.1)"},src:t,alt:""}),Object(r.b)("div",{css:{position:"absolute",zIndex:1,top:"50%",left:"50%",color:"#fff",transform:"translate(-50%, -50%)"},children:n})]})},wt=function(){return Object(r.b)("div",{css:{width:"100%",height:"100%",backgroundColor:"#000",position:"absolute",top:0,left:0}})},Ct="playfailed",xt="playcount",kt="playbuffering",St="bufferingtime",At="firstframetime";function Tt(e){var t=e.msg,n=e.id,r=e.time,a=void 0===r?0:r,o=e.quality,i=e.detail,c=void 0===i?"":i,l=e.f,s=e.bu,u=e.v,d=e.platform;if(n){var f,b=N()(navigator.userAgent),p=Object(R.stringify)({type:"msg",msg:t,time:a,videoid:n,playtype:"inline",quality:o,platform:d,version:"1.0.0",f:l,bu:s,v:u,timestamp:Date.now(),dummy:Math.random(),btype:b.browser.name,bversion:b.browser.version,ostype:b.os.name,osversion:b.os.version,detail:c});(f="report?".concat(p),fetch("".concat("https://lens.zhihu.com","/").concat(f),{headers:{"X-Referer":document.referrer,"Content-Type":"application/json","X-App-Za":"OS=webplayer"},credentials:"include"})).catch(z.a)}}var It=function(e,t,n,r){if(!e||!t||!n)return z.a;var a=Object(R.parse)(n),o=a.v,i=a.bu,c=a.f,l=r?"webmse":"web";return function(n,r){return Tt({msg:n,id:e,time:r,quality:t,v:o,bu:i,f:c,platform:l})}},Rt=function(){function e(t){var n=t.onStart,r=void 0===n?z.a:n,a=t.onStop,o=void 0===a?z.a:a;w()(this,e),this._onStart=r,this._onStop=o,this._startTime=0}return x()(e,[{key:"start",value:function(e){this.isRunning()||(this._startTime=Date.now(),this._onStart(this._startTime,e))}},{key:"reset",value:function(){this._startTime=0}},{key:"stop",value:function(e){if(this.isRunning()){var t=Date.now()-this._startTime;this._onStop(t,e),this.reset()}}},{key:"isRunning",value:function(){return this._startTime>0}}]),e}(),Et=function(e){m()(n,e);var t=mt(n);function n(){var e;return w()(this,n),(e=t.apply(this,arguments)).firstFrameStopwatch=new Rt({onStart:function(){return e.sendReport(xt)},onStop:function(t){return e.sendReport(At,t)}}),e.bufferStopwatch=new Rt({onStop:function(t,n){t>100&&(e.sendReport(kt,1e3*n),e.sendReport(St,t))}}),e.allowReportPlayfailed=!1,e.handleWaiting=function(){e.firstFrameStopwatch.isRunning()||e.bufferStopwatch.start()},e.handlePlaying=function(t){e.firstFrameStopwatch.stop(),e.bufferStopwatch.stop(t.currentTime)},e.sendReport=function(t,n){if(t===Ct){if(!e.allowReportPlayfailed)return;e.allowReportPlayfailed=!1}else t===xt&&(e.allowReportPlayfailed=!0);e.props.sendReport(t,n)},e}return x()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.id;this.messageHelper=Object(I.c)(t,"*",!0);var n=this.messageHelper.subscribeMessage;n(I.b.PLAY_COUNT,(function(){e.firstFrameStopwatch.start()})),n(I.b.PLAY_FAILED,(function(t){e.sendReport(Ct,t.currentTime)})),n(I.b.WAITING,(function(){e.handleWaiting()})),n(I.b.PLAYING,(function(t){e.handlePlaying(t)}))}},{key:"componentWillUnmount",value:function(){this.messageHelper.dispose()}},{key:"render",value:function(){return null}}]),n}(S.a.PureComponent),Nt=function(e){var t=e.id,n=e.useMSE,a=e.source,o=Object(k.useRef)(Object(I.c)(t,"*",!0)),i=Object(k.useState)(),c=pt(p.a,i,2),l=c[0],s=c[1],u=Object(k.useState)(),d=pt(p.a,u,2),f=d[0],b=d[1];return Object(k.useEffect)((function(){var e=o.current.subscribeMessage((function(e,t){var n;if(e===I.b.QUALITY_CHANGE&&a){var r=t.quality;s(r),b(null===(n=a[r])||void 0===n?void 0:n.play_url)}}));return function(){return e.unsubscribe()}}),[a]),Object(r.b)(Et,{id:t,sendReport:It(t,l,f,n)},t)},Bt=et.StyleSheet.create({toastRoot:{position:"absolute",left:"1em",bottom:"4em",padding:0},toastItem:{display:"flex",textAlign:"left",color:"#fff",padding:"0 0.5em",height:"2em",backgroundColor:"rgba(0,0,0,0.3)",alignItems:"center",marginTop:"0.3em",borderRadius:"20px",fontSize:"14px"},toastButton:{position:"absolute",right:0,bottom:"100px"}}),zt=function(e){var t=e.toast;return Object(r.b)("li",{className:$e(Bt.toastItem),children:t.text},t.id)},Lt=function(e){var t=e.toastConstructors,n=e.id,a=Object(k.useRef)(0),o=Object(k.useState)([]),i=pt(p.a,o,2),c=i[0],l=i[1],s=Object(tt.a)((function(e){c.push(Object.assign(Object.assign({},e),{},{id:a.current++})),l(pt(f.a,c))})),u=Object(tt.a)((function(e){var t=e.type;l(c.filter((function(e){return e.type!==t})))})),d=Object(tt.a)((function(e){var t=e.type,n=c.findIndex((function(e){return e.type===t}));-1!==n&&(c[n]=Object.assign(Object.assign({},c[n]),e),l(pt(f.a,c)))})),b=Object(k.useRef)([]);return Object(k.useEffect)((function(){return b.current=[],t.forEach((function(e){b.current.push(new e({push:s,update:d,remove:u,getMessageHelper:function(){return Object(I.c)(n,"*",!0)}}))})),function(){b.current.forEach((function(e){return e.destroy&&e.destroy()}))}}),[b,n,s,d,u,t]),Object(k.useEffect)((function(){return function(){b.current.forEach((function(e){return e.destroy&&e.destroy()}))}}),[n]),Object(r.b)("ul",{className:$e(Bt.toastRoot),children:c.map((function(e){return Object(r.b)(zt,{toast:e},e.id)}))})};var Pt=[{min:0,max:60,timeType:"<1min"},{min:60,max:180,timeType:"1_3min"},{min:180,max:300,timeType:"3_5min"},{min:300,max:600,timeType:"5_10min"},{min:600,max:1200,timeType:"10_20min"},{min:1200,max:1800,timeType:"20_30min"},{min:1800,timeType:">30min",max:1/0}],_t=function(e,t,n){var r,a,o=bt(Pt,!0);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(e<i.max&&e>=i.min){r="BizVideoPlayer.".concat(n,".player.").concat(i.timeType,".").concat(t,".count");break}}}catch(e){o.e(e)}finally{o.f()}r&&(ot.b.increment("BizVideoPlayer.".concat(n,".player.all.").concat(t,".count")),ot.b.increment(r))},Mt=function(e){var t=e.id,n=e.isAbortLoadVideo,r=e.pageName,a=e.onEvent,o=e.ref,i=e.sources,c=Object(k.useRef)(),s=function(e){var t=Object(rt.d)().mutate,n=Object(at.b)(),r="".concat("https://lens.zhihu.com","/api/v4/videos/").concat(null!=e?e:""),a=Object(rt.b)(e?r:null,function(){var e=u()(l.a.mark((function e(t){var r,a,o,i,c,s,u,d,f,b,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t,{headers:{"X-App-Za":"OS=webplayer","X-Referer":document.referrer,"Content-Type":"application/json"}});case 3:if(a=e.sent,o=Object.keys(a.playlist).reduce((function(e,t){return a.playlist[t]&&(e[t.toLowerCase()]=Object(nt.decamelizeKeys)(a.playlist[t])),e}),{}),a.playlist=o,i=o.sd,c=o.ld,s=o.hd,u=c||i||s){e.next=10;break}return e.abrupt("return",a);case 10:return d=u.width,f=u.height,b=u.duration,a.width=d||0,a.height=f||0,a.duration=b||0,a.smallWhPercent=!!a.height&&Math.abs(a.width/a.height-16/9)<.012,e.abrupt("return",a);case 18:throw e.prev=18,e.t0=e.catch(0),(p=null===(r=e.t0.payload)||void 0===r?void 0:r.error)?ot.b.increment("BizVideoPlayer.default.api.fetchVideoInfo.error.responseError.".concat(p.code||"unknown",".count")):ot.b.increment("BizVideoPlayer.default.api.fetchVideoInfo.error.fetchError.default.count"),e.t0||{message:"视频加载失败"};case 23:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),{revalidateOnFocus:!1});return{data:a.data,error:a.error,reload:Object(tt.a)((function(){return t(r)}))}}(t),d=s.data,f=s.error,b=s.reload,h=Object(k.useState)(!1),m=pt(p.a,h,2),v=m[0],g=m[1],O=function(){var e=Object(k.useState)(),t=pt(p.a,e,2),n=t[0],r=t[1],a=Object(tt.a)((function(e){var t=e.data||{},n=t.message,a=t.data;"data-set"===n&&r(a)}));return Object(k.useEffect)((function(){return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}),[a]),n}(),j=Object(k.useRef)(null),y=Object(k.useState)(!1),w=pt(p.a,y,2),C=w[0],x=w[1],S=Object(k.useState)(),A=pt(p.a,S,2),T=A[0],E=A[1];!function(e){var t=e.id,n=e.pageName,r=Object(k.useRef)({t0:0,t1:0,duration:0,videoDuration:0}),a=Object(k.useRef)(!1),o=Object(k.useRef)(!1),i=Object(tt.a)((function(){a.current||(r.current.t1=Date.now(),r.current.t1-r.current.t0+r.current.duration>6e3?(a.current=!0,_t(r.current.videoDuration,"6svv",n)):r.current.duration+=r.current.t1-r.current.t0)})),c=Object(tt.a)((function(){a.current||(r.current.t0=Date.now())})),l=Object(tt.a)((function(e){o.current||(r.current.videoDuration=e.duration?e.duration:0,o.current=!0,_t(r.current.videoDuration,"vv",n))}));Object(k.useLayoutEffect)((function(){var e=Object(I.c)(t,"*",!0),n=e.subscribeMessage,r=e.dispose;return n(I.b.PLAY,c),n(I.b.PAUSE,i),n(I.b.ENDED,i),n(I.b.CANPLAY,l),function(){r()}}),[c,l,i,t]),Object(k.useLayoutEffect)((function(){return window.addEventListener("pagehide",i,!1),window.addEventListener("beforeunload",i,!1),function(){i(),window.removeEventListener("pagehide",i,!1),window.removeEventListener("beforeunload",i,!1)}}),[i])}({pageName:r,id:t}),function(e){var t=e.id,n=e.isAbortLoadVideo,r=e.pageName,a=e.isStartLoadVideo,o=Object(k.useMemo)((function(){return Object(I.c)(t,"*",!0)}),[t]),i=Object(k.useRef)(!1),c=Object(k.useRef)(0),l=Object(k.useRef)([]),s=Object(k.useRef)(),u=Object(tt.a)((function(e){return setTimeout((function(){ot.b.increment("BizVideoPlayer.".concat(r,".player.play.loading.timeBucket_").concat(e,".count"))}),e)})),d=Object(tt.a)((function(){l.current.forEach((function(e){e&&clearTimeout(e)}))}));Object(k.useEffect)((function(){return d}),[d]),Object(k.useLayoutEffect)((function(){a&&!s.current&&(s.current=Date.now())}),[a]);var f=Object(tt.a)((function(e,t){var a,o;switch(e){case I.b.PLAY_COUNT:i.current=!0,c.current=Date.now(),ot.b.increment("BizVideoPlayer.".concat(r,".player.play.intention.count")),l.current=[u(5e3),u(1e4),u(15e3),u(2e4)];break;case I.b.PLAYING:if(i.current){i.current=!1,d(),ot.b.increment("BizVideoPlayer.".concat(r,".player.play.success.count"));var f=Date.now()-c.current;ot.b.timing("BizVideoPlayer.".concat(r,".player.play.firstFramePlay.default.timing"),f)}break;case I.b.PLAY_FAILED:i.current=!1,d(),i&&!n&&ot.b.increment("BizVideoPlayer.".concat(r,".player.play.failure.count"));break;case I.b.ERROR:(null==t?void 0:t.error)&&(i.current=!1,d(),n||ot.b.increment("BizVideoPlayer.".concat(r,".player.play.error.default.").concat((null===(a=t.error)||void 0===a?void 0:a.code)||"unknown","_").concat((null===(o=t.error)||void 0===o?void 0:o.message)||"unknown",".count")));break;case I.b.LOADEDDATA:s.current&&ot.b.timing("BizVideoPlayer.".concat(r,".player.firstFrameTime"),Date.now()-s.current)}}));Object(k.useEffect)((function(){return o.subscribeMessage(f),o.dispose}),[o,f])}({id:t,isAbortLoadVideo:n,pageName:r,isStartLoadVideo:Boolean(i||d&&!d.isConverting&&!f)});var N=Object(tt.a)((function(e){return e?function(e){var t=Object(R.parse)(e).expiration,n=Date.now()/1e3;return t&&Number(t)<n+900}(e)?b:Promise.resolve():Promise.reject()})),B=function(e){g(e)},z=Object(tt.a)((function(e,t){switch(a&&a(e,t),e){case I.b.ENTER_FULLSCREEN:case I.b.ENTER_PAGE_FULLSCREEN:B(!0);break;case I.b.EXIT_FULLSCREEN:case I.b.EXIT_PAGE_FULLSCREEN:B(!1);break;case I.b.SUBSCRIPTION_READY:x(!0)}}));return Object(k.useImperativeHandle)(o,(function(){return T}),[T]),Object(k.useEffect)((function(){g(!1)}),[t]),Object(k.useEffect)((function(){var e,t,n;E({dispatchAction:null===(e=c.current)||void 0===e?void 0:e.dispatchAction,subscribeEvent:null===(t=c.current)||void 0===t?void 0:t.subscribeEvent,videoElement:C?null===(n=j.current)||void 0===n?void 0:n.querySelector("video"):null})}),[c.current,j.current,C]),{messageContextRef:c,wrapperRef:j,data:d,error:f,externalData:O,handleBeforePlay:N,handleMessage:z,fullScreen:v}},Dt=Object(k.memo)((function(e){var t=e.zhihuLogoSrc,n=e.nickNameSrc;return Object(r.c)(it.Flex,{alignItems:"center",height:"8.57%",width:"max-content",justifyContent:"flex-end",css:{position:"absolute",top:"1.9%",right:"1.07%"},children:[Boolean(n)&&Object(r.b)(it.Image,{src:n,css:{display:"block"},height:"60%",mr:"-2px"}),Object(r.b)(it.Image,{src:t||"https://pica.zhimg.com/80/v2-57c72e66dd4e5cdcc6c137915d81eb88_1440w.png",css:{display:"block"},height:"100%"})]})})),Ut={"zh-Hans":{"quality-ld":{text:"流畅 360P",narrow:"流畅"},"quality-sd":{text:"清晰 480P",narrow:"清晰"},"quality-hd":{text:"高清 720P",narrow:"高清"},"quality-fhd":{text:"超清 1080P",narrow:"超清"}}},Ft=Object(k.forwardRef)((function(e,t){var n=e.id,a=e.autoplay,o=e.onEvent,c=e.children,s=e.className,d=e.sources,f=e.isAbortLoadVideo,b=void 0!==f&&f,h=e.pageName,m=void 0===h?"default":h,v=e.hideWatermark,g=void 0!==v&&v,O=i()(e,st),j=Mt({id:n,isAbortLoadVideo:b,pageName:m,onEvent:o,ref:t,sources:d}),y=j.messageContextRef,w=j.wrapperRef,C=j.data,x=j.error,S=j.externalData,A=j.handleBeforePlay,R=j.handleMessage,E=j.fullScreen,N=Object(k.useMemo)((function(){return[Ot,jt]}),[]),B=function(e){var t=Object(k.useState)(""),n=pt(p.a,t,2),r=n[0],a=n[1],o=Object(k.useState)(""),i=pt(p.a,o,2),c=i[0],s=i[1],d=Object(k.useState)(!1),f=pt(p.a,d,2),b=f[0],h=f[1],m=Object(k.useState)(!1),v=pt(p.a,m,2),g=v[0],O=v[1],j=Object(k.useState)(!1),y=pt(p.a,j,2),w=y[0],C=y[1],x=Object(k.useState)(!0),S=pt(p.a,x,2),A=S[0],T=S[1],R=Object(k.useRef)(Object(I.c)(e,"*",!0));return Object(k.useEffect)((function(){return R.current.subscribeMessage((function(e){e===I.b.PLAY_COUNT&&O(!0)})),R.current.dispose}),[]),Object(k.useEffect)((function(){var t=fetch("/api/v4/video/play/watermark",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({video_id:e})}),n=fetch("/api/v4/video/play/watermark_switch");Promise.all([t,n]).then(function(){var e=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].json();case 2:return e.t0=e.sent,e.next=5,t[1].json();case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=pt(p.a,e,2),n=t[0],r=t[1];a(n.logo),s(n.nick_name_url),h(r.watermark)})).catch(z.a)}),[e]),Object(k.useEffect)((function(){var e=new URL(location.href).searchParams;C(Boolean(e.get("vzuu")))}),[]),Object(k.useEffect)((function(){T(w||!g||b)}),[w,g,b]),{off:A,zhihuLogoSrc:r,nickNameSrc:c}}(n),L=B.off,P=B.zhihuLogoSrc,_=B.nickNameSrc,M=!g&&!L&&0===(null==C?void 0:C.watermarked);if(Object(k.useEffect)((function(){requestAnimationFrame((function(){window.parent.postMessage({from:"biz-video-player",event:"onGriffithMount",id:n,timestamp:Date.now()},"*")}))}),[]),x)return Object(r.b)(vt,{msg:x.message||"视频加载失败"});if(!d&&!C)return Object(r.b)(wt,{});var D=C||{},U=D.title,F=D.coverUrl,V=D.thumbnail,G=D.isConverting,q=D.smallWhPercent,H=D.duration,W=q&&!E?"cover":"contain";return G?Object(r.b)(yt,{thumbnail:V,msg:"视频正在转码中..."}):Object(r.b)("div",{className:s,ref:w,children:Object(r.c)(T.default,Object.assign(Object.assign(Object.assign({},O),S),{},{autoplay:a,localeConfig:Ut,standalone:!0,id:n,title:U,error:x?x||{message:"视频已被删除"}:void 0,cover:F,duration:H,sources:d||(null==C?void 0:C.playlist),onBeforePlay:A,locale:"zh-Hans",shouldObserveResize:!0,defaultQuality:"hd",initialObjectFit:W,onEvent:R,layerContent:M&&Object(r.b)(Dt,{nickNameSrc:_,zhihuLogoSrc:P}),messageContextRef:y,children:[Object(r.b)(Nt,{id:n,useMSE:!1,source:d||(null==C?void 0:C.playlist)}),Object(r.b)(Lt,{toastConstructors:N,id:n}),c]}))})})),Vt=Object(k.forwardRef)((function(e,t){var n=e.id,a=e.zaProps,o=e.autoplay,c=i()(e,ut);return Object(r.b)(A.b,Object.assign(Object.assign({id:n,autoplay:o},a),{},{children:Object(r.b)(Ft,Object.assign({ref:t,id:n,autoplay:o},c))}))})),Gt=Object(k.forwardRef)((function(e,t){var n=e.id,a=e.autoplay,o=void 0!==a&&a,c=e.defaultQuality,l=void 0===c?"hd":c,s=e.hideMobileControls,u=void 0!==s&&s,d=e.hideCover,f=void 0!==d&&d,b=e.noWriteDocTitle,p=void 0!==b&&b,h=e.isAbortLoadVideo,m=void 0!==h&&h,v=e.pageName,g=void 0===v?"default":v,O=e.className,j=e.dispatchRef,y=i()(e,dt),w=Mt({id:n,isAbortLoadVideo:m,pageName:g,ref:t}),C=w.messageContextRef,x=w.wrapperRef,k=w.data,S=w.error,A=w.handleBeforePlay,I=w.handleMessage,R=w.fullScreen;if(S)return Object(r.b)(vt,{msg:S.message||"视频加载失败"});if(!k)return Object(r.b)(wt,{});var E=k.title,N=k.coverUrl,B=k.thumbnail,z=k.playlist,L=k.smallWhPercent,P=k.duration;if(k.isConverting)return Object(r.b)(yt,{thumbnail:B,msg:"视频正在转码中..."});var _=lt()(z);return m&&_&&Object.values(_).forEach((function(e){e.play_url=""})),Object(r.b)("div",{className:O,ref:x,children:Object(r.b)(T.default,Object.assign(Object.assign({},y),{},{standalone:!0,shouldObserveResize:!0,autoplay:o,id:n,title:E,noWriteDocTitle:p,hideCover:f,cover:N,duration:P,sources:_,hideMobileControls:u,locale:"zh-Hans",defaultQuality:l,initialObjectFit:L&&!R?"cover":"contain",messageContextRef:C,error:S,onBeforePlay:A,onEvent:I,dispatchRef:j}))})})),qt=(Object(k.forwardRef)((function(e,t){var n=e.id,a=e.zaProps,o=e.autoplay,c=void 0!==o&&o,l=e.hybridVideoManagerRef,s=e.defaultQuality,u=void 0===s?"sd":s,d=e.hideMobileControls,f=void 0!==d&&d,b=e.hideCover,p=void 0!==b&&b,h=e.isAbortLoadVideo,m=void 0!==h&&h,v=e.noWriteDocTitle,g=void 0!==v&&v,O=e.pageName,j=void 0===O?"default":O,y=i()(e,ft);return Object(r.b)(A.a,Object.assign(Object.assign({id:n},a),{},{ref:l,children:Object(r.b)(Gt,Object.assign(Object.assign({},y),{},{ref:t,autoplay:c,id:n,defaultQuality:u,hideMobileControls:f,hideCover:p,isAbortLoadVideo:m,noWriteDocTitle:g,pageName:j}))}))})),n(374)),Ht=n(68),Wt=n(35),Kt=n(1429),Zt=n(39),Qt=n(224),Yt=n(51),Jt=n(869),Xt=n(52),$t=Object.assign;var en=function(e){return S.a.createElement(Xt.a,$t({fill:"none",viewBox:"0 0 40 40"},e),S.a.createElement("path",{fill:"#fff",d:"M18.194 28.016a9.844 9.844 0 110-19.688 9.844 9.844 0 010 19.688zm10.362-1.813a13.069 13.069 0 10-2.317 2.331l6.045 6.045a1.684 1.684 0 002.317-2.331l-6.045-6.045z",fillRule:"evenodd",clipRule:"evenodd"}))},tn=Object.assign;var nn=function(e){return S.a.createElement(Xt.a,tn({fill:"none",viewBox:"0 0 124 64"},e),S.a.createElement("path",{fill:"#fff",d:"M0 6a6 6 0 016-6h117v64H6a6 6 0 01-6-6V6z"}),S.a.createElement("path",{fill:"#0767FB",d:"M35.274 31.36h5.729A1.642 1.642 0 0142.629 33v1.813h-7.657a37.718 37.718 0 01-1.44 6.794 19.258 19.258 0 01-4.159 7.412 7.082 7.082 0 01-6.966 1.238 41.498 41.498 0 004.016-3.872 21.589 21.589 0 003.872-6.836 23.184 23.184 0 001.021-4.736h-8.39a3.44 3.44 0 013.44-3.44h5.281c.058-.623.087-1.256.087-1.9v-7.196h-2.98c-.115.144-.115.274-.115.389a5.413 5.413 0 01-2.62 3.756 7.542 7.542 0 01-3.266.778s1.51-3.052 2.13-4.779l.059-.172c.378-1.106.968-2.831 1.61-4.635a4.174 4.174 0 011.77-2.519 5.455 5.455 0 013.11-.92s-1.094 3.252-1.44 4.317l-.033.073a.628.628 0 00-.082.258h10.19a1.77 1.77 0 011.77 1.756v1.684h-6.563v9.096zm8.694-12.48H59.8l.043 27.707h-6.189l-5.282 3.368-.518-3.368h-3.886V18.88zm6.045 26.224l3.094-1.957h3.109V22.321h-8.708v20.826h2.202l.303 1.957zM88.6 32.712V20.58l12.133-.633h1.094c.679-1.193.99-2.56.892-3.93l-.001-.002c-.101-.317-.274-.86-.819-.732a41.76 41.76 0 01-5.498.936c-3.364.407-4.925.52-9.248.832l-.827.06c-8.636.634-16.336.936-16.336.936a3.282 3.282 0 003.44 3.296c2.878-.115 7.196-.317 11.514-.533v11.903H68.579a3.44 3.44 0 003.44 3.44h12.954v9.197c0 1.152-.59 1.54-1.57 1.569h-5.037a5.412 5.412 0 002.879 3.397c1.12.374 2.31.497 3.483.36 1.756-.087 3.814-1.08 3.814-4.635v-9.888h14.508a1.638 1.638 0 001.52-1.023c.082-.2.123-.415.121-.632v-1.785H88.6zm-12.207-9.054c.333.206.622.475.85.793l3.7 5.181-2.879 2.087-5.47-7.585.49-.36a2.979 2.979 0 013.31-.116zm19.792.548l-4.016 5.31 2.879 2.16 5.757-7.7-.49-.36a2.941 2.941 0 00-2.203-.575 2.95 2.95 0 00-1.956 1.165h.029zM33.92 40.398l3.023-1.929 3.972 5.93c.45.863.577 1.858.36 2.807a9.04 9.04 0 01-.863 2.878l-6.492-9.686z",fillRule:"evenodd",clipRule:"evenodd"}))},rn=Object.assign;var an=function(e){return S.a.createElement(Xt.a,rn({width:"31",height:"17",fill:"none",viewBox:"0 0 31 17"},e),S.a.createElement("path",{fill:"#fff",d:"M2.928 14.638L0 0h31L5.962 15.933a2 2 0 01-3.034-1.295z"}))},on={width:null},cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";if(on.width)return t?"".concat(on.width/1920*e).concat(t," "):on.width/1920*e},ln=function(e){var t=e.currentUser;return Object(r.c)("div",{css:{display:"flex",alignItems:"center",border:"".concat(cn(3)," solid #fff"),backgroundColor:"#fff",position:"relative",height:cn(70),boxSizing:"border-box",borderRadius:cn(3),width:cn(400)},children:[Object(r.b)(an,{css:{position:"absolute",bottom:parseInt(cn(-18)),right:cn(30),width:cn(31),height:cn(17.5)}}),Object(r.b)(nn,{css:{width:cn(123),height:"100%"}}),Object(r.c)("div",{css:{backgroundColor:"#000",display:"inline-flex",alignItems:"center",position:"relative",height:"100%",paddingRight:cn(10),paddingLeft:cn(20),borderTopRightRadius:cn(3),borderBottomRightRadius:cn(3),flex:1},children:[Object(r.b)("span",{css:{fontSize:cn(34),color:"#fff",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:cn(180),WebkitLineClamp:1},children:t.name}),Object(r.b)(en,{css:{position:"absolute",right:cn(10),width:cn(40),height:cn(40)}})]})]})},sn=n(1346),un=function(e){var t=e.showKanShan,n=e.src;return Object(r.b)("div",{css:{position:"absolute",top:cn(-120),left:cn(100),backgroundColor:"#000",width:cn(300),height:cn(250),overflow:"hidden"},children:n&&Object(r.b)(sn.a,{loop:!1,autoPlay:!0,src:n,css:{position:"absolute",top:cn(-80),left:cn(-250),opacity:t?1:0,width:cn(600),height:cn(600)}})})},dn=Object.assign;var fn=function(e){return S.a.createElement(Xt.a,dn({width:"318",height:"28",fill:"none",viewBox:"0 0 318 28"},e),S.a.createElement("path",{fill:"#fff",d:"M290.976 20.112a.862.862 0 00.61.253l9.471-.043a26.203 26.203 0 01-9.802 3.972 1.172 1.172 0 00-.536.62c-.098.264-.097.555.004.82a1.337 1.337 0 001.612.417 25.695 25.695 0 0010.435-5.268v5.599a1.077 1.077 0 001.079 1.079 1.079 1.079 0 001.08-1.08v-5.757a24.248 24.248 0 0010.434 5.268 1.21 1.21 0 001.512-.432c.144-.72-.044-1.223-.547-1.439a27.624 27.624 0 01-9.687-3.756h9.471a.976.976 0 00.979-.864c0-.576-.331-.864-.979-.864h-11.183v-1.611a1.078 1.078 0 00-1.08-1.08 1.079 1.079 0 00-1.079 1.08v1.611h-11.184a.863.863 0 00-.61 1.475zm.144-10.414a.891.891 0 00.567.217l5.901.044c-.193.238-.384.436-.574.634-.234.244-.468.487-.707.805-.432.576-.331.993.317 1.281l5.268 1.295a54.534 54.534 0 01-9.572 1.44.78.78 0 00-.701.71c-.01.121.008.242.054.355a1.062 1.062 0 001.18.762 54.98 54.98 0 0012.104-2.475c4.011 1.142 6.847 1.967 8.507 2.475a1.222 1.222 0 001.439-.546.936.936 0 00.08-.576.916.916 0 00-.613-.706c-1.007-.215-2.691-.618-5.066-1.194-.849-.216-1.497-.389-1.929-.533a10.786 10.786 0 003.656-3.77h4.851c.561-.072.964-.173.964-.749 0-.576-.331-.863-.964-.863h-14.293c.192-.27.409-.52.648-.749.288-.36.504-.619.648-.763a.74.74 0 00.117-.712.741.741 0 00-.549-.468 1.44 1.44 0 00-1.612.432c-.278.466-.606.9-.979 1.295-.36.432-.604.749-.748.965h-7.427a.937.937 0 00-.863.863.888.888 0 00.296.53zm22.257-2.575c.058.504.418.864 1.065.864.705 0 1.037-.288 1.022-.749V4.763a1.194 1.194 0 00-1.194-1.18h-8.924a12 12 0 00-.763-2.375c-.187-.504-.647-.648-1.439-.648a1.05 1.05 0 00-.864 1.18 2.564 2.564 0 00.216.648c.174.387.318.786.432 1.195h-9.514c-.863 0-1.295.388-1.295 1.18v2.36c.067.5.427.787 1.079.864a.963.963 0 00.965-.864V5.684a.46.46 0 01.532-.533h18.25c.288 0 .432.173.432.533v1.44zm-11.327 5.268l-2.878-.748h.057c-.36-.072-.59-.173-.245-.533a20.893 20.893 0 001.065-1.195h8.463a8.272 8.272 0 01-3.871 3.124l-2.591-.648zM136.762 5.913c.178.16.41.247.649.246l12.061-.043a.92.92 0 00.849-.864.965.965 0 00-.849-.964h-4.635v-.23a.558.558 0 00.059-.11 1.08 1.08 0 00.041-.123.797.797 0 00.016-.084 9.725 9.725 0 01-.432-1.828 3.386 3.386 0 00-.216-.648 1.124 1.124 0 00-1.295-.647.88.88 0 00-.759.711.879.879 0 00.01.368c.023.07.049.154.079.252.049.164.107.368.176.612l.062.216c.077.487.187.968.331 1.439v.115h-5.498a1.004 1.004 0 00-.964.964.96.96 0 00.315.618zm.132 17.768c.084.095.187.17.301.224h-.014a.944.944 0 001.079-.125.947.947 0 00.23-.306 35.592 35.592 0 002.145-4.635c.144-.432-.029-.82-.533-1.18-.647-.072-1.036.144-1.18.648-.144.33-.36.791-.648 1.439a62.54 62.54 0 01-1.511 2.878.947.947 0 00-.097.57.931.931 0 00.228.488zm1.725-7.975c.221.224.521.352.836.355l3.137-.043v7.096c0 1.08-.504 1.511-1.439 1.511h-1.439c-.576 0-.864.317-.864.964a1.183 1.183 0 001.108 1.008 7.872 7.872 0 001.713-.101c2.015 0 2.951-1.036 2.807-3.123V16.06h3.008a1.195 1.195 0 001.18-1.194V9.815a1.186 1.186 0 00-.729-1.09 1.177 1.177 0 00-.451-.09h-8.031a1.238 1.238 0 00-1.181 1.28v4.952c0 .314.124.616.345.84zm1.598-1.933v-2.879h-.014a.482.482 0 01.133-.414.472.472 0 01.414-.133h5.484a.488.488 0 01.28.048l.028.015a.498.498 0 01.241.39.48.48 0 01-.002.095v2.878a.49.49 0 01-.304.5l-.015.006-.012.004a.49.49 0 01-.216.022h-5.484a.473.473 0 01-.511-.318.474.474 0 01-.022-.214zm8.234 7.959a.877.877 0 00.258-.086h-.014a1.036 1.036 0 00.446-1.137c-.144-.331-.389-.792-.748-1.44l-.864-1.295a1.021 1.021 0 00-1.295-.317.808.808 0 00-.44.45.813.813 0 00.008.63c.288.49.863 1.396 1.727 2.677a.856.856 0 00.735.527.831.831 0 00.187-.01zm1.371-11.808a.98.98 0 00.614.323l2.274.014c-.076 6.237-1.727 11.15-4.951 14.738a1.207 1.207 0 00.202 1.44 1.193 1.193 0 001.439-.216c3.234-3.877 4.994-9.221 5.282-16.034h.864a.858.858 0 00-.064.146l-.006.02-.016.054a.943.943 0 00-.029.212v12.694c0 1.986.906 2.879 2.691 2.879h.979c1.857.1 2.907-.864 3.109-2.879a6.564 6.564 0 01.115-.964c.121-.859.193-1.724.216-2.59a1.034 1.034 0 00-.749-1.181.675.675 0 00-.863.648c-.015.433-.053.866-.115 1.295a20.009 20.009 0 01-.216 2.044c-.087 1.209-.59 1.713-1.44 1.713h-.547c-.791.13-1.18-.375-1.18-1.44V10.463l-.1-.216h4.087a.978.978 0 000-1.943h-6.678c0-.72.029-1.857.115-3.44V1.625a1.083 1.083 0 00-1.08-.964 1.022 1.022 0 00-.978.964c0 1.285-.028 2.51-.054 3.674-.024 1.053-.047 2.055-.047 3.005h-2.26a.98.98 0 00-.614 1.62zm7.293-5.391c1.065.935 1.755 1.554 2.043 1.842h-.014c.576.36 1.022.417 1.454.029.431-.389.46-.864.1-1.44a16.122 16.122 0 01-1.281-1.065c-.647-.503-1.079-.834-1.295-.978-.619-.36-1.094-.36-1.439 0a.748.748 0 00-.246.237.739.739 0 00.131.943 3.539 3.539 0 00.547.432zM1.629 5.295c0 .648.288.965.85.965l6.462.043a38.14 38.14 0 01-7.643 8.938 1.353 1.353 0 00-.216 1.612.95.95 0 00.66.482l.018.003a.948.948 0 00.834-.27 33.572 33.572 0 003.555-3.44v12.48a1.151 1.151 0 001.18 1.079 1.108 1.108 0 001.08-1.08V20.94h13.226v1.828c.072 1.296-.561 1.9-1.929 1.828h-3.022c-.49 0-.749.288-.749.864.077.652.51 1.012 1.296 1.08h3.152c2.447 0 3.584-1.109 3.454-3.34V10.722a1.295 1.295 0 00-1.295-1.296H9.588a118.968 118.968 0 001.943-3.123h14.623a.965.965 0 000-1.929H12.597c.445-.673.807-1.398 1.079-2.159a1.137 1.137 0 00-.648-1.439 1.252 1.252 0 00-1.612.964l-1.295 2.591H2.478c-.561 0-.849.317-.849.964zm6.78 8.924v-2.476a.475.475 0 01.532-.532h12.162a.474.474 0 01.331.08l.01.006.007.006.01.008a.496.496 0 01.039.035.475.475 0 01.135.397v2.476H8.408zm0 4.85v-3.008h13.226v3.008H8.408zm32.966 7.851c.201.201.471.317.755.324a1.109 1.109 0 001.08-1.08V7.34a.951.951 0 00-1.08-1.08 1.109 1.109 0 00-1.079 1.08v18.826c.007.284.123.554.324.755zm4.992-20.744c.148-.047.284-.127.398-.233h-.029a.993.993 0 00.058-1.511 37.095 37.095 0 00-2.792-2.879 1.166 1.166 0 00-1.613-.216.993.993 0 00-.114 1.44c.523.434 1.004.916 1.439 1.439.508.476.989.98 1.439 1.511a1.05 1.05 0 001.214.45zm1.83 13.43l.075.005.025.001a1.174 1.174 0 00.18-.01l8.334.072a1.324 1.324 0 001.44-1.281v-8.046a1.224 1.224 0 00-1.44-1.44h-8.333c-.85 0-1.281.505-1.281 1.44v7.974a1.135 1.135 0 001 1.284zm7.73 6.583c.236.197.533.306.84.307h.044c1.828 0 3.08-.043 3.757-.086 2.648-.072 3.914-1.396 3.77-3.973V3.928a1.44 1.44 0 00-1.439-1.44H49.341a1.022 1.022 0 00-.964.98 1.05 1.05 0 00.964 1.065h12.162c.432 0 .648.187.648.546v16.898c.072 1.64-.72 2.36-2.36 2.36h-3.455c-.72.067-1.007.427-.863 1.08.056.302.217.575.453.772zm.193-9.063c0 .36-.216.547-.647.547h-5.758c-.431 0-.647-.187-.647-.547v-5.584a.763.763 0 01.648-.648h5.757a.763.763 0 01.647.648v5.584zm22.755-1.713a.892.892 0 01-.748-.863c.072-.576.317-.864.748-.864h10.766c.504 0 .749.288.749.864a.892.892 0 01-.749.863h-3.555v2.879h3.224c.504 0 .763.288.763.85 0 .56-.26.69-.763.762h-3.224v3.656a11.3 11.3 0 004.088.647c4.02.144 8.338.144 12.953 0 .777 0 1.18.317 1.18.965a.992.992 0 01-.217.586 1.022 1.022 0 01-.963.378h-5.383c-3.526.072-6.102.072-7.757 0-4.443-.144-7.322-1.468-8.636-3.972a16.162 16.162 0 01-1.44 3.972.874.874 0 01-.936.472.879.879 0 01-.344-.14.979.979 0 01-.331-1.296 15.544 15.544 0 001.727-7.643.936.936 0 01.863-.863c.648 0 .965.287.965.863a9.196 9.196 0 01-.115 1.08c.017.362-.017.726-.101 1.08a9.267 9.267 0 002.519 3.022v-7.312l-5.283.014zm2.26-3.871c-.864 0-1.295-.403-1.295-1.195V3.251c0-.791.431-1.194 1.295-1.194h6.678a1.236 1.236 0 011.281 1.194v7.096c0 .792-.417 1.195-1.28 1.195h-6.679zm.533-7.326v1.828h5.498V4.216c0-.36-.144-.533-.432-.533h-4.419c-.432 0-.647.173-.647.533zm5.066 5.757c.288 0 .432-.187.432-.547V7.497h-5.498v1.929c0 .36.215.547.647.547h4.419zm5.052 13.241a.99.99 0 01-1.428-.335.994.994 0 01.463-1.392 7.34 7.34 0 005.268-8.175v-2.59c0-.576.331-.864.979-.864.648 0 .921.36.864.863v2.591a19.18 19.18 0 01-.332 3.757l2.879 2.26c1.079.863 1.871 1.438 2.375 1.827a.89.89 0 01.348 1.105.9.9 0 01-.247.334c-.36.432-.821.461-1.44.101-.356-.207-.693-.543-1.121-.969-.315-.314-.68-.677-1.138-1.075-1.08-.935-1.871-1.568-2.375-1.928a10.306 10.306 0 01-5.095 4.548v-.058zm-.502-19.369a.763.763 0 01-.678-.867.935.935 0 01.863-.864h11.629a.878.878 0 010 1.728h-5.282l-.431 3.108h4.044a1.167 1.167 0 01.251.02l.024.005a1.156 1.156 0 01.861.779c.05.159.065.327.044.492v8.635c0 .576-.317.864-.964.864a.765.765 0 01-.864-.864V9.138a.46.46 0 00-.532-.532h-6.146c-.432 0-.633.172-.633.532v7.815a.863.863 0 11-1.727 0V8.246c0-.792.431-1.195 1.295-1.195h2.26l.532-3.109-4.36-.1a.762.762 0 01-.186.003zm85.487 8.459a1.226 1.226 0 01-.678.022 1.24 1.24 0 01-.772-.583c-.287-.56-.1-1.108.547-1.612a29.074 29.074 0 0010.651-8.074 2.69 2.69 0 011.612-.964 2.117 2.117 0 011.612.964 24.714 24.714 0 0010.55 7.758 1.048 1.048 0 01.46.218 1.034 1.034 0 01.188 1.394 1.339 1.339 0 01-1.728.431A30.56 30.56 0 01188.462 3.9c-.216-.216-.403-.216-.547 0a34.166 34.166 0 01-10.866 8.276 1.264 1.264 0 01-.278.129zm-.039 5.628a1.078 1.078 0 01-.979-1.08 1.021 1.021 0 01.979-.963h22.697a1.064 1.064 0 011.08.964 1.11 1.11 0 01-1.08 1.08h-12.162a71.474 71.474 0 01-5.397 5.612.292.292 0 00-.086.202s0 .1.216.1c3.655-.143 7.527-.32 11.615-.532a30.668 30.668 0 00-2.26-2.26 1.065 1.065 0 010-1.439 1.268 1.268 0 011.626.1l1.713 1.728c1.25 1.198 2.199 2.17 2.884 2.872.261.268.484.496.671.683a.957.957 0 01.206.344.994.994 0 01-.307 1.096 1.122 1.122 0 01-1.626-.101 6.447 6.447 0 01-.532-.648l-.648-.648c-.648 0-1.684 0-3.123.216-5.095.216-8.996.389-11.731.547-.935 0-1.54-.187-1.827-.763a1.811 1.811 0 01.647-1.928 34.96 34.96 0 005.052-5.283l-7.628.101zm5.052-5.599a1.051 1.051 0 01-.965-1.065 1.022 1.022 0 01.965-.978h12.594a1.024 1.024 0 01.964.978 1.054 1.054 0 01-.964 1.065h-12.594zm32.499-7.038c0 .648.288.965.849.965l6.549.043a37.813 37.813 0 01-7.643 8.938 1.353 1.353 0 00-.216 1.612.955.955 0 001.08.415.95.95 0 00.36-.2 33.584 33.584 0 003.555-3.44v12.48a1.15 1.15 0 001.18 1.079 1.107 1.107 0 001.079-1.08V20.94h13.242v1.828c.057 1.296-.504 1.9-1.943 1.828h-3.009c-.503 0-.762.288-.762.864.067.652.499 1.012 1.295 1.08h3.224c2.447 0 3.584-1.109 3.454-3.34V10.722a1.294 1.294 0 00-1.295-1.296h-13.097a118.765 118.765 0 001.942-3.123h14.696a.962.962 0 00.964-.964.964.964 0 00-.964-.965H225.25a10.08 10.08 0 001.08-2.159 1.138 1.138 0 00-.648-1.439 1.252 1.252 0 00-1.612.964l-1.295 2.591h-7.643c-.561 0-.849.317-.849.964zm6.779 8.924v-2.476h-.058a.484.484 0 01.151-.425.481.481 0 01.206-.11l.016-.003a.51.51 0 01.132-.008.46.46 0 01.085.014h12.162a.489.489 0 01.547.532v2.476h-13.241zm0 4.85v-3.008h13.241v3.008h-13.241zm32.599-2.26c-.863.145-1.439 0-1.626-.532a1.22 1.22 0 01.763-1.44 26.994 26.994 0 0010.651-6.03 1.175 1.175 0 01.316-.216 2.166 2.166 0 011.627-.748c.489 0 1.108.288 1.827 1.065a24.738 24.738 0 0010.335 5.498 1.146 1.146 0 01.682.662 1.157 1.157 0 01-.049.95c-.144.504-.677.69-1.612.532a35.98 35.98 0 01-10.867-6.232.518.518 0 00-.748 0 35.353 35.353 0 01-5.464 3.838.868.868 0 01.254-.038h10.866a.864.864 0 010 1.727H259.75a.865.865 0 01-.574-1.509 35.332 35.332 0 01-5.515 2.474zm-1.079-7.642a1.037 1.037 0 010-1.511 18.427 18.427 0 004.519-6.347 1.183 1.183 0 011.512-.533c.561.144.748.533.532 1.18a8.214 8.214 0 01-.748 1.44h6.664a.961.961 0 01.863.964.94.94 0 01-.863.863h-7.744a20.168 20.168 0 01-3.238 3.872 1.44 1.44 0 01-1.526.072h.029zm5.383 16.681c-.864 0-1.339-.46-1.439-1.439v-4.85a1.302 1.302 0 01.376-1.063 1.309 1.309 0 011.063-.377h14.637a1.342 1.342 0 011.215.91c.058.17.08.35.066.53v4.85a1.316 1.316 0 01-.566 1.205 1.327 1.327 0 01-.715.234h-14.637zm3.224-16.364a1.037 1.037 0 01-1.439-.216 10.083 10.083 0 01-1.44-1.929c-.359-.504-.331-.892.101-1.18a1.108 1.108 0 011.439.1c.395.453.756.934 1.08 1.44.094.152.2.296.316.432a1.126 1.126 0 01-.057 1.353zm10.075 14.536a.5.5 0 00.343-.086.48.48 0 00.204-.446v-2.879a.497.497 0 00-.14-.407.486.486 0 00-.407-.14h-11.831c-.432 0-.648.188-.648.547v2.879c0 .345.216.532.648.532h11.831zm-5.167-16.364a1.092 1.092 0 01-.115-1.44 15.455 15.455 0 003.022-4.85 1.14 1.14 0 011.439-.648.936.936 0 01.533 1.296 7.425 7.425 0 01-.748 1.44h7.326a1.009 1.009 0 01.964.963.981.981 0 01-.964.864h-8.291c-.1.184-.211.361-.331.533l-1.18 1.51a1.28 1.28 0 01-1.612.332h-.043zm7.743 1.943a1.02 1.02 0 01-1.439-.331 81.324 81.324 0 01-.222-.284l-.006-.007c-.282-.36-.741-.95-1.384-1.753a.905.905 0 01.216-1.18 1.121 1.121 0 011.439.115l.439.54c.619.761 1.032 1.268 1.173 1.504a1.05 1.05 0 01-.173 1.396h-.043z",fillRule:"evenodd",clipRule:"evenodd"}))},bn=function(e){var t=e.showSlogn;return Object(r.b)(fn,{css:{position:"absolute",left:"50%",bottom:"8%",transform:"translate(-50%,0%)",opacity:t?1:0,transition:"opacity 0.3s linear",width:"30%"}})},pn=function(e){var t=e.src;return Object(r.b)("div",{css:{margin:"auto 0",width:cn(240),height:cn(240),borderRadius:cn(240),position:"absolute",left:"50%",transform:"translate(-50%,0)",backgroundColor:"#eee",fontSize:0},children:t&&Object(r.b)("img",{width:"100%",css:{borderRadius:cn(240)},src:t,alt:"头像"})})};function hn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var mn=function(e){var t=e.setShowEndVideo,a=e.handleOpacityChange,o=e.subscribeEvent,i=e.hasEndVideo,c=e.currentUser,l=e.itemType,s=e.itemId,u=Object(k.useState)(!1),d=hn(Wt.a,u,2),f=d[0],b=d[1],p=Object(k.useState)(!1),h=hn(Wt.a,p,2),m=h[0],v=h[1],g=Object(k.useState)(!1),O=hn(Wt.a,g,2),j=O[0],y=O[1],w=Object(k.useState)(!1),C=hn(Wt.a,w,2),x=C[0],S=C[1],A=Object(k.useRef)(!1),T=Object(k.useRef)(!1),R=Object(k.useRef)([]),E=Object(k.useRef)(new Audio),N=Object(Jt.a)((function(){return n.e(110).then(n.t.bind(null,2807,7))})),B=Object(tt.a)((function(e){if(e){var t=R.current.findIndex((function(t){return t[e]}));R.current[t]&&clearTimeout(R.current[t][e]),R.current.splice(t,1)}else R.current.forEach((function(e){"object"==typeof e?clearTimeout(Object.values(e)[0]):clearTimeout(e)})),R.current=[]})),z=Object(tt.a)((function(){t(!1),v(!1),S(!1),y(!1)})),L=Object(tt.a)((function(){v(!0),R.current.push({author:setTimeout((function(){S(!0),R.current.push({content:setTimeout((function(){b(!0),y(!0),E.current.play()}),200)})}))}),R.current.push({exit:setTimeout((function(){a({value:0}),R.current.push({destroy:setTimeout((function(){z(),B()}),500)})}),2300)})}));Object(k.useEffect)((function(){T.current&&!A.current&&i&&(B("timeout"),L()),i&&T.current&&!A.current&&(B("timeout"),L());var e=function(){t(!0),a({value:1,time:0}),T.current=!0,!1!==i?A.current?z():i?L():R.current.push({timeout:setTimeout((function(){A.current=!0,v(!1),t(!1)}),3e3)}):z()};if(o){var n=o(I.b.ENDED,e).unsubscribe;return function(){n(e),B()}}}),[i,o]);var P,_={type:(P=l,P?P.charAt(0).toUpperCase()+P.slice(1):"")};return"answer"===l?_.token=s:_.id=s,Object(k.useEffect)((function(){E.current.src="https://zhstatic.zhihu.com/heifetz_static/1632738186715.wav"}),[]),m&&N&&Object(r.b)(Yt.b,{content:_,children:Object(r.c)(Yt.f,{zaType:"Video",zaBlock:"EndVideo",children:[Object(r.c)("div",{css:{position:"absolute",left:"50%",top:cn(250),transform:"translate(-50%,0)",textAlign:"center",opacity:x?1:0,transition:"opacity 0.2s linear"},children:[Object(r.c)("div",{css:{position:"relative",height:cn(250),width:cn(300),margin:"0 auto ".concat(cn(53))},children:[f&&Object(r.b)(un,{src:"https://zhstatic.zhihu.com/heifetz_static/kanshan.json",showKanShan:f}),Object(r.b)(pn,{src:c.avatarUrl})]}),Object(r.b)(ln,{currentUser:c})]}),Object(r.b)(bn,{showSlogn:j})]})})};function vn(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var gn=function(e){return new Promise((function(t,n){var r=new Image;r.onload=t,r.onerror=n,r.src=e}))},On=function(e){var t=e.itemId,n=e.itemType,a=e.subscribeEvent,o=Object(k.useState)(!1),i=vn(Wt.a,o,2),c=i[0],s=i[1],u=Object(k.useState)({value:1,time:.5}),d=vn(Wt.a,u,2),f=d[0],b=d[1],p=Object(k.useState)(null),h=vn(Wt.a,p,2),m=h[0],v=h[1],g=Object(k.useState)({}),O=vn(Wt.a,g,2),j=O[0],y=O[1],w=Object(k.useRef)(!0),C=Object(k.useState)(!1),x=vn(Wt.a,C,2),S=x[0],A=x[1],T=Object(Qt.b)(),R=Object(k.useRef)(),E=Object(Kt.a)(0),N=vn(Wt.a,E,2),B=N[0],z=N[1],L=Object(tt.a)((function(e){var t=e.value,n=e.time;b({value:t,time:void 0===n?.5:n})})),P=Object(tt.a)((function(){T("".concat(Zt.a.fetchRoot.www,"/api/v4/video/tail?object_id=").concat(t,"&object_type=").concat(n),{headers:{"X-Referer":document.referrer,"Content-Type":"application/json","X-App-Za.OS":"webplayer"},credentials:"include"}).then(function(){var e=Object(Ht.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.payload).displayAnimation){e.next=14;break}return e.prev=2,e.next=5,gn(n.author.avatarUrl);case 5:v(!0),y({name:n.author.name,avatarUrl:n.author.avatarUrl}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),v(!1);case 12:e.next=15;break;case 14:v(!1);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(){v(!1)}))})),_=Object(tt.a)((function(){w.current&&(A(!0),w.current=!1)}));return Object(k.useEffect)((function(){if(t&&n&&S&&T&&P(),a){var e=a(I.b.PLAY,_).unsubscribe;return function(){e(_)}}}),[P,S,T,a]),Object(k.useEffect)((function(){if(R.current&&(on.width=R.current.clientWidth,B(R.current)),a){var e=function(){setTimeout((function(){on.width=R.current.clientWidth}))},t=[a(I.b.ENTER_FULLSCREEN,e).unsubscribe,a(I.b.EXIT_FULLSCREEN,e).unsubscribe,a(I.b.ENTER_PAGE_FULLSCREEN,e).unsubscribe,a(I.b.EXIT_PAGE_FULLSCREEN,e).unsubscribe];return function(){t.forEach((function(e){return e()}))}}}),[R.current,a]),Object(k.useEffect)((function(){z&&(on.width=z&&z.width)}),[z]),Object(r.b)("div",{ref:R,children:Object(r.b)("div",{css:{position:"absolute",height:"100%",width:cn(1920),left:0,top:0,backgroundColor:"black",visibility:c?"visible":"hidden"},children:Object(r.b)("div",{css:{position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",opacity:f.value,transition:"opacity ".concat(f.time,"s linear"),backgroundColor:"black",height:9*cn(1920,null)/16,width:"100%"},children:R.current&&Object(r.b)(mn,{itemId:t,itemType:n,currentUser:j,hasEndVideo:m,handleOpacityChange:L,subscribeEvent:a,setShowEndVideo:s})})})})},jn=n(1036),yn=n(65),wn="mount",Cn="ready",xn="first_frame",kn="sec_opening",Sn="timing_maximum",An=function(e){var t=e.videoId,n=e.itemId,o=e.itemType,i=e.zaProps,c=Object(k.useRef)(),l=Object(k.useRef)(!1),s=Object(k.useRef)(Date.now()),u=Object(k.useRef)(Object(I.c)(t)),d="1"===Object(yn.o)("pc_player_rp"),f="feed.videoPlayerCard.".concat(d?"new":"old");Object(jn.a)({videoId:t,playerRef:c});var b=Object(tt.a)((function(e){if(!l.current){var t=Date.now()-s.current;t>5e3?ot.b.increment("".concat(f,".").concat(Sn,".count")):(t<1e3&&e===xn&&ot.b.increment("".concat(f,".").concat(kn,".count")),e===Cn&&ot.b.increment("".concat(f,".").concat(Cn,".count")),ot.b.timing("".concat(f,".").concat(e,".timing"),t,.01),e===xn&&(l.current=!0))}}));Object(qt.a)((function(){ot.b.increment("".concat(f,".").concat(wn,".count"))}));var p=Object(tt.a)((function(e){e===I.b.SUBSCRIPTION_READY&&b(Cn),e===I.b.LOADEDDATA&&b(xn)}));return Object(k.useEffect)((function(){return u.current.subscribeMessage(p).unsubscribe}),[u,p]),Object(r.b)("div",{css:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:d?Object(r.b)(Vt,{className:"video-player",ref:c,id:t,shouldShowPageFullScreenButton:!0,zaProps:i,pageName:o,children:c.current&&n&&Object(r.b)(On,{subscribeEvent:c.current.subscribeEvent,itemId:n,itemType:o})}):Object(r.b)(a.a,{ref:c,className:"ZVideoItem-player",type:"video",src:"https://".concat(Zt.a.videoHost,"/video/").concat(t,"?").concat(new URLSearchParams([["itemId",n],["itemType",o]]).toString()),iframeProps:{allowFullScreen:!0},zaProps:i})})};t.a=Object(k.memo)(An)},1830:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(20),b=n(1723),p=n(899),h=n(156),m=n(143),v=(n(153),n(33)),g=n(173),O=n(1425),j=n(37),y=n(8),w=n(13),C=n.n(w),x=n(172),k=["className","src"],S=["className"],A=["imageUrls"],T=function(e){var t=e.className,n=e.children;return Object(l.b)("div",{className:C()(t,"LiveAvatar-column"),children:n})},I=function(e){var t=e.className,n=e.speakers,r=e.size,a=e.alt;if(!n||!n.length)return null;var o=n.map((function(e){return e.avatarUrl})).slice(0,4),i=function(e){var t=e.className,n=e.src,r=Object(j.default)(e,k);return Object(l.b)(x.a,Object.assign(Object.assign({url:n},r),{},{className:C()("LiveAvatar-img",t)}))},c=function(e){var t=e.className,n=Object(j.default)(e,S);return Object(l.b)(T,{children:Object(l.b)(i,Object.assign(Object.assign({},n),{},{className:C()(t,"alignCenter"),size:r}))})},s=function(e){return Object(l.b)(i,Object.assign(Object.assign({},e),{},{size:r/2-1}))},u=function(e){var t=e.imageUrls,n=Object(j.default)(e,A);return Object(l.b)(T,{children:t.map((function(e,t){return Object(y.e)(s,Object.assign(Object.assign({},n),{},{key:t,src:e}))}))})},d=[];switch(o.length){case 1:d=Object(l.b)((function(e){return Object(l.b)(i,Object.assign(Object.assign({},e),{},{size:r}))}),{src:o[0],alt:a});break;case 2:d=o.map((function(e,t){return Object(l.b)(c,{src:e,alt:a},t)}));break;case 3:d=[Object(l.b)(c,{src:o[0],alt:a},"1"),Object(l.b)(u,{imageUrls:o.slice(1,3),alt:a},"2")];break;default:d=[o.slice(0,2),o.slice(2)].map((function(e,t){return Object(l.b)(u,{imageUrls:e,alt:a},t)}))}return Object(l.b)("div",{className:C()(t,"LiveAvatar-wrapper"),style:{width:r,height:r},children:d})},R=n(929),E=n(1273),N=n(964),B=n(965),z=n(433),L=n(1538),P=n(999),_=n(1345);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var D=function(e){Object(o.a)(n,e);var t=M(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.live,a=t.live,o=a.id,i=a.type,c=a.subject,s=a.speaker.member,u=a.startsAt,d=a.price,f=a.promotionPrice,g=a.description,j=void 0===g?"":g,y=a.image,w=a.isLiked,C=a.likedNum,x=a.seats,k=t.lastreadTouchable,S=t.zaIds.options,A=t.renderOptions,T=t.isSticky,z=t.handleToggleSticky,M=t.currentUser,D=M&&M.urlToken===s.urlToken,U="function"==typeof z,F=(x||{}).taken,V="/lives/".concat(o);if(n!==R.c.interactive)return Object(l.b)(R.e,{data:r,link:V,title:Object(l.c)(l.a,{children:[U&&T&&Object(l.b)(O.a,{}),Object(l.b)("a",{href:V,target:"_blank",rel:"noopener noreferrer",children:c})]}),children:U&&D&&Object(_.a)(M)&&Object(l.b)(v.c,{preset:"plain",onClick:z,icon:T?b.b:p.b,label:T?"取消置顶":"置顶"})});Object(l.b)(I,{className:"LiveItem-avatar",speakers:[s],size:60});var G={id:o,type:i};return Object(l.c)("div",{className:"LiveItem",children:[y&&Object(l.b)("a",{className:"LiveItem-cover",href:V,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:Object(m.imgUrl)(y,"640w"),srcSet:"".concat(Object(m.imgUrl)(y,"r")," 2x"),alt:c})}),Object(l.b)(R.e,{image:!1,data:r,link:V,onRef:function(t){e.contentItem=t},title:Object(l.c)("span",{children:[s.name,"：",Object(l.b)("a",{href:V,target:"_blank",rel:"noopener noreferrer",children:c})]}),meta:!1,lastreadTouchable:k,children:Object(l.c)(N.b,{className:"LiveItem-description",excerpt:Object(P.b)(j,60),limit:60,limitWithImage:60,html:j,data:r,extra:Object(l.c)(R.b,{children:[Boolean(F)&&Object(l.c)("div",{children:[Object(l.b)("span",{children:"参与人数："}),F]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"时间："}),Object(h.toSimpleDateTimeString)(u)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"特价："}),"number"==typeof f?Object(l.c)("span",{className:"LiveItem-price",children:[Object(L.a)(f),Object(l.b)("del",{children:Object(L.a)(d)})]}):Object(L.a)(d)]})]}),children:[Object(l.b)(E.a,Object.assign(Object.assign({},G),{},{liked:w,count:C,icon:"thank"})),Object(l.b)(B.a,Object.assign(Object.assign({},G),{},{title:c,authorName:s&&s.name,url:V})),A&&A((function(){return e.contentItem}),S)]})})]})}}]),n}(d.Component);D.propTypes={preset:u.a.oneOf(Object.values(R.c)),renderOptions:u.a.func,zaIds:u.a.object},D.defaultProps={zaIds:{}};t.a=Object(f.compose)(g.a,Object(z.b)((function(e){var t=e.live,n=e.trackCardShow,r=void 0===n||n,a=e.zaInfos,o=(a=void 0===a?{}:a).cardShow;return Object.assign(Object.assign({module:"LiveItem",card:{content:{type:"Live",id:t.id,author_member_hash_id:t.speaker.member.id}}},o&&{view:{id:o}}),{},{trackCardShow:r})})))(D)},1831:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(4),s=n(1),u=n(0),d=n(21),f=n(92),b=n(477),p=n(483),h=n(378),m=n(3),v=n.n(m),g=n(91),O=n(449),j=n(1043),y=n(33),w=n(153),C=n(930),x=function(e){var t=e.upvotedFollowees,n=e.voteupCount,r=e.actionText,a=e.canClick,o=e.onClick;if(!n)return null;var i=t.length,c=i===n?"":"".concat(Object(w.formatNumber)(n)," 人");return Object(s.c)(j.CJKSpace,{children:[t.map((function(e,t){return Object(s.c)("span",{children:[t>0&&"、",Object(s.b)(C.a,{noBadge:!0,user:e,children:e.name},t)]},t)})),i>0&&n-i>0&&"等",a?Object(s.c)(y.c,{preset:"plain",onClick:o,children:[c,r]}):c+r]})};x.propTypes={voteupCount:v.a.number.isRequired,upvotedFollowees:v.a.array.isRequired,actionText:v.a.string.isRequired,canClick:v.a.bool,onClick:v.a.func},x.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var k=x,S=n(1433);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var T=function(e){Object(o.a)(n,e);var t=A(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={modalShown:e.props.defaultModalShown},e.handleListHide=function(){return e.setState({modalShown:!1})},e.handleListShown=function(){return e.setState({modalShown:!0})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,r=e.openable,a=e.type,o=e.too,i=e.isFetching,c=e.isDrained,l=e.items,u=e.onLoad;if(t<=0)return null;var d,f=this.state.modalShown;return d="pin"===a?"为该".concat(O.b[a],"鼓掌"):"column"===a?"关注":"".concat(o?"也":"","赞同了该").concat(O.b[a]),Object(s.c)("span",{className:"Voters",children:[Object(s.b)(k,{canClick:r,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:d}),Object(s.b)(g.b,{size:"fullPage",onClose:this.handleListHide,children:f&&Object(s.b)(S.a,{isFetching:i,isDrained:c,text:"column"===a?"关注了":"赞同了",items:l,voteupCount:t,onLoad:u})})]})}}]),n}(u.Component);T.propTypes={openable:v.a.bool,upvotedFollowees:v.a.array,id:v.a.oneOfType([v.a.number,v.a.string]),type:v.a.oneOf(["pin","answer","article","column"]).isRequired,defaultModalShown:v.a.bool},T.defaultProps={openable:!0,defaultModalShown:!1};var I=T;function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function E(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var N={answer:"answers",article:"articles",pin:"pins",column:"columns"};var B=function(e){Object(o.a)(n,e);var t=R(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleLoad=function(){var t=e.props,n=t.type,r=t.id,a=t.loadAnswerVoters,o=t.loadPinVoters,i=t.loadArticleVoters,c=t.loadColumnsFollowers;switch(n){case"answer":return a(r);case"pin":return o(r);case"article":return i(r);case"column":return c(r);default:return null}},e}return Object(a.a)(n,[{key:"render",value:function(){return Object(s.b)(I,Object.assign({onLoad:this.handleLoad},this.props))}}]),n}(u.Component);B.propsTypes=Object.assign({},I.propsTypes),B.defaultProps=Object.assign({},I.defaultProps);t.a=Object(d.connect)((function(e,t){var n=t.id,r=t.type,a=e.entities.users,o=e[N[r]]||{},i=o.voters,c=void 0===i?{}:i,s=o.concernedUpvoters,u=void 0===s?{}:s,d=c[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},f=d.isFetching,b=d.isDrained,p=d.order,h=d.ids,m=(u[n]||{ids:[]}).ids;return{isFetching:f,isDrained:b,order:p,items:[].concat(E(l.a,m),E(l.a,h.filter((function(e){return!m.includes(e)})))).map((function(e){return a[e]}))}}),{loadAnswerVoters:f.t,loadArticleVoters:b.e,loadPinVoters:p.f,loadColumnsFollowers:h.c})(B)},1832:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n.n(a),i=n(52),c=Object.assign;var l=function(e){return o.a.createElement(i.a,c({viewBox:"0 0 15 15"},e),o.a.createElement("g",{fill:"#ffab2e",fillRule:"evenodd"},o.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),o.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},s=Object.assign;var u=function(e){return o.a.createElement(i.a,s({width:"15",height:"15",viewBox:"0 0 15 15"},e),o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{fill:"#d7d8d9",d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),o.a.createElement("path",{fill:"#ffab2e",d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},d=Object.assign;var f=function(e){return o.a.createElement(i.a,d({viewBox:"0 0 15 15"},e),o.a.createElement("g",{fill:"#d7d8d9",fillRule:"evenodd"},o.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),o.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))};t.a=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return Object(r.b)("div",{className:"Rating",children:Array.from({length:5}).map((function(e,t){var a=function(e,t){return t>=e+1?l:t>=e+.5?u:f}(t,n);return Object(r.b)(a,{size:15},t)}))})}},1833:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n(1),a=n(59),o=n(917),i=n(51),c=n(105),l=n(0),s=n.n(l),u=n(52),d=Object.assign;var f=function(e){return s.a.createElement(u.a,d({width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},e),s.a.createElement("path",{fill:"url(#paint0_linear_269:46630)",d:"M2.8 2a.8.8 0 00-.8.8v11.4a.8.8 0 00.8.8h11.4a.8.8 0 00.8-.8V2.8a.8.8 0 00-.8-.8H2.8zm1.051 1.25a.6.6 0 00-.6.6v9.3a.6.6 0 00.6.6h9.3a.6.6 0 00.6-.6v-9.3a.6.6 0 00-.6-.6h-9.3z",fillRule:"evenodd",clipRule:"evenodd"}),s.a.createElement("path",{fill:"#06F",d:"M2.8 2a.8.8 0 00-.8.8v11.4a.8.8 0 00.8.8h11.4a.8.8 0 00.8-.8V2.8a.8.8 0 00-.8-.8H2.8zm1.051 1.25a.6.6 0 00-.6.6v9.3a.6.6 0 00.6.6h9.3a.6.6 0 00.6-.6v-9.3a.6.6 0 00-.6-.6h-9.3z",fillRule:"evenodd",clipRule:"evenodd"}),s.a.createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"url(#paint1_linear_269:46630)",rx:".8"}),s.a.createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"#06F",rx:".8"}),s.a.createElement("path",{fill:"#fff",stroke:"#fff",d:"M8.962 11.153h.725V13.5H8.3v-2.754c0-.66.293-1.181.7-1.567.064-.06.129-.116.196-.168a2.654 2.654 0 00-.205.227c-.295.369-.53.864-.53 1.415v.5h.5zM12.974 11.153h.726V13.5h-1.387v-2.754c0-.66.293-1.181.7-1.567.063-.06.129-.116.195-.168a2.657 2.657 0 00-.204.227c-.295.369-.53.864-.53 1.415v.5h.5z"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"paint0_linear_269:46630",x1:"15",x2:"2",y1:"2",y2:"15",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#06F"}),s.a.createElement("stop",{offset:"1",stopColor:"#00D1FF"})),s.a.createElement("linearGradient",{id:"paint1_linear_269:46630",x1:"17.5",x2:"4.5",y1:"4.5",y2:"17.5",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#06F"}),s.a.createElement("stop",{offset:"1",stopColor:"#00D1FF"}))))},b=n(32);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.title,l=e.question,s=(l=void 0===l?{}:l).title,u=e.url,d=e.id,p="answer"===t?"原回答：".concat(s):"原文章：".concat(n),h=Object(c.a)((function(){window.open(u)}));return Object(r.b)(i.b,{content:{type:b.db[t],token:String(d)},children:Object(r.c)(i.a,{shouldTrackShow:!0,zaText:"zvideo_origin_content",zaType:"Card",zaAction:"OpenUrl",extra:{link:{url:u}},as:a.Flex,bg:"GBK10A",padding:"12px 10px 12px 18px",justifyContent:"space-between",onClick:h,css:{cursor:"pointer"},children:[Object(r.c)(a.Flex,{children:[Object(r.b)(f,{css:{marginRight:"6.5px"}}),Object(r.b)(a.Text,{color:"GBK06A",fontSize:"14px",lineHeight:"19.6px",children:p})]}),Object(r.b)(o.a,{size:20,css:function(e){return{flexShrink:"0",fill:e.colors.GBK06A}}})]})})}var h=n(35),m=n(21),v=n(1011),g=n(95),O=n(980),j=n(172),y=n(153),w=n(124),C=n(451),x=n(924);n(1019);function k(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var S=function(e){var t=e.author,n=t.author,o=t.identity,c=t.id,s=Object(m.useSelector)((function(e){return Object(w.e)(e,{urlToken:n})})),u=s||{},d=u.avatarUrl,f=u.isFollowing,b=u.name,p=Object(l.useRef)(),h=Object(l.useCallback)((function(){return window.open("https://www.zhihu.com/people/".concat(n))}),[n]),g=Object(l.useCallback)((function(){return p.current.trackEvent({eventType:"Click",elementLocation:{type:"Button",text:f?"取消关注":"关注"},action:f?"UnFollow":"Follow"}),!0}),[f]);return s?Object(r.c)(i.b,{content:{type:"User",token:n,id:c},children:[Object(r.b)(i.e,{ref:p}),Object(r.c)(a.Flex,{mt:"16px",css:{"& + &":{marginTop:"24px"}},alignItems:"center",children:[Object(r.b)(j.a,{url:d,size:38,css:{cursor:"pointer"},onClick:h}),Object(r.c)(a.Box,{ml:"14px",flex:"1",children:[Object(r.b)(a.Box,{color:"GBK03A",fontSize:"15px",lineHeight:"17px",fontWeight:"bold",onClick:h,css:[Object(v.a)(1),{cursor:"pointer"}],children:b}),Object(r.b)(a.Box,{color:"GBK04A",fontSize:"14px",lineHeight:"16px",mt:"3px",children:o})]}),Object(r.b)(x.a,{useCustomZa:!0,preset:"primary",type:"people",id:n,isFollowing:f,onClick:g,css:{padding:"0 14px",minWidth:"0px"}})]})]}):null},A=function(e){var t,n,o,c,l,s=e.item,u=e.index;if("ANSWER"===s.type)o="Answer",c=(l=s.answer).question.title;else{if("ARTICLE"!==s.type)return null;o="Post",c=(l=s.article).title}var d=l,f=d.id,b=d.thumbnailInfo,p=d.url,h=d.voteupCount,m=d.commentCount,g=null==b||null===(t=b.thumbnails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url,O="".concat(Object(y.cnNiceNumber)(h),"赞同 · ").concat(Object(y.cnNiceNumber)(m),"评论");return Object(r.b)(i.b,{content:{type:o,id:String(f)},children:Object(r.c)(i.a,{as:"a",view:{elementLocation:{card:{index:u}}},zaType:"Card",zaAction:"OpenUrl",zaText:"视频引用的原文",extra:{link:{url:p}},href:p,target:"_blank",css:function(e){return{marginTop:"16px",display:"flex",alignItems:"center",height:"84px",borderRadius:"8px",padding:"0 12px",backgroundColor:e.colors.GBK10A}},children:[g&&Object(r.b)(a.Image,{src:g,width:"60px",height:"60px",mr:"12px",css:{borderRadius:"6px"}}),Object(r.c)(a.Box,{flex:"1",children:[Object(r.b)(a.Box,{fontWeight:"bold",fontSize:"15px",css:Object(v.a)(1),children:c}),Object(r.b)(a.Box,{color:"GBK06A",fontSize:"13px",children:O})]})]})})},T=function(e){var t,n,c=e.id,s=e.subAuthor,u=e.before,d=e.after,p=e.content,y=p||{},w=y.type,x=y.id,T=b.db[w],I=Object(m.useDispatch)(),R=Object(m.useSelector)((function(e){return e.zvideos.creationReferences[c]})),E=Object(l.useState)(!1),N=k(h.a,E,2),B=N[0],z=N[1],L=Object(l.useCallback)((function(){z(!0),I(Object(C.m)(c))}),[I,c]);return s?Object(r.c)(r.a,{children:[Object(r.b)(i.b,{block:"CreationReferencesBar",content:p?{type:T,token:String(x)}:{},children:Object(r.c)(i.f,{zaText:!0,shouldTrackClick:!0,zaType:"Card",as:a.Flex,onClick:L,justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"10px",py:"12px",color:"GBK06A",bg:"GBK10A",fontSize:"14px",lineHeight:"20px",css:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[Object(r.c)(a.Flex,{children:[Object(r.b)(f,{css:{marginRight:"6.5px"}}),Object(r.b)(a.Box,{flexShrink:"0",children:u}),Object(r.c)(a.Flex,{alignItems:"center",mx:"6px",children:[Object(r.b)(j.a,{url:s.avatarUrl,round:!0,size:18,css:function(e){return{border:"1px solid ".concat(e.colors.GBK99A)}}}),Object(r.b)(a.Box,{flex:"1",ml:"6px",css:Object(v.a)(1),children:s.name})]}),Object(r.b)(a.Box,{flexShrink:"0",children:d})]}),Object(r.b)(o.a,{size:20,css:{flexShrink:"0"}})]})}),Object(r.b)(g.b,{onClose:function(){return z(!1)},title:"引用详情",children:B&&(R?Object(r.c)(i.b,{block:"CreationReferencesModal",children:[Object(r.b)(a.Box,{fontSize:"15px",fontWeight:"bold",children:"作者"}),null===(t=R.authors)||void 0===t?void 0:t.map((function(e){return Object(r.b)(S,{author:e},e.author)})),Object(r.b)(a.Box,{my:"24px",css:function(e){return{borderTop:"1px solid ".concat(e.colors.GBK10A)}}}),Object(r.b)(a.Box,{fontSize:"15px",fontWeight:"bold",children:"视频引用的原文"}),null===(n=R.originalContent)||void 0===n?void 0:n.map((function(e,t){return Object(r.b)(A,{item:e,index:t},t)}))]}):Object(r.c)(r.a,{children:[Object(r.b)(O.a,{variant:"P01"}),Object(r.b)(O.a,{variant:"T02"})]}))})]}):null},I=n(1144),R=function(e){var t=e.id,n=e.creationRelationship;if(!n)return null;if(Object(I.e)(n)){var a,o=Object(I.a)(n);return(null!==(a=null==o?void 0:o.author)&&void 0!==a?a:null)&&Object(r.b)(p,Object.assign({},o))}if(Object(I.f)(n)){var i,c=Object(I.d)(n),l=null!==(i=null==c?void 0:c.author)&&void 0!==i?i:null,s="answer"===(null==c?void 0:c.type)?"回答":"文章";return l&&Object(r.b)(T,{id:t,subAuthor:l,before:"本视频引用",after:"的".concat(s,"进行创作"),content:c})}return null}},1840:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(0),u=n(3),d=n.n(u),f=n(21),b=n(33),p=n(91),h=n(41),m=n(132);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=v(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleToggleAnonymousConfirm=function(){var t=e.props,n=t.question.id,r=t.updateQuestionAnonymous;(0,t.onClose)(),r(n)},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.fillCurrentUserIfNeeded(["mcn_user_info"])}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,r=e.shown,a=e.isMCNUser,o=n.relationship.isAnonymous;return Object(l.b)(p.b,{title:o?"确认取消匿名身份？":"启用匿名后",onClose:t,size:"default",children:r&&Object(l.c)("div",{children:[o?Object(l.b)("div",{className:"Anonymous-confirm",children:Object(l.b)("p",{children:"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。"})}):Object(l.b)("div",{className:"Anonymous-confirm",children:Object(l.c)("ul",{children:[Object(l.b)("li",{children:"提问、回答、赞同、关注会显示为匿名"}),Object(l.b)("li",{children:"不能邀请别人回答问题"}),Object(l.b)("li",{children:"不能将回答同步到圈子"}),Object(l.b)("li",{children:"除提问者本人，不能匿名编辑问题"}),Object(l.b)("li",{children:"匿名身份不能使用视频功能"}),Object(l.b)("li",{children:"不能被视频引用和联合创作"}),Object(l.b)("li",{children:"启用匿名将自动取消所有已获得的「专业认可」"}),Object(l.b)("li",{children:"匿名身份不能参与芝士任务"}),a&&Object(l.b)("li",{children:"不能使用商品信息发布功能"})]})}),Object(l.c)(p.a,{direction:"horizontal",children:[Object(l.b)(b.c,{onClick:t,color:"grey",children:"取消"}),Object(l.b)(b.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm,children:"确认"})]})]})})}}]),n}(s.Component);g.propTypes={question:d.a.object.isRequired};t.a=Object(f.connect)((function(e){var t,n=Object(h.b)(e);return{isMCNUser:2===(null==n||null===(t=n.mcnUserInfo)||void 0===t?void 0:t.status)}}),{updateQuestionAnonymous:m.qb,fillCurrentUserIfNeeded:h.f})(g)},1843:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(143),b=n(930),p=n(929),h=(n(1832),n(973)),m=n(940),v=n(965),g=n(1273),O=n(1538),j=n(433);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var w=function(e){Object(o.a)(n,e);var t=y(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.preset,r=e.ebook,a=e.lastreadTouchable,o=r.id,i=r.type,c=r.url,s=r.title,u=r.cover,d=r.authors,f=r.price,j=r.promotionPrice,y=r.description,w=r.relationship,C=void 0===w?{}:w,x=r.voteupCount,k=r.commentCount,S=(r.score,this.state),A=S.commentsShown,T=S.commentsAutoFocus,I=S.commentPattern;if(t!==p.c.interactive)return Object(l.b)(p.e,{title:Object(l.b)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:s}),data:r,link:c});var R={id:o,type:i},E=d.slice(0,2);return Object(l.c)(p.e,{className:"EBookItem",data:r,link:c,title:Object(l.b)("a",{className:"EBookItem-title",href:c,target:"_blank",rel:"noopener noreferrer",children:s}),image:Object(l.b)(n.Cover,{url:c,title:s,cover:u}),meta:Object(l.c)("div",{children:[Object(l.b)("div",{className:"EBookItem-description",children:y}),Object(l.c)(p.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"作者："}),E.map((function(e,t){return Object(l.c)("span",{children:[Object(l.b)(b.a,{user:e}),t<E.length-1&&"、"]},t)}))]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"知乎价："}),"number"==typeof j?Object(l.c)("span",{className:"EBookItem-price",children:[Object(O.a)(j),Object(l.b)("del",{children:Object(O.a)(f)})]}):Object(O.a)(f)]})]})]}),lastreadTouchable:a,children:[Object(l.c)(p.a,{className:"EBookItem-actions",children:[Object(l.b)(g.a,Object.assign(Object.assign({},R),{},{liked:Boolean(C.voting),count:x})),Object(l.b)(h.a,{onClick:this.handleCommentsShown,commentsShown:A,count:k}),Object(l.b)(v.a,Object.assign(Object.assign({},R),{},{title:s,authorName:d[0]&&d[0].name,href:c}))]}),Object(l.b)(m.a,{parent:r,commentPattern:I,shown:A,autoFocus:T,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);w.propTypes={preset:u.a.oneOf(Object.values(p.c))},w.defaultProps={preset:p.c.default},w.Cover=function(e){var t=e.url,n=e.cover,r=e.title;return Object(l.b)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{className:"EBookItem-image",style:{width:"78px",height:"104px"},src:Object(f.imgUrl)(n,"100w"),srcSet:"".concat(Object(f.imgUrl)(n,"xld")," 2x"),alt:r})})};t.a=Object(j.b)((function(e){var t=e.trackCardShow;return{module:"EBookItem",trackCardShow:void 0===t||t}}))(w)},1844:function(e,t,n){"use strict";var r=n(35),a=n(1),o=n(0),i=n.n(o),c=n(13),l=n.n(c),s=n(105),u=n(867),d=n(51),f=n(43),b=n.n(f),p=n(33),h=n(52),m=Object.assign;var v=function(e){return i.a.createElement(h.a,m({width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},e),i.a.createElement("path",{d:"M19.027 10c.239.01 1.973.138 1.973 2l-.001 8.027c-.009.24-.137 1.973-2 1.973H5.003C3.138 22 3.009 20.266 3 20.027V12c0-1.862 1.733-1.99 1.972-2zm-8.481 3.004c-.475-.277-.86-.064-.86.5V18.5c0 .553.394.773.86.5l4.278-2.496c.475-.277.466-.731 0-1.003zM18 2a2 2 0 012 2v1.134a1 1 0 011.207 1.573l-1.5 1.5a1 1 0 01-1.414 0l-1.5-1.5A1 1 0 0118 5.134V4h-2a1 1 0 110-2h2zm-8 4a1 1 0 010 2H4a1 1 0 110-2h6zm2-4a1 1 0 010 2H4a1 1 0 110-2h8z",fillRule:"evenodd"}))},g=n(1549),O=n(1139),j=n(57);function y(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var w=!1,C=function(){var e=Object(o.useState)(!1),t=y(r.a,e,2),n=t[0],i=t[1],c=Object(o.useRef)(null);Object(o.useEffect)((function(){b.a.get("vessayTipShown")||i(!0)}),[]),Object(O.a)((function(){i(!1),b.a.set("vessayTipShown",!0)}),c);var l=Object(s.a)((function(e){e.stopPropagation(),i(!1),b.a.set("vessayTipShown",!0)}));return n&&Object(a.b)("img",{ref:c,onClick:l,onKeyUp:l,src:"https://pic1.zhimg.com/v2-97ce1cdeee383ce98263fc787f08ba9e.png",alt:"一键生成视频",css:{width:"347px",height:"120px",objectFit:"cover",transform:"translate(-50%, -100%)",position:"absolute",top:"4px",left:"50%"}})};t.a=function(e){var t=e.className,n=e.type,i=e.id,c=e.useVessayV2,s=e.isAuthor,f=Object(g.c)(n,i,c),h=Object(j.isBrowser)()&&location.href.includes("/people"),m=Object(o.useState)(!1),O=y(r.a,m,2),x=O[0],k=O[1],S=Object(u.a)({once:!0}),A=y(r.a,S,2),T=A[0],I=A[1];return Object(o.useEffect)((function(){I&&!w&&(w=!0,k(!0))}),[I]),Object(a.c)(d.a,{as:p.c,zaAction:"OpenUrl",zaText:"生成视频",zaType:"Button",preset:"plain",onClick:function(){b.a.set("vessayTipShown",!0),window.open(f)},className:l()("ContentItem-convertVideoButton",t),css:{position:"relative"},extra:{link:{url:f}},children:[x&&s&&h&&Object(a.b)(C,{}),Object(a.b)(v,{}),Object(a.b)("span",{ref:T,children:"一键生成视频"})]})}},1845:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(0),u=n(20),d=n(21),f=n(1339),b=n.n(f),p=n(263),h=n.n(p),m=n(198),v=n(607);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function O(e,t){var n=t.os,r=t.id,a=t.sessionId,o=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",a).replace("__SESSIONID__",a).replace("__ATOKEN__",r).replace("__AID__",r).replace("__PAGETYPE__",o)}var j=function(e){Object(o.a)(n,e);var t=g(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={urls:null,logged:!1},e.handleObserve=function(t){t&&e.log()},e.log=function(){e.state.logged||Promise.resolve(e.state.urls||e.load().then((function(t){return t?(t=e.normalize(t),e.setState({urls:t}),t):[]}))).then((function(e){return e.forEach((function(e){return e&&Object(m.c)(e)}))})).then((function(){return e.setState({logged:!0})}))},e.load=function(){var t=e.props,n=t.type,r=t.id;return(0,t.loadBrandEntityTrackUrl)({type:n,id:r}).then((function(e){return e&&e.payload&&e.payload.data}))},e.normalize=function(t){var n=h()(),r=e.props,a=r.ua,o=r.id,i=r.type,c=encodeURIComponent("其他");a.Android?c="android":a.iOS&&(c="ios");var l={os:c,id:o,sessionId:n,type:i};return t.map((function(e){return O(e,l)}))},e}return Object(a.a)(n,[{key:"render",value:function(){return!this.state.logged&&Object(l.b)(b.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),n}(s.Component),y=Object(u.compose)(Object(d.connect)((function(e){return{ua:e.env.userAgent}}),{loadBrandEntityTrackUrl:v.b}))(j)},1846:function(e,t,n){"use strict";var r=n(216),a=n(1),o=n(0),i=n(13),c=n.n(i),l=n(91),s=n(156),u=n(220),d=n.n(u),f=n(986),b=n(35),p=n(37),h=n(59),m=n(917),v=n(1011),g=n(433),O=n(25),j=n(1041),y=["children","targetId","active","setCursor"];function w(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var C,x=function(e){var t=e.children,n=e.targetId,r=e.active,o=e.setCursor,i=Object(p.default)(e,y);return Object(a.b)(h.Text,Object.assign(Object.assign({color:r?"GBL01A":"GBK02A",fontWeight:r?"bold":"normal",css:{fontSize:"14px"}},i),{},{children:Object(a.b)(g.a,{module:"Content",moduleName:String(t),children:Object(a.c)(h.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(e){O.a.trackEvent(e.target,{id:9745,action:"Click",name:"弹窗"});var t=document.querySelector("#"+n);o(n),t&&Object(j.a)(t)},children:[Object(a.b)(h.Text,{css:Object(v.a)(1),children:t}),Object(a.b)(m.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})})}))},k=function(e){return Object(a.b)(x,Object.assign({},e))},S={1:k,2:function(e){return Object(a.b)(x,Object.assign({pl:"20px"},e))}},A=function(e){var t=e.catalog,n=e.className,r=e.zaContent,i=Object(o.useState)(null),l=w(b.a,i,2),s=l[0],u=l[1];return Object(o.useEffect)((function(){if(null!=t&&t.length){var e=null,n=Object(j.d)();t.forEach((function(t){var r=document.querySelector("#"+t.targetId);(null==r?void 0:r.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),u(e)}}),[]),null!=t&&t.length?Object(a.b)(g.a,{trackCardShow:!0,view:{id:9744,name:"弹窗"},content:r,module:"Content",children:Object(a.b)(h.Box,{className:c()(n),children:Object(a.b)(h.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,r=e.targetId,o=S[t]||k;return Object(a.b)(o,{targetId:r,active:s===r,setCursor:u,children:n},r)}))})})}):null};t.a=function(e){var t=e.className,n=e.shown,i=e.onClose,u=e.html,b=e.sourceId,p=e.updated,h=e.author,m=e.zaContent,v=Object(o.useMemo)((function(){return Object(f.c)(u,b).catalog}),[u,b]);return Object(a.b)(l.b,{wrapperClassName:"CatalogModal-wrapper",className:c()("CatalogModal",t),title:"目录",subtitle:d()(C||(C=Object(r.a)([""," 编辑于",""])),null==h?void 0:h.name,Object(s.toDateTimeString)(p)),onClose:i,children:n&&Object(a.b)(A,{css:{paddingBottom:"16px"},catalog:v,zaContent:m})})}},1847:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(2161),b=n(172),p=n(153),h=n(156),m=n(929),v=n(973),g=n(940),O=n(924),j=n(965),y=n(1851),w=n(930);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var x=function(e){Object(o.a)(n,e);var t=C(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.roundtable,a=t.lastreadTouchable,o=t.zaInfos.follow,i=r||{},c=i.id,s=i.logo,u=i.type,d=i.guests,C=void 0===d?[]:d,x=i.stopTime,k=i.startTime,S=i.followers,A=i.commentCount,T=i.isFollowing,I=this.state,R=I.commentsShown,E=I.commentsAutoFocus,N=I.commentPattern,B=Object(l.b)(y.a,{roundtable:r,target:"_blank"}),z="/roundtable/".concat(c);if(n!==m.c.interactive)return Object(l.b)(m.e,{data:r,link:z,title:B});var L,P,_,M={id:c,type:u};return Object(l.c)(m.e,{data:r,link:z,onRef:function(t){e.contentItem=t},title:Object(l.c)("div",{className:"RoundtableItem-title",children:[B,Object(l.c)("div",{className:"RoundtableItem-badge",children:[Object(l.b)(f.a,{text:!0,center:!0})," ",(L=k,P=x,_=Date.now()/1e3,_>P?"已结束":_<L?"".concat(Object(h.toRelativeString)(L)," 开始"):"".concat(Object(h.toRelativeString)(P)," 结束"))]})]}),image:Object(l.b)(b.a,{url:s,size:60}),meta:Object(l.c)("div",{className:"RoundtableItem-meta",children:[Object(p.formatNumber)(S)," 人关注","了该圆桌"]}),lastreadTouchable:a,children:[C.length>0&&Object(l.b)(m.b,{children:Object(l.c)("div",{children:[Object(l.b)("span",{children:"嘉宾："}),C.map((function(e,t){return Object(l.c)("span",{children:[Object(l.b)(w.a,{user:e}),t<C.length-1&&"、"]},t)}))]})}),Object(l.c)(m.a,{children:[Object(l.b)(O.a,Object.assign(Object.assign({},M),{},{isFollowing:T,zaId:o})),Object(l.b)(v.a,{onClick:this.handleCommentsShown,commentsShown:R,count:A}),Object(l.b)(j.a,Object.assign(Object.assign({},M),{},{title:r.name}))]}),Object(l.b)(g.a,{parent:r,commentPattern:N,shown:R,autoFocus:E,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);x.propTypes={preset:u.a.oneOf(Object.values(m.c)),zaInfos:u.a.shape({follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},x.defaultProps={preset:m.c.default,zaInfos:{}}},1848:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(40),a=n.n(r),o=n(68),i=n(1),c=n(21),l=n(51),s=n(217),u=n(6),d=Object(u.a)("coCreation",["CANCEL"]);function f(e){var t=e.contentType,n=e.contentId,r=Object(c.useDispatch)(),u=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.confirm("",{title:"你确定要取消联合创作吗？",text:{ok:"同意"}});case 2:return e.next=4,r((a=t,o=n,{API:{types:d.CANCEL,endpoint:"creation-relationship/cancel",method:"PUT",body:{content_type:a,content_id:String(o)}}}));case 4:window.location.reload();case 5:case"end":return e.stop()}var a,o}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.b)(l.a,{zaType:"Button",zaText:!0,zaBlock:"CancelCoCreation",onClick:u,children:"取消联合创作"})}},1851:function(e,t,n){"use strict";var r=n(37),a=n(15),o=n(16),i=n(18),c=n(19),l=n(9),s=n(1),u=n(3),d=n.n(u),f=n(0),b=n(13),p=n.n(b),h=n(21),m=n(49),v=n(1035),g=n(1105),O=n(2161),j=n(1689),y=n(156),w=n(25),C=n(154),x=n(924),k=n(441),S=["userKey","isLast"],A=["toggler","roundtable","id","isLoading","onRef"];function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var I=function(e){var t=e.userKey,n=e.isLast,a=Object(r.default)(e,S),o=Object(h.useSelector)((function(e){return e.entities.users[t]}));if(!o)return null;var i=o.urlToken,c=o.name,l=o.isOrg;return Object(s.c)(m.Link,Object.assign(Object.assign({to:"/".concat(l?"org":"people","/").concat(i)},a),{},{children:[c,!n&&"、"]}))},R=function(e){Object(i.a)(n,e);var t=T(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).load=function(){var t=e.props,n=t.dispatch,r=t.id;n(Object(k.d)(r))},e.track=function(){var t=e.props.roundtable;e.hoverCardElement&&t&&(w.a.setModule(e.hoverCardElement,{module:"RoundtableItem"},{card:{content:{type:"Roundtable",token:t.id,item_num:t.questionsCount,follower_num:t.followers,publish_timestamp:1e3*t.stopTime}}}),w.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,a=t.roundtable,o=t.id,i=t.isLoading,c=t.onRef,l=Object(r.default)(t,A),u=a||{},d=u.name,f=u.type,b=u.description,p=u.guests,h=void 0===p?[]:p,m=u.activitiesCount,w=u.questionsCount,k=u.followers,S=u.logo,T=u.stopTime,R=u.isFollowing,E=h.length,N="/roundtable/".concat(o);return Object(s.c)(g.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(g.a,{title:Object(s.b)("a",{target:"_blank",href:"/roundtable/".concat(o),rel:"noopener noreferrer",children:d}),avatarUrl:S,attrInfo:Object(s.c)("div",{children:[Object(s.b)(O.a,{text:!0,center:!0})," ",Object(y.toRelativeString)(T)]})}),b&&Object(s.b)("div",{children:Object(s.b)("div",{className:"HoverCard-description",children:b})}),Object(s.c)("div",{children:[Object(s.b)(j.a,{text:!0,center:!0})," 组织机构",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),Object(s.b)("a",{href:"/topic/19793502",children:"圆桌"})]}),E>0&&Object(s.c)("div",{children:["嘉宾",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),h.map((function(e,t){var n=e.member;return Object(s.b)(I,{userKey:n,isLast:t===E-1},t)}))]}),Object(s.c)("div",{children:[Object(s.c)(v.a,{children:[Object(s.b)(v.a.Item,{tag:C.a,preset:"plain",a:!0,to:N,name:"动态",value:m}),Object(s.b)(v.a.Item,{tag:C.a,preset:"plain",a:!0,to:"".concat(N,"/question"),name:"问题",value:w}),Object(s.b)(v.a.Item,{tag:C.a,preset:"plain",a:!0,to:"".concat(N,"/followers"),name:"关注者",value:k})]}),Object(s.b)("div",{className:"HoverCard-buttons",children:Object(s.b)(x.a,{id:o,type:f,isFollowing:R,preset:"primary"})})]})]}))}}]),n}(f.Component),E=Object(h.connect)((function(e,t){var n=t.id,r=e.entities.roundtables,a=e.loading.local;return{roundtable:r[n],isLoading:Boolean(a["roundtable/".concat(n)])}}))(R),N=["roundtable","noHoverCard","style","className","children"];function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var z=function(e){Object(i.a)(n,e);var t=B(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.roundtable,n=t.name,a=t.id,o=e.noHoverCard,i=e.style,c=e.className,l=e.children,u=Object(r.default)(e,N),d=l||n;return o||(d=Object(s.b)(E,{toggler:d,id:a})),Object(s.b)("a",Object.assign(Object.assign({style:i,className:p()("RoundTableLink",c),href:"/roundtable/".concat(a)},u),{},{children:d}))}}]),n}(f.Component);z.propTypes={roundtable:d.a.object.isRequired,noHoverCard:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},z.defaultProps={noHoverCard:!1};t.a=z},2397:function(e,t,n){"use strict";var r=n(24),a=n(34);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return c(t,void 0!==n&&n<r?n:r)}return e(t,n)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n(2398),s=n(2399),u=n(2400),d=n(2401);function f(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function b(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function p(e,t){return t.decode?s(e):e}function h(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function m(e){var t=(e=h(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function v(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){f((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var a="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!a&&p(n,e).includes(e.arrayFormatSeparator);n=o?p(n,e):n;var i=a||o?n.split(e.arrayFormatSeparator).map((function(t){return p(t,e)})):null===n?n:p(n,e);r[t]=i};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),a=Object.create(null);if("string"!=typeof e)return a;if(!(e=e.trim().replace(/^[?#&]/,"")))return a;var c,l=o(e.split("&"),!0);try{for(l.s();!(c=l.n()).done;){var s=c.value;if(""!==s){var d=u(t.decode?s.replace(/\+/g," "):s,"="),b=i(r,d,2),h=b[0],m=b[1];m=void 0===m?null:["comma","separator"].includes(t.arrayFormat)?m:p(m,t),n(p(h,t),m,a)}}}catch(e){l.e(e)}finally{l.f()}for(var g=0,O=Object.keys(a);g<O.length;g++){var j=O[g],y=a[j];if("object"==typeof y&&null!==y)for(var w=0,C=Object.keys(y);w<C.length;w++){var x=C[w];y[x]=v(y[x],t)}else a[j]=v(y,t)}return!1===t.sort?a:(!0===t.sort?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce((function(e,t){var n=a[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))}t.extract=m,t.parse=g,t.stringify=function(e,t){if(!e)return"";f((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n=function(n){return t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n]},r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var o=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(a,n),null===r?[[b(t,e),"[",o,"]"].join("")]:[[b(t,e),"[",b(o,e),"]=",b(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(a,n),null===r?[[b(t,e),"[]"].join("")]:[[b(t,e),"[]=",b(r,e)].join("")])}};case"comma":case"separator":return function(t){return function(n,r){return null==r||0===r.length?n:0===n.length?[[b(t,e),"=",b(r,e)].join("")]:[[n,b(r,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(i(a,n),null===r?[b(t,e)]:[[b(t,e),"=",b(r,e)].join("")])}}}}(t),o={},c=0,l=Object.keys(e);c<l.length;c++){var s=l[c];n(s)||(o[s]=e[s])}var u=Object.keys(o);return!1!==t.sort&&u.sort(t.sort),u.map((function(n){var a=e[n];return void 0===a?"":null===a?b(n,t):Array.isArray(a)?a.reduce(r(n),[]).join("&"):b(n,t)+"="+b(a,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=u(e,"#"),a=i(r,n,2),o=a[0],c=a[1];return Object.assign({url:o.split("?")[0]||"",query:g(m(e),t)},t&&t.parseFragmentIdentifier&&c?{fragmentIdentifier:p(c,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign({encode:!0,strict:!0},n);var r=h(e.url).split("?")[0]||"",a=t.extract(e.url),o=t.parse(a,{sort:!1}),i=Object.assign(o,e.query),c=t.stringify(i,n);c&&(c="?".concat(c));var l=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l="#".concat(b(e.fragmentIdentifier,n))),"".concat(r).concat(c).concat(l)},t.pick=function(e,n,r){r=Object.assign({parseFragmentIdentifier:!0},r);var a=t.parseUrl(e,r),o=a.url,i=a.query,c=a.fragmentIdentifier;return t.stringifyUrl({url:o,query:d(i,n),fragmentIdentifier:c},r)},t.exclude=function(e,n,r){var a=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return t.pick(e,a,r)}},2398:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},2399:function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function i(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=a.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=a.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),c=0;c<o.length;c++){var l=o[c];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},2400:function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},2401:function(e,t,n){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),a=Array.isArray(t),o=0;o<r.length;o++){var i=r[o],c=e[i];(a?-1!==t.indexOf(i):t(i,c,e))&&(n[i]=c)}return n}},2402:function(e,t,n){var r;!function(a,o){"use strict";var i="model",c="name",l="type",s="vendor",u="version",d="mobile",f="tablet",b="smarttv",p=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},h=function(e,t){return"string"==typeof e&&-1!==m(t).indexOf(m(e))},m=function(e){return e.toLowerCase()},v=function(e,t){if("string"==typeof e)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),void 0===t?e:e.substring(0,255)},g=function(e,t){for(var n,r,a,o,i,c,l=0;l<t.length&&!i;){var s=t[l],u=t[l+1];for(n=r=0;n<s.length&&!i;)if(i=s[n++].exec(e))for(a=0;a<u.length;a++)c=i[++r],"object"==typeof(o=u[a])&&o.length>0?2===o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,c):this[o[0]]=o[1]:3===o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=c?c.replace(o[1],o[2]):void 0:this[o[0]]=c?o[1].call(this,c,o[2]):void 0:4===o.length&&(this[o[0]]=c?o[3].call(this,c.replace(o[1],o[2])):void 0):this[o]=c||void 0;l+=2}},O=function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(h(t[n][r],e))return"?"===n?void 0:n}else if(h(t[n],e))return"?"===n?void 0:n;return e},j={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[u,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[u,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,u],[/opios[\/ ]+([\w\.]+)/i],[u,[c,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[u,[c,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[u,[c,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[u,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[u,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[u,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[u,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[u,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure Browser"],u],[/\bfocus\/([\w\.]+)/i],[u,[c,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[u,[c,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[u,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[u,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[u,[c,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[u,[c,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[u,[c,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 Browser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],u],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,u],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,"Facebook"],u],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,u],[/\bgsa\/([\w\.]+) .*safari\//i],[u,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[u,[c,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,"Chrome WebView"],u],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[u,[c,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,u],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[u,[c,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[u,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[u,O,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,u],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],u],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[u,[c,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",m]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",m]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",m]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[i,[s,"Samsung"],[l,f]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[i,[s,"Samsung"],[l,d]],[/\((ip(?:hone|od)[\w ]*);/i],[i,[s,"Apple"],[l,d]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[i,[s,"Apple"],[l,f]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[i,[s,"Huawei"],[l,f]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[i,[s,"Huawei"],[l,d]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[i,/_/g," "],[s,"Xiaomi"],[l,d]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[i,/_/g," "],[s,"Xiaomi"],[l,f]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[i,[s,"OPPO"],[l,d]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[i,[s,"Vivo"],[l,d]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[i,[s,"Realme"],[l,d]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[i,[s,"Motorola"],[l,d]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[i,[s,"Motorola"],[l,f]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[i,[s,"LG"],[l,f]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[i,[s,"LG"],[l,d]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[i,[s,"Lenovo"],[l,f]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[i,/_/g," "],[s,"Nokia"],[l,d]],[/(pixel c)\b/i],[i,[s,"Google"],[l,f]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[i,[s,"Google"],[l,d]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[i,[s,"Sony"],[l,d]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[i,"Xperia Tablet"],[s,"Sony"],[l,f]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[i,[s,"OnePlus"],[l,d]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[i,[s,"Amazon"],[l,f]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[i,/(.+)/g,"Fire Phone $1"],[s,"Amazon"],[l,d]],[/(playbook);[-\w\),; ]+(rim)/i],[i,s,[l,f]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[i,[s,"BlackBerry"],[l,d]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[i,[s,"ASUS"],[l,f]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[i,[s,"ASUS"],[l,d]],[/(nexus 9)/i],[i,[s,"HTC"],[l,f]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[s,[i,/_/g," "],[l,d]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[i,[s,"Acer"],[l,f]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[i,[s,"Meizu"],[l,d]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[i,[s,"Sharp"],[l,d]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[s,i,[l,d]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[s,i,[l,f]],[/(surface duo)/i],[i,[s,"Microsoft"],[l,f]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[i,[s,"Fairphone"],[l,d]],[/(u304aa)/i],[i,[s,"AT&T"],[l,d]],[/\bsie-(\w*)/i],[i,[s,"Siemens"],[l,d]],[/\b(rct\w+) b/i],[i,[s,"RCA"],[l,f]],[/\b(venue[\d ]{2,7}) b/i],[i,[s,"Dell"],[l,f]],[/\b(q(?:mv|ta)\w+) b/i],[i,[s,"Verizon"],[l,f]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[i,[s,"Barnes & Noble"],[l,f]],[/\b(tm\d{3}\w+) b/i],[i,[s,"NuVision"],[l,f]],[/\b(k88) b/i],[i,[s,"ZTE"],[l,f]],[/\b(nx\d{3}j) b/i],[i,[s,"ZTE"],[l,d]],[/\b(gen\d{3}) b.+49h/i],[i,[s,"Swiss"],[l,d]],[/\b(zur\d{3}) b/i],[i,[s,"Swiss"],[l,f]],[/\b((zeki)?tb.*\b) b/i],[i,[s,"Zeki"],[l,f]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[s,"Dragon Touch"],i,[l,f]],[/\b(ns-?\w{0,9}) b/i],[i,[s,"Insignia"],[l,f]],[/\b((nxa|next)-?\w{0,9}) b/i],[i,[s,"NextBook"],[l,f]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[s,"Voice"],i,[l,d]],[/\b(lvtel\-)?(v1[12]) b/i],[[s,"LvTel"],i,[l,d]],[/\b(ph-1) /i],[i,[s,"Essential"],[l,d]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[i,[s,"Envizen"],[l,f]],[/\b(trio[-\w\. ]+) b/i],[i,[s,"MachSpeed"],[l,f]],[/\btu_(1491) b/i],[i,[s,"Rotor"],[l,f]],[/(shield[\w ]+) b/i],[i,[s,"Nvidia"],[l,f]],[/(sprint) (\w+)/i],[s,i,[l,d]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[s,"Microsoft"],[l,d]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[i,[s,"Zebra"],[l,f]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[i,[s,"Zebra"],[l,d]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[s,i,[l,"console"]],[/droid.+; (shield) bui/i],[i,[s,"Nvidia"],[l,"console"]],[/(playstation [345portablevi]+)/i],[i,[s,"Sony"],[l,"console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[i,[s,"Microsoft"],[l,"console"]],[/smart-tv.+(samsung)/i],[s,[l,b]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[s,"Samsung"],[l,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[s,"LG"],[l,b]],[/(apple) ?tv/i],[s,[i,"Apple TV"],[l,b]],[/crkey/i],[[i,"Chromecast"],[s,"Google"],[l,b]],[/droid.+aft(\w)( bui|\))/i],[i,[s,"Amazon"],[l,b]],[/\(dtv[\);].+(aquos)/i],[i,[s,"Sharp"],[l,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[s,v],[i,v],[l,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,b]],[/((pebble))app/i],[s,i,[l,"wearable"]],[/droid.+; (glass) \d/i],[i,[s,"Google"],[l,"wearable"]],[/droid.+; (wt63?0{2,3})\)/i],[i,[s,"Zebra"],[l,"wearable"]],[/(quest( 2)?)/i],[i,[s,"Facebook"],[l,"wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[s,[l,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[i,[l,d]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[i,[l,f]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,f]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[l,d]],[/(android[-\w\. ]{0,9});.+buil/i],[i,[s,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[u,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[u,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[u,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,u],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[u,O,j]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[u,O,j]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[u,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,"Mac OS"],[u,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[u,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,u],[/\(bb(10);/i],[u,[c,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[u,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[u,[c,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[u,[c,"webOS"]],[/crkey\/([\d\.]+)/i],[u,[c,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[c,"Chromium OS"],u],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,u],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],u],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,u]]},w=function e(t,n){if("object"==typeof t&&(n=t,t=void 0),!(this instanceof e))return new e(t,n).getResult();var r=t||(void 0!==a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),o=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(y,n):y;return this.getBrowser=function(){var e,t={};return t[c]=void 0,t[u]=void 0,g.call(t,r,o.browser),t.major="string"==typeof(e=t.version)?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,t},this.getCPU=function(){var e={architecture:void 0};return g.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return g.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return g.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return g.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r="string"==typeof e&&e.length>255?v(e,255):e,this},this.setUA(r),this};w.VERSION="1.0.2",w.BROWSER=p([c,u,"major"]),w.CPU=p(["architecture"]),w.DEVICE=p([i,s,l,"console",d,b,f,"wearable","embedded"]),w.ENGINE=w.OS=p([c,u]),void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=w),t.UAParser=w):n(1436)?void 0===(r=function(){return w}.call(t,n,t,e))||(e.exports=r):void 0!==a&&(a.UAParser=w);var C=void 0!==a&&(a.jQuery||a.Zepto);if(C&&!C.ua){var x=new w;C.ua=x.getResult(),C.ua.get=function(){return x.getUA()},C.ua.set=function(e){x.setUA(e);var t=x.getResult();for(var n in t)C.ua[n]=t[n]}}}("object"==typeof window?window:this)},2403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e)};var r,a=n(2404),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},2404:function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,a=/^ms-/,o={};function i(e){return"-"+e.toLowerCase()}t.default=function(e){if(o.hasOwnProperty(e))return o[e];var t=e.replace(r,i);return o[e]=a.test(t)?"-"+t:t}},2405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t)){for(var r={},a=e[t],i=(0,o.default)(t),c=Object.keys(n),l=0;l<c.length;l++){var s=c[l];if(s===t)for(var u=0;u<a.length;u++)r[a[u]+i]=n[t];r[s]=n[s]}return r}return n};var r,a=n(1744),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},2406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,a){for(var o=0,i=e.length;o<i;++o){var c=e[o](t,n,r,a);if(c)return c}},e.exports=t.default},2407:function(e,t,n){"use strict";function r(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Array.isArray(t))for(var n=0,a=t.length;n<a;++n)r(e,t[n]);else r(e,t)},e.exports=t.default},2408:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Object&&!Array.isArray(e)},e.exports=t.default},2409:function(e,t,n){e.exports=n(2410)},2410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2411);n(1031),n(1347),n(1348),n(1349),n(1350),n(1351),n(1352),n(1353),n(1354),n(1355),n(1356),n(1357),n(1358),n(1359),n(1032);var a=r.makeExports(!1),o=a.StyleSheet,i=a.StyleSheetServer,c=a.StyleSheetTestUtils,l=a.css,s=a.minify,u=a.flushToStyleTag,d=a.injectAndGetClassName,f=a.defaultSelectorHandlers;t.StyleSheet=o,t.StyleSheetServer=i,t.StyleSheetTestUtils=c,t.css=l,t.minify=s,t.flushToStyleTag=u,t.injectAndGetClassName=d,t.defaultSelectorHandlers=f},2411:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=r(n(1031)),o=r(n(1347)),i=r(n(1348)),c=r(n(1349)),l=r(n(1350)),s=r(n(1351)),u=r(n(1352)),d=r(n(1353)),f=r(n(1354)),b=r(n(1355)),p=r(n(1356)),h=r(n(1357)),m=r(n(1358)),v=r(n(1359)),g=r(n(1032)),O=/([A-Z])/g,j=function(e){return"-"+String(e.toLowerCase())},y={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var w=["Webkit","ms","Moz","O"];Object.keys(y).forEach((function(e){w.forEach((function(t){y[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=y[e]}))}));var C=function(e,t){return"number"==typeof t?y[e]?""+t:t+"px":""+t},x=function(e,t){return S(C(e,t))},k=function(e,t){return a(e).toString(36)},S=function(e){return"!"===e[e.length-10]&&" !important"===e.slice(-11)?e:String(e)+" !important"},A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var I="undefined"!=typeof Map,R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.keyOrder=[]}return T(e,[{key:"forEach",value:function(e){for(var t=0;t<this.keyOrder.length;t++)e(this.elements[this.keyOrder[t]],this.keyOrder[t])}},{key:"set",value:function(t,n,r){if(this.elements.hasOwnProperty(t)){if(r){var a=this.keyOrder.indexOf(t);this.keyOrder.splice(a,1),this.keyOrder.push(t)}}else this.keyOrder.push(t);if(null!=n){if(I&&n instanceof Map||n instanceof e){var o=this.elements.hasOwnProperty(t)?this.elements[t]:new e;return n.forEach((function(e,t){o.set(t,e,r)})),void(this.elements[t]=o)}if(Array.isArray(n)||"object"!==(void 0===n?"undefined":A(n)))this.elements[t]=n;else{for(var i=this.elements.hasOwnProperty(t)?this.elements[t]:new e,c=Object.keys(n),l=0;l<c.length;l+=1)i.set(c[l],n[c[l]],r);this.elements[t]=i}}else this.elements[t]=n}},{key:"get",value:function(e){return this.elements[e]}},{key:"has",value:function(e){return this.elements.hasOwnProperty(e)}},{key:"addStyleType",value:function(t){var n=this;if(I&&t instanceof Map||t instanceof e)t.forEach((function(e,t){n.set(t,e,!0)}));else for(var r=Object.keys(t),a=0;a<r.length;a++)this.set(r[a],t[r[a]],!0)}}]),e}(),E=["Webkit"],N=["Moz"],B=["ms"],z=["Webkit","Moz"],L=["Webkit","ms"],P=["Webkit","Moz","ms"];var _=v({plugins:[o,i,c,l,s,u,d,f,b,p,h,m],prefixMap:{transform:L,transformOrigin:L,transformOriginX:L,transformOriginY:L,backfaceVisibility:E,perspective:E,perspectiveOrigin:E,transformStyle:E,transformOriginZ:E,animation:E,animationDelay:E,animationDirection:E,animationFillMode:E,animationDuration:E,animationIterationCount:E,animationName:E,animationPlayState:E,animationTimingFunction:E,appearance:z,userSelect:P,fontKerning:E,textEmphasisPosition:E,textEmphasis:E,textEmphasisStyle:E,textEmphasisColor:E,boxDecorationBreak:E,clipPath:E,maskImage:E,maskMode:E,maskRepeat:E,maskPosition:E,maskClip:E,maskOrigin:E,maskSize:E,maskComposite:E,mask:E,maskBorderSource:E,maskBorderMode:E,maskBorderSlice:E,maskBorderWidth:E,maskBorderOutset:E,maskBorderRepeat:E,maskBorder:E,maskType:E,textDecorationStyle:z,textDecorationSkip:z,textDecorationLine:z,textDecorationColor:z,filter:E,fontFeatureSettings:z,breakAfter:P,breakBefore:P,breakInside:P,columnCount:z,columnFill:z,columnGap:z,columnRule:z,columnRuleColor:z,columnRuleStyle:z,columnRuleWidth:z,columns:z,columnSpan:z,columnWidth:z,writingMode:L,flex:L,flexBasis:E,flexDirection:L,flexGrow:E,flexFlow:L,flexShrink:E,flexWrap:L,alignContent:E,alignItems:E,alignSelf:E,justifyContent:E,order:E,transitionDelay:E,transitionDuration:E,transitionProperty:E,transitionTimingFunction:E,backdropFilter:E,scrollSnapType:L,scrollSnapPointsX:L,scrollSnapPointsY:L,scrollSnapDestination:L,scrollSnapCoordinate:L,shapeImageThreshold:E,shapeImageMargin:E,shapeImageOutside:E,hyphens:P,flowInto:L,flowFrom:L,regionFragment:L,textOrientation:E,boxSizing:N,textAlignLast:N,tabSize:N,wrapFlow:B,wrapThrough:B,wrapMargin:B,touchAction:B,gridTemplateColumns:B,gridTemplateRows:B,gridTemplateAreas:B,gridTemplate:B,gridAutoColumns:B,gridAutoRows:B,gridAutoFlow:B,grid:B,gridRowStart:B,gridColumnStart:B,gridRowEnd:B,gridRow:B,gridColumn:B,gridColumnEnd:B,gridColumnGap:B,gridRowGap:B,gridArea:B,gridGap:B,textSizeAdjust:L,borderImage:E,borderImageOutset:E,borderImageRepeat:E,borderImageSlice:E,borderImageSource:E,borderImageWidth:E}}),M=[function(e,t,n){return":"!==e[0]?null:n(t+e)},function(e,t,n){if("@"!==e[0])return null;var r=n(t);return[String(e)+"{"+String(r.join(""))+"}"]}],D=function e(t,n,r,a,o){for(var i=new R,c=0;c<n.length;c++)i.addStyleType(n[c]);var l=new R,s=[];i.forEach((function(n,i){r.some((function(c){var l=c(i,t,(function(t){return e(t,[n],r,a,o)}));if(null!=l)return Array.isArray(l)?s.push.apply(s,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l)):(console.warn("WARNING: Selector handlers should return an array of rules.Returning a string containing multiple rules is deprecated.",c),s.push("@media all {"+String(l)+"}")),!0}))||l.set(i,n,!0)}));var u=V(t,l,a,o,r);return u&&s.unshift(u),s},U=function(e,t,n){return String("m"===(r=e.replace(O,j))[0]&&"s"===r[1]&&"-"===r[2]?"-"+String(r):r)+":"+String(n(e,t))+";";var r},F=function(e,t){return e[t]=!0,e},V=function(e,t,n,r,a){!function(e,t,n){if(t)for(var r=Object.keys(t),a=0;a<r.length;a++){var o=r[a];e.has(o)&&e.set(o,t[o](e.get(o),n),!1)}}(t,n,a);var o=Object.keys(t.elements).reduce(F,Object.create(null)),i=_(t.elements),c=Object.keys(i);if(c.length!==t.keyOrder.length)for(var l=0;l<c.length;l++)if(!o[c[l]]){var s=void 0;if((s="W"===c[l][0]?c[l][6].toLowerCase()+c[l].slice(7):"o"===c[l][1]?c[l][3].toLowerCase()+c[l].slice(4):c[l][2].toLowerCase()+c[l].slice(3))&&o[s]){var u=t.keyOrder.indexOf(s);t.keyOrder.splice(u,0,c[l])}else t.keyOrder.unshift(c[l])}for(var d=!1===r?C:x,f=[],b=0;b<t.keyOrder.length;b++){var p=t.keyOrder[b],h=i[p];if(Array.isArray(h))for(var m=0;m<h.length;m++)f.push(U(p,h[m],d));else f.push(U(p,h,d))}return f.length?String(e)+"{"+String(f.join(""))+"}":""},G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var q=null,H={fontFamily:function e(t){if(Array.isArray(t)){var n={};return t.forEach((function(t){n[e(t)]=!0})),Object.keys(n).join(",")}return"object"===(void 0===t?"undefined":G(t))?(Y(t.src,"@font-face",[t],!1),'"'+String(t.fontFamily)+'"'):t},animationName:function e(t,n){if(Array.isArray(t))return t.map((function(t){return e(t,n)})).join(",");if("object"===(void 0===t?"undefined":G(t))){var r="keyframe_"+String((o=t,k(JSON.stringify(o)))),a="@keyframes "+r+"{";return t instanceof R?t.forEach((function(e,t){a+=D(t,[e],n,H,!1).join("")})):Object.keys(t).forEach((function(e){a+=D(e,[t[e]],n,H,!1).join("")})),Q(r,[a+="}"]),r}return t;var o}},W={},K=[],Z=!1,Q=function(e,t){var n;if(!W[e]){if(!Z){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");Z=!0,g(X)}(n=K).push.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)),W[e]=!0}},Y=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!W[e]){var o=D(t,n,a,H,r);Q(e,o)}},J=function(){Z=!1;var e=K;return K=[],e},X=function(){var e=J();e.length>0&&function(e){if(null==q&&null==(q=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(q=document.createElement("style")).type="text/css",q.setAttribute("data-aphrodite",""),t.appendChild(q)}var n=q.styleSheet||q.sheet;if(n.insertRule){var r=n.cssRules.length;e.forEach((function(e){try{n.insertRule(e,r),r+=1}catch(e){}}))}else q.innerText=(q.innerText||"")+e.join("")}(e)},$=function(e){e.forEach((function(e){W[e]=!0}))},ee=function(e,t,n){var r=[],a=[],o=function e(t,n,r,a){for(var o=0;o<t.length;o+=1)t[o]&&(Array.isArray(t[o])?a+=e(t[o],n,r,a):(n.push(t[o]._name),r.push(t[o]._definition),a+=t[o]._len));return a}(t,r,a,0);if(0===r.length)return"";var i=void 0;return i=1===r.length?"_"+String(r[0]):"_"+String(k(r.join()))+String((o%36).toString(36)),Y(i,"."+String(i),a,e,n),i},te=function(e,t){return String(t)+"_"+String(k(e))},ne=k,re={create:function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r+=1){var a=n[r],o=e[a],i=JSON.stringify(o);t[a]={_len:i.length,_name:ne(i,a),_definition:o}}return t},rehydrate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];$(e)}},ae="undefined"!=typeof window?null:{renderStatic:function(e){return K=[],W={},Z=!1,q=null,function(){if(Z)throw new Error("Cannot buffer while already buffering");Z=!0}(),{html:e(),css:{content:J().join(""),renderedClassNames:Object.keys(W)}}}};t.makeExports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;return{StyleSheet:Object.assign({},re,{extend:function(r){var a=r.map((function(e){return e.selectorHandler})).filter((function(e){return e}));return e(t,n.concat(a))}}),StyleSheetServer:ae,StyleSheetTestUtils:null,minify:function(e){ne=e?k:te},css:function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return ee(t,r,n)},flushToStyleTag:X,injectAndGetClassName:ee,defaultSelectorHandlers:M}}},2413:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowExpand24","data-old-api":"FullscreenEnter"},e),{className:"Zi Zi--FullscreenEnter"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M20 3.25h-6.5a.75.75 0 000 1.5h4.69l-5.22 5.22a.75.75 0 101.06 1.06l5.22-5.22v4.69a.75.75 0 001.5 0V4a.747.747 0 00-.75-.75zM9.97 12.97l-5.22 5.22V13.5a.75.75 0 00-1.5 0V20a.748.748 0 00.75.75h6.5a.75.75 0 000-1.5H5.81l5.22-5.22a.75.75 0 10-1.06-1.06z",fillRule:"evenodd",clipRule:"evenodd"}))}},2414:function(e,t,n){e.exports=n.p+"assets/liukanshan_coin.29bf8333.svg"},2415:function(e,t,n){e.exports=n.p+"assets/liukanshan_loudspeaker.292ada3b.svg"},2947:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Clap24","data-old-api":"Clap"},e),{className:"Zi Zi--Clap"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M6.02 4.198a.707.707 0 001.15.29l.051-.048a3.76 3.76 0 012.852-.996l.832.064a.717.717 0 00.139-1.427l-.37-.043a5.675 5.675 0 00-4.12 1.143l-.297.229a.707.707 0 00-.237.788z"}),a.a.createElement("path",{d:"M2.594 9.339a2.097 2.097 0 00.124 2.296 2.11 2.11 0 00-.435.531c-.577 1-.245 2.279.751 2.854l.733.423c-.116.12-.22.258-.307.409-.577 1-.246 2.279.751 2.854l4.397 2.539a7.306 7.306 0 008.439-.807 7.278 7.278 0 004.164-3.325c1.512-2.62.716-6.075-1.249-8.49-.67-.826-1.456-1.55-2.242-2.276-.72-.664-1.44-1.328-2.072-2.07a2.087 2.087 0 00-2.848.777c-.019.034-.07.117-.137.228l-.251.418c-1.798-.77-2.495.591-2.954 2.175L7.734 6.88a2.087 2.087 0 00-2.847.776 2.11 2.11 0 00-.243.643 2.097 2.097 0 00-2.05 1.04zm17.25 6.982a5.737 5.737 0 01-.662.923c.924-2.78-.017-5.787-2.303-7.682-.223-.185-.45-.363-.678-.541-.467-.367-.934-.733-1.356-1.15l-1.01-.999c.074-.31.17-.663.334-1.029.175-.39.45-.326.685-.19.56.656 1.194 1.251 1.828 1.846.868.816 1.736 1.631 2.413 2.6 1.312 1.878 1.83 4.35.749 6.222zM4.14 10.816a.503.503 0 01-.178-.688.503.503 0 01.685-.19l5.572 3.217a.795.795 0 00.795-1.376L6.433 9.134a.503.503 0 01-.178-.688.503.503 0 01.685-.19l5.572 3.217a.795.795 0 00.795-1.377l-2.103-1.213c-.335-.194.102-2.022.901-1.56l1.957 1.932c.355.351.745.664 1.136.977.297.238.594.476.875.73 1.913 1.732 2.495 4.477 1.144 6.818a5.716 5.716 0 01-7.808 2.091L5.006 17.33a.503.503 0 01-.178-.688.503.503 0 01.685-.19l2.846 1.643a.795.795 0 00.795-1.376l-5.325-3.074a.503.503 0 01-.177-.689.503.503 0 01.685-.19l4.58 2.645a.795.795 0 00.795-1.376L4.14 10.816z",fillRule:"evenodd",clipRule:"evenodd"}))}},2948:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Crab24","data-old-api":"Crab"},e),{className:"Zi Zi--Crab"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M17.526 5.497a.75.75 0 01.657-.744 4.621 4.621 0 013.644 1.113c.893.78 1.479 1.892 1.479 2.993a3.807 3.807 0 01-3.807 3.807c-1.46 0-2.618-.65-3.298-1.671-.67-1.005-.839-2.307-.48-3.564a.75.75 0 01.959-.506l.846.283v-1.71zm1.5.729v2.022a.75.75 0 01-.987.712l-1-.334c-.02.585.13 1.119.41 1.537.389.583 1.066 1.003 2.05 1.003a2.307 2.307 0 002.307-2.307c0-.586-.331-1.309-.966-1.864a3.124 3.124 0 00-1.814-.77zM6.436 4.737a.75.75 0 01.657.744v1.725l.856-.286a.75.75 0 01.958.506c.361 1.262.192 2.57-.48 3.579-.684 1.025-1.846 1.678-3.313 1.678A3.822 3.822 0 011.29 8.86c0-1.106.589-2.222 1.486-3.006a4.641 4.641 0 013.659-1.117zM3.764 6.984c-.64.558-.973 1.286-.973 1.876a2.322 2.322 0 002.323 2.323c.99 0 1.672-.423 2.064-1.01.281-.423.434-.962.413-1.552l-1.011.337a.75.75 0 01-.987-.712V6.21a3.144 3.144 0 00-1.83.775zM16.75 18.405c0-2.014-1.864-3.906-4.5-3.906s-4.5 1.892-4.5 3.906c0 .316.114.513.28.655.19.16.518.302.976.302h6.488c.458 0 .787-.142.975-.302.167-.142.281-.34.281-.655zm1.5 0c0 1.517-1.239 2.457-2.756 2.457H9.006c-1.517 0-2.756-.94-2.756-2.457 0-2.985 2.686-5.406 6-5.406s6 2.42 6 5.406z",fillRule:"evenodd",clipRule:"evenodd"}),a.a.createElement("path",{d:"M11.25 12.75a1 1 0 11-2 0 1 1 0 012 0zm4 0a1 1 0 11-2 0 1 1 0 012 0z"}),a.a.createElement("path",{d:"M5.848 17.446a.6.6 0 01-.544.65l-1.979.18a.6.6 0 01-.107-1.196l1.978-.178a.6.6 0 01.652.544zm-.018 1.986a.6.6 0 01-.336.78l-1.444.573a.6.6 0 11-.443-1.115l1.444-.574a.6.6 0 01.779.336zm.133-4.185a.6.6 0 01-.6.6h-1.72a.6.6 0 110-1.2h1.72a.6.6 0 01.6.6zm12.802 2.199a.6.6 0 00.544.65l1.979.18a.6.6 0 00.107-1.196l-1.978-.178a.6.6 0 00-.652.544zm.018 1.986a.6.6 0 00.336.78l1.444.573a.6.6 0 10.443-1.115l-1.444-.574a.6.6 0 00-.779.336zm-.133-4.185a.6.6 0 00.6.6h1.721a.6.6 0 000-1.2h-1.72a.6.6 0 00-.6.6z",fillRule:"evenodd",clipRule:"evenodd"}))}},2949:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BadgeWriteFill24","data-old-api":"BadgeWrite"},e),{className:"Zi Zi--BadgeWrite"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 011.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 010 1.989l-1.414 2.029a1.74 1.74 0 00-.285.688l-.435 2.435a1.74 1.74 0 01-1.407 1.407l-2.435.435a1.74 1.74 0 00-.688.285l-2.03 1.414a1.74 1.74 0 01-1.989 0l-2.029-1.414a1.74 1.74 0 00-.688-.285l-2.435-.435a1.74 1.74 0 01-1.407-1.407l-.435-2.435a1.74 1.74 0 00-.285-.688l-1.414-2.03a1.74 1.74 0 010-1.989l1.414-2.029a1.74 1.74 0 00.285-.688l.435-2.435a1.74 1.74 0 011.407-1.407l2.435-.435a1.74 1.74 0 00.688-.285l2.03-1.414a1.74 1.74 0 011.989 0l2.029 1.414.688.285zM7.874 14.585l-.551 1.838a.204.204 0 00.255.254l1.836-.55c.347-.105.662-.293.918-.548l4.46-4.462a.273.273 0 000-.385l-1.524-1.524a.273.273 0 00-.386 0l-4.46 4.461c-.256.256-.444.57-.548.916zm8.581-6.317l-.723-.723a.786.786 0 00-1.111 0l-.882.88a.262.262 0 000 .371l1.465 1.465a.262.262 0 00.37 0l.881-.881a.786.786 0 000-1.112z",fillRule:"evenodd",clipRule:"evenodd"}))}},2951:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BadgeRelevantFill24","data-old-api":"LabelRelevant"},e),{className:"Zi Zi--LabelRelevant"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M15.465 4.544l2.272.406c.67.12 1.193.644 1.313 1.313l.406 2.272c.042.231.132.45.266.643l1.32 1.894a1.624 1.624 0 010 1.857l-1.32 1.893a1.626 1.626 0 00-.266.643l-.406 2.272a1.624 1.624 0 01-1.313 1.313l-2.272.406c-.231.042-.45.132-.643.267l-1.894 1.319a1.624 1.624 0 01-1.856 0l-1.894-1.32a1.624 1.624 0 00-.643-.266l-2.272-.406a1.624 1.624 0 01-1.313-1.313l-.406-2.272a1.625 1.625 0 00-.266-.643l-1.32-1.893a1.624 1.624 0 010-1.857l1.32-1.894a1.64 1.64 0 00.266-.643l.406-2.272c.12-.67.644-1.193 1.313-1.313l2.272-.406c.231-.041.45-.132.643-.266l1.894-1.32a1.624 1.624 0 011.856 0l1.894 1.32.643.266zM12 14.187c.526 0 .977-.208 1.351-.625.375-.416.562-.916.562-1.501V8.659c0-.584-.187-1.085-.562-1.501-.374-.416-.825-.625-1.35-.625-.527 0-.977.209-1.352.625a2.166 2.166 0 00-.562 1.501v3.402c0 .585.187 1.085.562 1.501.374.417.825.625 1.351.625zm3.436-3.159a.373.373 0 00-.278-.121.372.372 0 00-.277.121.402.402 0 00-.117.289v.82c0 .79-.27 1.466-.812 2.027-.54.562-1.191.843-1.952.843-.76 0-1.412-.281-1.953-.843a2.818 2.818 0 01-.81-2.027v-.82a.402.402 0 00-.118-.289.372.372 0 00-.277-.121c-.107 0-.2.04-.278.121a.401.401 0 00-.117.289v.82c0 .944.303 1.765.91 2.463.606.698 1.356 1.098 2.248 1.2v1.94c-.002.22.13.33.395.33s.397-.11.395-.33V15.8c.892-.102 1.642-.502 2.248-1.2.607-.698.91-1.52.91-2.463v-.82a.401.401 0 00-.117-.289z",fillRule:"evenodd",clipRule:"evenodd"}))}},2952:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BadgeRecommendationFill24","data-old-api":"LabelEditorRecommendation"},e),{className:"Zi Zi--LabelEditorRecommendation"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M12.868 2.899l6.597 3.8c.538.31.868.882.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 01-.868-1.5V8.199c0-.618.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 011.736 0zm-2.614 11.85a.29.29 0 01.255.148l1.239 2.207a.289.289 0 00.505 0l1.238-2.207a.29.29 0 01.255-.148l2.52.023a.29.29 0 00.253-.434l-1.284-2.192a.288.288 0 010-.292l1.284-2.192a.288.288 0 00-.253-.434l-2.52.023a.29.29 0 01-.255-.148l-1.239-2.207a.289.289 0 00-.505 0L10.51 9.103a.29.29 0 01-.255.148l-2.52-.023a.29.29 0 00-.253.434l1.284 2.192a.288.288 0 010 .292L7.48 14.338a.288.288 0 00.253.434l2.52-.023z",fillRule:"evenodd",clipRule:"evenodd"}))}},2953:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"LabelWeekly24","data-old-api":"LabelWeekly"},e),{className:"Zi Zi--LabelWeekly"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M3.85 5.266c1.093-.4 2.175-.6 3.245-.6 1.338 0 2.675.313 4.01.939a.6.6 0 01.346.543v10.309a.24.24 0 01-.342.217c-1.337-.626-2.675-.94-4.014-.94-1.186 0-2.387.246-3.603.737a.6.6 0 01-.825-.556V6.957a1.8 1.8 0 011.182-1.691zm9.045.339c1.335-.626 2.672-.939 4.01-.939 1.07 0 2.152.2 3.246.6a1.8 1.8 0 011.182 1.69v8.96a.6.6 0 01-.824.555c-1.216-.49-2.418-.736-3.604-.736-1.339 0-2.677.313-4.014.94a.24.24 0 01-.342-.218V6.148a.6.6 0 01.346-.543zm4.01 11.282c1.311 0 2.619.27 3.918.805.419.173.62.657.45 1.082a.813.813 0 01-1.065.456c-1.107-.456-2.207-.683-3.303-.683-1.08 0-2.162.22-3.254.664-.207.08-.426.12-.648.12l-2.079.002c-.195 0-.389-.04-.568-.12-1.094-.445-2.18-.666-3.261-.666-1.096 0-2.195.227-3.303.683a.813.813 0 01-1.065-.456.834.834 0 01.45-1.082c1.3-.535 2.607-.805 3.918-.805a10.007 10.007 0 013.391.604 3 3 0 001.025.18l.974.001a3 3 0 001.027-.18 10.012 10.012 0 013.393-.604z",fillRule:"evenodd",clipRule:"evenodd"}))}},2954:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"LabelDaily24","data-old-api":"LabelDaily"},e),{className:"Zi Zi--LabelDaily"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M10.037 3.2h3.926c2.377 0 3.24.248 4.109.713a4.846 4.846 0 012.016 2.016c.464.869.712 1.73.712 4.108v3.926c0 2.378-.248 3.24-.712 4.109a4.846 4.846 0 01-2.017 2.016c-.869.465-1.73.712-4.108.712h-3.926c-2.377 0-3.24-.247-4.109-.712a4.846 4.846 0 01-2.016-2.016c-.465-.87-.712-1.731-.712-4.109v-3.926c0-2.377.247-3.24.712-4.108a4.846 4.846 0 012.016-2.016c.87-.465 1.732-.713 4.109-.713zM12 17.61a1.027 1.027 0 000-2.053A3.557 3.557 0 1115.557 12a1.027 1.027 0 002.053 0A5.61 5.61 0 1012 17.61z",fillRule:"evenodd",clipRule:"evenodd"}))}},2955:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BadgeProFill24","data-old-api":"LabelProfessional"},e),{className:"Zi Zi--LabelProfessional"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 011.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 010 1.989l-1.414 2.029a1.74 1.74 0 00-.285.688l-.435 2.435a1.74 1.74 0 01-1.407 1.407l-2.435.435a1.739 1.739 0 00-.688.285l-2.03 1.414a1.74 1.74 0 01-1.989 0l-2.029-1.414a1.739 1.739 0 00-.688-.285l-2.435-.435a1.74 1.74 0 01-1.407-1.407l-.435-2.435a1.74 1.74 0 00-.285-.688l-1.414-2.03a1.74 1.74 0 010-1.989l1.414-2.029c.144-.206.24-.44.285-.688l.435-2.435a1.74 1.74 0 011.407-1.407l2.435-.435a1.74 1.74 0 00.688-.285l2.03-1.414a1.74 1.74 0 011.989 0l2.029 1.414.688.285zM11.875 8.84a4.21 4.21 0 100 8.42 4.21 4.21 0 000-8.42zm2.086 4.044l-.8.815.19 1.152c.063.386-.149.555-.487.37l-.989-.545-.988.544c-.332.183-.551.025-.486-.37l.188-1.15-.8-.816c-.268-.274-.192-.54.186-.598l1.106-.168.494-1.047c.166-.352.432-.359.601 0l.494 1.047 1.106.168c.37.057.46.319.185.598zm2.066-6.143h-2.65a.298.298 0 00-.291.217l-.817 1.504s1.75.098 2.782 1.027l1.22-2.298a.268.268 0 00.062-.164c0-.158-.137-.286-.306-.286zM11.73 8.46l-.816-1.503a.298.298 0 00-.292-.217h-2.65c-.169 0-.306.128-.306.286a.27.27 0 00.062.164l1.22 2.298c1.033-.929 2.782-1.027 2.782-1.027V8.46z"}))}},2956:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Stamp24","data-old-api":"Stamp"},e),{className:"Zi Zi--Stamp"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M12.3 3a9.3 9.3 0 110 18.6 9.3 9.3 0 010-18.6zm4.5 15H7.2v.6h9.6V18zm-9.99-5.785l-.394 1.082a.18.18 0 00.084.213l.04.02.678.247-.162.443 8.989 3.272.161-.444.678.247c.087.032.18.004.226-.063l.019-.036.393-1.082L6.81 12.215zm.25-.673l-.045.11 10.713 3.899c.326-.897-.163-1.906-1.097-2.311l-.119-.047-7.05-2.566c-.971-.354-2.02.055-2.403.915zm6.467-5.502l-1.462 4.895 2.255.821 2.026-4.69a1.5 1.5 0 10-2.82-1.026z",fillRule:"evenodd",clipRule:"evenodd"}))}},2958:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(12),i=Object.assign;function c(e){return a.a.createElement(o.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"AlarmFill24","data-old-api":"Clock"},e),{className:"Zi Zi--Clock"+(e.className?" ".concat(e.className):"")}),a.a.createElement("path",{d:"M12 22.486a9 9 0 100-18 9 9 0 000 18zM11 10.5v2.97a.75.75 0 00.374.68l2.598 1.5a.75.75 0 00.75-1.3L12.5 13.067V10.5a.75.75 0 00-1.5 0zM7.374 3.584a.75.75 0 01-.208 1.04l-3 2a.75.75 0 01-.832-1.248l3-2a.75.75 0 011.04.208zm9.002 0a.75.75 0 00.208 1.04l3 2a.75.75 0 00.832-1.248l-3-2a.75.75 0 00-1.04.208z",fillRule:"evenodd",clipRule:"evenodd"}))}},964:function(e,t,n){"use strict";n.d(t,"a",(function(){return Te}));var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(35),s=n(37),u=n(1),d=n(3),f=n.n(d),b=n(0),p=n(21),h=n(20),m=n(1537),v=n.n(m),g=n(13),O=n.n(g),j=n(867),y=n(105),w=n(33),C=n(979),x=n(1123),k=n(962),S=n(289),A=n(1279),T=n(461),I=n(926),R=n(1120),E=n(143),N=n(51),B=n(25),z=n(46),L=n(173),P=n(65);function _(e){for(var t=e.replace(/(<noscript>).*?(<\/noscript>)/g,""),n=[],r=/<\s*img.*?>/g,a=/(zh-lightbox-thumb)|(Slideshow-swiperImage)/,o=/(data-original=").*?"/,i=null;i=null===(c=r.exec(t))||void 0===c?void 0:c[0];){var c;if(a.test(i)){var l=o.exec(i);l&&n.push(l[0].split("data-original=")[1].replace(/"|\\/g,""))}}return n}var M=n(439),D=n(1340),U=n(40),F=n.n(U),V=n(68),G=n(2908);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var H=function(e){Object(o.a)(n,e);var t=q(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,r=e.onSelect,a=e.content,o=this.hintInfo,i=o&&"danger"===o.type;return Object(u.c)("div",{className:O()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:i,children:[Object(u.b)("span",{className:"SharePopover-arrow"}),Object(u.c)("div",{role:"button",tabIndex:0,className:O()("SharePopover-content",{"SharePopover-content--danger":i}),onClick:function(){i||r(a)},children:[Object(u.b)(G.b,{className:"SharePopover-quote",size:24}),Object(u.b)("span",{className:"SharePopover-main",children:"发送到百科下的摘录"}),o&&Object(u.b)("span",{className:"SharePopover-hint",children:o.text})]})]})}}]),n}(b.Component);H.propTypes={content:f.a.string,top:f.a.number,visible:f.a.bool};var W=H,K=n(91),Z=n(1596),Q=n(490);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var J=function(e){Object(o.a)(n,e);var t=Y(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={topics:[],actived:!1},e.handleChange=function(t){(0,e.props.onChange)(t),e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!1,topics:t})}))},e.deactived=function(){e.setState({actived:!1})},e.toggleActived=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!e.actived})}))},e.focus=function(){return e.topicsInput&&e.topicsInput.focus()},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.topics,r=t.actived;return Object(u.b)("div",{className:"TopicSelect",children:Object(u.b)(Q.a,{actived:r,placeholderNote:" ",max:1,inputProps:{className:"".concat("TopicSelect","-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived})})}}]),n}(b.Component);function X(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var ee=function(e){Object(o.a)(n,e);var t=$(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={topics:[]},e.handleChangeTopics=function(t){e.setState((function(e){return Object.assign(Object.assign({},e),{},{topics:t})}))},e.handleSubmit=function(){var t=X(l.a,e.state.topics,1)[0].urlToken;(0,e.props.onSubmit)(t)},e}return Object(a.a)(n,[{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,r=e.currentUser,a=e.title,o=e.url,i=e.onClose,c=e.content,l=e.visible;return Object(u.b)(K.b,{onClose:i,size:"large",title:"发送摘录到百科",className:"AbstractForm",children:l&&Object(u.c)(b.Fragment,{children:[Object(u.b)(Z.a,{type:t,author:n,member:r,title:a,url:o,content:c,theme:"scroll"}),Object(u.b)(J,{onChange:this.handleChangeTopics}),Object(u.b)("div",{className:"AbstractForm-footer",children:Object(u.b)(w.c,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit,children:"确定"})})]})})}}]),n}(b.Component);ee.propTypes={type:f.a.string.isRequired,author:f.a.object,currentUser:f.a.object,title:f.a.string.isRequired,content:f.a.string.isRequired,url:f.a.string.isRequired,visible:f.a.bool.isRequired,onClose:f.a.func.isRequired,onSubmit:f.a.func.isRequired};var te=n(188),ne=n(1251);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var ae=function(e){Object(o.a)(n,e);var t=re(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},e.handlePopoverShow=function(t,n){if(!e.hasAddBaikeSummaryPermission)return null;B.a.trackCardShow(null,{id:6115}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{top:n,content:t,popoverVisible:!0})}))},e.handlePopoverClose=function(){if(!e.hasAddBaikeSummaryPermission)return null;e.setState((function(e){return Object.assign(Object.assign({},e),{},{popoverVisible:!1})}))},e.handleAbstractModalClose=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{abstractModalVisible:!1})}))},e.handleAbstractSelected=function(t){B.a.trackEvent(null,{id:6116,action:"Send"}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:t,popoverVisible:!1,abstractModalVisible:!0})}))},e.handleCreateAbstract=function(t){var n=e.props,r=n.type,a=n.objectId,o=n.createAbstract,i=e.state.content;B.a.trackEvent(null,{id:6117,action:"Submit"}),o({type:r,token:a,topicId:t,content:i}).then((function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:i,popoverVisible:!1,abstractModalVisible:!1})}))}))},e}return Object(a.a)(n,[{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return Object(ne.a)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}},{key:"componentDidMount",value:function(){var e,t,n,r;this.removeMouseUpListener=(e=this.richContainer,t=this.handlePopoverShow,n=this.handlePopoverClose,r=function(){var r=Object(V.a)(F.a.mark((function r(a){var o,i;return F.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(e){setTimeout((function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())}),0)}));case 2:(o=r.sent)?(i=a.target===e?a.offsetY:a.offsetY+a.target.offsetTop+30,t(o,i)):n();case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),null==e||e.addEventListener("mouseup",r),function(){return null==e?void 0:e.removeEventListener("mouseup",r)})}},{key:"componentWillUnmount",value:function(){this.removeMouseUpListener()}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,r=e.content,a=e.abstractModalVisible,o=this.props,i=o.type,c=o.author,l=o.currentUser,s=o.title,d=o.url,f=o.isCopyable;return this.hasAddBaikeSummaryPermission?Object(u.c)(b.Fragment,{children:[Object(u.b)(W,{top:n,visible:t,content:r,isCopyable:this.isAuthor||f,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),Object(u.b)(ee,{type:i,onSubmit:this.handleCreateAbstract,author:c,visible:a,onClose:this.handleAbstractModalClose,currentUser:l,title:s,url:d,content:r})]}):null}}]),n}(b.Component);ae.propTypes={type:f.a.string.isRequired,author:f.a.object.isRequired,currentUser:f.a.object,title:f.a.string.isRequired,url:f.a.string.isRequired,objectId:f.a.number.isRequired,isCopyable:f.a.bool},ae.defaultProps={isCopyable:!0};var oe=Object(h.compose)(L.a,Object(p.connect)(null,{createAbstract:te.d}))(ae),ie=n(929),ce=n(86),le=n(553),se=n(41),ue=n(1103);function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var fe=function(e){Object(o.a)(n,e);var t=de(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object(ce.a)(e)),e.handleCopy=e.handleCopy.bind(Object(ce.a)(e)),e.handleTipClose=e.handleTipClose.bind(Object(ce.a)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(a.a)(n,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],a=["",""];return r=n?r.concat(a):a.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("\n");return r?a+e:e+a}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var a=this.getExtraCopyright(t,n,r).join("<br />");return"<div>".concat(r?a+e:e+a,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),a=this.getRange(r),o=a.toString().trim(),i=this.getRangeHtml(a);if(o&&!(o.length<128)){var c=o.length>=512,l=this.getCopyHtml(i,t,n,c),s=this.getCopyText(o,t,n,c),u=e.nativeEvent.clipboardData;if("object"==typeof u){if(u.setData("text/html",'<meta charset="utf-8">'+l),u.setData("text/plain",s),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=l;var f=d.firstChild;f.style.position="fixed",f.style.left="-9999px",document.body.appendChild(f),r.selectAllChildren(f),setTimeout((function(){document.body.removeChild(f),r.removeAllRanges(),r.addRange(a)}),200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),r=this.getRange(n),a=r.toString().trim(),o=this.randomRange(44,66);if(!(a.length<=o)){e.preventDefault(),e.stopPropagation();var i,c=r.getBoundingClientRect(),l=window.pageYOffset,s=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)i=u+3;else{var f=this.props.viewPort,b=c.top+l,p=c.bottom+l,h=l+f.top+52,m=l+f.bottom-52;p<h?i=h-52:p<m?i=p:(d="top",i=b>h&&b<m?b:m+52)}var v=-1!==s?s+3:c.left+(c.right-c.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:v,tipY:i,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,r=n.author,a=n.type,o=n.id,i=n.question,c=n.reshipmentSettings,l=n.relationship,s=(l=void 0===l?{}:l).isAuthor,d=l.isAuthorized,f=t.isCurrentUser,b="";if("article"===a?b="https://zhuanlan.zhihu.com/p/".concat(o):"answer"===a&&(b="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(o)),!f&&!s)switch(c){case"disallowed":this.showTip(e,Object(u.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6",children:"禁止转载"}));break;case"need_payment":if(!d){this.showTip(e,Object(u.b)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(o),children:"申请转载"}));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,b,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.data,r=e.tag,a=e.html,o=e.children,i=e.onClick,c=e.className,l=e.itemProp,s=e.style,d=e.prefix,f=e.ecommerce,b=e.shouldShowCatalog,p=e.shouldCatalogCollapse,h=e.richContentKey,m=e.isCurrentUser,v=e.isNovel,g=e.isExpanded,O=e.entityWords,j=e.isVideoAnswer,y=this.state,w=y.tipShown,C=y.tipContent,x=y.tipX,k=y.tipY,S=y.tipPosition;return Object(u.c)("div",{ref:t,onClick:i,className:c,style:s,children:[d,Object(u.b)(ue.a,{entityWords:O,richContentKey:h,sourceId:n.id,sourceType:n.type,itemProp:l,tag:r,html:a,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:f,shouldShowCatalog:b,useCatalogV2:!0,isAuthor:m,isNovel:v,isExpanded:g,shouldCatalogCollapse:p,isVideoAnswer:j}),o,Object(u.b)(le.a,{shown:w,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:x,y:k,position:S,content:C,className:"CopyrightRichText-tooltip"})]})}}]),n}(b.Component);fe.propTypes={onRef:f.a.func,viewPort:f.a.object};var be,pe,he,me,ve,ge=Object(h.compose)(Object(p.connect)((function(e,t){return{isCurrentUser:Object(se.j)(e,t.data.author)}})))(fe),Oe=n(1205),je=n(216),ye=n(49),we=n(220),Ce=n.n(we),xe=n(153),ke=n(156);function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var Ae=function(e){Object(o.a)(n,e);var t=Se(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,a=e.onClick,o=e.videoPlayCount,i=e.ipInfo;return Object(u.c)("div",{className:"ContentItem-time",children:[Object(u.b)(ye.Link,{to:t,target:"_blank",onClick:a,children:Object(u.b)("span",{"data-tooltip":Ce()(be||(be=Object(je.a)(["发布于",""])),Object(ke.toDateTimeString)(n)),"aria-label":Ce()(pe||(pe=Object(je.a)(["发布于",""])),Object(ke.toDateTimeString)(n)),children:r!==n?Ce()(he||(he=Object(je.a)(["编辑于",""])),Object(ke.toDateTimeString)(r)):Ce()(me||(me=Object(je.a)(["发布于",""])),Object(ke.toDateTimeString)(n))})}),Boolean(i)&&Ce()(ve||(ve=Object(je.a)(["・",""])),i),Boolean(o)&&Object(u.c)("span",{css:{marginTop:10,marginLeft:5},children:["· ",Object(xe.cnNiceNumber)(o),"次播放"]})]})}}]),n}(b.Component);Ae.propTypes={href:f.a.string,created:f.a.number,updated:f.a.number,videoPlayCount:f.a.number,onClick:f.a.func,ipInfo:f.a.string};var Te=Ae,Ie=function(){var e=Object(N.k)({action:"ReadFinished",elementLocation:{type:"Text",text:"阅读完成",block:{blockText:"阅读完成"}}});return Object(u.b)("span",{ref:e})},Re=n(613),Ee=n(1173),Ne=new Set([106713022,429615779,435773734,426291898,250310031,414291487,409115369,446861209,247003387,73377905,254989758,35134669,36249462,435345603,182387634,140256060,437667891,153624684,47216571,1009993776,1166287748,150785754,573667246,345093461,2051581556,423418617,24921526,427937981,119180585,442812865,175851487,285113967,807213480,415830436,125852644,399866520,269912473,736404714,630788898,217627201,32718846,233425911,1965977070,1703482555,425876259,376921084,477237451,430849009,409175983,395659900,404407636,33593650,29355234,45519587,477365726,407347055,128506044,324992390,391677046,399503822,540487048,514491508,340627548,433773279,125028091,126685323,1073936835,128655569,1782124590,431426144,198577418,449399100,2074550774,342658316,429187404,275411797,121202894,356603699,211168793,1182049284,88545788,435377412,142918293,112180819,107952366,394146559,239506554,243404812,967162682,416311991,108937963,503648342,37744326,338336040,742041726,2142758456,13098904,435935045,181579258,17350640]),Be=["children","onChange"],ze=["url","hasVideo","duration","isVideoAnswer"];function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}function Pe(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var _e=/.*?(class="link-box")/;var Me=function(e){var t=e.children,n=e.onChange,r=Object(s.default)(e,Be),a=Object(j.a)(r),o=Pe(l.a,a,2),i=o[0],c=o[1],d=Object(y.a)(n);return Object(b.useEffect)((function(){d(c)}),[d,c]),Object(u.b)("span",{ref:i,children:t})},De=function(e){Object(o.a)(n,e);var t=Le(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state=Object.assign(Object.assign({},e.getInitTruncatedState(e.props)),{},{shouldSticky:!1,offset:0,prevImgUrls:[]}),e.richContentRef=Object(b.createRef)(),e.zaRef=Object(b.createRef)(),e.truncateContent=function(){var t=e.props,n=t.isMobile,r=t.onToggleExpend,a=n?400:800,o=e.props.expandedHeight||a;(!e.content||e.content.scrollHeight<o)&&(e.setState({isTruncated:!1,isExpanded:!1}),null==r||r(!1,{trackUserAction:!1})),e.content&&e.content.scrollHeight>e.content.offsetHeight&&e.setState({contentCollapsed:!0})},e.updateStateInBrowser=function(){var t=e.props,n=t.excerpt,r=t.allowCollapseWithEmptyExcerpt,a=t.html,o=t.expanded,i=t.cover,c=t.unescapable,l=t.limit,s=t.limitWithImage,u=t.truncateHTMLOptions,d=t.truncateDisabled,f=!0,b=e.state.truncatedContent;if((n||r)&&(_e.test(n)||d))b=n;else if(!c){var p=i?s:l,h=e.truncate(a,p,u);f=h.isTruncated,b=h.content}return{isTruncated:f,isExpanded:a&&o,truncatedContent:b,previewImg:null}},e.checkOpenInAppStyle=function(e){},e.toggle=function(t){e.isCollapsed()?e.handleExpand(t):e.handleCollapse(t)},e.trackExpand=function(t){var n=e.props.expandButtonZaType,r=t?"阅读全文":"收起阅读全文";e.zaRef.current.trackEvent({eventType:"Click",action:t?"Expand":"Collapse",elementLocation:{type:n||"Card",text:r},block:r})},e.handleExpand=function(t){var n,r,a,o,i,c,l=e.props.zaIds.expand;null!=t&&t.target&&(((null===(o=a=t.target.textContent)||void 0===o?void 0:o.length)>10||t.target.classList.contains("RichContent-inner")||t.target.classList.contains("List-item"))&&(a=null));(B.a.trackEvent(e.richContentRef.current,Object.assign(Object.assign({action:"Expand"},a&&{name:a}),l&&{id:l})),Ne.has(null===(n=e.props)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.id))&&z.b.increment("RichContent.Expand.afterZALog.".concat(a||"default",".").concat(l||"default",".").concat(null===(i=e.props)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.id,".count"));var s=e.props.onExpand;if(s)s(t);else{var u=e.props,d=u.onToggleExpend,f=u.data,b=f.type,p=f.id;u.currentUser&&Object(Ee.c)("article"===b?"post":b,p,Ee.a);d&&(d(!0),e.trackExpand(!0)),e.setState({isExpanded:!0},(function(){"article"===b&&Object(I.onViewedOnce)(e.richContentRef.current,(function(){B.a.trackEvent(e.richContentRef.current,{action:"ReadFinish"})}))}))}},e.handleCollapse=function(){var t=e.props.onToggleExpend;B.a.trackEvent(e.richContentRef.current,{action:"Collapse",element:"Button"});t&&(t(!1),e.trackExpand(!1)),e.setState({isExpanded:!1},(function(){return e.checkOpenInAppStyle(!1)}))},e.handlePreview=function(t){var n,r,a=e.props,o=a.ua,i=a.isMobile,c=e.state,l=c.isExpanded,s=c.isTruncated,u=c.prevImgUrls,d=s&&!l,f=t.target;d||"IMG"!==f.tagName||!f.classList.contains("zh-lightbox-thumb")&&!f.classList.contains("Slideshow-swiperImage")||(i&&o.MQQBrowser&&null!==(n=window.browser)&&void 0!==n&&null!==(r=n.app)&&void 0!==r&&r.openPhotoBrowser?setTimeout((function(){window.browser.app.openPhotoBrowser(u,v()(u,(function(e){return e===f.dataset.original})),0)}),0):e.setState({previewImg:f}))},e.handlePositionStatusChange=function(t){var n=e.props.onPositionStatusChange;n&&(n(t),e.checkOpenInAppStyle("fixed"===t))},e.handleBodyInViewChange=function(t){var n=t;n!==e.state.shouldSticky&&(e.setState({shouldSticky:n}),n||e.checkOpenInAppStyle(!1))},e.handleTrunObserve=function(t){var n=e.props,r=n.data,a=(r.type,r.id,n.updateReadStatus,n.html),o=t[0],i=o.intersectionRatio,c=o.isIntersecting;e.truncateComputed||(i>0||c||!a)&&(setTimeout((function(){return e.truncateContent()})),e.truncateComputed=!0)},e.isCollapsed=function(){var t=e.props,n=t.after,r=t.before,a=t.unescapable,o=e.state,i=o.isExpanded,c=o.isTruncated;return!r&&!n||a?c&&!i:!i},e}return Object(a.a)(n,[{key:"abstractProps",get:function(){var e=this.props.data,t=e.id,n=e.type,r=e.author,a=e.question;return{objectId:t,type:n,author:r,title:(a=void 0===a?{}:a).title,url:e.url,isCopyable:e.isCopyable}}},{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign(Object.assign({},this.updateStateInBrowser()),{},{viewPort:{top:148,bottom:window.innerHeight-56}}),(function(){var t,n;null===(t=(n=e.props).onToggleExpend)||void 0===t||t.call(n,e.state.isExpanded,{trackUserAction:!1})})),Object(I.onViewedOnce)(this.richContentRef.current,(function(){var t=e.props,n=t.data,r=n.type,a=n.id,o=t.expanded;t.currentUser&&o&&Object(Ee.c)("article"===r?"post":r,a,Ee.a)})),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){var n=e.ua,r=e.html,a=e.isMobile;if(this.state.isExpanded&&!t.isExpanded){var o=this.richContentRef.current.getBoundingClientRect();o.top<this.props.topExcludedHeight&&(this.rect=o,this.scroll=window.pageYOffset)}a&&!this.state.isExpanded&&t.isExpanded&&n.MQQBrowser&&this.setState({prevImgUrls:_(r)})}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,a=n.bottom,o=n.height,i=this.richContentRef.current.offsetHeight,c=window.innerHeight,l=a<c?i-o:r-(c-i);window.scrollTo(0,this.scroll+l),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,a=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:a?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(R.truncateHTML)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,a=t.noCollapsed,o=t.expandText,i=void 0===o?"展开阅读全文":o,c=t.onClick,l=t.videoData,s=t.needExpandArrow,d=void 0===s||s,f=t.forceSticky,b=this.state,p=b.isExpanded,h=b.isTruncated,m=b.shouldSticky,v=b.offset;if(!p)return[r&&h&&!l&&Object(u.c)(w.c,{preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:c||this.handleExpand,children:[i,d&&Object(u.b)(x.a,{className:"ContentItem-arrowIcon",center:!0})]},"expand-button"),n&&Object(u.b)(ie.a,{children:n},"actions")];var g=(n||!a)&&Object(u.c)(ie.a,{className:"RichContent-actions",children:[n,!a&&Object(u.c)(w.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse,children:[Object(u.b)("span",{className:"RichContent-collapsedText",children:"收起"}),Object(u.b)(x.a,{className:"ContentItem-arrowIcon is-active",center:!0})]})]});return(f||m)&&g?Object(u.b)(S.a,{offset:v,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange,children:g}):g}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,r=t.excerpt,a=t.data,o=t.itemProp,i=void 0===o?"text":o,c=t.expandText,l=void 0===c?"阅读全文":c,s=t.onClick,d=t.prefix,f=t.unescapable,b=(t.isSearchContent,t.collapsedHeight),p=t.ecommerce,h=t.canAbstract,m=t.richContentKey,v=t.shouldCatalogCollapse,g=t.isNovel,j=t.entityWords,y=t.isVideoAnswer,C=this.state,S=C.truncatedContent,A=C.previewImg,I=C.viewPort,R=C.contentCollapsed,E=C.isExpanded,N=this.isCollapsed(),B=N?S||r:n,z={},L=Object(u.c)(ge,Object.assign(Object.assign(Object.assign({entityWords:j,richContentKey:m&&String([m,N]),itemProp:i,className:O()("RichContent-inner",{"RichContent-inner--collapsed":R}),style:N&&f?{maxHeight:b}:null,tag:"span",onRef:function(t){e.content=t},isExpanded:E,data:a,html:B,viewPort:I,prefix:d},N&&{onClick:s||this.handleExpand}),z),{},{ecommerce:p,shouldCatalogCollapse:v,shouldShowCatalog:Object(D.a)(a)&&(E||f&&!N),isNovel:g,isVideoAnswer:y,children:[h&&Object(u.b)(oe,Object.assign({},this.abstractProps)),!f&&N&&Object(u.c)(w.c,{preset:"plain",className:"ContentItem-more",children:[l,Object(u.b)(x.a,{className:"ContentItem-arrowIcon",center:!0})]}),A&&Object(u.b)(k.a,{img:A,onClose:function(){return e.setState({previewImg:null})}})]}),N);return f?Object(u.b)(T.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve,children:L}):L}},{key:"render",value:function(){var e=this.props,t=e.unescapable,r=e.after,a=e.before,o=e.extra,i=e.cover,c=e.hasVideo,l=e.renderCanExpandExtra,s=e.className,d=e.videoData,f=e.handleClickVideoMoreButton,b=e.duration,p=e.isVideoAnswer,h=this.state.isExpanded,m=this.isCollapsed(),v=d?Object(u.c)(u.a,{children:[Object(u.b)(Oe.a,{data:d}),Object(u.b)("p",{className:"RichContent-videoMore",onClick:f,children:"点击查看全文"})]}):this.renderText(),g=Object(u.b)(Me,{rootMargin:"-".concat(240,"px 0px"),onChange:this.handleBodyInViewChange,children:v});return Object(u.c)("div",{className:O()("RichContent",s,{"is-collapsed":m,"RichContent--unescapable":t}),ref:this.richContentRef,onClick:this.handlePreview,children:[Object(u.b)(N.e,{ref:this.zaRef}),Object(u.b)(M.c,{input:"o",action:this.toggle}),!m&&a,!t&&m&&i&&Object(u.b)(n.Cover,{url:i,hasVideo:c,onClick:this.handleExpand,duration:b,isVideoAnswer:p}),g,o||"function"==typeof l&&l(h,this.handleExpand),!m&&Object(u.c)(u.a,{children:[r,Object(u.b)(Ie,{root:this.richContentRef})]}),this.renderActions()]})}}]),n}(b.Component);De.propTypes={enableConvert:f.a.bool,unescapable:f.a.bool,expanded:f.a.bool,noCollapsed:f.a.bool,limit:f.a.number,limitWithImage:f.a.number,collapsedHeight:f.a.number,html:f.a.string,excerpt:f.a.string,allowCollapseWithEmptyExcerpt:f.a.bool,truncateDisabled:f.a.bool,before:f.a.node,after:f.a.node,prefix:f.a.node,extra:f.a.node,renderCanExpandExtra:f.a.func,topExcludedHeight:f.a.number,onPositionStatusChange:f.a.func,type:f.a.string,data:f.a.object,canAbstract:f.a.bool,cover:f.a.string,hasVideo:f.a.bool,truncateHTMLOptions:f.a.object,expandText:f.a.string,onToggleExpend:f.a.func,videoData:f.a.object,handleClickVideoMoreButton:f.a.func,zaIds:f.a.shape({expand:f.a.number}),forceSticky:f.a.bool},De.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,isVideoAnswer:!1,data:{},collapsedHeight:400,zaIds:{},forceSticky:!1},De.Cover=function(e){var t=e.url,n=e.hasVideo,r=e.duration,a=e.isVideoAnswer,o=Object(s.default)(e,ze);return Object(u.c)("div",Object.assign(Object.assign({className:O()("RichContent-cover",{"RichContent-cover--mobile":!1})},o),{},{children:[Object(u.c)("div",{className:"RichContent-cover-inner",children:[Object(u.b)(A.a,{thumbnail:Object(E.imgUrl)(t,"60w"),url:Object(E.imgUrl)(t,"400x224"),alt:"cover"}),r&&Object(u.b)("div",{className:"RichContent-cover-mask"}),r&&Object(u.b)("div",{className:"RichContent-cover-duration",children:r})]}),a&&Object(u.b)("img",{alt:"",css:{position:"absolute",left:0,top:0,width:"64px",height:"18px",objectFit:"cover"},src:"https://pic1.zhimg.com/80/v2-c19ceba4b1bea7204cb67e27f469c95b_1440w.png"}),n&&Object(u.b)(C.a,{className:"RichContent-cover-play"})]}))};t.b=Object(h.compose)(L.a,Object(p.connect)((function(e){return{ua:Object(P.m)(e),isMobile:Object(P.d)(e)}}),{updateReadStatus:Re.b}))(De)},972:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return C}));var r=n(29),a=n.n(r),o=n(24),i=n.n(o),c=n(63),l=n(0),s=n(79),u=n.n(s),d=n(190),f=n.n(d),b=n(5);function p(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var h=[["REACTION_AGREE_DISAGREE","isBlockingVote"],["REACTION_ATTENTION_QUESTION","isBlockingFollowQuestion"],["REACTION_BIND_TOPIC","isBlockingBindTopic"],["REACTION_COLLECT","isBlockingCollect"],["REACTION_COMMENT","isBlockingComment"],["REACTION_GOOD_QUESTION","isBlockingLikeQuestion"],["REACTION_GRATITUDE","isBlockingLike"],["REACTION_REWARD","isBlockingReward"],["REACTION_SHARE","isBlockingShare"],["REACTION_VOTE","isBlockingPoll"],["REACTION_FORWARD","isBlockingForward"],["REACTION_ANSWER_NEWEST_LIST","isBlockingAnswerNewestList"]],m={isBlockingVote:!1,isBlockingLike:!1,isBlockingCollect:!1,isBlockingComment:!1,isBlockingShare:!1,isBlockingFollowQuestion:!1,isBlockingLikeQuestion:!1,isBlockingBindTopic:!1,isBlockingPoll:!1,isBlockingReward:!1,isBlockingForward:!1,isBlockingAnswerNewestList:!1};function v(e){return h.map((function(t){var n=p(i.a,t,2),r=n[0],a=n[1];return e===r||e===Object(b.camelize)(r)?a:""})).filter(Boolean)[0]}function g(e){return!!(null==e?void 0:e.reactionInstruction)}function O(e,t){if(g(e))return e.reactionInstruction;if("string"==typeof t){var n=f()(e,t);if(g(n))return n.reactionInstruction}if(Array.isArray(t))for(var r=0;r<t.length;r++){var a=f()(e,t[r],null);if(g(a))return a.reactionInstruction}}var j=Object(l.createContext)({getBlockStrategies:function(){return m}}),y=function(e){var t=e.data,n=e.dataPath,r=e.passThrough;return Object(c.jsx)(j.Provider,{value:Object(l.useState)({getBlockStrategies:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dataPath,r=O(e,n),o=Object.assign({},m);return r?[Object.keys(r).reduce((function(e,t){return"HIDE"===r[t]?Object.assign(Object.assign({},e),{},a()({},v(t),!0)):e}),o),e]:[o,e]}(t,{dataPath:n}),o=p(i.a,e,2),c=o[0],l=o[1];return r?r(c,l):c}})[0],children:e.children})},w=function(){return{blockStrategies:(0,Object(l.useContext)(j).getBlockStrategies)()}};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return u()((function(n){var r=e.dataPath,a=e.passThrough;return Object(c.jsx)(y,{data:n,dataPath:r,passThrough:a,children:Object(c.jsx)(t,Object.assign({},n))})}),t)}}var x=function(e){return u()((function(t){var n=w().blockStrategies;return Object(c.jsx)(e,Object.assign(Object.assign({},t),{},{blockStrategies:n}))}),e)}}).call(this,n(223))},973:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(18),i=n(19),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),f=n(51),b=n(2385),p=n(33),h=n(25),m=n(153),v=n(439);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var O=function(e){Object(o.a)(n,e);var t=g(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).buttonRef=Object(d.createRef)(),e.handleClick=function(t){var n=e.props,r=n.zaInfos,a=r.toggleComment,o=r.getCommentAction,i=n.positionStatus,c=n.onClick,l=n.commentsShown;if(h.a.trackEvent(e.buttonRef.current,Object.assign({action:o?o(!l):"Comment",element:"Button",is_intent:!0},a&&{id:a})),c){var s="fixed"===i?"fixed":"bottom",u={commentsShown:!e.props.commentsShown,commentsAutoFocus:!(t instanceof KeyboardEvent),commentPattern:s};t instanceof KeyboardEvent&&"bottom"===s&&e.buttonRef.current.focus(),c(t,u)}},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.count,a=t.commentsShown,o=t.commentClosed;a?e="收起评论":e=r&&!o?"".concat(Object(m.formatNumber)(r)," 条评论"):"添加评论";return Object(l.c)(d.Fragment,{children:[Object(l.b)(v.c,{input:"c",action:this.handleClick}),Object(l.b)(f.a,{as:p.c,zaAction:a?"Collapse":"Expand",zaText:a?"收起评论":"展开评论",zaBlock:a?"收起评论":"展开评论",zaType:"Button",onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:b.a,label:e})]})}}]),n}(d.Component);O.propTypes={commentsShown:u.a.bool,count:u.a.number,zaInfos:u.a.shape({id:u.a.number,getCommentAction:u.a.func}),onInstance:u.a.func},O.defaultProps={zaInfos:{},onInstance:function(){return null}};t.a=O},988:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(51),o=n(79),i=n.n(o),c=function(e){return function(t){return i()((function(n){var o=n.zaInfos,i=void 0===o?{}:o;return Object(r.b)(a.b,Object.assign(Object.assign({},"function"==typeof e?e(n):e),{},{children:Object(r.b)(a.f,Object.assign(Object.assign({zaType:"Card"},void 0!==i.index&&{view:{elementLocation:{card:{index:Number(i.index)}}}}),{},{children:Object(r.b)(t,Object.assign({},n))}))}))}),t)}}}}]);
//# sourceMappingURL=main.shared_3b14b6a6793bcf6a28a30e974ba641b4cb31d3af.be4d75e8e6672cbfa875.js.map